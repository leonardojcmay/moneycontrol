/*!
 * Bootstrap v3.2.0 (http://getbootstrap.com)
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 */
if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(a){"use strict";function b(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]};return!1}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one("bsTransitionEnd",function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b(),a.support.transition&&(a.event.special.bsTransitionEnd={bindType:a.support.transition.end,delegateType:a.support.transition.end,handle:function(b){return a(b.target).is(this)?b.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var c=a(this),e=c.data("bs.alert");e||c.data("bs.alert",e=new d(this)),"string"==typeof b&&e[b].call(c)})}var c='[data-dismiss="alert"]',d=function(b){a(b).on("click",c,this.close)};d.VERSION="3.2.0",d.prototype.close=function(b){function c(){f.detach().trigger("closed.bs.alert").remove()}var d=a(this),e=d.attr("data-target");e||(e=d.attr("href"),e=e&&e.replace(/.*(?=#[^\s]*$)/,""));var f=a(e);b&&b.preventDefault(),f.length||(f=d.hasClass("alert")?d:d.parent()),f.trigger(b=a.Event("close.bs.alert")),b.isDefaultPrevented()||(f.removeClass("in"),a.support.transition&&f.hasClass("fade")?f.one("bsTransitionEnd",c).emulateTransitionEnd(150):c())};var e=a.fn.alert;a.fn.alert=b,a.fn.alert.Constructor=d,a.fn.alert.noConflict=function(){return a.fn.alert=e,this},a(document).on("click.bs.alert.data-api",c,d.prototype.close)}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.button"),f="object"==typeof b&&b;e||d.data("bs.button",e=new c(this,f)),"toggle"==b?e.toggle():b&&e.setState(b)})}var c=function(b,d){this.$element=a(b),this.options=a.extend({},c.DEFAULTS,d),this.isLoading=!1};c.VERSION="3.2.0",c.DEFAULTS={loadingText:"loading..."},c.prototype.setState=function(b){var c="disabled",d=this.$element,e=d.is("input")?"val":"html",f=d.data();b+="Text",null==f.resetText&&d.data("resetText",d[e]()),d[e](null==f[b]?this.options[b]:f[b]),setTimeout(a.proxy(function(){"loadingText"==b?(this.isLoading=!0,d.addClass(c).attr(c,c)):this.isLoading&&(this.isLoading=!1,d.removeClass(c).removeAttr(c))},this),0)},c.prototype.toggle=function(){var a=!0,b=this.$element.closest('[data-toggle="buttons"]');if(b.length){var c=this.$element.find("input");"radio"==c.prop("type")&&(c.prop("checked")&&this.$element.hasClass("active")?a=!1:b.find(".active").removeClass("active")),a&&c.prop("checked",!this.$element.hasClass("active")).trigger("change")}a&&this.$element.toggleClass("active")};var d=a.fn.button;a.fn.button=b,a.fn.button.Constructor=c,a.fn.button.noConflict=function(){return a.fn.button=d,this},a(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(c){var d=a(c.target);d.hasClass("btn")||(d=d.closest(".btn")),b.call(d,"toggle"),c.preventDefault()})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.carousel"),f=a.extend({},c.DEFAULTS,d.data(),"object"==typeof b&&b),g="string"==typeof b?b:f.slide;e||d.data("bs.carousel",e=new c(this,f)),"number"==typeof b?e.to(b):g?e[g]():f.interval&&e.pause().cycle()})}var c=function(b,c){this.$element=a(b).on("keydown.bs.carousel",a.proxy(this.keydown,this)),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter.bs.carousel",a.proxy(this.pause,this)).on("mouseleave.bs.carousel",a.proxy(this.cycle,this))};c.VERSION="3.2.0",c.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},c.prototype.keydown=function(a){switch(a.which){case 37:this.prev();break;case 39:this.next();break;default:return}a.preventDefault()},c.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},c.prototype.getItemIndex=function(a){return this.$items=a.parent().children(".item"),this.$items.index(a||this.$active)},c.prototype.to=function(b){var c=this,d=this.getItemIndex(this.$active=this.$element.find(".item.active"));return b>this.$items.length-1||0>b?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){c.to(b)}):d==b?this.pause().cycle():this.slide(b>d?"next":"prev",a(this.$items[b]))},c.prototype.pause=function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},c.prototype.next=function(){return this.sliding?void 0:this.slide("next")},c.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},c.prototype.slide=function(b,c){var d=this.$element.find(".item.active"),e=c||d[b](),f=this.interval,g="next"==b?"left":"right",h="next"==b?"first":"last",i=this;if(!e.length){if(!this.options.wrap)return;e=this.$element.find(".item")[h]()}if(e.hasClass("active"))return this.sliding=!1;var j=e[0],k=a.Event("slide.bs.carousel",{relatedTarget:j,direction:g});if(this.$element.trigger(k),!k.isDefaultPrevented()){if(this.sliding=!0,f&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var l=a(this.$indicators.children()[this.getItemIndex(e)]);l&&l.addClass("active")}var m=a.Event("slid.bs.carousel",{relatedTarget:j,direction:g});return a.support.transition&&this.$element.hasClass("slide")?(e.addClass(b),e[0].offsetWidth,d.addClass(g),e.addClass(g),d.one("bsTransitionEnd",function(){e.removeClass([b,g].join(" ")).addClass("active"),d.removeClass(["active",g].join(" ")),i.sliding=!1,setTimeout(function(){i.$element.trigger(m)},0)}).emulateTransitionEnd(1e3*d.css("transition-duration").slice(0,-1))):(d.removeClass("active"),e.addClass("active"),this.sliding=!1,this.$element.trigger(m)),f&&this.cycle(),this}};var d=a.fn.carousel;a.fn.carousel=b,a.fn.carousel.Constructor=c,a.fn.carousel.noConflict=function(){return a.fn.carousel=d,this},a(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(c){var d,e=a(this),f=a(e.attr("data-target")||(d=e.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""));if(f.hasClass("carousel")){var g=a.extend({},f.data(),e.data()),h=e.attr("data-slide-to");h&&(g.interval=!1),b.call(f,g),h&&f.data("bs.carousel").to(h),c.preventDefault()}}),a(window).on("load",function(){a('[data-ride="carousel"]').each(function(){var c=a(this);b.call(c,c.data())})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.collapse"),f=a.extend({},c.DEFAULTS,d.data(),"object"==typeof b&&b);!e&&f.toggle&&"show"==b&&(b=!b),e||d.data("bs.collapse",e=new c(this,f)),"string"==typeof b&&e[b]()})}var c=function(b,d){this.$element=a(b),this.options=a.extend({},c.DEFAULTS,d),this.transitioning=null,this.options.parent&&(this.$parent=a(this.options.parent)),this.options.toggle&&this.toggle()};c.VERSION="3.2.0",c.DEFAULTS={toggle:!0},c.prototype.dimension=function(){var a=this.$element.hasClass("width");return a?"width":"height"},c.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var c=a.Event("show.bs.collapse");if(this.$element.trigger(c),!c.isDefaultPrevented()){var d=this.$parent&&this.$parent.find("> .panel > .in");if(d&&d.length){var e=d.data("bs.collapse");if(e&&e.transitioning)return;b.call(d,"hide"),e||d.data("bs.collapse",null)}var f=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[f](0),this.transitioning=1;var g=function(){this.$element.removeClass("collapsing").addClass("collapse in")[f](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return g.call(this);var h=a.camelCase(["scroll",f].join("-"));this.$element.one("bsTransitionEnd",a.proxy(g,this)).emulateTransitionEnd(350)[f](this.$element[0][h])}}},c.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.dimension();this.$element[c](this.$element[c]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var d=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return a.support.transition?void this.$element[c](0).one("bsTransitionEnd",a.proxy(d,this)).emulateTransitionEnd(350):d.call(this)}}},c.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var d=a.fn.collapse;a.fn.collapse=b,a.fn.collapse.Constructor=c,a.fn.collapse.noConflict=function(){return a.fn.collapse=d,this},a(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(c){var d,e=a(this),f=e.attr("data-target")||c.preventDefault()||(d=e.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""),g=a(f),h=g.data("bs.collapse"),i=h?"toggle":e.data(),j=e.attr("data-parent"),k=j&&a(j);h&&h.transitioning||(k&&k.find('[data-toggle="collapse"][data-parent="'+j+'"]').not(e).addClass("collapsed"),e[g.hasClass("in")?"addClass":"removeClass"]("collapsed")),b.call(g,i)})}(jQuery),+function(a){"use strict";function b(b){b&&3===b.which||(a(e).remove(),a(f).each(function(){var d=c(a(this)),e={relatedTarget:this};d.hasClass("open")&&(d.trigger(b=a.Event("hide.bs.dropdown",e)),b.isDefaultPrevented()||d.removeClass("open").trigger("hidden.bs.dropdown",e))}))}function c(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}function d(b){return this.each(function(){var c=a(this),d=c.data("bs.dropdown");d||c.data("bs.dropdown",d=new g(this)),"string"==typeof b&&d[b].call(c)})}var e=".dropdown-backdrop",f='[data-toggle="dropdown"]',g=function(b){a(b).on("click.bs.dropdown",this.toggle)};g.VERSION="3.2.0",g.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var f=c(e),g=f.hasClass("open");if(b(),!g){"ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a('<div class="dropdown-backdrop"/>').insertAfter(a(this)).on("click",b);var h={relatedTarget:this};if(f.trigger(d=a.Event("show.bs.dropdown",h)),d.isDefaultPrevented())return;e.trigger("focus"),f.toggleClass("open").trigger("shown.bs.dropdown",h)}return!1}},g.prototype.keydown=function(b){if(/(38|40|27)/.test(b.keyCode)){var d=a(this);if(b.preventDefault(),b.stopPropagation(),!d.is(".disabled, :disabled")){var e=c(d),g=e.hasClass("open");if(!g||g&&27==b.keyCode)return 27==b.which&&e.find(f).trigger("focus"),d.trigger("click");var h=" li:not(.divider):visible a",i=e.find('[role="menu"]'+h+', [role="listbox"]'+h);if(i.length){var j=i.index(i.filter(":focus"));38==b.keyCode&&j>0&&j--,40==b.keyCode&&j<i.length-1&&j++,~j||(j=0),i.eq(j).trigger("focus")}}}};var h=a.fn.dropdown;a.fn.dropdown=d,a.fn.dropdown.Constructor=g,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=h,this},a(document).on("click.bs.dropdown.data-api",b).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",f,g.prototype.toggle).on("keydown.bs.dropdown.data-api",f+', [role="menu"], [role="listbox"]',g.prototype.keydown)}(jQuery),+function(a){"use strict";function b(b,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},c.DEFAULTS,e.data(),"object"==typeof b&&b);f||e.data("bs.modal",f=new c(this,g)),"string"==typeof b?f[b](d):g.show&&f.show(d)})}var c=function(b,c){this.options=c,this.$body=a(document.body),this.$element=a(b),this.$backdrop=this.isShown=null,this.scrollbarWidth=0,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};c.VERSION="3.2.0",c.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},c.prototype.toggle=function(a){return this.isShown?this.hide():this.show(a)},c.prototype.show=function(b){var c=this,d=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(d),this.isShown||d.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.$body.addClass("modal-open"),this.setScrollbar(),this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.backdrop(function(){var d=a.support.transition&&c.$element.hasClass("fade");c.$element.parent().length||c.$element.appendTo(c.$body),c.$element.show().scrollTop(0),d&&c.$element[0].offsetWidth,c.$element.addClass("in").attr("aria-hidden",!1),c.enforceFocus();var e=a.Event("shown.bs.modal",{relatedTarget:b});d?c.$element.find(".modal-dialog").one("bsTransitionEnd",function(){c.$element.trigger("focus").trigger(e)}).emulateTransitionEnd(300):c.$element.trigger("focus").trigger(e)}))},c.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.$body.removeClass("modal-open"),this.resetScrollbar(),this.escape(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",a.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},c.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.trigger("focus")},this))},c.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},c.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.$element.trigger("hidden.bs.modal")})},c.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},c.prototype.backdrop=function(b){var c=this,d=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var e=a.support.transition&&d;if(this.$backdrop=a('<div class="modal-backdrop '+d+'" />').appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",a.proxy(function(a){a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),e&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;e?this.$backdrop.one("bsTransitionEnd",b).emulateTransitionEnd(150):b()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var f=function(){c.removeBackdrop(),b&&b()};a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",f).emulateTransitionEnd(150):f()}else b&&b()},c.prototype.checkScrollbar=function(){document.body.clientWidth>=window.innerWidth||(this.scrollbarWidth=this.scrollbarWidth||this.measureScrollbar())},c.prototype.setScrollbar=function(){var a=parseInt(this.$body.css("padding-right")||0,10);this.scrollbarWidth&&this.$body.css("padding-right",a+this.scrollbarWidth)},c.prototype.resetScrollbar=function(){this.$body.css("padding-right","")},c.prototype.measureScrollbar=function(){var a=document.createElement("div");a.className="modal-scrollbar-measure",this.$body.append(a);var b=a.offsetWidth-a.clientWidth;return this.$body[0].removeChild(a),b};var d=a.fn.modal;a.fn.modal=b,a.fn.modal.Constructor=c,a.fn.modal.noConflict=function(){return a.fn.modal=d,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(c){var d=a(this),e=d.attr("href"),f=a(d.attr("data-target")||e&&e.replace(/.*(?=#[^\s]+$)/,"")),g=f.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(e)&&e},f.data(),d.data());d.is("a")&&c.preventDefault(),f.one("show.bs.modal",function(a){a.isDefaultPrevented()||f.one("hidden.bs.modal",function(){d.is(":visible")&&d.trigger("focus")})}),b.call(f,g,this)})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tooltip"),f="object"==typeof b&&b;(e||"destroy"!=b)&&(e||d.data("bs.tooltip",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",a,b)};c.VERSION="3.2.0",c.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},c.prototype.init=function(b,c,d){this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.$viewport=this.options.viewport&&a(this.options.viewport.selector||this.options.viewport);for(var e=this.options.trigger.split(" "),f=e.length;f--;){var g=e[f];if("click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=g){var h="hover"==g?"mouseenter":"focusin",i="hover"==g?"mouseleave":"focusout";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},c.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},c.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?void(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)):c.show()},c.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?void(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide)):c.hide()},c.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(b);var c=a.contains(document.documentElement,this.$element[0]);if(b.isDefaultPrevented()||!c)return;var d=this,e=this.tip(),f=this.getUID(this.type);this.setContent(),e.attr("id",f),this.$element.attr("aria-describedby",f),this.options.animation&&e.addClass("fade");var g="function"==typeof this.options.placement?this.options.placement.call(this,e[0],this.$element[0]):this.options.placement,h=/\s?auto?\s?/i,i=h.test(g);i&&(g=g.replace(h,"")||"top"),e.detach().css({top:0,left:0,display:"block"}).addClass(g).data("bs."+this.type,this),this.options.container?e.appendTo(this.options.container):e.insertAfter(this.$element);var j=this.getPosition(),k=e[0].offsetWidth,l=e[0].offsetHeight;if(i){var m=g,n=this.$element.parent(),o=this.getPosition(n);g="bottom"==g&&j.top+j.height+l-o.scroll>o.height?"top":"top"==g&&j.top-o.scroll-l<0?"bottom":"right"==g&&j.right+k>o.width?"left":"left"==g&&j.left-k<o.left?"right":g,e.removeClass(m).addClass(g)}var p=this.getCalculatedOffset(g,j,k,l);this.applyPlacement(p,g);var q=function(){d.$element.trigger("shown.bs."+d.type),d.hoverState=null};a.support.transition&&this.$tip.hasClass("fade")?e.one("bsTransitionEnd",q).emulateTransitionEnd(150):q()}},c.prototype.applyPlacement=function(b,c){var d=this.tip(),e=d[0].offsetWidth,f=d[0].offsetHeight,g=parseInt(d.css("margin-top"),10),h=parseInt(d.css("margin-left"),10);isNaN(g)&&(g=0),isNaN(h)&&(h=0),b.top=b.top+g,b.left=b.left+h,a.offset.setOffset(d[0],a.extend({using:function(a){d.css({top:Math.round(a.top),left:Math.round(a.left)})}},b),0),d.addClass("in");var i=d[0].offsetWidth,j=d[0].offsetHeight;"top"==c&&j!=f&&(b.top=b.top+f-j);var k=this.getViewportAdjustedDelta(c,b,i,j);k.left?b.left+=k.left:b.top+=k.top;var l=k.left?2*k.left-e+i:2*k.top-f+j,m=k.left?"left":"top",n=k.left?"offsetWidth":"offsetHeight";d.offset(b),this.replaceArrow(l,d[0][n],m)},c.prototype.replaceArrow=function(a,b,c){this.arrow().css(c,a?50*(1-a/b)+"%":"")},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},c.prototype.hide=function(){function b(){"in"!=c.hoverState&&d.detach(),c.$element.trigger("hidden.bs."+c.type)}var c=this,d=this.tip(),e=a.Event("hide.bs."+this.type);return this.$element.removeAttr("aria-describedby"),this.$element.trigger(e),e.isDefaultPrevented()?void 0:(d.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?d.one("bsTransitionEnd",b).emulateTransitionEnd(150):b(),this.hoverState=null,this)},c.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},c.prototype.hasContent=function(){return this.getTitle()},c.prototype.getPosition=function(b){b=b||this.$element;var c=b[0],d="BODY"==c.tagName;return a.extend({},"function"==typeof c.getBoundingClientRect?c.getBoundingClientRect():null,{scroll:d?document.documentElement.scrollTop||document.body.scrollTop:b.scrollTop(),width:d?a(window).width():b.outerWidth(),height:d?a(window).height():b.outerHeight()},d?{top:0,left:0}:b.offset())},c.prototype.getCalculatedOffset=function(a,b,c,d){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}},c.prototype.getViewportAdjustedDelta=function(a,b,c,d){var e={top:0,left:0};if(!this.$viewport)return e;var f=this.options.viewport&&this.options.viewport.padding||0,g=this.getPosition(this.$viewport);if(/right|left/.test(a)){var h=b.top-f-g.scroll,i=b.top+f-g.scroll+d;h<g.top?e.top=g.top-h:i>g.top+g.height&&(e.top=g.top+g.height-i)}else{var j=b.left-f,k=b.left+f+c;j<g.left?e.left=g.left-j:k>g.width&&(e.left=g.left+g.width-k)}return e},c.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},c.prototype.getUID=function(a){do a+=~~(1e6*Math.random());while(document.getElementById(a));return a},c.prototype.tip=function(){return this.$tip=this.$tip||a(this.options.template)},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},c.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},c.prototype.enable=function(){this.enabled=!0},c.prototype.disable=function(){this.enabled=!1},c.prototype.toggleEnabled=function(){this.enabled=!this.enabled},c.prototype.toggle=function(b){var c=this;b&&(c=a(b.currentTarget).data("bs."+this.type),c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c))),c.tip().hasClass("in")?c.leave(c):c.enter(c)},c.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var d=a.fn.tooltip;a.fn.tooltip=b,a.fn.tooltip.Constructor=c,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=d,this}}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.popover"),f="object"==typeof b&&b;(e||"destroy"!=b)&&(e||d.data("bs.popover",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");c.VERSION="3.2.0",c.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),c.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),c.prototype.constructor=c,c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content").empty()[this.options.html?"string"==typeof c?"html":"append":"text"](c),a.removeClass("fade top bottom left right in"),a.find(".popover-title").html()||a.find(".popover-title").hide()},c.prototype.hasContent=function(){return this.getTitle()||this.getContent()},c.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},c.prototype.tip=function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip};var d=a.fn.popover;a.fn.popover=b,a.fn.popover.Constructor=c,a.fn.popover.noConflict=function(){return a.fn.popover=d,this}}(jQuery),+function(a){"use strict";function b(c,d){var e=a.proxy(this.process,this);this.$body=a("body"),this.$scrollElement=a(a(c).is("body")?window:c),this.options=a.extend({},b.DEFAULTS,d),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",e),this.refresh(),this.process()}function c(c){return this.each(function(){var d=a(this),e=d.data("bs.scrollspy"),f="object"==typeof c&&c;e||d.data("bs.scrollspy",e=new b(this,f)),"string"==typeof c&&e[c]()})}b.VERSION="3.2.0",b.DEFAULTS={offset:10},b.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},b.prototype.refresh=function(){var b="offset",c=0;a.isWindow(this.$scrollElement[0])||(b="position",c=this.$scrollElement.scrollTop()),this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight();var d=this;this.$body.find(this.selector).map(function(){var d=a(this),e=d.data("target")||d.attr("href"),f=/^#./.test(e)&&a(e);return f&&f.length&&f.is(":visible")&&[[f[b]().top+c,e]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){d.offsets.push(this[0]),d.targets.push(this[1])})},b.prototype.process=function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.getScrollHeight(),d=this.options.offset+c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(this.scrollHeight!=c&&this.refresh(),b>=d)return g!=(a=f[f.length-1])&&this.activate(a);if(g&&b<=e[0])return g!=(a=f[0])&&this.activate(a);for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(!e[a+1]||b<=e[a+1])&&this.activate(f[a])},b.prototype.activate=function(b){this.activeTarget=b,a(this.selector).parentsUntil(this.options.target,".active").removeClass("active");var c=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',d=a(c).parents("li").addClass("active");d.parent(".dropdown-menu").length&&(d=d.closest("li.dropdown").addClass("active")),d.trigger("activate.bs.scrollspy")};var d=a.fn.scrollspy;a.fn.scrollspy=c,a.fn.scrollspy.Constructor=b,a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=d,this},a(window).on("load.bs.scrollspy.data-api",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);c.call(b,b.data())})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tab");e||d.data("bs.tab",e=new c(this)),"string"==typeof b&&e[b]()})}var c=function(b){this.element=a(b)};c.VERSION="3.2.0",c.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.data("target");if(d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var e=c.find(".active:last a")[0],f=a.Event("show.bs.tab",{relatedTarget:e});if(b.trigger(f),!f.isDefaultPrevented()){var g=a(d);this.activate(b.closest("li"),c),this.activate(g,g.parent(),function(){b.trigger({type:"shown.bs.tab",relatedTarget:e})})}}},c.prototype.activate=function(b,c,d){function e(){f.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),b.addClass("active"),g?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active"),d&&d()}var f=c.find("> .active"),g=d&&a.support.transition&&f.hasClass("fade");g?f.one("bsTransitionEnd",e).emulateTransitionEnd(150):e(),f.removeClass("in")};var d=a.fn.tab;a.fn.tab=b,a.fn.tab.Constructor=c,a.fn.tab.noConflict=function(){return a.fn.tab=d,this},a(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(c){c.preventDefault(),b.call(a(this),"show")})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.affix"),f="object"==typeof b&&b;e||d.data("bs.affix",e=new c(this,f)),"string"==typeof b&&e[b]()})}var c=function(b,d){this.options=a.extend({},c.DEFAULTS,d),this.$target=a(this.options.target).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this)),this.$element=a(b),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};c.VERSION="3.2.0",c.RESET="affix affix-top affix-bottom",c.DEFAULTS={offset:0,target:window},c.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(c.RESET).addClass("affix");var a=this.$target.scrollTop(),b=this.$element.offset();return this.pinnedOffset=b.top-a},c.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)},c.prototype.checkPosition=function(){if(this.$element.is(":visible")){var b=a(document).height(),d=this.$target.scrollTop(),e=this.$element.offset(),f=this.options.offset,g=f.top,h=f.bottom;"object"!=typeof f&&(h=g=f),"function"==typeof g&&(g=f.top(this.$element)),"function"==typeof h&&(h=f.bottom(this.$element));var i=null!=this.unpin&&d+this.unpin<=e.top?!1:null!=h&&e.top+this.$element.height()>=b-h?"bottom":null!=g&&g>=d?"top":!1;if(this.affixed!==i){null!=this.unpin&&this.$element.css("top","");var j="affix"+(i?"-"+i:""),k=a.Event(j+".bs.affix");this.$element.trigger(k),k.isDefaultPrevented()||(this.affixed=i,this.unpin="bottom"==i?this.getPinnedOffset():null,this.$element.removeClass(c.RESET).addClass(j).trigger(a.Event(j.replace("affix","affixed"))),"bottom"==i&&this.$element.offset({top:b-this.$element.height()-h}))}}};var d=a.fn.affix;a.fn.affix=b,a.fn.affix.Constructor=c,a.fn.affix.noConflict=function(){return a.fn.affix=d,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var c=a(this),d=c.data();d.offset=d.offset||{},d.offsetBottom&&(d.offset.bottom=d.offsetBottom),d.offsetTop&&(d.offset.top=d.offsetTop),b.call(c,d)})})}(jQuery);/*!
 * enquire.js v2.1.2 - Awesome Media Queries in JavaScript
 * Copyright (c) 2014 Nick Williams - http://wicky.nillia.ms/enquire.js
 * License: MIT (http://www.opensource.org/licenses/mit-license.php)
 */

!function(a,b,c){var d=window.matchMedia;"undefined"!=typeof module&&module.exports?module.exports=c(d):"function"==typeof define&&define.amd?define(function(){return b[a]=c(d)}):b[a]=c(d)}("enquire",this,function(a){"use strict";function b(a,b){var c,d=0,e=a.length;for(d;e>d&&(c=b(a[d],d),c!==!1);d++);}function c(a){return"[object Array]"===Object.prototype.toString.apply(a)}function d(a){return"function"==typeof a}function e(a){this.options=a,!a.deferSetup&&this.setup()}function f(b,c){this.query=b,this.isUnconditional=c,this.handlers=[],this.mql=a(b);var d=this;this.listener=function(a){d.mql=a,d.assess()},this.mql.addListener(this.listener)}function g(){if(!a)throw new Error("matchMedia not present, legacy browsers require a polyfill");this.queries={},this.browserIsIncapable=!a("only all").matches}return e.prototype={setup:function(){this.options.setup&&this.options.setup(),this.initialised=!0},on:function(){!this.initialised&&this.setup(),this.options.match&&this.options.match()},off:function(){this.options.unmatch&&this.options.unmatch()},destroy:function(){this.options.destroy?this.options.destroy():this.off()},equals:function(a){return this.options===a||this.options.match===a}},f.prototype={addHandler:function(a){var b=new e(a);this.handlers.push(b),this.matches()&&b.on()},removeHandler:function(a){var c=this.handlers;b(c,function(b,d){return b.equals(a)?(b.destroy(),!c.splice(d,1)):void 0})},matches:function(){return this.mql.matches||this.isUnconditional},clear:function(){b(this.handlers,function(a){a.destroy()}),this.mql.removeListener(this.listener),this.handlers.length=0},assess:function(){var a=this.matches()?"on":"off";b(this.handlers,function(b){b[a]()})}},g.prototype={register:function(a,e,g){var h=this.queries,i=g&&this.browserIsIncapable;return h[a]||(h[a]=new f(a,i)),d(e)&&(e={match:e}),c(e)||(e=[e]),b(e,function(b){d(b)&&(b={match:b}),h[a].addHandler(b)}),this},unregister:function(a,b){var c=this.queries[a];return c&&(b?c.removeHandler(b):(c.clear(),delete this.queries[a])),this}},new g});/* MODIFIED */
; (function (window, document) {
	'use strict';

	var nextTick, addEvent;
	nextTick = window.requestAnimationFrame ||
		window.mozRequestAnimationFrame ||
		window.webkitRequestAnimationFrame ||
		function (callback) {
			window.setTimeout(callback, 1000 / 60);
		};

	addEvent = (function () {
		if (document.addEventListener) {
			return function addStandardEventListener(el, eventName, fn) {
				return el.addEventListener(eventName, fn, false);
			};
		}
		else {
			return function addIEEventListener(el, eventName, fn) {
				return el.attachEvent('on' + eventName, fn);
			};
		}
	})();

	function Imager(elements, opts) {
		var self = this, doc = document;
		opts = opts || {};

		this.elements = elements || '.js-responsive-image';
		this.className = opts.className || 'js-responsive-image-replaced';
		this.onResize = opts.hasOwnProperty('onResize') ? opts.onResize : true;
		this.onImagesReplaced = opts.onImagesReplaced || function () { };

		this.eles = $(elements);
		nextTick(function () { self.init(); });
	}

	Imager.prototype.init = function () {
		this.checkImagesNeedReplacing(this.eles);
		if (this.onResize) { this.registerResizeEvent(); }
	};

	Imager.prototype.checkImagesNeedReplacing = function (images) {
		var self = this;

		if (!this.isResizing) {
			this.isResizing = true;

			images.each(function () { self.replaceImagesBasedOnScreenDimensions(this); });

			this.isResizing = false;
			this.onImagesReplaced(images);
		}
	};

	Imager.prototype.replaceImagesBasedOnScreenDimensions = function (image) {
		var src, availableWidths = [], srcARRAY, cwidth, imageClasses;

		if ($(image).attr("data-media") != undefined) {
			var eMedia = $(image).attr("data-media")
			$(image).removeAttr("data-media")
			eMedia = $.parseJSON(eMedia)
			$.each(eMedia, function (key, value) {
				availableWidths.push(parseInt(key));
			});
			$(image).data("width", availableWidths);
			$(image).data("media", eMedia);
		}

		srcARRAY = $(image).data("media");
		cwidth = Imager.getClosestValue($(image).parent().width(), $.extend([], $(image).data("width")));
		imageClasses = image.className;
		if (image.src == srcARRAY[cwidth]) { return; }
		if (imageClasses.match(/lz-img/)) {
			if (imageClasses.match(/loaded/))
				image.src = srcARRAY[cwidth];
			else {
				$(image).attr('data-src', srcARRAY[cwidth]);
				$(window).trigger('scroll');
			}
		} else {
			image.src = srcARRAY[cwidth];
		}

	};

	Imager.getClosestValue = function getClosestValue(baseValue, candidates) {
		if (baseValue >= candidates[0]) {
			if (candidates.length > 1) {
				candidates.shift()
				getClosestValue(baseValue, candidates)
			} else {
				return candidates[0];
			}
		}
		return candidates[0];
	}

	Imager.prototype.registerResizeEvent = function () {
		var self = this;
		addEvent(window, 'resize', function () {
			self.checkImagesNeedReplacing(self.eles);
		});
	};

	if (typeof module === 'object' && typeof module.exports === 'object') {
		module.exports = exports = Imager;
	} else if (typeof define === 'function' && define.amd) {
		define(function () { return Imager; });
	} else if (typeof window === 'object') {
		window.Imager = Imager;
	}

}(window, document));

new Imager('.js-responsive-image');/*!
 * jQuery blockUI plugin
 * Version 2.66.0-2013.10.09
 * Requires jQuery v1.7 or later
 *
 * Examples at: http://malsup.com/jquery/block/
 * Copyright (c) 2007-2013 M. Alsup
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 * Thanks to Amir-Hossein Sobhi for some excellent contributions!
 */

;(function() {
/*jshint eqeqeq:false curly:false latedef:false */
"use strict";

	function setup($) {
		$.fn._fadeIn = $.fn.fadeIn;

		var noOp = $.noop || function() {};

		// this bit is to ensure we don't call setExpression when we shouldn't (with extra muscle to handle
		// confusing userAgent strings on Vista)
		var msie = /MSIE/.test(navigator.userAgent);
		var ie6  = /MSIE 6.0/.test(navigator.userAgent) && ! /MSIE 8.0/.test(navigator.userAgent);
		var mode = document.documentMode || 0;
		var setExpr = $.isFunction( document.createElement('div').style.setExpression );

		// global $ methods for blocking/unblocking the entire page
		$.blockUI   = function(opts) { install(window, opts); };
		$.unblockUI = function(opts) { remove(window, opts); };

		// convenience method for quick growl-like notifications  (http://www.google.com/search?q=growl)
		$.growlUI = function(title, message, timeout, onClose) {
			var $m = $('<div class="growlUI"></div>');
			if (title) $m.append('<h1>'+title+'</h1>');
			if (message) $m.append('<h2>'+message+'</h2>');
			if (timeout === undefined) timeout = 3000;

			// Added by konapun: Set timeout to 30 seconds if this growl is moused over, like normal toast notifications
			var callBlock = function(opts) {
				opts = opts || {};

				$.blockUI({
					message: $m,
					fadeIn : typeof opts.fadeIn  !== 'undefined' ? opts.fadeIn  : 700,
					fadeOut: typeof opts.fadeOut !== 'undefined' ? opts.fadeOut : 1000,
					timeout: typeof opts.timeout !== 'undefined' ? opts.timeout : timeout,
					centerY: false,
					showOverlay: false,
					onUnblock: onClose,
					css: $.blockUI.defaults.growlCSS
				});
			};

			callBlock();
			var nonmousedOpacity = $m.css('opacity');
			$m.mouseover(function() {
				callBlock({
					fadeIn: 0,
					timeout: 30000
				});

				var displayBlock = $('.blockMsg');
				displayBlock.stop(); // cancel fadeout if it has started
				displayBlock.fadeTo(300, 1); // make it easier to read the message by removing transparency
			}).mouseout(function() {
				$('.blockMsg').fadeOut(1000);
			});
			// End konapun additions
		};

		// plugin method for blocking element content
		$.fn.block = function(opts) {
			if ( this[0] === window ) {
				$.blockUI( opts );
				return this;
			}
			var fullOpts = $.extend({}, $.blockUI.defaults, opts || {});
			this.each(function() {
				var $el = $(this);
				if (fullOpts.ignoreIfBlocked && $el.data('blockUI.isBlocked'))
					return;
				$el.unblock({ fadeOut: 0 });
			});

			return this.each(function() {
				if ($.css(this,'position') == 'static') {
					this.style.position = 'relative';
					$(this).data('blockUI.static', true);
				}
				this.style.zoom = 1; // force 'hasLayout' in ie
				install(this, opts);
			});
		};

		// plugin method for unblocking element content
		$.fn.unblock = function(opts) {
			if ( this[0] === window ) {
				$.unblockUI( opts );
				return this;
			}
			return this.each(function() {
				remove(this, opts);
			});
		};

		$.blockUI.version = 2.66; // 2nd generation blocking at no extra cost!

		// override these in your code to change the default behavior and style
		$.blockUI.defaults = {
			// message displayed when blocking (use null for no message)
			message:  '<h1>Please wait...</h1>',

			title: null,		// title string; only used when theme == true
			draggable: true,	// only used when theme == true (requires jquery-ui.js to be loaded)

			theme: false, // set to true to use with jQuery UI themes

			// styles for the message when blocking; if you wish to disable
			// these and use an external stylesheet then do this in your code:
			// $.blockUI.defaults.css = {};
			css: {
				padding:	0,
				margin:		0,
				width:		'30%',
				top:		'40%',
				left:		'35%',
				textAlign:	'center',
				color:		'#000',
				border:		'3px solid #aaa',
				backgroundColor:'#fff',
				cursor:		'wait'
			},

			// minimal style set used when themes are used
			themedCSS: {
				width:	'30%',
				top:	'40%',
				left:	'35%'
			},

			// styles for the overlay
			overlayCSS:  {
				backgroundColor:	'#000',
				opacity:			0.6,
				cursor:				'wait'
			},

			// style to replace wait cursor before unblocking to correct issue
			// of lingering wait cursor
			cursorReset: 'default',

			// styles applied when using $.growlUI
			growlCSS: {
				width:		'350px',
				top:		'10px',
				left:		'',
				right:		'10px',
				border:		'none',
				padding:	'5px',
				opacity:	0.6,
				cursor:		'default',
				color:		'#fff',
				backgroundColor: '#000',
				'-webkit-border-radius':'10px',
				'-moz-border-radius':	'10px',
				'border-radius':		'10px'
			},

			// IE issues: 'about:blank' fails on HTTPS and javascript:false is s-l-o-w
			// (hat tip to Jorge H. N. de Vasconcelos)
			/*jshint scripturl:true */
			iframeSrc: /^https/i.test(window.location.href || '') ? 'javascript:false' : 'about:blank',

			// force usage of iframe in non-IE browsers (handy for blocking applets)
			forceIframe: false,

			// z-index for the blocking overlay
			baseZ: 1000,

			// set these to true to have the message automatically centered
			centerX: true, // <-- only effects element blocking (page block controlled via css above)
			centerY: true,

			// allow body element to be stetched in ie6; this makes blocking look better
			// on "short" pages.  disable if you wish to prevent changes to the body height
			allowBodyStretch: true,

			// enable if you want key and mouse events to be disabled for content that is blocked
			bindEvents: true,

			// be default blockUI will supress tab navigation from leaving blocking content
			// (if bindEvents is true)
			constrainTabKey: true,

			// fadeIn time in millis; set to 0 to disable fadeIn on block
			fadeIn:  200,

			// fadeOut time in millis; set to 0 to disable fadeOut on unblock
			fadeOut:  400,

			// time in millis to wait before auto-unblocking; set to 0 to disable auto-unblock
			timeout: 0,

			// disable if you don't want to show the overlay
			showOverlay: true,

			// if true, focus will be placed in the first available input field when
			// page blocking
			focusInput: true,

            // elements that can receive focus
            focusableElements: ':input:enabled:visible',

			// suppresses the use of overlay styles on FF/Linux (due to performance issues with opacity)
			// no longer needed in 2012
			// applyPlatformOpacityRules: true,

			// callback method invoked when fadeIn has completed and blocking message is visible
			onBlock: null,

			// callback method invoked when unblocking has completed; the callback is
			// passed the element that has been unblocked (which is the window object for page
			// blocks) and the options that were passed to the unblock call:
			//	onUnblock(element, options)
			onUnblock: null,

			// callback method invoked when the overlay area is clicked.
			// setting this will turn the cursor to a pointer, otherwise cursor defined in overlayCss will be used.
			onOverlayClick: null,

			// don't ask; if you really must know: http://groups.google.com/group/jquery-en/browse_thread/thread/36640a8730503595/2f6a79a77a78e493#2f6a79a77a78e493
			quirksmodeOffsetHack: 4,

			// class name of the message block
			blockMsgClass: 'blockMsg',

			// if it is already blocked, then ignore it (don't unblock and reblock)
			ignoreIfBlocked: false
		};

		// private data and functions follow...

		var pageBlock = null;
		var pageBlockEls = [];

		function install(el, opts) {
			var css, themedCSS;
			var full = (el == window);
			var msg = (opts && opts.message !== undefined ? opts.message : undefined);
			opts = $.extend({}, $.blockUI.defaults, opts || {});

			if (opts.ignoreIfBlocked && $(el).data('blockUI.isBlocked'))
				return;

			opts.overlayCSS = $.extend({}, $.blockUI.defaults.overlayCSS, opts.overlayCSS || {});
			css = $.extend({}, $.blockUI.defaults.css, opts.css || {});
			if (opts.onOverlayClick)
				opts.overlayCSS.cursor = 'pointer';

			themedCSS = $.extend({}, $.blockUI.defaults.themedCSS, opts.themedCSS || {});
			msg = msg === undefined ? opts.message : msg;

			// remove the current block (if there is one)
			if (full && pageBlock)
				remove(window, {fadeOut:0});

			// if an existing element is being used as the blocking content then we capture
			// its current place in the DOM (and current display style) so we can restore
			// it when we unblock
			if (msg && typeof msg != 'string' && (msg.parentNode || msg.jquery)) {
				var node = msg.jquery ? msg[0] : msg;
				var data = {};
				$(el).data('blockUI.history', data);
				data.el = node;
				data.parent = node.parentNode;
				data.display = node.style.display;
				data.position = node.style.position;
				if (data.parent)
					data.parent.removeChild(node);
			}

			$(el).data('blockUI.onUnblock', opts.onUnblock);
			var z = opts.baseZ;

			// blockUI uses 3 layers for blocking, for simplicity they are all used on every platform;
			// layer1 is the iframe layer which is used to supress bleed through of underlying content
			// layer2 is the overlay layer which has opacity and a wait cursor (by default)
			// layer3 is the message content that is displayed while blocking
			var lyr1, lyr2, lyr3, s;
			if (msie || opts.forceIframe)
				lyr1 = $('<iframe class="blockUI" style="z-index:'+ (z++) +';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="'+opts.iframeSrc+'"></iframe>');
			else
				lyr1 = $('<div class="blockUI" style="display:none"></div>');

			if (opts.theme)
				lyr2 = $('<div class="blockUI blockOverlay ui-widget-overlay" style="z-index:'+ (z++) +';display:none"></div>');
			else
				lyr2 = $('<div class="blockUI blockOverlay" style="z-index:'+ (z++) +';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"></div>');

			if (opts.theme && full) {
				s = '<div class="blockUI ' + opts.blockMsgClass + ' blockPage ui-dialog ui-widget ui-corner-all" style="z-index:'+(z+10)+';display:none;position:fixed">';
				if ( opts.title ) {
					s += '<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(opts.title || '&nbsp;')+'</div>';
				}
				s += '<div class="ui-widget-content ui-dialog-content"></div>';
				s += '</div>';
			}
			else if (opts.theme) {
				s = '<div class="blockUI ' + opts.blockMsgClass + ' blockElement ui-dialog ui-widget ui-corner-all" style="z-index:'+(z+10)+';display:none;position:absolute">';
				if ( opts.title ) {
					s += '<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(opts.title || '&nbsp;')+'</div>';
				}
				s += '<div class="ui-widget-content ui-dialog-content"></div>';
				s += '</div>';
			}
			else if (full) {
				s = '<div class="blockUI ' + opts.blockMsgClass + ' blockPage" style="z-index:'+(z+10)+';display:none;position:fixed"></div>';
			}
			else {
				s = '<div class="blockUI ' + opts.blockMsgClass + ' blockElement" style="z-index:'+(z+10)+';display:none;position:absolute"></div>';
			}
			lyr3 = $(s);

			// if we have a message, style it
			if (msg) {
				if (opts.theme) {
					lyr3.css(themedCSS);
					lyr3.addClass('ui-widget-content');
				}
				else
					lyr3.css(css);
			}

			// style the overlay
			if (!opts.theme /*&& (!opts.applyPlatformOpacityRules)*/)
				lyr2.css(opts.overlayCSS);
			lyr2.css('position', full ? 'fixed' : 'absolute');

			// make iframe layer transparent in IE
			if (msie || opts.forceIframe)
				lyr1.css('opacity',0.0);

			//$([lyr1[0],lyr2[0],lyr3[0]]).appendTo(full ? 'body' : el);
			var layers = [lyr1,lyr2,lyr3], $par = full ? $('body') : $(el);
			$.each(layers, function() {
				this.appendTo($par);
			});

			if (opts.theme && opts.draggable && $.fn.draggable) {
				lyr3.draggable({
					handle: '.ui-dialog-titlebar',
					cancel: 'li'
				});
			}

			// ie7 must use absolute positioning in quirks mode and to account for activex issues (when scrolling)
			var expr = setExpr && (!$.support.boxModel || $('object,embed', full ? null : el).length > 0);
			if (ie6 || expr) {
				// give body 100% height
				if (full && opts.allowBodyStretch && $.support.boxModel)
					$('html,body').css('height','100%');

				// fix ie6 issue when blocked element has a border width
				if ((ie6 || !$.support.boxModel) && !full) {
					var t = sz(el,'borderTopWidth'), l = sz(el,'borderLeftWidth');
					var fixT = t ? '(0 - '+t+')' : 0;
					var fixL = l ? '(0 - '+l+')' : 0;
				}

				// simulate fixed position
				$.each(layers, function(i,o) {
					var s = o[0].style;
					s.position = 'absolute';
					if (i < 2) {
						if (full)
							s.setExpression('height','Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.support.boxModel?0:'+opts.quirksmodeOffsetHack+') + "px"');
						else
							s.setExpression('height','this.parentNode.offsetHeight + "px"');
						if (full)
							s.setExpression('width','jQuery.support.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"');
						else
							s.setExpression('width','this.parentNode.offsetWidth + "px"');
						if (fixL) s.setExpression('left', fixL);
						if (fixT) s.setExpression('top', fixT);
					}
					else if (opts.centerY) {
						if (full) s.setExpression('top','(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"');
						s.marginTop = 0;
					}
					else if (!opts.centerY && full) {
						var top = (opts.css && opts.css.top) ? parseInt(opts.css.top, 10) : 0;
						var expression = '((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + '+top+') + "px"';
						s.setExpression('top',expression);
					}
				});
			}

			// show the message
			if (msg) {
				if (opts.theme)
					lyr3.find('.ui-widget-content').append(msg);
				else
					lyr3.append(msg);
				if (msg.jquery || msg.nodeType)
					$(msg).show();
			}

			if ((msie || opts.forceIframe) && opts.showOverlay)
				lyr1.show(); // opacity is zero
			if (opts.fadeIn) {
				var cb = opts.onBlock ? opts.onBlock : noOp;
				var cb1 = (opts.showOverlay && !msg) ? cb : noOp;
				var cb2 = msg ? cb : noOp;
				if (opts.showOverlay)
					lyr2._fadeIn(opts.fadeIn, cb1);
				if (msg)
					lyr3._fadeIn(opts.fadeIn, cb2);
			}
			else {
				if (opts.showOverlay)
					lyr2.show();
				if (msg)
					lyr3.show();
				if (opts.onBlock)
					opts.onBlock();
			}

			// bind key and mouse events
			bind(1, el, opts);

			if (full) {
				pageBlock = lyr3[0];
				pageBlockEls = $(opts.focusableElements,pageBlock);
				if (opts.focusInput)
					setTimeout(focus, 20);
			}
			else
				center(lyr3[0], opts.centerX, opts.centerY);

			if (opts.timeout) {
				// auto-unblock
				var to = setTimeout(function() {
					if (full)
						$.unblockUI(opts);
					else
						$(el).unblock(opts);
				}, opts.timeout);
				$(el).data('blockUI.timeout', to);
			}
		}

		// remove the block
		function remove(el, opts) {
			var count;
			var full = (el == window);
			var $el = $(el);
			var data = $el.data('blockUI.history');
			var to = $el.data('blockUI.timeout');
			if (to) {
				clearTimeout(to);
				$el.removeData('blockUI.timeout');
			}
			opts = $.extend({}, $.blockUI.defaults, opts || {});
			bind(0, el, opts); // unbind events

			if (opts.onUnblock === null) {
				opts.onUnblock = $el.data('blockUI.onUnblock');
				$el.removeData('blockUI.onUnblock');
			}

			var els;
			if (full) // crazy selector to handle odd field errors in ie6/7
				els = $('body').children().filter('.blockUI').add('body > .blockUI');
			else
				els = $el.find('>.blockUI');

			// fix cursor issue
			if ( opts.cursorReset ) {
				if ( els.length > 1 )
					els[1].style.cursor = opts.cursorReset;
				if ( els.length > 2 )
					els[2].style.cursor = opts.cursorReset;
			}

			if (full)
				pageBlock = pageBlockEls = null;

			if (opts.fadeOut) {
				count = els.length;
				els.stop().fadeOut(opts.fadeOut, function() {
					if ( --count === 0)
						reset(els,data,opts,el);
				});
			}
			else
				reset(els, data, opts, el);
		}

		// move blocking element back into the DOM where it started
		function reset(els,data,opts,el) {
			var $el = $(el);
			if ( $el.data('blockUI.isBlocked') )
				return;

			els.each(function(i,o) {
				// remove via DOM calls so we don't lose event handlers
				if (this.parentNode)
					this.parentNode.removeChild(this);
			});

			if (data && data.el) {
				data.el.style.display = data.display;
				data.el.style.position = data.position;
				if (data.parent)
					data.parent.appendChild(data.el);
				$el.removeData('blockUI.history');
			}

			if ($el.data('blockUI.static')) {
				$el.css('position', 'static'); // #22
			}

			if (typeof opts.onUnblock == 'function')
				opts.onUnblock(el,opts);

			// fix issue in Safari 6 where block artifacts remain until reflow
			var body = $(document.body), w = body.width(), cssW = body[0].style.width;
			body.width(w-1).width(w);
			body[0].style.width = cssW;
		}

		// bind/unbind the handler
		function bind(b, el, opts) {
			var full = el == window, $el = $(el);

			// don't bother unbinding if there is nothing to unbind
			if (!b && (full && !pageBlock || !full && !$el.data('blockUI.isBlocked')))
				return;

			$el.data('blockUI.isBlocked', b);

			// don't bind events when overlay is not in use or if bindEvents is false
			if (!full || !opts.bindEvents || (b && !opts.showOverlay))
				return;

			// bind anchors and inputs for mouse and key events
			var events = 'mousedown mouseup keydown keypress keyup touchstart touchend touchmove';
			if (b)
				$(document).bind(events, opts, handler);
			else
				$(document).unbind(events, handler);

		// former impl...
		//		var $e = $('a,:input');
		//		b ? $e.bind(events, opts, handler) : $e.unbind(events, handler);
		}

		// event handler to suppress keyboard/mouse events when blocking
		function handler(e) {
			// allow tab navigation (conditionally)
			if (e.type === 'keydown' && e.keyCode && e.keyCode == 9) {
				if (pageBlock && e.data.constrainTabKey) {
					var els = pageBlockEls;
					var fwd = !e.shiftKey && e.target === els[els.length-1];
					var back = e.shiftKey && e.target === els[0];
					if (fwd || back) {
						setTimeout(function(){focus(back);},10);
						return false;
					}
				}
			}
			var opts = e.data;
			var target = $(e.target);
			if (target.hasClass('blockOverlay') && opts.onOverlayClick)
				opts.onOverlayClick(e);

			// allow events within the message content
			if (target.parents('div.' + opts.blockMsgClass).length > 0)
				return true;

			// allow events for content that is not being blocked
			return target.parents().children().filter('div.blockUI').length === 0;
		}

		function focus(back) {
			if (!pageBlockEls)
				return;
			var e = pageBlockEls[back===true ? pageBlockEls.length-1 : 0];
			if (e)
				e.focus();
		}

		function center(el, x, y) {
			var p = el.parentNode, s = el.style;
			var l = ((p.offsetWidth - el.offsetWidth)/2) - sz(p,'borderLeftWidth');
			var t = ((p.offsetHeight - el.offsetHeight)/2) - sz(p,'borderTopWidth');
			if (x) s.left = l > 0 ? (l+'px') : '0';
			if (y) s.top  = t > 0 ? (t+'px') : '0';
		}

		function sz(el, p) {
			return parseInt($.css(el,p),10)||0;
		}

	}


	/*global define:true */
	if (typeof define === 'function' && define.amd && define.amd.jQuery) {
		define(['jquery'], setup);
	} else {
		setup(jQuery);
	}

})();
/*!
	Colorbox 1.5.14
	license: MIT
	http://www.jacklmoore.com/colorbox
*/
(function(t,e,i){function n(i,n,o){var r=e.createElement(i);return n&&(r.id=Z+n),o&&(r.style.cssText=o),t(r)}function o(){return i.innerHeight?i.innerHeight:t(i).height()}function r(e,i){i!==Object(i)&&(i={}),this.cache={},this.el=e,this.value=function(e){var n;return void 0===this.cache[e]&&(n=t(this.el).attr("data-cbox-"+e),void 0!==n?this.cache[e]=n:void 0!==i[e]?this.cache[e]=i[e]:void 0!==X[e]&&(this.cache[e]=X[e])),this.cache[e]},this.get=function(e){var i=this.value(e);return t.isFunction(i)?i.call(this.el,this):i}}function h(t){var e=W.length,i=(z+t)%e;return 0>i?e+i:i}function a(t,e){return Math.round((/%/.test(t)?("x"===e?E.width():o())/100:1)*parseInt(t,10))}function s(t,e){return t.get("photo")||t.get("photoRegex").test(e)}function l(t,e){return t.get("retinaUrl")&&i.devicePixelRatio>1?e.replace(t.get("photoRegex"),t.get("retinaSuffix")):e}function d(t){"contains"in y[0]&&!y[0].contains(t.target)&&t.target!==v[0]&&(t.stopPropagation(),y.focus())}function c(t){c.str!==t&&(y.add(v).removeClass(c.str).addClass(t),c.str=t)}function g(e){z=0,e&&e!==!1&&"nofollow"!==e?(W=t("."+te).filter(function(){var i=t.data(this,Y),n=new r(this,i);return n.get("rel")===e}),z=W.index(_.el),-1===z&&(W=W.add(_.el),z=W.length-1)):W=t(_.el)}function u(i){t(e).trigger(i),ae.triggerHandler(i)}function f(i){var o;if(!G){if(o=t(i).data(Y),_=new r(i,o),g(_.get("rel")),!$){$=q=!0,c(_.get("className")),y.css({visibility:"hidden",display:"block",opacity:""}),L=n(se,"LoadedContent","width:0; height:0; overflow:hidden; visibility:hidden"),b.css({width:"",height:""}).append(L),D=T.height()+k.height()+b.outerHeight(!0)-b.height(),j=C.width()+H.width()+b.outerWidth(!0)-b.width(),A=L.outerHeight(!0),N=L.outerWidth(!0);var h=a(_.get("initialWidth"),"x"),s=a(_.get("initialHeight"),"y"),l=_.get("maxWidth"),f=_.get("maxHeight");_.w=(l!==!1?Math.min(h,a(l,"x")):h)-N-j,_.h=(f!==!1?Math.min(s,a(f,"y")):s)-A-D,L.css({width:"",height:_.h}),J.position(),u(ee),_.get("onOpen"),O.add(F).hide(),y.focus(),_.get("trapFocus")&&e.addEventListener&&(e.addEventListener("focus",d,!0),ae.one(re,function(){e.removeEventListener("focus",d,!0)})),_.get("returnFocus")&&ae.one(re,function(){t(_.el).focus()})}var p=parseFloat(_.get("opacity"));v.css({opacity:p===p?p:"",cursor:_.get("overlayClose")?"pointer":"",visibility:"visible"}).show(),_.get("closeButton")?B.html(_.get("close")).appendTo(b):B.appendTo("<div/>"),w()}}function p(){y||(V=!1,E=t(i),y=n(se).attr({id:Y,"class":t.support.opacity===!1?Z+"IE":"",role:"dialog",tabindex:"-1"}).hide(),v=n(se,"Overlay").hide(),S=t([n(se,"LoadingOverlay")[0],n(se,"LoadingGraphic")[0]]),x=n(se,"Wrapper"),b=n(se,"Content").append(F=n(se,"Title"),I=n(se,"Current"),P=t('<button type="button"/>').attr({id:Z+"Previous"}),K=t('<button type="button"/>').attr({id:Z+"Next"}),R=n("button","Slideshow"),S),B=t('<button type="button"/>').attr({id:Z+"Close"}),x.append(n(se).append(n(se,"TopLeft"),T=n(se,"TopCenter"),n(se,"TopRight")),n(se,!1,"clear:left").append(C=n(se,"MiddleLeft"),b,H=n(se,"MiddleRight")),n(se,!1,"clear:left").append(n(se,"BottomLeft"),k=n(se,"BottomCenter"),n(se,"BottomRight"))).find("div div").css({"float":"left"}),M=n(se,!1,"position:absolute; width:9999px; visibility:hidden; display:none; max-width:none;"),O=K.add(P).add(I).add(R)),e.body&&!y.parent().length&&t(e.body).append(v,y.append(x,M))}function m(){function i(t){t.which>1||t.shiftKey||t.altKey||t.metaKey||t.ctrlKey||(t.preventDefault(),f(this))}return y?(V||(V=!0,K.click(function(){J.next()}),P.click(function(){J.prev()}),B.click(function(){J.close()}),v.click(function(){_.get("overlayClose")&&J.close()}),t(e).bind("keydown."+Z,function(t){var e=t.keyCode;$&&_.get("escKey")&&27===e&&(t.preventDefault(),J.close()),$&&_.get("arrowKey")&&W[1]&&!t.altKey&&(37===e?(t.preventDefault(),P.click()):39===e&&(t.preventDefault(),K.click()))}),t.isFunction(t.fn.on)?t(e).on("click."+Z,"."+te,i):t("."+te).live("click."+Z,i)),!0):!1}function w(){var e,o,r,h=J.prep,d=++le;if(q=!0,U=!1,u(he),u(ie),_.get("onLoad"),_.h=_.get("height")?a(_.get("height"),"y")-A-D:_.get("innerHeight")&&a(_.get("innerHeight"),"y"),_.w=_.get("width")?a(_.get("width"),"x")-N-j:_.get("innerWidth")&&a(_.get("innerWidth"),"x"),_.mw=_.w,_.mh=_.h,_.get("maxWidth")&&(_.mw=a(_.get("maxWidth"),"x")-N-j,_.mw=_.w&&_.w<_.mw?_.w:_.mw),_.get("maxHeight")&&(_.mh=a(_.get("maxHeight"),"y")-A-D,_.mh=_.h&&_.h<_.mh?_.h:_.mh),e=_.get("href"),Q=setTimeout(function(){S.show()},100),_.get("inline")){var c=t(e);r=t("<div>").hide().insertBefore(c),ae.one(he,function(){r.replaceWith(c)}),h(c)}else _.get("iframe")?h(" "):_.get("html")?h(_.get("html")):s(_,e)?(e=l(_,e),U=new Image,t(U).addClass(Z+"Photo").bind("error",function(){h(n(se,"Error").html(_.get("imgError")))}).one("load",function(){d===le&&setTimeout(function(){var e;t.each(["alt","longdesc","aria-describedby"],function(e,i){var n=t(_.el).attr(i)||t(_.el).attr("data-"+i);n&&U.setAttribute(i,n)}),_.get("retinaImage")&&i.devicePixelRatio>1&&(U.height=U.height/i.devicePixelRatio,U.width=U.width/i.devicePixelRatio),_.get("scalePhotos")&&(o=function(){U.height-=U.height*e,U.width-=U.width*e},_.mw&&U.width>_.mw&&(e=(U.width-_.mw)/U.width,o()),_.mh&&U.height>_.mh&&(e=(U.height-_.mh)/U.height,o())),_.h&&(U.style.marginTop=Math.max(_.mh-U.height,0)/2+"px"),W[1]&&(_.get("loop")||W[z+1])&&(U.style.cursor="pointer",U.onclick=function(){J.next()}),U.style.width=U.width+"px",U.style.height=U.height+"px",h(U)},1)}),U.src=e):e&&M.load(e,_.get("data"),function(e,i){d===le&&h("error"===i?n(se,"Error").html(_.get("xhrError")):t(this).contents())})}var v,y,x,b,T,C,H,k,W,E,L,M,S,F,I,R,K,P,B,O,_,D,j,A,N,z,U,$,q,G,Q,J,V,X={html:!1,photo:!1,iframe:!1,inline:!1,transition:"elastic",speed:300,fadeOut:300,width:!1,initialWidth:"600",innerWidth:!1,maxWidth:!1,height:!1,initialHeight:"450",innerHeight:!1,maxHeight:!1,scalePhotos:!0,scrolling:!0,opacity:.9,preloading:!0,className:!1,overlayClose:!0,escKey:!0,arrowKey:!0,top:!1,bottom:!1,left:!1,right:!1,fixed:!1,data:void 0,closeButton:!0,fastIframe:!0,open:!1,reposition:!0,loop:!0,slideshow:!1,slideshowAuto:!0,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",photoRegex:/\.(gif|png|jp(e|g|eg)|bmp|ico|webp|jxr|svg)((#|\?).*)?$/i,retinaImage:!1,retinaUrl:!1,retinaSuffix:"@2x.$1",current:"image {current} of {total}",previous:"previous",next:"next",close:"close",xhrError:"This content failed to load.",imgError:"This image failed to load.",returnFocus:!0,trapFocus:!0,onOpen:!1,onLoad:!1,onComplete:!1,onCleanup:!1,onClosed:!1,rel:function(){return this.rel},href:function(){return t(this).attr("href")},title:function(){return this.title}},Y="colorbox",Z="cbox",te=Z+"Element",ee=Z+"_open",ie=Z+"_load",ne=Z+"_complete",oe=Z+"_cleanup",re=Z+"_closed",he=Z+"_purge",ae=t("<a/>"),se="div",le=0,de={},ce=function(){function t(){clearTimeout(h)}function e(){(_.get("loop")||W[z+1])&&(t(),h=setTimeout(J.next,_.get("slideshowSpeed")))}function i(){R.html(_.get("slideshowStop")).unbind(s).one(s,n),ae.bind(ne,e).bind(ie,t),y.removeClass(a+"off").addClass(a+"on")}function n(){t(),ae.unbind(ne,e).unbind(ie,t),R.html(_.get("slideshowStart")).unbind(s).one(s,function(){J.next(),i()}),y.removeClass(a+"on").addClass(a+"off")}function o(){r=!1,R.hide(),t(),ae.unbind(ne,e).unbind(ie,t),y.removeClass(a+"off "+a+"on")}var r,h,a=Z+"Slideshow_",s="click."+Z;return function(){r?_.get("slideshow")||(ae.unbind(oe,o),o()):_.get("slideshow")&&W[1]&&(r=!0,ae.one(oe,o),_.get("slideshowAuto")?i():n(),R.show())}}();t[Y]||(t(p),J=t.fn[Y]=t[Y]=function(e,i){var n,o=this;if(e=e||{},t.isFunction(o))o=t("<a/>"),e.open=!0;else if(!o[0])return o;return o[0]?(p(),m()&&(i&&(e.onComplete=i),o.each(function(){var i=t.data(this,Y)||{};t.data(this,Y,t.extend(i,e))}).addClass(te),n=new r(o[0],e),n.get("open")&&f(o[0])),o):o},J.position=function(e,i){function n(){T[0].style.width=k[0].style.width=b[0].style.width=parseInt(y[0].style.width,10)-j+"px",b[0].style.height=C[0].style.height=H[0].style.height=parseInt(y[0].style.height,10)-D+"px"}var r,h,s,l=0,d=0,c=y.offset();if(E.unbind("resize."+Z),y.css({top:-9e4,left:-9e4}),h=E.scrollTop(),s=E.scrollLeft(),_.get("fixed")?(c.top-=h,c.left-=s,y.css({position:"fixed"})):(l=h,d=s,y.css({position:"absolute"})),d+=_.get("right")!==!1?Math.max(E.width()-_.w-N-j-a(_.get("right"),"x"),0):_.get("left")!==!1?a(_.get("left"),"x"):Math.round(Math.max(E.width()-_.w-N-j,0)/2),l+=_.get("bottom")!==!1?Math.max(o()-_.h-A-D-a(_.get("bottom"),"y"),0):_.get("top")!==!1?a(_.get("top"),"y"):Math.round(Math.max(o()-_.h-A-D,0)/2),y.css({top:c.top,left:c.left,visibility:"visible"}),x[0].style.width=x[0].style.height="9999px",r={width:_.w+N+j,height:_.h+A+D,top:l,left:d},e){var g=0;t.each(r,function(t){return r[t]!==de[t]?(g=e,void 0):void 0}),e=g}de=r,e||y.css(r),y.dequeue().animate(r,{duration:e||0,complete:function(){n(),q=!1,x[0].style.width=_.w+N+j+"px",x[0].style.height=_.h+A+D+"px",_.get("reposition")&&setTimeout(function(){E.bind("resize."+Z,J.position)},1),t.isFunction(i)&&i()},step:n})},J.resize=function(t){var e;$&&(t=t||{},t.width&&(_.w=a(t.width,"x")-N-j),t.innerWidth&&(_.w=a(t.innerWidth,"x")),L.css({width:_.w}),t.height&&(_.h=a(t.height,"y")-A-D),t.innerHeight&&(_.h=a(t.innerHeight,"y")),t.innerHeight||t.height||(e=L.scrollTop(),L.css({height:"auto"}),_.h=L.height()),L.css({height:_.h}),e&&L.scrollTop(e),J.position("none"===_.get("transition")?0:_.get("speed")))},J.prep=function(i){function o(){return _.w=_.w||L.width(),_.w=_.mw&&_.mw<_.w?_.mw:_.w,_.w}function a(){return _.h=_.h||L.height(),_.h=_.mh&&_.mh<_.h?_.mh:_.h,_.h}if($){var d,g="none"===_.get("transition")?0:_.get("speed");L.remove(),L=n(se,"LoadedContent").append(i),L.hide().appendTo(M.show()).css({width:o(),overflow:_.get("scrolling")?"auto":"hidden"}).css({height:a()}).prependTo(b),M.hide(),t(U).css({"float":"none"}),c(_.get("className")),d=function(){function i(){t.support.opacity===!1&&y[0].style.removeAttribute("filter")}var n,o,a=W.length;$&&(o=function(){clearTimeout(Q),S.hide(),u(ne),_.get("onComplete")},F.html(_.get("title")).show(),L.show(),a>1?("string"==typeof _.get("current")&&I.html(_.get("current").replace("{current}",z+1).replace("{total}",a)).show(),K[_.get("loop")||a-1>z?"show":"hide"]().html(_.get("next")),P[_.get("loop")||z?"show":"hide"]().html(_.get("previous")),ce(),_.get("preloading")&&t.each([h(-1),h(1)],function(){var i,n=W[this],o=new r(n,t.data(n,Y)),h=o.get("href");h&&s(o,h)&&(h=l(o,h),i=e.createElement("img"),i.src=h)})):O.hide(),_.get("iframe")?(n=e.createElement("iframe"),"frameBorder"in n&&(n.frameBorder=0),"allowTransparency"in n&&(n.allowTransparency="true"),_.get("scrolling")||(n.scrolling="no"),t(n).attr({src:_.get("href"),name:(new Date).getTime(),"class":Z+"Iframe",allowFullScreen:!0}).one("load",o).appendTo(L),ae.one(he,function(){n.src="//about:blank"}),_.get("fastIframe")&&t(n).trigger("load")):o(),"fade"===_.get("transition")?y.fadeTo(g,1,i):i())},"fade"===_.get("transition")?y.fadeTo(g,0,function(){J.position(0,d)}):J.position(g,d)}},J.next=function(){!q&&W[1]&&(_.get("loop")||W[z+1])&&(z=h(1),f(W[z]))},J.prev=function(){!q&&W[1]&&(_.get("loop")||z)&&(z=h(-1),f(W[z]))},J.close=function(){$&&!G&&(G=!0,$=!1,u(oe),_.get("onCleanup"),E.unbind("."+Z),v.fadeTo(_.get("fadeOut")||0,0),y.stop().fadeTo(_.get("fadeOut")||0,0,function(){y.hide(),v.hide(),u(he),L.remove(),setTimeout(function(){G=!1,u(re),_.get("onClosed")},1)}))},J.remove=function(){y&&(y.stop(),t[Y].close(),y.stop(!1,!0).remove(),v.remove(),G=!1,y=null,t("."+te).removeData(Y).removeClass(te),t(e).unbind("click."+Z).unbind("keydown."+Z))},J.element=function(){return t(_.el)},J.settings=X)})(jQuery,document,window);/*!
 * jQuery Form Plugin
 * version: 3.51.0-2014.06.20
 * Requires jQuery v1.5 or later
 * Copyright (c) 2014 M. Alsup
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Project repository: https://github.com/malsup/form
 * Dual licensed under the MIT and GPL licenses.
 * https://github.com/malsup/form#copyright-and-license
 */
!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):e("undefined"!=typeof jQuery?jQuery:window.Zepto)}(function(e){"use strict";function t(t){var r=t.data;t.isDefaultPrevented()||(t.preventDefault(),e(t.target).ajaxSubmit(r))}function r(t){var r=t.target,a=e(r);if(!a.is("[type=submit],[type=image]")){var n=a.closest("[type=submit]");if(0===n.length)return;r=n[0]}var i=this;if(i.clk=r,"image"==r.type)if(void 0!==t.offsetX)i.clk_x=t.offsetX,i.clk_y=t.offsetY;else if("function"==typeof e.fn.offset){var o=a.offset();i.clk_x=t.pageX-o.left,i.clk_y=t.pageY-o.top}else i.clk_x=t.pageX-r.offsetLeft,i.clk_y=t.pageY-r.offsetTop;setTimeout(function(){i.clk=i.clk_x=i.clk_y=null},100)}function a(){if(e.fn.ajaxSubmit.debug){var t="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t)}}var n={};n.fileapi=void 0!==e("<input type='file'/>").get(0).files,n.formdata=void 0!==window.FormData;var i=!!e.fn.prop;e.fn.attr2=function(){if(!i)return this.attr.apply(this,arguments);var e=this.prop.apply(this,arguments);return e&&e.jquery||"string"==typeof e?e:this.attr.apply(this,arguments)},e.fn.ajaxSubmit=function(t){function r(r){var a,n,i=e.param(r,t.traditional).split("&"),o=i.length,s=[];for(a=0;o>a;a++)i[a]=i[a].replace(/\+/g," "),n=i[a].split("="),s.push([decodeURIComponent(n[0]),decodeURIComponent(n[1])]);return s}function o(a){for(var n=new FormData,i=0;i<a.length;i++)n.append(a[i].name,a[i].value);if(t.extraData){var o=r(t.extraData);for(i=0;i<o.length;i++)o[i]&&n.append(o[i][0],o[i][1])}t.data=null;var s=e.extend(!0,{},e.ajaxSettings,t,{contentType:!1,processData:!1,cache:!1,type:u||"POST"});t.uploadProgress&&(s.xhr=function(){var r=e.ajaxSettings.xhr();return r.upload&&r.upload.addEventListener("progress",function(e){var r=0,a=e.loaded||e.position,n=e.total;e.lengthComputable&&(r=Math.ceil(a/n*100)),t.uploadProgress(e,a,n,r)},!1),r}),s.data=null;var c=s.beforeSend;return s.beforeSend=function(e,r){r.data=t.formData?t.formData:n,c&&c.call(this,e,r)},e.ajax(s)}function s(r){function n(e){var t=null;try{e.contentWindow&&(t=e.contentWindow.document)}catch(r){a("cannot get iframe.contentWindow document: "+r)}if(t)return t;try{t=e.contentDocument?e.contentDocument:e.document}catch(r){a("cannot get iframe.contentDocument: "+r),t=e.document}return t}function o(){function t(){try{var e=n(g).readyState;a("state = "+e),e&&"uninitialized"==e.toLowerCase()&&setTimeout(t,50)}catch(r){a("Server abort: ",r," (",r.name,")"),s(k),j&&clearTimeout(j),j=void 0}}var r=f.attr2("target"),i=f.attr2("action"),o="multipart/form-data",c=f.attr("enctype")||f.attr("encoding")||o;w.setAttribute("target",p),(!u||/post/i.test(u))&&w.setAttribute("method","POST"),i!=m.url&&w.setAttribute("action",m.url),m.skipEncodingOverride||u&&!/post/i.test(u)||f.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),m.timeout&&(j=setTimeout(function(){T=!0,s(D)},m.timeout));var l=[];try{if(m.extraData)for(var d in m.extraData)m.extraData.hasOwnProperty(d)&&l.push(e.isPlainObject(m.extraData[d])&&m.extraData[d].hasOwnProperty("name")&&m.extraData[d].hasOwnProperty("value")?e('<input type="hidden" name="'+m.extraData[d].name+'">').val(m.extraData[d].value).appendTo(w)[0]:e('<input type="hidden" name="'+d+'">').val(m.extraData[d]).appendTo(w)[0]);m.iframeTarget||v.appendTo("body"),g.attachEvent?g.attachEvent("onload",s):g.addEventListener("load",s,!1),setTimeout(t,15);try{w.submit()}catch(h){var x=document.createElement("form").submit;x.apply(w)}}finally{w.setAttribute("action",i),w.setAttribute("enctype",c),r?w.setAttribute("target",r):f.removeAttr("target"),e(l).remove()}}function s(t){if(!x.aborted&&!F){if(M=n(g),M||(a("cannot access response document"),t=k),t===D&&x)return x.abort("timeout"),void S.reject(x,"timeout");if(t==k&&x)return x.abort("server abort"),void S.reject(x,"error","server abort");if(M&&M.location.href!=m.iframeSrc||T){g.detachEvent?g.detachEvent("onload",s):g.removeEventListener("load",s,!1);var r,i="success";try{if(T)throw"timeout";var o="xml"==m.dataType||M.XMLDocument||e.isXMLDoc(M);if(a("isXml="+o),!o&&window.opera&&(null===M.body||!M.body.innerHTML)&&--O)return a("requeing onLoad callback, DOM not available"),void setTimeout(s,250);var u=M.body?M.body:M.documentElement;x.responseText=u?u.innerHTML:null,x.responseXML=M.XMLDocument?M.XMLDocument:M,o&&(m.dataType="xml"),x.getResponseHeader=function(e){var t={"content-type":m.dataType};return t[e.toLowerCase()]},u&&(x.status=Number(u.getAttribute("status"))||x.status,x.statusText=u.getAttribute("statusText")||x.statusText);var c=(m.dataType||"").toLowerCase(),l=/(json|script|text)/.test(c);if(l||m.textarea){var f=M.getElementsByTagName("textarea")[0];if(f)x.responseText=f.value,x.status=Number(f.getAttribute("status"))||x.status,x.statusText=f.getAttribute("statusText")||x.statusText;else if(l){var p=M.getElementsByTagName("pre")[0],h=M.getElementsByTagName("body")[0];p?x.responseText=p.textContent?p.textContent:p.innerText:h&&(x.responseText=h.textContent?h.textContent:h.innerText)}}else"xml"==c&&!x.responseXML&&x.responseText&&(x.responseXML=X(x.responseText));try{E=_(x,c,m)}catch(y){i="parsererror",x.error=r=y||i}}catch(y){a("error caught: ",y),i="error",x.error=r=y||i}x.aborted&&(a("upload aborted"),i=null),x.status&&(i=x.status>=200&&x.status<300||304===x.status?"success":"error"),"success"===i?(m.success&&m.success.call(m.context,E,"success",x),S.resolve(x.responseText,"success",x),d&&e.event.trigger("ajaxSuccess",[x,m])):i&&(void 0===r&&(r=x.statusText),m.error&&m.error.call(m.context,x,i,r),S.reject(x,"error",r),d&&e.event.trigger("ajaxError",[x,m,r])),d&&e.event.trigger("ajaxComplete",[x,m]),d&&!--e.active&&e.event.trigger("ajaxStop"),m.complete&&m.complete.call(m.context,x,i),F=!0,m.timeout&&clearTimeout(j),setTimeout(function(){m.iframeTarget?v.attr("src",m.iframeSrc):v.remove(),x.responseXML=null},100)}}}var c,l,m,d,p,v,g,x,y,b,T,j,w=f[0],S=e.Deferred();if(S.abort=function(e){x.abort(e)},r)for(l=0;l<h.length;l++)c=e(h[l]),i?c.prop("disabled",!1):c.removeAttr("disabled");if(m=e.extend(!0,{},e.ajaxSettings,t),m.context=m.context||m,p="jqFormIO"+(new Date).getTime(),m.iframeTarget?(v=e(m.iframeTarget),b=v.attr2("name"),b?p=b:v.attr2("name",p)):(v=e('<iframe name="'+p+'" src="'+m.iframeSrc+'" />'),v.css({position:"absolute",top:"-1000px",left:"-1000px"})),g=v[0],x={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(t){var r="timeout"===t?"timeout":"aborted";a("aborting upload... "+r),this.aborted=1;try{g.contentWindow.document.execCommand&&g.contentWindow.document.execCommand("Stop")}catch(n){}v.attr("src",m.iframeSrc),x.error=r,m.error&&m.error.call(m.context,x,r,t),d&&e.event.trigger("ajaxError",[x,m,r]),m.complete&&m.complete.call(m.context,x,r)}},d=m.global,d&&0===e.active++&&e.event.trigger("ajaxStart"),d&&e.event.trigger("ajaxSend",[x,m]),m.beforeSend&&m.beforeSend.call(m.context,x,m)===!1)return m.global&&e.active--,S.reject(),S;if(x.aborted)return S.reject(),S;y=w.clk,y&&(b=y.name,b&&!y.disabled&&(m.extraData=m.extraData||{},m.extraData[b]=y.value,"image"==y.type&&(m.extraData[b+".x"]=w.clk_x,m.extraData[b+".y"]=w.clk_y)));var D=1,k=2,A=e("meta[name=csrf-token]").attr("content"),L=e("meta[name=csrf-param]").attr("content");L&&A&&(m.extraData=m.extraData||{},m.extraData[L]=A),m.forceSync?o():setTimeout(o,10);var E,M,F,O=50,X=e.parseXML||function(e,t){return window.ActiveXObject?(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&"parsererror"!=t.documentElement.nodeName?t:null},C=e.parseJSON||function(e){return window.eval("("+e+")")},_=function(t,r,a){var n=t.getResponseHeader("content-type")||"",i="xml"===r||!r&&n.indexOf("xml")>=0,o=i?t.responseXML:t.responseText;return i&&"parsererror"===o.documentElement.nodeName&&e.error&&e.error("parsererror"),a&&a.dataFilter&&(o=a.dataFilter(o,r)),"string"==typeof o&&("json"===r||!r&&n.indexOf("json")>=0?o=C(o):("script"===r||!r&&n.indexOf("javascript")>=0)&&e.globalEval(o)),o};return S}if(!this.length)return a("ajaxSubmit: skipping submit process - no element selected"),this;var u,c,l,f=this;"function"==typeof t?t={success:t}:void 0===t&&(t={}),u=t.type||this.attr2("method"),c=t.url||this.attr2("action"),l="string"==typeof c?e.trim(c):"",l=l||window.location.href||"",l&&(l=(l.match(/^([^#]+)/)||[])[1]),t=e.extend(!0,{url:l,success:e.ajaxSettings.success,type:u||e.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},t);var m={};if(this.trigger("form-pre-serialize",[this,t,m]),m.veto)return a("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(t.beforeSerialize&&t.beforeSerialize(this,t)===!1)return a("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var d=t.traditional;void 0===d&&(d=e.ajaxSettings.traditional);var p,h=[],v=this.formToArray(t.semantic,h);if(t.data&&(t.extraData=t.data,p=e.param(t.data,d)),t.beforeSubmit&&t.beforeSubmit(v,this,t)===!1)return a("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[v,this,t,m]),m.veto)return a("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var g=e.param(v,d);p&&(g=g?g+"&"+p:p),"GET"==t.type.toUpperCase()?(t.url+=(t.url.indexOf("?")>=0?"&":"?")+g,t.data=null):t.data=g;var x=[];if(t.resetForm&&x.push(function(){f.resetForm()}),t.clearForm&&x.push(function(){f.clearForm(t.includeHidden)}),!t.dataType&&t.target){var y=t.success||function(){};x.push(function(r){var a=t.replaceTarget?"replaceWith":"html";e(t.target)[a](r).each(y,arguments)})}else t.success&&x.push(t.success);if(t.success=function(e,r,a){for(var n=t.context||this,i=0,o=x.length;o>i;i++)x[i].apply(n,[e,r,a||f,f])},t.error){var b=t.error;t.error=function(e,r,a){var n=t.context||this;b.apply(n,[e,r,a,f])}}if(t.complete){var T=t.complete;t.complete=function(e,r){var a=t.context||this;T.apply(a,[e,r,f])}}var j=e("input[type=file]:enabled",this).filter(function(){return""!==e(this).val()}),w=j.length>0,S="multipart/form-data",D=f.attr("enctype")==S||f.attr("encoding")==S,k=n.fileapi&&n.formdata;a("fileAPI :"+k);var A,L=(w||D)&&!k;t.iframe!==!1&&(t.iframe||L)?t.closeKeepAlive?e.get(t.closeKeepAlive,function(){A=s(v)}):A=s(v):A=(w||D)&&k?o(v):e.ajax(t),f.removeData("jqxhr").data("jqxhr",A);for(var E=0;E<h.length;E++)h[E]=null;return this.trigger("form-submit-notify",[this,t]),this},e.fn.ajaxForm=function(n){if(n=n||{},n.delegation=n.delegation&&e.isFunction(e.fn.on),!n.delegation&&0===this.length){var i={s:this.selector,c:this.context};return!e.isReady&&i.s?(a("DOM not ready, queuing ajaxForm"),e(function(){e(i.s,i.c).ajaxForm(n)}),this):(a("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)")),this)}return n.delegation?(e(document).off("submit.form-plugin",this.selector,t).off("click.form-plugin",this.selector,r).on("submit.form-plugin",this.selector,n,t).on("click.form-plugin",this.selector,n,r),this):this.ajaxFormUnbind().bind("submit.form-plugin",n,t).bind("click.form-plugin",n,r)},e.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},e.fn.formToArray=function(t,r){var a=[];if(0===this.length)return a;var i,o=this[0],s=this.attr("id"),u=t?o.getElementsByTagName("*"):o.elements;if(u&&!/MSIE [678]/.test(navigator.userAgent)&&(u=e(u).get()),s&&(i=e(':input[form="'+s+'"]').get(),i.length&&(u=(u||[]).concat(i))),!u||!u.length)return a;var c,l,f,m,d,p,h;for(c=0,p=u.length;p>c;c++)if(d=u[c],f=d.name,f&&!d.disabled)if(t&&o.clk&&"image"==d.type)o.clk==d&&(a.push({name:f,value:e(d).val(),type:d.type}),a.push({name:f+".x",value:o.clk_x},{name:f+".y",value:o.clk_y}));else if(m=e.fieldValue(d,!0),m&&m.constructor==Array)for(r&&r.push(d),l=0,h=m.length;h>l;l++)a.push({name:f,value:m[l]});else if(n.fileapi&&"file"==d.type){r&&r.push(d);var v=d.files;if(v.length)for(l=0;l<v.length;l++)a.push({name:f,value:v[l],type:d.type});else a.push({name:f,value:"",type:d.type})}else null!==m&&"undefined"!=typeof m&&(r&&r.push(d),a.push({name:f,value:m,type:d.type,required:d.required}));if(!t&&o.clk){var g=e(o.clk),x=g[0];f=x.name,f&&!x.disabled&&"image"==x.type&&(a.push({name:f,value:g.val()}),a.push({name:f+".x",value:o.clk_x},{name:f+".y",value:o.clk_y}))}return a},e.fn.formSerialize=function(t){return e.param(this.formToArray(t))},e.fn.fieldSerialize=function(t){var r=[];return this.each(function(){var a=this.name;if(a){var n=e.fieldValue(this,t);if(n&&n.constructor==Array)for(var i=0,o=n.length;o>i;i++)r.push({name:a,value:n[i]});else null!==n&&"undefined"!=typeof n&&r.push({name:this.name,value:n})}}),e.param(r)},e.fn.fieldValue=function(t){for(var r=[],a=0,n=this.length;n>a;a++){var i=this[a],o=e.fieldValue(i,t);null===o||"undefined"==typeof o||o.constructor==Array&&!o.length||(o.constructor==Array?e.merge(r,o):r.push(o))}return r},e.fieldValue=function(t,r){var a=t.name,n=t.type,i=t.tagName.toLowerCase();if(void 0===r&&(r=!0),r&&(!a||t.disabled||"reset"==n||"button"==n||("checkbox"==n||"radio"==n)&&!t.checked||("submit"==n||"image"==n)&&t.form&&t.form.clk!=t||"select"==i&&-1==t.selectedIndex))return null;if("select"==i){var o=t.selectedIndex;if(0>o)return null;for(var s=[],u=t.options,c="select-one"==n,l=c?o+1:u.length,f=c?o:0;l>f;f++){var m=u[f];if(m.selected){var d=m.value;if(d||(d=m.attributes&&m.attributes.value&&!m.attributes.value.specified?m.text:m.value),c)return d;s.push(d)}}return s}return e(t).val()},e.fn.clearForm=function(t){return this.each(function(){e("input,select,textarea",this).clearFields(t)})},e.fn.clearFields=e.fn.clearInputs=function(t){var r=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var a=this.type,n=this.tagName.toLowerCase();r.test(a)||"textarea"==n?this.value="":"checkbox"==a||"radio"==a?this.checked=!1:"select"==n?this.selectedIndex=-1:"file"==a?/MSIE/.test(navigator.userAgent)?e(this).replaceWith(e(this).clone(!0)):e(this).val(""):t&&(t===!0&&/hidden/.test(a)||"string"==typeof t&&e(this).is(t))&&(this.value="")})},e.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},e.fn.enable=function(e){return void 0===e&&(e=!0),this.each(function(){this.disabled=!e})},e.fn.selected=function(t){return void 0===t&&(t=!0),this.each(function(){var r=this.type;if("checkbox"==r||"radio"==r)this.checked=t;else if("option"==this.tagName.toLowerCase()){var a=e(this).parent("select");t&&a[0]&&"select-one"==a[0].type&&a.find("option").selected(!1),this.selected=t}})},e.fn.ajaxSubmit.debug=!1});/*!
 * hoverIntent v1.8.1 // 2014.08.11 // jQuery v1.9.1+
 * http://cherne.net/brian/resources/jquery.hoverIntent.html
 *
 * You may use hoverIntent under the terms of the MIT license. Basically that
 * means you are free to use hoverIntent as long as this header is left intact.
 * Copyright 2007, 2014 Brian Cherne
 */
 
/* hoverIntent is similar to jQuery's built-in "hover" method except that
 * instead of firing the handlerIn function immediately, hoverIntent checks
 * to see if the user's mouse has slowed down (beneath the sensitivity
 * threshold) before firing the event. The handlerOut function is only
 * called after a matching handlerIn.
 *
 * // basic usage ... just like .hover()
 * .hoverIntent( handlerIn, handlerOut )
 * .hoverIntent( handlerInOut )
 *
 * // basic usage ... with event delegation!
 * .hoverIntent( handlerIn, handlerOut, selector )
 * .hoverIntent( handlerInOut, selector )
 *
 * // using a basic configuration object
 * .hoverIntent( config )
 *
 * @param  handlerIn   function OR configuration object
 * @param  handlerOut  function OR selector for delegation OR undefined
 * @param  selector    selector OR undefined
 * @author Brian Cherne <brian(at)cherne(dot)net>
 */
(function($) {
    $.fn.hoverIntent = function(handlerIn,handlerOut,selector) {

        // default configuration values
        var cfg = {
            interval: 100,
            sensitivity: 6,
            timeout: 0
        };

        if ( typeof handlerIn === "object" ) {
            cfg = $.extend(cfg, handlerIn );
        } else if ($.isFunction(handlerOut)) {
            cfg = $.extend(cfg, { over: handlerIn, out: handlerOut, selector: selector } );
        } else {
            cfg = $.extend(cfg, { over: handlerIn, out: handlerIn, selector: handlerOut } );
        }

        // instantiate variables
        // cX, cY = current X and Y position of mouse, updated by mousemove event
        // pX, pY = previous X and Y position of mouse, set by mouseover and polling interval
        var cX, cY, pX, pY;

        // A private function for getting mouse position
        var track = function(ev) {
            cX = ev.pageX;
            cY = ev.pageY;
        };

        // A private function for comparing current and previous mouse position
        var compare = function(ev,ob) {
            ob.hoverIntent_t = clearTimeout(ob.hoverIntent_t);
            // compare mouse positions to see if they've crossed the threshold
            if ( Math.sqrt( (pX-cX)*(pX-cX) + (pY-cY)*(pY-cY) ) < cfg.sensitivity ) {
                $(ob).off("mousemove.hoverIntent",track);
                // set hoverIntent state to true (so mouseOut can be called)
                ob.hoverIntent_s = true;
                return cfg.over.apply(ob,[ev]);
            } else {
                // set previous coordinates for next time
                pX = cX; pY = cY;
                // use self-calling timeout, guarantees intervals are spaced out properly (avoids JavaScript timer bugs)
                ob.hoverIntent_t = setTimeout( function(){compare(ev, ob);} , cfg.interval );
            }
        };

        // A private function for delaying the mouseOut function
        var delay = function(ev,ob) {
            ob.hoverIntent_t = clearTimeout(ob.hoverIntent_t);
            ob.hoverIntent_s = false;
            return cfg.out.apply(ob,[ev]);
        };

        // A private function for handling mouse 'hovering'
        var handleHover = function(e) {
            // copy objects to be passed into t (required for event object to be passed in IE)
            var ev = $.extend({},e);
            var ob = this;

            // cancel hoverIntent timer if it exists
            if (ob.hoverIntent_t) { ob.hoverIntent_t = clearTimeout(ob.hoverIntent_t); }

            // if e.type === "mouseenter"
            if (e.type === "mouseenter") {
                // set "previous" X and Y position based on initial entry point
                pX = ev.pageX; pY = ev.pageY;
                // update "current" X and Y position based on mousemove
                $(ob).on("mousemove.hoverIntent",track);
                // start polling interval (self-calling timeout) to compare mouse coordinates over time
                if (!ob.hoverIntent_s) { ob.hoverIntent_t = setTimeout( function(){compare(ev,ob);} , cfg.interval );}

                // else e.type == "mouseleave"
            } else {
                // unbind expensive mousemove event
                $(ob).off("mousemove.hoverIntent",track);
                // if hoverIntent state is true, then call the mouseOut function after the specified delay
                if (ob.hoverIntent_s) { ob.hoverIntent_t = setTimeout( function(){delay(ev,ob);} , cfg.timeout );}
            }
        };

        // listen for mouseenter and mouseleave
        return this.on({'mouseenter.hoverIntent':handleHover,'mouseleave.hoverIntent':handleHover}, cfg.selector);
    };
})(jQuery);/* jQuery Password Strength Plugin (pstrength) - A jQuery plugin to provide accessibility functions
 * Author: Tane Piper (digitalspaghetti@gmail.com)
 * Website: http://digitalspaghetti.me.uk
 * Licensed under the MIT License: http://www.opensource.org/licenses/mit-license.php
 * This code uses a modified version of Steve Moitozo's algorithm (http://www.geekwisdom.com/dyn/passwdmeter)
 *
 * === Changelog ===
 * Version 1.2 (03/09/2007)
 * Added more options for colors and common words
 * Added common words checked to see if words like 'password' or 'qwerty' are being entered
 * Added minimum characters required for password
 * Re-worked scoring system to give better results
 *
 * Version 1.1 (20/08/2007)
 * Changed code to be more jQuery-like
 *
 * Version 1.0 (20/07/2007)
 * Initial version.
 */
(function($){
	$.extend($.fn, {
		pstrength : function(options) {
			var options = $.extend({
				verdicts:	["Too Short!","Very Weak","Weak","Medium","Strong","Very Strong"],
				colors: 	["#ccc","#f00","#c06","#f60","#3c0","#3f0"],
				values: 	[20,30,40,60,80,100],
				scores: 	[10,15,30,40],
				minchar:	6,
				minCharText: "Minimum length is %d characters"
			},options);
			return this.each(function(){
				var infoarea = $(this).attr('id');


				$(this).after('<div id="' + infoarea + '_bar" class="progress" style="display: none;"><div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"><span  id="' + infoarea + '_text">0%<span></div></div>');

				if(options.minchar>0){
					$(this).after('<div class="help-block" id="' + infoarea + '_minchar">' + options.minCharText.replace('%d', options.minchar) + '</div>');
				}


				options.$ctlBar = $("#" + infoarea + "_bar .progress-bar");
	    		options.$ctlText = $("#" + infoarea + "_text");

				$(this).keyup(function(){
					if(options.minchar <= $(this).val().length && $("#"+infoarea + '_bar:hidden')){
						$("#"+infoarea + '_bar').show()
					}

					$.fn.runPassword($(this).val(), infoarea, options);
				});
			});
		},
		runPassword : function (password, infoarea, options){

			nPerc = $.fn.checkPassword(password, options);
	    	var statusNum;

			if (nPerc < 0){
				statusNum=0
			}
			else if(nPerc <= options.scores[0]){
				statusNum=1
			}
			else if (nPerc > options.scores[0] && nPerc <= options.scores[1]){
				statusNum=2
			}
			else if (nPerc > options.scores[1] && nPerc <= options.scores[2]){
				statusNum=3
			}
			else if (nPerc > options.scores[2] && nPerc <= options.scores[3]){
				statusNum=4
			}
			else{
				statusNum=5
			}


			options.$ctlBar.css({width: options.values[statusNum]+"%"});
			options.$ctlBar.attr("aria-valuenow",options.values[statusNum]);
			options.$ctlBar.css({backgroundColor: options.colors[statusNum]});
			options.$ctlText.html(options.verdicts[statusNum]);

		},
		checkPassword : function(password, options)
		{
			var intScore = 0;
			var strVerdict = options.verdicts[0];
			var letterLowCase = (password.match(/[a-z]/));
			var letterUpperCase = (password.match(/[A-Z]/));
			var numberValidation = (password.match(/\d+/));
			var caracterValidation = (password.match(/.[!,@,#,$,%,^,&,*,?,_,~,.]/)); 
			
			if (password.length  < options.minchar) {
				intScore = (intScore-100)
			}

			 if (password.length >= options.minchar+5 && (letterLowCase || letterUpperCase) && numberValidation) {
				intScore = (intScore+30)
			}
		
			 if (password.length >= options.minchar+9 && letterLowCase && letterUpperCase && numberValidation && caracterValidation) {
					intScore = (intScore+50)
			}

			return intScore;
			

		}
	});
})(jQuery);/**
 * syncHeight - jQuery plugin to automagically Sync the heights of columns
 * Made to seemlessly work with the CCS-Framework YAML (yaml.de)
 * @requires jQuery v1.0.3 or newer
 *
 * http://blog.ginader.de/dev/syncheight/
 *
 * Copyright (c) 2007-2013
 * Dirk Ginader (ginader.de)
 * Dirk Jesse (yaml.de)
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 * Version: 1.5
 *
 * Changelog
 * * v1.5 fixes issue with box-sizing: border-box
 * * v1.4: new Method unSyncHeight() that removes previously added syncs i.e. for responsive layouts
 * * v1.3: compatibility fix for jQuery 1.9.x (removed $.browser)
 *
 * Usage sync:
	$(window).load(function(){
		$('p').syncHeight();
	});
 * Usage unsync: 
	$(window).resize(function(){
		if($(window).width() < 500){
			$('p').unSyncHeight();
		}
	});
 */

(function($) {
	var getHeightProperty = function() {
		var browser_id = 0;
		var property = [
			// To avoid content overflow in synchronised boxes on font scaling, we
			// use 'min-height' property for modern browsers ...
			['min-height','0px'],
			// and 'height' property for Internet Explorer.
			['height','1%']
		];

		var bMatch = /(msie) ([\w.]+)/.exec(navigator.userAgent.toLowerCase()) || [],
			browser = bMatch[1] || "",
			browserVersion = bMatch[2] || "0";

		// check for IE6 ...
		if(browser === 'msie' && browserVersion < 7){
			browser_id = 1;
		}

		return {
			'name': property[browser_id][0],
			'autoheightVal': property[browser_id][1]
		};
	};

	$.getSyncedHeight = function(selector) {
		var max = 0;
		var heightProperty = getHeightProperty();
		// get maximum element height ...
		$(selector).each(function() {
			// fallback to auto height before height check ...
			$(this).css(heightProperty.name, heightProperty.autoheightVal);
			var val = parseInt($(this).css('height'),10);
			if(val > max){
				max = val;
			}
		});
		return max;
	};

	$.fn.syncHeight = function(config) {
		var defaults = {
			updateOnResize: false,  // re-sync element heights after a browser resize event (useful in flexible layouts)
			height: false
		};

		var options = $.extend(defaults, config);
		var e = this;
		var max = 0;
		var heightPropertyName = getHeightProperty().name;


		if(options.parent==true){

			$(this).each(function() {
				$(this).css(heightPropertyName, 0+'px');
			});

			$(this).each(function() {
				$(this).css(heightPropertyName, $(this).parent().innerHeight()+'px');
			});
		}else{

			 if(typeof(options.height) === "number") {
				max = options.height;
			} else {
				max = $.getSyncedHeight(this);
			}


			 // set synchronized element height ...
			$(this).each(function() {
				$(this).css(heightPropertyName, max+'px');
			});
		}
	 

		// optional sync refresh on resize event ...
		if (options.updateOnResize === true) {
			$(window).bind('resize.syncHeight', function(){
				options["updateOnResize"]=false;
				$(e).syncHeight(options);
			});
		}
		return this;
	};

	$.fn.unSyncHeight = function() {
		// unbind optional resize event ...
		$(window).unbind('resize.syncHeight');

		var heightPropertyName = getHeightProperty().name;
		$(this).each(function() {
			$(this).css(heightPropertyName, '');
		});
	};
})(jQuery);
/**
 * Accessible Tabs - jQuery plugin for accessible, unobtrusive tabs
 * Build to seemlessly work with the CCS-Framework YAML (yaml.de) not depending on YAML though
 * @requires jQuery - tested with 1.9.1, 1.7 and 1.4.2 but might as well work with older versions
 *
 * english article: http://blog.ginader.de/archives/2009/02/07/jQuery-Accessible-Tabs-How-to-make-tabs-REALLY-accessible.php
 * german article: http://blog.ginader.de/archives/2009/02/07/jQuery-Accessible-Tabs-Wie-man-Tabs-WIRKLICH-zugaenglich-macht.php
 * 
 * code: http://github.com/ginader/Accessible-Tabs
 * please report issues at: http://github.com/ginader/Accessible-Tabs/issues
 *
 * Copyright (c) 2007 Dirk Ginader (ginader.de)
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 */

(function($) {
	var debugMode = false;
	$.fn.extend({
		// We assume there could be multiple sets of tabs on a page, so,
		// the unique id for each invididual tab's heading is identified with params q and r (e.g., id="accessibletabscontent0-2")
		getUniqueId: function(p, q, r){
			if (r===undefined) {r='';} else {r='-'+r;}
			return p + q + r;
		},
		accessibleTabs: function(config) {
			var defaults = {
				wrapperClass: 'content', // Classname to apply to the div that is wrapped around the original Markup
				currentClass: 'current', // Classname to apply to the LI of the selected Tab
				tabhead: 'h4', // Tag or valid Query Selector of the Elements to Transform the Tabs-Navigation from (originals are removed)
				tabheadClass: 'tabhead', // Classname to apply to the target heading element for each tab div
				tabbody: '.tabbody', // Tag or valid Query Selector of the Elements to be treated as the Tab Body
				fx:'show', // can be "fadeIn", "slideDown", "show"
				fxspeed: 'normal', // speed (String|Number): "slow", "normal", or "fast") or the number of milliseconds to run the animation
				currentInfoText: 'current tab: ', // text to indicate for screenreaders which tab is the current one
				currentInfoPosition: 'prepend', // Definition where to insert the Info Text. Can be either "prepend" or "append"
				currentInfoClass: 'current-info', // Class to apply to the span wrapping the CurrentInfoText
				tabsListClass:'tabs-list', // Class to apply to the generated list of tabs above the content
				syncheights:false, // syncs the heights of the tab contents when the SyncHeight plugin is available http://blog.ginader.de/dev/jquery/syncheight/index.php
				syncHeightMethodName:'syncHeight', // set the Method name of the plugin you want to use to sync the tab contents. Defaults to the SyncHeight plugin: http://github.com/ginader/syncHeight
				cssClassAvailable:false, // Enable individual css classes for tabs. Gets the appropriate class name of a tabhead element and apply it to the tab list element. Boolean value
				saveState:false, // save the selected tab into a cookie so it stays selected after a reload. This requires that the wrapping div needs to have an ID (so we know which tab we're saving)
				autoAnchor:false, // will move over any existing id of a headline in tabs markup so it can be linked to it
				pagination:false, // adds buttons to each tab to switch to the next/previous tab
				position:'top', // can be 'top' or 'bottom'. Defines where the tabs list is inserted.
				wrapInnerNavLinks: '', // inner wrap for a-tags in tab navigation. See http://api.jquery.com/wrapInner/ for further informations
				firstNavItemClass: 'first', // Classname of the first list item in the tab navigation
				lastNavItemClass: 'last', // Classname of the last list item in the tab navigation
				clearfixClass: 'clearfix' // Name of the Class that is used to clear/contain floats
			};
			var keyCodes = {
				37 : -1, //LEFT
				38 : -1, //UP
				39 : +1, //RIGHT 
				40 : +1 //DOWN
			};
			var positions = {
				top : 'prepend',
				bottom : 'append'
			};
			this.options = $.extend(defaults, config);

			var tabsCount = 0;
			if($("body").data('accessibleTabsCount') !== undefined){
				tabsCount = $("body").data('accessibleTabsCount');
			}
			$("body").data('accessibleTabsCount',this.size()+tabsCount);

			var o = this;
			return this.each(function(t) {
				var el = $(this);
				var list = '';
				var tabCount = 0;
				var ids = [];

				$(el).wrapInner('<div class="'+o.options.wrapperClass+'"></div>');
				debug($(el).find(o.options.tabhead).children("a"))

				$(el).find(o.options.tabhead).each(function(i){

					debug($(this))
					var id = '';
					var elId = $(this).attr('id');
					if(elId){
						// Skip this item if it already exists.
						if(elId.indexOf('accessibletabscontent') === 0) {
							return;
						}
						id =' id="'+elId+'"';
					}
					var tabId = o.getUniqueId('accessibletabscontent', tabsCount+t, i);//get a unique id to assign to this tab's heading
					var navItemId = o.getUniqueId('accessibletabsnavigation', tabsCount+t, i);//get a unique id for this navigation item
					ids.push(tabId);
					

					// SNK: support tab head with links
					var navItemText = ($(this).children("a").length>0)? $(this).children("a").html() :$(this).html() ;


					var ariaLabel="";

					if($(this).attr("aria-label")){
						ariaLabel='aria-label="'+$(this).attr("aria-label")+'"'
					}


					if(o.options.cssClassAvailable === true) {
						var cssClass = '';
						if($(this).attr('class')) {
							cssClass = $(this).attr('class');
							cssClass = ' class="'+cssClass+'"';
						}
						list += '<li id="'+navItemId+'"><a'+id+''+cssClass+' href="#'+tabId+'" '+ariaLabel+'>'+navItemText+'</a></li>';
					} else {
					  list += '<li id="'+navItemId+'"><a'+id+' href="#'+tabId+'" '+ariaLabel+'>'+navItemText+'</a></li>';
					}


					$(this).attr({"id": tabId, "class": o.options.tabheadClass, "tabindex": "-1"});//assign the unique id and the tabheadClass class name to this tab's heading
					tabCount++;
				});

				if (o.options.syncheights && $.fn[o.options.syncHeightMethodName]) {
					$(el).find(o.options.tabbody)[o.options.syncHeightMethodName]();
					$(window).resize(function(){
						$(el).find(o.options.tabbody)[o.options.syncHeightMethodName]();
					});
				}

				// Ensure that the call to setup tabs is re-runnable
				var tabs_selector = '.' + o.options.tabsListClass;
				if(!$(el).find(tabs_selector).length) {
					$(el)[positions[o.options.position]]('<ul class="'+o.options.clearfixClass+' '+o.options.tabsListClass+' tabamount'+tabCount+'"></ul>');
				}

				$(el).find(tabs_selector).append(list);

				// initial show first content block and hide the others
				var content = $(el).find(o.options.tabbody);
				if (content.length > 0) {
					$(content).hide();
					$(content[0]).show();
				}
				$(el).find("ul."+o.options.tabsListClass+">li:first").addClass(o.options.currentClass).addClass(o.options.firstNavItemClass)
				  .find('a')[o.options.currentInfoPosition]('<span class="'+o.options.currentInfoClass+'">'+o.options.currentInfoText+'</span>')
				  .parents("ul."+o.options.tabsListClass).children('li:last').addClass(o.options.lastNavItemClass);



				// SNK: add first and last class to tabhead

				var tabheads = $(el).find(o.options.tabhead);
				if (tabheads.length > 0) {
					$(tabheads[0]).addClass(o.options.currentClass).addClass(o.options.firstNavItemClass);
					$(tabheads[tabheads.length-1]).addClass(o.options.lastNavItemClass);
				}











				if (o.options.wrapInnerNavLinks) {
				  $(el).find('ul.'+o.options.tabsListClass+'>li>a').wrapInner(o.options.wrapInnerNavLinks);
				}

				$(el).find('ul.'+o.options.tabsListClass+'>li>a').each(function(i){
					$(this).click(function(event){
						event.preventDefault();
						el.trigger("showTab.accessibleTabs", [$(event.target)]);
						if(o.options.saveState && $.cookie){
							$.cookie('accessibletab_'+el.attr('id')+'_active',i);
						}
						$(el).find('ul.'+o.options.tabsListClass+'>li.'+o.options.currentClass).removeClass(o.options.currentClass)
						.find("span."+o.options.currentInfoClass).remove();

						// SNK: remove current class from tabhead
						$(el).find(o.options.tabhead).removeClass(o.options.currentClass);
						


						$(this).blur();
						$(el).find(o.options.tabbody+':visible').hide();
						$(el).find(o.options.tabbody).eq(i)[o.options.fx](o.options.fxspeed);
						$(this)[o.options.currentInfoPosition]('<span class="'+o.options.currentInfoClass+'">'+o.options.currentInfoText+'</span>')
						.parent().addClass(o.options.currentClass);


						// SNK: add active class to current tabhead
						$($(this).attr("href")).addClass(o.options.currentClass);



						//now, only after writing the currentInfoText span to the tab list link, set focus to the tab's heading

						$($(this).attr("href")).focus().keyup(function(event){
							if(keyCodes[event.keyCode]){
								o.showAccessibleTab(i+keyCodes[event.keyCode]);
								$(this).unbind( "keyup" );
							}
						});

						// $(el).find('.accessibletabsanchor').keyup(function(event){
						//     if(keyCodes[event.keyCode]){
						//         o.showAccessibleTab(i+keyCodes[event.keyCode]);
						//     }
						// });
					});

					$(this).focus(function(){
						$(document).keyup(function(event){
							if(keyCodes[event.keyCode]){
								o.showAccessibleTab(i+keyCodes[event.keyCode]);
							}
						});
					});
					$(this).blur(function(){
						$(document).unbind( "keyup" );
					});

				});

				if(o.options.saveState && $.cookie){
					var savedState = $.cookie('accessibletab_'+el.attr('id')+'_active');
					debug($.cookie('accessibletab_'+el.attr('id')+'_active'));
					if(savedState !== null){
						o.showAccessibleTab(savedState,el.attr('id'));
					}
				}

				if(o.options.autoAnchor && window.location.hash){
					var anchorTab = $('.'+o.options.tabsListClass).find(window.location.hash);
					if(anchorTab.size()){
						anchorTab.click();
					}
				}

				if(o.options.pagination){
					var m = '<ul class="pagination">';
					m +='    <li class="previous"><a href="#{previousAnchor}"><span>{previousHeadline}</span></a></li>';
					m +='    <li class="next"><a href="#{nextAnchor}"><span>{nextHeadline}</span></a></li>';
					m +='</ul>';
					var tabs = $(el).find('.tabbody');
					var tabcount = tabs.size();
					tabs.each(function(idx){
						$(this).append(m);
						var next = idx+1;
						if(next>=tabcount){next = 0;}
						var previous = idx-1;
						if(previous<0){previous = tabcount-1;}
						var p = $(this).find('.pagination');
						var previousEl = p.find('.previous');
						previousEl.find('span').text($('#'+ids[previous]).text());
						previousEl.find('a').attr('href','#'+ids[previous])
						.click(function(event){
							event.preventDefault();
							$(el).find('.tabs-list a').eq(previous).click();
						});
						var nextEl = p.find('.next');
						nextEl.find('span').text($('#'+ids[next]).text());
						nextEl.find('a').attr('href','#'+ids[next])
						.click(function(event){
							event.preventDefault();
							$(el).find('.tabs-list a').eq(next).click();
						});
					});
				}
			});
		},
		showAccessibleTab: function(index,id){
			debug('showAccessibleTab');
			var o = this;
			if(id) {
				var el = $('#'+id);
				var links = el.find('ul.'+o.options.tabsListClass+'>li>a');
				el.trigger("showTab.accessibleTabs", [links.eq(index)]);
				links.eq(index).click();
			} else {
				return this.each(function() {
					var el = $(this);
					el.trigger("showTab.accessibleTabs");
					var links = el.find('ul.'+o.options.tabsListClass+'>li>a');
					el.trigger("showTab.accessibleTabs", [links.eq(index)]);
					links.eq(index).click();
				});
			}
		},
		showAccessibleTabSelector: function(selector){
			debug('showAccessibleTabSelector');
			var el = $(selector);
			if(el){
				if(el.get(0).nodeName.toLowerCase() === 'a'){
					el.click();
				}else{
					debug('the selector of a showAccessibleTabSelector() call needs to point to a tabs headline!');
				}
			}
		}
	});
	// private Methods
	function debug(msg,info){
		if(debugMode && window.console && window.console.log){
			if(info){
				window.console.log(info+': ',msg);
			}else{
				window.console.log(msg);
			}
		}
	}
})(jQuery);
/*!
	Zoom v1.7.13 - 2014-04-29
	Enlarge images on click or mouseover.
	(c) 2014 Jack Moore - http://www.jacklmoore.com/zoom
	license: http://www.opensource.org/licenses/mit-license.php
*/
(function ($) {
	var defaults = {
		url: false,
		callback: false,
		target: false,
		duration: 120,
		on: 'mouseover', // other options: grab, click, toggle
		touch: true, // enables a touch fallback
		onZoomIn: false,
		onZoomOut: false,
		zoomEnableCallBack:false,
		zoomEnable:true,
		magnify: 1,
		longtouchtimer:function(){},
		touchduration: 500
	};

	// Core Zoom Logic, independent of event listeners.
	$.zoom = function(target, source, img, magnify) {
		var targetHeight,
			targetWidth,
			sourceHeight,
			sourceWidth,
			xRatio,
			yRatio,
			offset,
			position = $(target).css('position'),
			$source = $(source);

		// The parent element needs positioning so that the zoomed element can be correctly positioned within.
		target.style.position = /(absolute|fixed)/.test(position) ? position : 'relative';
		target.style.overflow = 'hidden';

		img.style.width = img.style.height = '';

		var i= $("<div class='zoomImg'><div class='zoomImgMask'></div></div>")
			.css({
				width: img.width * magnify,
				height: img.height * magnify,
			}).appendTo(target);

		$(img).appendTo(i);

		return {
			init: function() {
				targetWidth = $(target).outerWidth();
				targetHeight = $(target).outerHeight();

				if (source === target) {
					sourceWidth = targetWidth;
					sourceHeight = targetHeight;
				} else {
					sourceWidth = $source.outerWidth();
					sourceHeight = $source.outerHeight();
				}

				xRatio = (img.width - targetWidth) / sourceWidth;
				yRatio = (img.height - targetHeight) / sourceHeight;

				offset = $source.offset();




			},
			move: function (e) {


				if(offset == undefined){
					offset = {left:0,top:0}
				}
				


				

				var left = (e.pageX -  offset.left),
					top = (e.pageY - offset.top);

				top = Math.max(Math.min(top, sourceHeight), 0);
				left = Math.max(Math.min(left, sourceWidth), 0);

				$(img).parent(".zoomImg").css("left",(left * -xRatio) + 'px');
				$(img).parent(".zoomImg").css("top",(top * -yRatio) + 'px');
			}
		};
	};

	$.fn.zoom = function (options) {
		return this.each(function () {
			var
			settings = $.extend({}, defaults, options || {}),
			//target will display the zoomed image
			target = settings.target || this,
			//source will provide zoom location info (thumbnail)
			source = this,
			$source = $(source),
			img = document.createElement('img'),
			$img = $(img),
			mousemove = 'mousemove.zoom',
			clicked = false,
			touched = false,
			$urlElement;

			// If a url wasn't specified, look for an image element.
			if (!settings.url) {
				$urlElement = $source.find('img');
				if ($urlElement[0]) {
					settings.url = $urlElement.data('src') || $urlElement.attr('src');
				}
				if (!settings.url) {
					return;
				}
			}

			(function(){
				var position = target.style.position;
				var overflow = target.style.overflow;

				$source.one('zoom.destroy', function(){
					$source.off(".zoom");
					target.style.position = position;
					target.style.overflow = overflow;
					$img.remove();
				});
				
			}());

			img.onload = function () {
				var zoom = $.zoom(target, source, img, settings.magnify);


				function start(e) {

					if($.isFunction(settings.zoomEnableCallBack)){
						settings.zoomEnable =   settings.zoomEnableCallBack.call(img)
					} 

					if(!settings.zoomEnable){
						return false;
					}


					zoom.init();
					zoom.move(e);

					// Skip the fade-in for IE8 and lower since it chokes on fading-in
					// and changing position based on mousemovement at the same time.
					$(img).parent(".zoomImg").stop()
					.fadeTo($.support.opacity ? settings.duration : 0, 1, $.isFunction(settings.onZoomIn) ? settings.onZoomIn.call(img) : false);
				}

				function stop() {

					if (settings.longtouchtimer){
						clearTimeout(settings.longtouchtimer);
					}


					$(img).parent(".zoomImg").stop()
					.fadeTo(settings.duration, 0, $.isFunction(settings.onZoomOut) ? settings.onZoomOut.call(img) : false);
				}


				// Mouse events
				if (settings.on === 'grab') {
					$source
						.on('mousedown.zoom',
							function (e) {
								if (e.which === 1) {
									$(document).one('mouseup.zoom',
										function () {
											stop();

											$(document).off(mousemove, zoom.move);
										}
									);



									settings.longtouchtimer = setTimeout(function(){
										start(e);
										$(document).on(mousemove, zoom.move);
									}, settings.touchduration); 
								
									e.preventDefault();
								}
							}
						);
				} else if (settings.on === 'click') {
					$source.on('click.zoom',
						function (e) {
							if (clicked) {
								// bubble the event up to the document to trigger the unbind.
								return;
							} else {
								clicked = true;
								start(e);
								$(document).on(mousemove, zoom.move);
								$(document).one('click.zoom',
									function () {
										stop();
										clicked = false;
										$(document).off(mousemove, zoom.move);
									}
								);
								return false;
							}
						}
					);
				} else if (settings.on === 'toggle') {
					$source.on('click.zoom',
						function (e) {
							if (clicked) {
								stop();
							} else {
								start(e);
							}
							clicked = !clicked;
						}
					);
				} else if (settings.on === 'mouseover') {
					zoom.init(); // Preemptively call init because IE7 will fire the mousemove handler before the hover handler.

					$source
						.on('mouseenter.zoom', start)
						.on('mouseleave.zoom', stop)
						.on(mousemove, function(){
							if (settings.longtouchtimer){
								clearTimeout(settings.longtouchtimer);
							}
							zoom.move()
						});
				}

				// Touch fallback
				if (settings.touch) {

					touched=false
					$source
						.on('touchstart.zoom', function (e) {
							clearTimeout(settings.longtouchtimer);
							settings.longtouchtimer = setTimeout(function(){
								if (touched) {
									touched = false;
									stop();
								} else {
									touched = true;
									e.preventDefault();
									start( e.originalEvent.touches[0] || e.originalEvent.changedTouches[0] );
								}
							}, settings.touchduration); 
						})
						.on('touchmove.zoom', function (e) {
							if(touched){
								e.preventDefault();
								zoom.move( e.originalEvent.touches[0] || e.originalEvent.changedTouches[0] );
							}
							
						})
						.on('touchend.zoom', function (e) {
								e.preventDefault();
								if (settings.longtouchtimer){
									clearTimeout(settings.longtouchtimer);
								}
								stop();
								touched=false
						});
				}
				
				if ($.isFunction(settings.callback)) {
					settings.callback.call(img);
				}
			};

			img.src = settings.url;


		});
	};

	$.fn.zoom.defaults = defaults;
}(window.jQuery));







/**
 * Product Loading - jQuery plugin for adding a layered loading while loading product information
 * @requires jQuery - tested with 1.9.1, 1.7 and 1.4.2 but might as well work with older versions
 *
 */

(function($){
	var setOpen = function(element) {
		element.addClass("c4-pdp-loading-open");
	};

	var setClose = function(element) {
		element.removeClass("c4-pdp-loading-open");
	};

	var isOpen = function(element) {
		return element.hasClass("c4-pdp-loading-open");
	};

	$.fn.PDPLoading = function(action, callback){
		var actionPerformed = false;
		if (action === "open" && !isOpen(this)) {
		    var loadingStyles =
		    "position:absolute; " +
		    "width: 100%; " +
            "height: 100%; " +
            "background-color: white; " +
            "background-image: url('/_ui/responsive/common/images/spinner.gif'); " +
            "background-repeat: no-repeat; " +
            "background-position-x: center; " +
            "background-position-y: center; " +
            "top: 0; " +
            "left: 0;";

		    var div = document.createElement("div");
            div.setAttribute("class","c4-pdp-loading");
            div.setAttribute("style", loadingStyles);
			this.append(div);
			actionPerformed = true;
			setOpen(this);
		}
		if (action === "close" && isOpen(this)) {
			$(this).children(".c4-pdp-loading").remove();
			actionPerformed = true;
			setClose(this);
		}

		if (actionPerformed && callback) {
			callback();
		}

	}
}(jQuery))
/*
 *  jQuery OwlCarousel v1.3.3
 *
 *  Copyright (c) 2013 Bartosz Wojciechowski
 *  http://www.owlgraphic.com/owlcarousel/
 *
 *  Licensed under MIT
 *
 */

/*JS Lint helpers: */
/*global dragMove: false, dragEnd: false, $, jQuery, alert, window, document */
/*jslint nomen: true, continue:true */



/*
    MODIFIED!
*/


if (typeof Object.create !== "function") {
  Object.create = function (obj) {
      function F() {}
      F.prototype = obj;
      return new F();
  };
}
(function ($, window, document) {

  var Carousel = {
      init : function (options, el) {
          var base = this;

          base.$elem = $(el);
          base.options = $.extend({}, $.fn.owlCarousel.options, base.$elem.data(), options);

          base.userOptions = options;
          base.loadContent();
      },

      loadContent : function () {
          var base = this, url;

          function getData(data) {
              var i, content = "";
              if (typeof base.options.jsonSuccess === "function") {
                  base.options.jsonSuccess.apply(this, [data]);
              } else {
                  for (i in data.owl) {
                      if (data.owl.hasOwnProperty(i)) {
                          content += data.owl[i].item;
                      }
                  }
                  base.$elem.html(content);
              }
              base.logIn();
          }

          if (typeof base.options.beforeInit === "function") {
              base.options.beforeInit.apply(this, [base.$elem]);
          }

          if (typeof base.options.jsonPath === "string") {
              url = base.options.jsonPath;
              $.getJSON(url, getData);
          } else {
              base.logIn();
          }
      },

      logIn : function () {
          var base = this;

          base.$elem.data({
              "owl-originalStyles": base.$elem.attr("style"),
              "owl-originalClasses": base.$elem.attr("class")
          });

          base.$elem.css({opacity: 0});
          base.orignalItems = base.options.items;
          base.checkBrowser();
          base.wrapperWidth = 0;
          base.checkVisible = null;
          base.setVars();
      },

      setVars : function () {
          var base = this;
          if (base.$elem.children().length === 0) {return false; }
          base.baseClass();
          base.eventTypes();
          base.$userItems = base.$elem.children();
          base.itemsAmount = base.$userItems.length;
          base.wrapItems();
          base.$owlItems = base.$elem.find(".owl-item");
          base.$owlWrapper = base.$elem.find(".owl-wrapper");
          base.playDirection = "next";
          base.prevItem = 0;
          base.prevArr = [0];
          base.currentItem = 0;
          base.customEvents();
          base.onStartup();
      },

      onStartup : function () {
          var base = this;
          base.updateItems();
          base.calculateAll();
          base.buildControls();
          base.updateControls();
          base.response();
          base.moveEvents();
          base.stopOnHover();
          base.owlStatus();

          if (base.options.transitionStyle !== false) {
              base.transitionTypes(base.options.transitionStyle);
          }
          if (base.options.autoPlay === true) {
              base.options.autoPlay = 5000;
          }
          base.play();

          base.$elem.find(".owl-wrapper").css("display", "block");

          if (!base.$elem.is(":visible")) {
              base.watchVisibility();
          } else {
              base.$elem.css("opacity", 1);
          }
          base.onstartup = false;
          base.eachMoveUpdate();
          if (typeof base.options.afterInit === "function") {
              base.options.afterInit.apply(this, [base.$elem]);
          }
      },

      eachMoveUpdate : function () {
          var base = this;

          if (base.options.lazyLoad === true) {
              base.lazyLoad();
          }
          if (base.options.autoHeight === true) {
              base.autoHeight();
          }
          base.onVisibleItems();

          if (typeof base.options.afterAction === "function") {
              base.options.afterAction.apply(this, [base.$elem]);
          }
      },

      updateVars : function () {
          var base = this;
          if (typeof base.options.beforeUpdate === "function") {
              base.options.beforeUpdate.apply(this, [base.$elem]);
          }
          base.watchVisibility();
          base.updateItems();
          base.calculateAll();
          base.updatePosition();
          base.updateControls();
          base.eachMoveUpdate();
          if (typeof base.options.afterUpdate === "function") {
              base.options.afterUpdate.apply(this, [base.$elem]);
          }
      },

      reload : function () {
          var base = this;
          window.setTimeout(function () {
              base.updateVars();
          }, 0);
      },

      watchVisibility : function () {
          var base = this;

          if (base.$elem.is(":visible") === false) {
              base.$elem.css({opacity: 0});
              window.clearInterval(base.autoPlayInterval);
              window.clearInterval(base.checkVisible);
          } else {
              return false;
          }
          base.checkVisible = window.setInterval(function () {
              if (base.$elem.is(":visible")) {
                  base.reload();
                  base.$elem.animate({opacity: 1}, 200);
                  window.clearInterval(base.checkVisible);
              }
          }, 500);
      },

      wrapItems : function () {
          var base = this;
          base.$userItems.wrapAll("<div class=\"owl-wrapper\">").wrap("<div class=\"owl-item\"></div>");
          base.$elem.find(".owl-wrapper").wrap("<div class=\"owl-wrapper-outer\">");
          base.wrapperOuter = base.$elem.find(".owl-wrapper-outer");
          base.$elem.css("display", "block");
      },

      baseClass : function () {
          var base = this,
              hasBaseClass = base.$elem.hasClass(base.options.baseClass),
              hasThemeClass = base.$elem.hasClass(base.options.theme);

          if (!hasBaseClass) {
              base.$elem.addClass(base.options.baseClass);
          }

          if (!hasThemeClass) {
              base.$elem.addClass(base.options.theme);
          }
      },

      updateItems : function () {
          var base = this, width, i;

          if (base.options.responsive === false) {
              return false;
          }
          if (base.options.singleItem === true) {
              base.options.items = base.orignalItems = 1;
              base.options.itemsCustom = false;
              base.options.itemsDesktop = false;
              base.options.itemsDesktopSmall = false;
              base.options.itemsTablet = false;
              base.options.itemsTabletSmall = false;
              base.options.itemsMobile = false;
              return false;
          }

          width = $(base.options.responsiveBaseWidth).width();

          if (width > (base.options.itemsDesktop[0] || base.orignalItems)) {
              base.options.items = base.orignalItems;
          }
          if (base.options.itemsCustom !== false) {
              //Reorder array by screen size
              base.options.itemsCustom.sort(function (a, b) {return a[0] - b[0]; });

              for (i = 0; i < base.options.itemsCustom.length; i += 1) {
                  if (base.options.itemsCustom[i][0] <= width) {
                      base.options.items = base.options.itemsCustom[i][1];
                  }
              }

          } else {

              if (width <= base.options.itemsDesktop[0] && base.options.itemsDesktop !== false) {
                  base.options.items = base.options.itemsDesktop[1];
              }

              if (width <= base.options.itemsDesktopSmall[0] && base.options.itemsDesktopSmall !== false) {
                  base.options.items = base.options.itemsDesktopSmall[1];
              }

              if (width <= base.options.itemsTablet[0] && base.options.itemsTablet !== false) {
                  base.options.items = base.options.itemsTablet[1];
              }

              if (width <= base.options.itemsTabletSmall[0] && base.options.itemsTabletSmall !== false) {
                  base.options.items = base.options.itemsTabletSmall[1];
              }

              if (width <= base.options.itemsMobile[0] && base.options.itemsMobile !== false) {
                  base.options.items = base.options.itemsMobile[1];
              }
          }

          //if number of items is less than declared
          if (base.options.items > base.itemsAmount && base.options.itemsScaleUp === true) {
              base.options.items = base.itemsAmount;
          }
      },

      response : function () {
          var base = this,
              smallDelay,
              lastWindowWidth;

          if (base.options.responsive !== true) {
              return false;
          }
          lastWindowWidth = $(window).width();

          base.resizer = function () {
              if ($(window).width() !== lastWindowWidth) {
                  if (base.options.autoPlay !== false) {
                      window.clearInterval(base.autoPlayInterval);
                  }
                  window.clearTimeout(smallDelay);
                  smallDelay = window.setTimeout(function () {
                      lastWindowWidth = $(window).width();
                      base.updateVars();
                  }, base.options.responsiveRefreshRate);
              }
          };
          $(window).resize(base.resizer);
      },

      updatePosition : function () {
          var base = this;
          base.jumpTo(base.currentItem);
          if (base.options.autoPlay !== false) {
              base.checkAp();
          }
      },

      appendItemsSizes : function () {
          var base = this,
              roundPages = 0,
              lastItem = base.itemsAmount - base.options.items;

          base.$owlItems.each(function (index) {
              var $this = $(this);
              $this
                  .css({"width": base.itemWidth})
                  .data("owl-item", Number(index));

              if (index % base.options.items === 0 || index === lastItem) {
                  if (!(index > lastItem)) {
                      roundPages += 1;
                  }
              }
              $this.data("owl-roundPages", roundPages);
          });
      },

      appendWrapperSizes : function () {
          var base = this,
              width = base.$owlItems.length * base.itemWidth;

          base.$owlWrapper.css({
              "width": width * 2,
              "left": 0
          });
          base.appendItemsSizes();
      },

      calculateAll : function () {
          var base = this;
          base.calculateWidth();
          base.appendWrapperSizes();
          base.loops();
          base.max();
      },

      calculateWidth : function () {
          var base = this;
          base.itemWidth = ((base.$elem.width()-1) / base.options.items);
      },

      max : function () {
          var base = this,
              maximum = ((base.itemsAmount * base.itemWidth) - base.options.items * base.itemWidth) * -1;
          if (base.options.items > base.itemsAmount) {
              base.maximumItem = 0;
              maximum = 0;
              base.maximumPixels = 0;
          } else {
              base.maximumItem = base.itemsAmount - base.options.items;
              base.maximumPixels = maximum;
          }
          return maximum;
      },

      min : function () {
          return 0;
      },

      loops : function () {
          var base = this,
              prev = 0,
              elWidth = 0,
              i,
              item,
              roundPageNum;

          base.positionsInArray = [0];
          base.pagesInArray = [];

          for (i = 0; i < base.itemsAmount; i += 1) {
              elWidth += base.itemWidth;
              base.positionsInArray.push(-elWidth);

              if (base.options.scrollPerPage === true) {
                  item = $(base.$owlItems[i]);
                  roundPageNum = item.data("owl-roundPages");
                  if (roundPageNum !== prev) {
                      base.pagesInArray[prev] = base.positionsInArray[i];
                      prev = roundPageNum;
                  }
              }
          }
      },

      buildControls : function () {
          var base = this;
          if (base.options.navigation === true || base.options.pagination === true) {
              base.owlControls = $("<div class=\"owl-controls\"/>").toggleClass("clickable", !base.browser.isTouch).appendTo(base.$elem);
          }
          if (base.options.pagination === true) {
              base.buildPagination();
          }
          if (base.options.navigation === true) {
              base.buildButtons();
          }
      },

      buildButtons : function () {
          var base = this,
              buttonsWrapper = $("<div class=\"owl-buttons\"/>");
          base.owlControls.append(buttonsWrapper);

          base.buttonPrev = $("<div/>", {
              "class" : "owl-prev",
              "html" : base.options.navigationText[0] || ""
          });

          base.buttonNext = $("<div/>", {
              "class" : "owl-next",
              "html" : base.options.navigationText[1] || ""
          });

          buttonsWrapper
              .append(base.buttonPrev)
              .append(base.buttonNext);

          buttonsWrapper.on("touchstart.owlControls mousedown.owlControls", "div[class^=\"owl\"]", function (event) {
              event.preventDefault();
          });

          buttonsWrapper.on("touchend.owlControls mouseup.owlControls", "div[class^=\"owl\"]", function (event) {
              event.preventDefault();
              if ($(this).hasClass("owl-next")) {
                  base.next();
              } else {
                  base.prev();
              }
          });
      },

      buildPagination : function () {
          var base = this;

          base.paginationWrapper = $("<div class=\"owl-pagination\"/>");
          base.owlControls.append(base.paginationWrapper);

          base.paginationWrapper.on("touchend.owlControls mouseup.owlControls", ".owl-page", function (event) {
              event.preventDefault();
              if (Number($(this).data("owl-page")) !== base.currentItem) {
                  base.goTo(Number($(this).data("owl-page")), true);
              }
          });
      },

      updatePagination : function () {
          var base = this,
              counter,
              lastPage,
              lastItem,
              i,
              paginationButton,
              paginationButtonInner;

          if (base.options.pagination === false) {
              return false;
          }

          base.paginationWrapper.html("");

          counter = 0;
          lastPage = base.itemsAmount - base.itemsAmount % base.options.items;

          for (i = 0; i < base.itemsAmount; i += 1) {
              if (i % base.options.items === 0) {
                  counter += 1;
                  if (lastPage === i) {
                      lastItem = base.itemsAmount - base.options.items;
                  }
                  paginationButton = $("<div/>", {
                      "class" : "owl-page"
                  });
                  paginationButtonInner = $("<span></span>", {
                      "text": base.options.paginationNumbers === true ? counter : "",
                      "class": base.options.paginationNumbers === true ? "owl-numbers" : ""
                  });
                  paginationButton.append(paginationButtonInner);

                  paginationButton.data("owl-page", lastPage === i ? lastItem : i);
                  paginationButton.data("owl-roundPages", counter);

                  base.paginationWrapper.append(paginationButton);
              }
          }
          base.checkPagination();
      },
      checkPagination : function () {
          var base = this;
          if (base.options.pagination === false) {
              return false;
          }
          base.paginationWrapper.find(".owl-page").each(function () {
              if ($(this).data("owl-roundPages") === $(base.$owlItems[base.currentItem]).data("owl-roundPages")) {
                  base.paginationWrapper
                      .find(".owl-page")
                      .removeClass("active");
                  $(this).addClass("active");
              }
          });
      },

      checkNavigation : function () {
          var base = this;

          if (base.options.navigation === false) {
              return false;
          }
          if (base.options.rewindNav === false) {
              if (base.currentItem === 0 && base.maximumItem === 0) {
                  base.buttonPrev.addClass("disabled");
                  base.buttonNext.addClass("disabled");
              } else if (base.currentItem === 0 && base.maximumItem !== 0) {
                  base.buttonPrev.addClass("disabled");
                  base.buttonNext.removeClass("disabled");
              } else if (base.currentItem === base.maximumItem) {
                  base.buttonPrev.removeClass("disabled");
                  base.buttonNext.addClass("disabled");
              } else if (base.currentItem !== 0 && base.currentItem !== base.maximumItem) {
                  base.buttonPrev.removeClass("disabled");
                  base.buttonNext.removeClass("disabled");
              }
          }
      },

      updateControls : function () {
          var base = this;
          base.updatePagination();
          base.checkNavigation();
          if (base.owlControls) {
              if (base.options.items >= base.itemsAmount) {
                  base.owlControls.hide();
              } else {
                  base.owlControls.show();
              }
          }
      },

      destroyControls : function () {
          var base = this;
          if (base.owlControls) {
              base.owlControls.remove();
          }
      },

      next : function (speed) {
          var base = this, rewindPages = (base.options.items > 1) ? 2 : 1,
              pageToAdd = (base.options.items > 1) ? 1 : 0;

          if (base.isTransition) {
              return false;
          }

          base.currentItem += base.options.scrollPerPage === true ? base.options.items - pageToAdd : 1;

          if (base.currentItem > base.maximumItem + (base.options.scrollPerPage === true ? (base.options.items - rewindPages) : 0)) {
              if (base.options.rewindNav === true) {
                  base.currentItem = 0;
                  speed = "rewind";
              } else {
                  base.currentItem = base.maximumItem;
                  return false;
              }
          }
          base.goTo(base.currentItem, speed);
      },

      prev : function (speed) {
          var base = this,
              pageToAdd = (base.options.items > 1) ? 1 : 0;

          if (base.isTransition) {
              return false;
          }

          if (base.options.scrollPerPage === true && base.currentItem > 0 && base.currentItem < base.options.items) {
              base.currentItem = 0;
          } else {
            base.currentItem -= base.options.scrollPerPage === true ? base.options.items - pageToAdd : 1;
          }
          if (base.currentItem < 0) {
              if (base.options.rewindNav === true) {
                  base.currentItem = base.maximumItem;
                  speed = "rewind";
              } else {
                  base.currentItem = 0;
                  return false;
              }
          }
          base.goTo(base.currentItem, speed);
      },

      goTo : function (position, speed, drag) {
          var base = this,
              goToPixel;

          if (base.isTransition) {
              return false;
          }
          if (typeof base.options.beforeMove === "function") {
              base.options.beforeMove.apply(this, [base.$elem]);
          }
          if (position >= base.maximumItem) {
              position = base.maximumItem;
          } else if (position <= 0) {
              position = 0;
          }

          base.currentItem = base.owl.currentItem = position;
          if (base.options.transitionStyle !== false && drag !== "drag" && base.options.items === 1 && base.browser.support3d === true) {
              base.swapSpeed(0);
              if (base.browser.support3d === true) {
                  base.transition3d(base.positionsInArray[position]);
              } else {
                  base.css2slide(base.positionsInArray[position], 1);
              }
              base.afterGo();
              base.singleItemTransition();
              return false;
          }
          goToPixel = base.positionsInArray[position];

          if (base.browser.support3d === true) {
              base.isCss3Finish = false;

              if (speed === true) {
                  base.swapSpeed("paginationSpeed");
                  window.setTimeout(function () {
                      base.isCss3Finish = true;
                  }, base.options.paginationSpeed);

              } else if (speed === "rewind") {
                  base.swapSpeed(base.options.rewindSpeed);
                  window.setTimeout(function () {
                      base.isCss3Finish = true;
                  }, base.options.rewindSpeed);

              } else {
                  base.swapSpeed("slideSpeed");
                  window.setTimeout(function () {
                      base.isCss3Finish = true;
                  }, base.options.slideSpeed);
              }
              base.transition3d(goToPixel);
          } else {
              if (speed === true) {
                  base.css2slide(goToPixel, base.options.paginationSpeed);
              } else if (speed === "rewind") {
                  base.css2slide(goToPixel, base.options.rewindSpeed);
              } else {
                  base.css2slide(goToPixel, base.options.slideSpeed);
              }
          }
          base.afterGo();
      },

      jumpTo : function (position) {
          var base = this;
          if (typeof base.options.beforeMove === "function") {
              base.options.beforeMove.apply(this, [base.$elem]);
          }
          if (position >= base.maximumItem || position === -1) {
              position = base.maximumItem;
          } else if (position <= 0) {
              position = 0;
          }
          base.swapSpeed(0);
          if (base.browser.support3d === true) {
              base.transition3d(base.positionsInArray[position]);
          } else {
              base.css2slide(base.positionsInArray[position], 1);
          }
          base.currentItem = base.owl.currentItem = position;
          base.afterGo();
      },

      afterGo : function () {
          var base = this;

          base.prevArr.push(base.currentItem);
          base.prevItem = base.owl.prevItem = base.prevArr[base.prevArr.length - 2];
          base.prevArr.shift(0);

          if (base.prevItem !== base.currentItem) {
              base.checkPagination();
              base.checkNavigation();
              base.eachMoveUpdate();

              if (base.options.autoPlay !== false) {
                  base.checkAp();
              }
          }
          if (typeof base.options.afterMove === "function" && base.prevItem !== base.currentItem) {
              base.options.afterMove.apply(this, [base.$elem]);
          }
      },

      stop : function () {
          var base = this;
          base.apStatus = "stop";
          window.clearInterval(base.autoPlayInterval);
      },


      dragging : function (bool) {
          var base = this;
          base.options.dragging = bool;

      },


      checkAp : function () {
          var base = this;
          if (base.apStatus !== "stop") {
              base.play();
          }
      },

      play : function () {
          var base = this;
          base.apStatus = "play";
          if (base.options.autoPlay === false) {
              return false;
          }
          window.clearInterval(base.autoPlayInterval);
          base.autoPlayInterval = window.setInterval(function () {
              base.next(true);
          }, base.options.autoPlay);
      },

      swapSpeed : function (action) {
          var base = this;
          if (action === "slideSpeed") {
              base.$owlWrapper.css(base.addCssSpeed(base.options.slideSpeed));
          } else if (action === "paginationSpeed") {
              base.$owlWrapper.css(base.addCssSpeed(base.options.paginationSpeed));
          } else if (typeof action !== "string") {
              base.$owlWrapper.css(base.addCssSpeed(action));
          }
      },

      addCssSpeed : function (speed) {
          return {
              "-webkit-transition": "all " + speed + "ms ease",
              "-moz-transition": "all " + speed + "ms ease",
              "-o-transition": "all " + speed + "ms ease",
              "transition": "all " + speed + "ms ease"
          };
      },

      removeTransition : function () {
          return {
              "-webkit-transition": "",
              "-moz-transition": "",
              "-o-transition": "",
              "transition": ""
          };
      },

      doTranslate : function (pixels) {
          return {
              "-webkit-transform": "translate3d(" + pixels + "px, 0px, 0px)",
              "-moz-transform": "translate3d(" + pixels + "px, 0px, 0px)",
              "-o-transform": "translate3d(" + pixels + "px, 0px, 0px)",
              "-ms-transform": "translate3d(" + pixels + "px, 0px, 0px)",
              "transform": "translate3d(" + pixels + "px, 0px,0px)"
          };
      },

      transition3d : function (value) {
          var base = this;
          base.$owlWrapper.css(base.doTranslate(value));
      },

      css2move : function (value) {
          var base = this;
          base.$owlWrapper.css({"left" : value});
      },

      css2slide : function (value, speed) {
          var base = this;

          base.isCssFinish = false;
          base.$owlWrapper.stop(true, true).animate({
              "left" : value
          }, {
              duration : speed || base.options.slideSpeed,
              complete : function () {
                  base.isCssFinish = true;
              }
          });
      },

      checkBrowser : function () {
          var base = this,
              translate3D = "translate3d(0px, 0px, 0px)",
              tempElem = document.createElement("div"),
              regex,
              asSupport,
              support3d,
              isTouch;

          tempElem.style.cssText = "  -moz-transform:" + translate3D +
                                "; -ms-transform:"     + translate3D +
                                "; -o-transform:"      + translate3D +
                                "; -webkit-transform:" + translate3D +
                                "; transform:"         + translate3D;
          regex = /translate3d\(0px, 0px, 0px\)/g;
          asSupport = tempElem.style.cssText.match(regex);
          support3d = (asSupport !== null && asSupport.length === 1);

          isTouch = "ontouchstart" in window || window.navigator.msMaxTouchPoints;

          base.browser = {
              "support3d" : support3d,
              "isTouch" : isTouch
          };
      },

      moveEvents : function () {
          var base = this;
          if (base.options.mouseDrag !== false || base.options.touchDrag !== false) {
              base.gestures();
              base.disabledEvents();
          }
      },

      eventTypes : function () {
          var base = this,
              types = ["s", "e", "x"];

          base.ev_types = {};

          if (base.options.mouseDrag === true && base.options.touchDrag === true) {
              types = [
                  "touchstart.owl mousedown.owl",
                  "touchmove.owl mousemove.owl",
                  "touchend.owl touchcancel.owl mouseup.owl"
              ];
          } else if (base.options.mouseDrag === false && base.options.touchDrag === true) {
              types = [
                  "touchstart.owl",
                  "touchmove.owl",
                  "touchend.owl touchcancel.owl"
              ];
          } else if (base.options.mouseDrag === true && base.options.touchDrag === false) {
              types = [
                  "mousedown.owl",
                  "mousemove.owl",
                  "mouseup.owl"
              ];
          }

          base.ev_types.start = types[0];
          base.ev_types.move = types[1];
          base.ev_types.end = types[2];
      },

      disabledEvents :  function () {
          var base = this;
          base.$elem.on("dragstart.owl", function (event) { event.preventDefault(); });
          base.$elem.on("mousedown.disableTextSelect", function (e) {
              return $(e.target).is('input, textarea, select, option');
          });
      },

      gestures : function () {
          /*jslint unparam: true*/
          var base = this,
              locals = {
                  offsetX : 0,
                  offsetY : 0,
                  baseElWidth : 0,
                  relativePos : 0,
                  position: null,
                  minSwipe : null,
                  maxSwipe: null,
                  sliding : null,
                  dargging: null,
                  targetElement : null
              };

          base.isCssFinish = true;

          function getTouches(event) {
              if (event.touches !== undefined) {
                  return {
                      x : event.touches[0].pageX,
                      y : event.touches[0].pageY
                  };
              }

              if (event.touches === undefined) {
                  if (event.pageX !== undefined) {
                      return {
                          x : event.pageX,
                          y : event.pageY
                      };
                  }
                  if (event.pageX === undefined) {
                      return {
                          x : event.clientX,
                          y : event.clientY
                      };
                  }
              }
          }

          function swapEvents(type) {
              if (type === "on") {
                  $(document).on(base.ev_types.move, dragMove);
                  $(document).on(base.ev_types.end, dragEnd);
              } else if (type === "off") {
                  $(document).off(base.ev_types.move);
                  $(document).off(base.ev_types.end);
              }
          }

          function dragStart(event) {
              var ev = event.originalEvent || event || window.event,
                  position;



              if(!base.options.dragging){
                return;
              }

              if (ev.which === 3) {
                  return false;
              }
              if (base.itemsAmount <= base.options.items) {
                  return;
              }
              if (base.isCssFinish === false && !base.options.dragBeforeAnimFinish) {
                  return false;
              }
              if (base.isCss3Finish === false && !base.options.dragBeforeAnimFinish) {
                  return false;
              }

              if (base.options.autoPlay !== false) {
                  window.clearInterval(base.autoPlayInterval);
              }

              if (base.browser.isTouch !== true && !base.$owlWrapper.hasClass("grabbing")) {
                  base.$owlWrapper.addClass("grabbing");
              }

              base.newPosX = 0;
              base.newRelativeX = 0;

              $(this).css(base.removeTransition());

              position = $(this).position();
              locals.relativePos = position.left;

              locals.offsetX = getTouches(ev).x - position.left;
              locals.offsetY = getTouches(ev).y - position.top;

              swapEvents("on");

              locals.sliding = false;
              locals.targetElement = ev.target || ev.srcElement;
          }

          function dragMove(event) {

             if(!base.options.dragging){
                return;
              }

              var ev = event.originalEvent || event || window.event,
                  minSwipe,
                  maxSwipe;

              base.newPosX = getTouches(ev).x - locals.offsetX;
              base.newPosY = getTouches(ev).y - locals.offsetY;
              base.newRelativeX = base.newPosX - locals.relativePos;



              if (typeof base.options.startDragging === "function" && locals.dragging !== true && base.newRelativeX !== 0) {
                  locals.dragging = true;
                  base.options.startDragging.apply(base, [base.$elem]);

              }


              if ((base.newRelativeX > 16 || base.newRelativeX < -16) && (base.browser.isTouch === true)) {
                  if (ev.preventDefault !== undefined) {
                      ev.preventDefault();
                  } else {
                      ev.returnValue = false;
                  }
                  locals.sliding = true;
              }

              if ((base.newPosY > 10 || base.newPosY < -10) && locals.sliding === false) {
                  $(document).off("touchmove.owl");
              }

              minSwipe = function () {
                  return base.newRelativeX / 5;
              };

              maxSwipe = function () {
                  return base.maximumPixels + base.newRelativeX / 5;
              };

              base.newPosX = Math.max(Math.min(base.newPosX, minSwipe()), maxSwipe());
              if (base.browser.support3d === true) {
                  base.transition3d(base.newPosX);
              } else {
                  base.css2move(base.newPosX);
              }
          }

          function dragEnd(event) {
              var ev = event.originalEvent || event || window.event,
                  newPosition,
                  handlers,
                  owlStopEvent;

              ev.target = ev.target || ev.srcElement;

              locals.dragging = false;

              if (base.browser.isTouch !== true) {
                  base.$owlWrapper.removeClass("grabbing");
              }

              if (base.newRelativeX < 50) {
                  base.dragDirection = base.owl.dragDirection = "left";
              } else {
                  base.dragDirection = base.owl.dragDirection = "right";
              }

              if (base.newRelativeX !== 0) {
                  newPosition = base.getNewPosition();
                  base.goTo(newPosition, false, "drag");
                  if (locals.targetElement === ev.target && base.browser.isTouch !== true) {
                      $(ev.target).on("click.disable", function (ev) {
                          ev.stopImmediatePropagation();
                          ev.stopPropagation();
                          ev.preventDefault();
                          $(ev.target).off("click.disable");
                      });
                      handlers = $._data(ev.target, "events").click;
                      owlStopEvent = handlers.pop();
                      handlers.splice(0, 0, owlStopEvent);
                  }
              }
              swapEvents("off");
          }
          base.$elem.on(base.ev_types.start, ".owl-wrapper", dragStart);
      },

      getNewPosition : function () {
          var base = this,
              newPosition = base.closestItem();

          if (newPosition > base.maximumItem) {
              base.currentItem = base.maximumItem;
              newPosition  = base.maximumItem;
          } else if (base.newPosX >= 0) {
              newPosition = 0;
              base.currentItem = 0;
          }
          return newPosition;
      },
      closestItem : function () {
          var base = this,
              array = base.options.scrollPerPage === true ? base.pagesInArray : base.positionsInArray,
              goal = base.newPosX,
              closest = null;

          $.each(array, function (i, v) {
              if (goal - (base.itemWidth / 20) > array[i + 1] && goal - (base.itemWidth / 20) < v && base.moveDirection() === "left") {
                  closest = v;
                  if (base.options.scrollPerPage === true) {
                      base.currentItem = $.inArray(closest, base.positionsInArray);
                  } else {
                      base.currentItem = i;
                  }
              } else if (goal + (base.itemWidth / 20) < v && goal + (base.itemWidth / 20) > (array[i + 1] || array[i] - base.itemWidth) && base.moveDirection() === "right") {
                  if (base.options.scrollPerPage === true) {
                      closest = array[i + 1] || array[array.length - 1];
                      base.currentItem = $.inArray(closest, base.positionsInArray);
                  } else {
                      closest = array[i + 1];
                      base.currentItem = i + 1;
                  }
              }
          });
          return base.currentItem;
      },

      moveDirection : function () {
          var base = this,
              direction;
          if (base.newRelativeX < 0) {
              direction = "right";
              base.playDirection = "next";
          } else {
              direction = "left";
              base.playDirection = "prev";
          }
          return direction;
      },

      customEvents : function () {
          /*jslint unparam: true*/
          var base = this;
          base.$elem.on("owl.next", function () {
              base.next();
          });
          base.$elem.on("owl.prev", function () {
              base.prev();
          });
          base.$elem.on("owl.play", function (event, speed) {
              base.options.autoPlay = speed;
              base.play();
              base.hoverStatus = "play";
          });
          base.$elem.on("owl.stop", function () {
              base.stop();
              base.hoverStatus = "stop";
          });
          base.$elem.on("owl.goTo", function (event, item) {
              base.goTo(item);
          });
          base.$elem.on("owl.jumpTo", function (event, item) {
              base.jumpTo(item);
          });

           base.$elem.on("owl.dragging", function (event, item) {
              base.dragging(item);
          });
      },

      stopOnHover : function () {
          var base = this;
          if (base.options.stopOnHover === true && base.browser.isTouch !== true && base.options.autoPlay !== false) {
              base.$elem.on("mouseover", function () {
                  base.stop();
              });
              base.$elem.on("mouseout", function () {
                  if (base.hoverStatus !== "stop") {
                      base.play();
                  }
              });
          }
      },

      lazyLoad : function () {
          var base = this,
              i,
              $item,
              itemNumber,
              $lazyImg,
              follow;

          if (base.options.lazyLoad === false) {
              return false;
          }
          for (i = 0; i < base.itemsAmount; i += 1) {
              $item = $(base.$owlItems[i]);

              if ($item.data("owl-loaded") === "loaded") {
                  continue;
              }

              itemNumber = $item.data("owl-item");
              $lazyImg = $item.find(".lazyOwl");

              if (typeof $lazyImg.data("src") !== "string") {
                  $item.data("owl-loaded", "loaded");
                  continue;
              }
              if ($item.data("owl-loaded") === undefined) {
                  $lazyImg.hide();
                  $item.addClass("loading").data("owl-loaded", "checked");
              }
              if (base.options.lazyFollow === true) {
                  follow = itemNumber >= base.currentItem;
              } else {
                  follow = true;
              }
              if (follow && itemNumber < base.currentItem + base.options.items && $lazyImg.length) {
                  $lazyImg.each(function() {
                      base.lazyPreload($item, $(this));
                  });
              }
          }
      },

      lazyPreload : function ($item, $lazyImg) {
          var base = this,
              iterations = 0,
              isBackgroundImg;

          if ($lazyImg.prop("tagName") === "DIV") {
              $lazyImg.css("background-image", "url(" + $lazyImg.data("src") + ")");
              isBackgroundImg = true;
          } else {
              $lazyImg[0].src = $lazyImg.data("src");
          }

          function showImage() {
              $item.data("owl-loaded", "loaded").removeClass("loading");
              $lazyImg.removeAttr("data-src");
              if (base.options.lazyEffect === "fade") {
                  $lazyImg.fadeIn(400);
              } else {
                  $lazyImg.show();
              }
              if (typeof base.options.afterLazyLoad === "function") {
                  base.options.afterLazyLoad.apply(this, [base.$elem]);
              }
          }

          function checkLazyImage() {
              iterations += 1;
              if (base.completeImg($lazyImg.get(0)) || isBackgroundImg === true) {
                  showImage();
              } else if (iterations <= 100) {//if image loads in less than 10 seconds
                  window.setTimeout(checkLazyImage, 100);
              } else {
                  showImage();
              }
          }

          checkLazyImage();
      },

      autoHeight : function () {
          var base = this,
              $currentimg = $(base.$owlItems[base.currentItem]).find("img"),
              iterations;

          function addHeight() {
              var $currentItem = $(base.$owlItems[base.currentItem]).height();
              base.wrapperOuter.css("height", $currentItem + "px");
              if (!base.wrapperOuter.hasClass("autoHeight")) {
                  window.setTimeout(function () {
                      base.wrapperOuter.addClass("autoHeight");
                  }, 0);
              }
          }

          function checkImage() {
              iterations += 1;
              if (base.completeImg($currentimg.get(0))) {
                  addHeight();
              } else if (iterations <= 100) { //if image loads in less than 10 seconds
                  window.setTimeout(checkImage, 100);
              } else {
                  base.wrapperOuter.css("height", ""); //Else remove height attribute
              }
          }

          if ($currentimg.get(0) !== undefined) {
              iterations = 0;
              checkImage();
          } else {
              addHeight();
          }
      },

      completeImg : function (img) {
          var naturalWidthType;

          if (!img.complete) {
              return false;
          }
          naturalWidthType = typeof img.naturalWidth;
          if (naturalWidthType !== "undefined" && img.naturalWidth === 0) {
              return false;
          }
          return true;
      },

      onVisibleItems : function () {
          var base = this,
              i;

          if (base.options.addClassActive === true) {
              base.$owlItems.removeClass("active");
          }
          base.visibleItems = [];
          for (i = base.currentItem; i < base.currentItem + base.options.items; i += 1) {
              base.visibleItems.push(i);

              if (base.options.addClassActive === true) {
                  $(base.$owlItems[i]).addClass("active");
              }
          }
          base.owl.visibleItems = base.visibleItems;
      },

      transitionTypes : function (className) {
          var base = this;
          //Currently available: "fade", "backSlide", "goDown", "fadeUp"
          base.outClass = "owl-" + className + "-out";
          base.inClass = "owl-" + className + "-in";
      },

      singleItemTransition : function () {
          var base = this,
              outClass = base.outClass,
              inClass = base.inClass,
              $currentItem = base.$owlItems.eq(base.currentItem),
              $prevItem = base.$owlItems.eq(base.prevItem),
              prevPos = Math.abs(base.positionsInArray[base.currentItem]) + base.positionsInArray[base.prevItem],
              origin = Math.abs(base.positionsInArray[base.currentItem]) + base.itemWidth / 2,
              animEnd = 'webkitAnimationEnd oAnimationEnd MSAnimationEnd animationend';

          base.isTransition = true;

          base.$owlWrapper
              .addClass('owl-origin')
              .css({
                  "-webkit-transform-origin" : origin + "px",
                  "-moz-perspective-origin" : origin + "px",
                  "perspective-origin" : origin + "px"
              });
          function transStyles(prevPos) {
              return {
                  "position" : "relative",
                  "left" : prevPos + "px"
              };
          }

          $prevItem
              .css(transStyles(prevPos, 10))
              .addClass(outClass)
              .on(animEnd, function () {
                  base.endPrev = true;
                  $prevItem.off(animEnd);
                  base.clearTransStyle($prevItem, outClass);
              });

          $currentItem
              .addClass(inClass)
              .on(animEnd, function () {
                  base.endCurrent = true;
                  $currentItem.off(animEnd);
                  base.clearTransStyle($currentItem, inClass);
              });
      },

      clearTransStyle : function (item, classToRemove) {
          var base = this;
          item.css({
              "position" : "",
              "left" : ""
          }).removeClass(classToRemove);

          if (base.endPrev && base.endCurrent) {
              base.$owlWrapper.removeClass('owl-origin');
              base.endPrev = false;
              base.endCurrent = false;
              base.isTransition = false;
          }
      },

      owlStatus : function () {
          var base = this;
          base.owl = {
              "userOptions"   : base.userOptions,
              "baseElement"   : base.$elem,
              "userItems"     : base.$userItems,
              "owlItems"      : base.$owlItems,
              "currentItem"   : base.currentItem,
              "prevItem"      : base.prevItem,
              "visibleItems"  : base.visibleItems,
              "isTouch"       : base.browser.isTouch,
              "browser"       : base.browser,
              "dragDirection" : base.dragDirection
          };
      },

      clearEvents : function () {
          var base = this;
          base.$elem.off(".owl owl mousedown.disableTextSelect");
          $(document).off(".owl owl");
          $(window).off("resize", base.resizer);
      },

      unWrap : function () {
          var base = this;
          if (base.$elem.children().length !== 0) {
              base.$owlWrapper.unwrap();
              base.$userItems.unwrap().unwrap();
              if (base.owlControls) {
                  base.owlControls.remove();
              }
          }
          base.clearEvents();
          base.$elem.attr({
              style: base.$elem.data("owl-originalStyles") || ""
          });
    base.$elem.addClass(base.$elem.data("owl-originalClasses"))
      },

      destroy : function () {
          var base = this;
          base.stop();
          window.clearInterval(base.checkVisible);
          base.unWrap();
          base.$elem.removeData();
      },

      reinit : function (newOptions) {
          var base = this,
              options = $.extend({}, base.userOptions, newOptions);
          base.unWrap();
          base.init(options, base.$elem);
      },

      addItem : function (htmlString, targetPosition) {
          var base = this,
              position;

          if (!htmlString) {return false; }

          if (base.$elem.children().length === 0) {
              base.$elem.append(htmlString);
              base.setVars();
              return false;
          }
          base.unWrap();
          if (targetPosition === undefined || targetPosition === -1) {
              position = -1;
          } else {
              position = targetPosition;
          }
          if (position >= base.$userItems.length || position === -1) {
              base.$userItems.eq(-1).after(htmlString);
          } else {
              base.$userItems.eq(position).before(htmlString);
          }

          base.setVars();
      },

      removeItem : function (targetPosition) {
          var base = this,
              position;

          if (base.$elem.children().length === 0) {
              return false;
          }
          if (targetPosition === undefined || targetPosition === -1) {
              position = -1;
          } else {
              position = targetPosition;
          }

          base.unWrap();
          base.$userItems.eq(position).remove();
          base.setVars();
      }

  };

  $.fn.owlCarousel = function (options) {
      return this.each(function () {
          if ($(this).data("owl-init") === true) {
              return false;
          }
          $(this).data("owl-init", true);
          var carousel = Object.create(Carousel);
          carousel.init(options, this);
          $.data(this, "owlCarousel", carousel);
      });
  };

  $.fn.owlCarousel.options = {

      items : 5,
      itemsCustom : false,
      itemsDesktop : [1199, 4],
      itemsDesktopSmall : [979, 3],
      itemsTablet : [768, 2],
      itemsTabletSmall : false,
      itemsMobile : [479, 1],
      singleItem : false,
      itemsScaleUp : false,

      slideSpeed : 200,
      paginationSpeed : 800,
      rewindSpeed : 1000,

      autoPlay : false,
      stopOnHover : false,

      navigation : false,
      navigationText : ["prev", "next"],
      rewindNav : true,
      scrollPerPage : true,

      pagination : true,
      paginationNumbers : false,

      responsive : true,
      responsiveRefreshRate : 200,
      responsiveBaseWidth : window,

      baseClass : "owl-carousel",
      theme : "owl-theme",

      lazyLoad : false,
      lazyFollow : true,
      lazyEffect : "fade",

      autoHeight : false,

      jsonPath : false,
      jsonSuccess : false,

      dragBeforeAnimFinish : true,
      mouseDrag : true,
      touchDrag : true,
      dragging: true,

      addClassActive : false,
      transitionStyle : false,

      beforeUpdate : false,
      afterUpdate : false,
      beforeInit : false,
      afterInit : false,
      beforeMove : false,
      afterMove : false,
      afterAction : false,
      startDragging : false,
      afterLazyLoad: false
  };
}(jQuery, window, document));
/*!
 * Bootstrap-select v1.7.2 (http://silviomoreto.github.io/bootstrap-select)
 *
 * Copyright 2013-2015 bootstrap-select
 * Licensed under MIT (https://github.com/silviomoreto/bootstrap-select/blob/master/LICENSE)
 */

(function (root, factory) {
  if (typeof define === 'function' && define.amd) {
    // AMD. Register as an anonymous module unless amdModuleId is set
    define(["jquery"], function (a0) {
      return (factory(a0));
    });
  } else if (typeof exports === 'object') {
    // Node. Does not work with strict CommonJS, but
    // only CommonJS-like environments that support module.exports,
    // like Node.
    module.exports = factory(require("jquery"));
  } else {
    factory(jQuery);
  }
}(this, function () {

(function ($) {
  'use strict';

  //<editor-fold desc="Shims">
  if (!String.prototype.includes) {
    (function () {
      'use strict'; // needed to support `apply`/`call` with `undefined`/`null`
      var toString = {}.toString;
      var defineProperty = (function () {
        // IE 8 only supports `Object.defineProperty` on DOM elements
        try {
          var object = {};
          var $defineProperty = Object.defineProperty;
          var result = $defineProperty(object, object, object) && $defineProperty;
        } catch (error) {
        }
        return result;
      }());
      var indexOf = ''.indexOf;
      var includes = function (search) {
        if (this == null) {
          throw TypeError();
        }
        var string = String(this);
        if (search && toString.call(search) == '[object RegExp]') {
          throw TypeError();
        }
        var stringLength = string.length;
        var searchString = String(search);
        var searchLength = searchString.length;
        var position = arguments.length > 1 ? arguments[1] : undefined;
        // `ToInteger`
        var pos = position ? Number(position) : 0;
        if (pos != pos) { // better `isNaN`
          pos = 0;
        }
        var start = Math.min(Math.max(pos, 0), stringLength);
        // Avoid the `indexOf` call if no match is possible
        if (searchLength + start > stringLength) {
          return false;
        }
        return indexOf.call(string, searchString, pos) != -1;
      };
      if (defineProperty) {
        defineProperty(String.prototype, 'includes', {
          'value': includes,
          'configurable': true,
          'writable': true
        });
      } else {
        String.prototype.includes = includes;
      }
    }());
  }

  if (!String.prototype.startsWith) {
    (function () {
      'use strict'; // needed to support `apply`/`call` with `undefined`/`null`
      var defineProperty = (function () {
        // IE 8 only supports `Object.defineProperty` on DOM elements
        try {
          var object = {};
          var $defineProperty = Object.defineProperty;
          var result = $defineProperty(object, object, object) && $defineProperty;
        } catch (error) {
        }
        return result;
      }());
      var toString = {}.toString;
      var startsWith = function (search) {
        if (this == null) {
          throw TypeError();
        }
        var string = String(this);
        if (search && toString.call(search) == '[object RegExp]') {
          throw TypeError();
        }
        var stringLength = string.length;
        var searchString = String(search);
        var searchLength = searchString.length;
        var position = arguments.length > 1 ? arguments[1] : undefined;
        // `ToInteger`
        var pos = position ? Number(position) : 0;
        if (pos != pos) { // better `isNaN`
          pos = 0;
        }
        var start = Math.min(Math.max(pos, 0), stringLength);
        // Avoid the `indexOf` call if no match is possible
        if (searchLength + start > stringLength) {
          return false;
        }
        var index = -1;
        while (++index < searchLength) {
          if (string.charCodeAt(start + index) != searchString.charCodeAt(index)) {
            return false;
          }
        }
        return true;
      };
      if (defineProperty) {
        defineProperty(String.prototype, 'startsWith', {
          'value': startsWith,
          'configurable': true,
          'writable': true
        });
      } else {
        String.prototype.startsWith = startsWith;
      }
    }());
  }

  if (!Object.keys) {
    Object.keys = function (
      o, // object
      k, // key
      r  // result array
      ){
      // initialize object and result
      r=[];
      // iterate over object keys
      for (k in o) 
          // fill result array with non-prototypical keys
        r.hasOwnProperty.call(o, k) && r.push(k);
      // return result
      return r
    };
  }
  //</editor-fold>

  // Case insensitive contains search
  $.expr[':'].icontains = function (obj, index, meta) {
    var $obj = $(obj);
    var haystack = ($obj.data('tokens') || $obj.text()).toUpperCase();
    return haystack.includes(meta[3].toUpperCase());
  };

  // Case insensitive begins search
  $.expr[':'].ibegins = function (obj, index, meta) {
    var $obj = $(obj);
    var haystack = ($obj.data('tokens') || $obj.text()).toUpperCase();
    return haystack.startsWith(meta[3].toUpperCase());
  };

  // Case and accent insensitive contains search
  $.expr[':'].aicontains = function (obj, index, meta) {
    var $obj = $(obj);
    var haystack = ($obj.data('tokens') || $obj.data('normalizedText') || $obj.text()).toUpperCase();
    return haystack.includes(meta[3].toUpperCase());
  };

  // Case and accent insensitive begins search
  $.expr[':'].aibegins = function (obj, index, meta) {
    var $obj = $(obj);
    var haystack = ($obj.data('tokens') || $obj.data('normalizedText') || $obj.text()).toUpperCase();
    return haystack.startsWith(meta[3].toUpperCase());
  };

  /**
   * Remove all diatrics from the given text.
   * @access private
   * @param {String} text
   * @returns {String}
   */
  function normalizeToBase(text) {
    var rExps = [
      {re: /[\xC0-\xC6]/g, ch: "A"},
      {re: /[\xE0-\xE6]/g, ch: "a"},
      {re: /[\xC8-\xCB]/g, ch: "E"},
      {re: /[\xE8-\xEB]/g, ch: "e"},
      {re: /[\xCC-\xCF]/g, ch: "I"},
      {re: /[\xEC-\xEF]/g, ch: "i"},
      {re: /[\xD2-\xD6]/g, ch: "O"},
      {re: /[\xF2-\xF6]/g, ch: "o"},
      {re: /[\xD9-\xDC]/g, ch: "U"},
      {re: /[\xF9-\xFC]/g, ch: "u"},
      {re: /[\xC7-\xE7]/g, ch: "c"},
      {re: /[\xD1]/g, ch: "N"},
      {re: /[\xF1]/g, ch: "n"}
    ];
    $.each(rExps, function () {
      text = text.replace(this.re, this.ch);
    });
    return text;
  }


  function htmlEscape(html) {
    var escapeMap = {
      '&': '&amp;',
      '<': '&lt;',
      '>': '&gt;',
      '"': '&quot;',
      "'": '&#x27;',
      '`': '&#x60;'
    };
    var source = '(?:' + Object.keys(escapeMap).join('|') + ')',
        testRegexp = new RegExp(source),
        replaceRegexp = new RegExp(source, 'g'),
        string = html == null ? '' : '' + html;
    return testRegexp.test(string) ? string.replace(replaceRegexp, function (match) {
      return escapeMap[match];
    }) : string;
  }

  var Selectpicker = function (element, options, e) {
    if (e) {
      e.stopPropagation();
      e.preventDefault();
    }

    this.$element = $(element);
    this.$newElement = null;
    this.$button = null;
    this.$menu = null;
    this.$lis = null;
    this.options = options;

    // If we have no title yet, try to pull it from the html title attribute (jQuery doesnt' pick it up as it's not a
    // data-attribute)
    if (this.options.title === null) {
      this.options.title = this.$element.attr('title');
    }

    //Expose public methods
    this.val = Selectpicker.prototype.val;
    this.render = Selectpicker.prototype.render;
    this.refresh = Selectpicker.prototype.refresh;
    this.setStyle = Selectpicker.prototype.setStyle;
    this.selectAll = Selectpicker.prototype.selectAll;
    this.deselectAll = Selectpicker.prototype.deselectAll;
    this.destroy = Selectpicker.prototype.remove;
    this.remove = Selectpicker.prototype.remove;
    this.show = Selectpicker.prototype.show;
    this.hide = Selectpicker.prototype.hide;

    this.init();
  };

  Selectpicker.VERSION = '1.7.2';

  // part of this is duplicated in i18n/defaults-en_US.js. Make sure to update both.
  Selectpicker.DEFAULTS = {
    noneSelectedText: '',
    noneResultsText: 'No results matched {0}',
    countSelectedText: function (numSelected, numTotal) {
      return (numSelected == 1) ? "{0} item selected" : "{0} items selected";
    },
    maxOptionsText: function (numAll, numGroup) {
      return [
        (numAll == 1) ? 'Limit reached ({n} item max)' : 'Limit reached ({n} items max)',
        (numGroup == 1) ? 'Group limit reached ({n} item max)' : 'Group limit reached ({n} items max)'
      ];
    },
    selectAllText: 'Select All',
    deselectAllText: 'Deselect All',
    doneButton: false,
    doneButtonText: 'Close',
    multipleSeparator: ', ',
    styleBase: 'btn',
    style: 'btn-default',
    size: 'auto',
    title: null,
    selectedTextFormat: 'values',
    width: false,
    container: false,
    hideDisabled: false,
    showSubtext: false,
    showIcon: true,
    showContent: true,
    dropupAuto: true,
    header: false,
    liveSearch: false,
    liveSearchPlaceholder: null,
    liveSearchNormalize: false,
    liveSearchStyle: 'contains',
    actionsBox: false,
    iconBase: 'glyphicon',
    tickIcon: 'glyphicon-ok',
    maxOptions: false,
    mobile: false,
    selectOnTab: false,
    dropdownAlignRight: false
  };

  Selectpicker.prototype = {

    constructor: Selectpicker,

    init: function () {
      var that = this,
          id = this.$element.attr('id');

      this.$element.addClass('bs-select-hidden');
      // store originalIndex (key) and newIndex (value) in this.liObj for fast accessibility
      // allows us to do this.$lis.eq(that.liObj[index]) instead of this.$lis.filter('[data-original-index="' + index + '"]')
      this.liObj = {};
      this.multiple = this.$element.prop('multiple');
      this.autofocus = this.$element.prop('autofocus');
      this.$newElement = this.createView();
      this.$element.after(this.$newElement);
      this.$button = this.$newElement.children('button');
      this.$menu = this.$newElement.children('.dropdown-menu');
      this.$menuInner = this.$menu.find('.inner');
      this.$searchbox = this.$menu.find('input');

      if (this.options.dropdownAlignRight)
        this.$menu.addClass('dropdown-menu-right');

      if (typeof id !== 'undefined') {
        this.$button.attr('data-id', id);
        $('label[for="' + id + '"]').click(function (e) {
          e.preventDefault();
          that.$button.focus();
        });
      }

      this.checkDisabled();
      this.clickListener();
      if (this.options.liveSearch) this.liveSearchListener();
      this.render();
      this.setStyle();
      this.setWidth();
      if (this.options.container) this.selectPosition();
      this.$menu.data('this', this);
      this.$newElement.data('this', this);
      if (this.options.mobile) this.mobile();

      this.$newElement.on('hide.bs.dropdown', function (e) {
        that.$element.trigger('hide.bs.select', e);
      });
      
      this.$newElement.on('hidden.bs.dropdown', function (e) {
        that.$element.trigger('hidden.bs.select', e);
      });
      
      this.$newElement.on('show.bs.dropdown', function (e) {
        that.$element.trigger('show.bs.select', e);
      });
      
      this.$newElement.on('shown.bs.dropdown', function (e) {
        that.$element.trigger('shown.bs.select', e);
      });

      setTimeout(function () {
        that.$element.trigger('loaded.bs.select');
      });
    },

    createDropdown: function () {
      // Options
      // If we are multiple, then add the show-tick class by default
      var multiple = this.multiple ? ' show-tick' : '',
          inputGroup = this.$element.parent().hasClass('input-group') ? ' input-group-btn' : '',
          autofocus = this.autofocus ? ' autofocus' : '';
      // Elements
      var header = this.options.header ? '<div class="popover-title"><button type="button" class="close" aria-hidden="true">&times;</button>' + this.options.header + '</div>' : '';
      var searchbox = this.options.liveSearch ?
      '<div class="bs-searchbox">' +
      '<input type="text" class="form-control" autocomplete="off"' +
      (null === this.options.liveSearchPlaceholder ? '' : ' placeholder="' + htmlEscape(this.options.liveSearchPlaceholder) + '"') + '>' +
      '</div>'
          : '';
      var actionsbox = this.multiple && this.options.actionsBox ?
      '<div class="bs-actionsbox">' +
      '<div class="btn-group btn-group-sm btn-block">' +
      '<button type="button" class="actions-btn bs-select-all btn btn-default">' +
      this.options.selectAllText +
      '</button>' +
      '<button type="button" class="actions-btn bs-deselect-all btn btn-default">' +
      this.options.deselectAllText +
      '</button>' +
      '</div>' +
      '</div>'
          : '';
      var donebutton = this.multiple && this.options.doneButton ?
      '<div class="bs-donebutton">' +
      '<div class="btn-group btn-block">' +
      '<button type="button" class="btn btn-sm btn-default">' +
      this.options.doneButtonText +
      '</button>' +
      '</div>' +
      '</div>'
          : '';
      var drop =
          '<div class="btn-group bootstrap-select' + multiple + inputGroup + '">' +
          '<button type="button" class="' + this.options.styleBase + ' dropdown-toggle" data-toggle="dropdown"' + autofocus + '>' +
          '<span class="filter-option pull-left"></span>&nbsp;' +
          '<span class="block-caret"><span class="caret"></span></span>' +
          '</button>' +
          '<div class="dropdown-menu open">' +
          '<div class="border-default-variant-tooltip open">' +
          header +
          searchbox +
          actionsbox +
          '<ul class="dropdown-menu-drop dropdown-border-variant inner" role="menu">' +
          '</ul>' +
          donebutton + 
          '</div>' +
          '</div>';

      return $(drop);
    },

    createView: function () {
      var $drop = this.createDropdown(),
          li = this.createLi();

      $drop.find('ul')[0].innerHTML = li;
      return $drop;
    },

    reloadLi: function () {
      //Remove all children.
      this.destroyLi();
      //Re build
      var li = this.createLi();
      this.$menu[0].innerHTML = li;
    },

    destroyLi: function () {
      this.$menu.find('li').remove();
    },

    createLi: function () {
      var that = this,
          _li = [],
          optID = 0,
          titleOption = document.createElement('option'),
          liIndex = -1; // increment liIndex whenever a new <li> element is created to ensure liObj is correct

      // Helper functions
      /**
       * @param content
       * @param [index]
       * @param [classes]
       * @param [optgroup]
       * @returns {string}
       */
      var generateLI = function (content, index, classes, optgroup) {
        return '<li' +
            ((typeof classes !== 'undefined' & '' !== classes) ? ' class="' + classes + '"' : '') +
            ((typeof index !== 'undefined' & null !== index) ? ' data-original-index="' + index + '"' : '') +
            ((typeof optgroup !== 'undefined' & null !== optgroup) ? 'data-optgroup="' + optgroup + '"' : '') +
            '>' + content + '</li>';
      };

      /**
       * @param text
       * @param [classes]
       * @param [inline]
       * @param [tokens]
       * @returns {string}
       */
      var generateA = function (text, classes, inline, tokens) {
        return '<a tabindex="0"' +
            (typeof classes !== 'undefined' ? ' class="' + classes + '"' : '') +
            (typeof inline !== 'undefined' ? ' style="' + inline + '"' : '') +
            (that.options.liveSearchNormalize ? ' data-normalized-text="' + normalizeToBase(htmlEscape(text)) + '"' : '') +
            (typeof tokens !== 'undefined' || tokens !== null ? ' data-tokens="' + tokens + '"' : '') +
            '>' + text +
            '<span class="' + that.options.iconBase + ' ' + that.options.tickIcon + ' check-mark"></span>' +
            '</a>';
      };

      if (this.options.title && !this.multiple) {
        // this option doesn't create a new <li> element, but does add a new option, so liIndex is decreased
        // since liObj is recalculated on every refresh, liIndex needs to be decreased even if the titleOption is already appended
        liIndex--;

        if (!this.$element.find('.bs-title-option').length) {
          // Use native JS to prepend option (faster)
          var element = this.$element[0];
          titleOption.className = 'bs-title-option';
          titleOption.appendChild(document.createTextNode(this.options.title));
          titleOption.value = '';
          element.insertBefore(titleOption, element.firstChild);
          // Check if selected attribute is already set on an option. If not, select the titleOption option.
          if (element.options[element.selectedIndex].getAttribute('selected') === null) titleOption.selected = true;
        }
      }

      this.$element.find('option').each(function (index) {
        var $this = $(this);

        liIndex++;

        if ($this.hasClass('bs-title-option')) return;

        // Get the class and text for the option
        var optionClass = this.className || '',
            inline = this.style.cssText,
            text = $this.data('content') ? $this.data('content') : $this.html(),
            tokens = $this.data('tokens') ? $this.data('tokens') : null,
            subtext = typeof $this.data('subtext') !== 'undefined' ? '<small class="text-muted">' + $this.data('subtext') + '</small>' : '',
            icon = typeof $this.data('icon') !== 'undefined' ? '<span class="' + that.options.iconBase + ' ' + $this.data('icon') + '"></span> ' : '',
            isDisabled = this.disabled || this.parentElement.tagName === 'OPTGROUP' && this.parentElement.disabled;

        if (icon !== '' && isDisabled) {
          icon = '<span>' + icon + '</span>';
        }

        if (that.options.hideDisabled && isDisabled) {
          liIndex--;
          return;
        }

        if (!$this.data('content')) {
          // Prepend any icon and append any subtext to the main text.
          text = icon + '<span class="text">' + text + subtext + '</span>';
        }

        if (this.parentElement.tagName === 'OPTGROUP' && $this.data('divider') !== true) {
          if ($this.index() === 0) { // Is it the first option of the optgroup?
            optID += 1;

            // Get the opt group label
            var label = this.parentElement.label,
                labelSubtext = typeof $this.parent().data('subtext') !== 'undefined' ? '<small class="text-muted">' + $this.parent().data('subtext') + '</small>' : '',
                labelIcon = $this.parent().data('icon') ? '<span class="' + that.options.iconBase + ' ' + $this.parent().data('icon') + '"></span> ' : '',
                optGroupClass = ' ' + this.parentElement.className || '';
            
            label = labelIcon + '<span class="text">' + label + labelSubtext + '</span>';

            if (index !== 0 && _li.length > 0) { // Is it NOT the first option of the select && are there elements in the dropdown?
              liIndex++;
              _li.push(generateLI('', null, 'divider', optID + 'div'));
            }
            liIndex++;
            _li.push(generateLI(label, null, 'dropdown-header' + optGroupClass, optID));
          }
          _li.push(generateLI(generateA(text, 'opt ' + optionClass + optGroupClass, inline, tokens), index, '', optID));
        } else if ($this.data('divider') === true) {
          _li.push(generateLI('', index, 'divider'));
        } else if ($this.data('hidden') === true) {
          _li.push(generateLI(generateA(text, optionClass, inline, tokens), index, 'hidden is-hidden'));
        } else {
          if (this.previousElementSibling && this.previousElementSibling.tagName === 'OPTGROUP') {
            liIndex++;
            _li.push(generateLI('', null, 'divider', optID + 'div'));
          }
          _li.push(generateLI(generateA(text, optionClass, inline, tokens), index));
        }

        that.liObj[index] = liIndex;
      });

      //If we are not multiple, we don't have a selected item, and we don't have a title, select the first element so something is set in the button
      if (!this.multiple && this.$element.find('option:selected').length === 0 && !this.options.title) {
        this.$element.find('option').eq(0).prop('selected', true).attr('selected', 'selected');
      }

      return _li.join('');
    },

    findLis: function () {
      if (this.$lis == null) this.$lis = this.$menu.find('li');
      return this.$lis;
    },

    /**
     * @param [updateLi] defaults to true
     */
    render: function (updateLi) {
      var that = this,
          notDisabled;

      //Update the LI to match the SELECT
      if (updateLi !== false) {
        this.$element.find('option').each(function (index) {
          var $lis = that.findLis().eq(that.liObj[index]);

          that.setDisabled(index, this.disabled || this.parentElement.tagName === 'OPTGROUP' && this.parentElement.disabled, $lis);
          that.setSelected(index, this.selected, $lis);
        });
      }

      this.tabIndex();

      var selectedItems = this.$element.find('option').map(function () {
        if (this.selected) {
          if (that.options.hideDisabled && (this.disabled || this.parentElement.tagName === 'OPTGROUP' && this.parentElement.disabled)) return false;

          var $this = $(this),
              icon = $this.data('icon') && that.options.showIcon ? '<i class="' + that.options.iconBase + ' ' + $this.data('icon') + '"></i> ' : '',
              subtext;

          if (that.options.showSubtext && $this.data('subtext') && !that.multiple) {
            subtext = ' <small class="text-muted">' + $this.data('subtext') + '</small>';
          } else {
            subtext = '';
          }
          if (typeof $this.attr('title') !== 'undefined') {
            return $this.attr('title');
          } else if ($this.data('content') && that.options.showContent) {
            return $this.data('content');
          } else {
            return icon + $this.html() + subtext;
          }
        }
      }).toArray();

      //Fixes issue in IE10 occurring when no default option is selected and at least one option is disabled
      //Convert all the values into a comma delimited string
      var title = !this.multiple ? selectedItems[0] : selectedItems.join(this.options.multipleSeparator);

      //If this is multi select, and the selectText type is count, the show 1 of 2 selected etc..
      if (this.multiple && this.options.selectedTextFormat.indexOf('count') > -1) {
        var max = this.options.selectedTextFormat.split('>');
        if ((max.length > 1 && selectedItems.length > max[1]) || (max.length == 1 && selectedItems.length >= 2)) {
          notDisabled = this.options.hideDisabled ? ', [disabled]' : '';
          var totalCount = this.$element.find('option').not('[data-divider="true"], [data-hidden="true"]' + notDisabled).length,
              tr8nText = (typeof this.options.countSelectedText === 'function') ? this.options.countSelectedText(selectedItems.length, totalCount) : this.options.countSelectedText;
          title = tr8nText.replace('{0}', selectedItems.length.toString()).replace('{1}', totalCount.toString());
        }
      }

      if (this.options.title == undefined) {
        this.options.title = this.$element.attr('title');
      }

      if (this.options.selectedTextFormat == 'static') {
        title = this.options.title;
      }

      //If we dont have a title, then use the default, or if nothing is set at all, use the not selected text
      if (!title) {
        title = typeof this.options.title !== 'undefined' ? this.options.title : this.options.noneSelectedText;
      }

      //strip all html-tags and trim the result
      this.$button.attr('title', $.trim(title.replace(/<[^>]*>?/g, '')));
      this.$button.children('.filter-option').html(title);

      this.$element.trigger('rendered.bs.select');
    },

    /**
     * @param [style]
     * @param [status]
     */
    setStyle: function (style, status) {
      if (this.$element.attr('class')) {
        this.$newElement.addClass(this.$element.attr('class').replace(/selectpicker|mobile-device|bs-select-hidden|validate\[.*\]/gi, ''));
      }

      var buttonClass = style ? style : this.options.style;

      if (status == 'add') {
        this.$button.addClass(buttonClass);
      } else if (status == 'remove') {
        this.$button.removeClass(buttonClass);
      } else {
        this.$button.removeClass(this.options.style);
        this.$button.addClass(buttonClass);
      }
    },

    liHeight: function (refresh) {
      if (!refresh && (this.options.size === false || this.sizeInfo)) return;

      var newElement = document.createElement('div'),
          menu = document.createElement('div'),
          menuInner = document.createElement('ul'),
          divider = document.createElement('li'),
          li = document.createElement('li'),
          a = document.createElement('a'),
          text = document.createElement('span'),
          header = this.options.header ? this.$menu.find('.popover-title')[0].cloneNode(true) : null,
          search = this.options.liveSearch ? document.createElement('div') : null,
          actions = this.options.actionsBox && this.multiple ? this.$menu.find('.bs-actionsbox')[0].cloneNode(true) : null,
          doneButton = this.options.doneButton && this.multiple ? this.$menu.find('.bs-donebutton')[0].cloneNode(true) : null;

      text.className = 'text';
      newElement.className = this.$menu[0].parentNode.className + ' open';
      menu.className = 'dropdown-menu open';
      menuInner.className = 'dropdown-menu inner';
      divider.className = 'divider';

      text.appendChild(document.createTextNode('Inner text'));
      a.appendChild(text);
      li.appendChild(a);
      menuInner.appendChild(li);
      menuInner.appendChild(divider);
      if (header) menu.appendChild(header);
      if (search) {
        // create a span instead of input as creating an input element is slower
        var input = document.createElement('span');
        search.className = 'bs-searchbox';
        input.className = 'form-control';
        search.appendChild(input);
        menu.appendChild(search);
      }
      if (actions) menu.appendChild(actions);
      menu.appendChild(menuInner);
      if (doneButton) menu.appendChild(doneButton);
      newElement.appendChild(menu);

      document.body.appendChild(newElement);

      var liHeight = a.offsetHeight,
          headerHeight = header ? header.offsetHeight : 0,
          searchHeight = search ? search.offsetHeight : 0,
          actionsHeight = actions ? actions.offsetHeight : 0,
          doneButtonHeight = doneButton ? doneButton.offsetHeight : 0,
          dividerHeight = $(divider).outerHeight(true),
          // fall back to jQuery if getComputedStyle is not supported
          menuStyle = getComputedStyle ? getComputedStyle(menu) : false,
          $menu = menuStyle ? $(menu) : null,
          menuPadding = parseInt(menuStyle ? menuStyle.paddingTop : $menu.css('paddingTop')) +
                        parseInt(menuStyle ? menuStyle.paddingBottom : $menu.css('paddingBottom')) +
                        parseInt(menuStyle ? menuStyle.borderTopWidth : $menu.css('borderTopWidth')) +
                        parseInt(menuStyle ? menuStyle.borderBottomWidth : $menu.css('borderBottomWidth')),
          menuExtras =  menuPadding + 
                        parseInt(menuStyle ? menuStyle.marginTop : $menu.css('marginTop')) + 
                        parseInt(menuStyle ? menuStyle.marginBottom : $menu.css('marginBottom')) + 2;

      document.body.removeChild(newElement);

      this.sizeInfo = {
        liHeight: liHeight,
        headerHeight: headerHeight,
        searchHeight: searchHeight,
        actionsHeight: actionsHeight,
        doneButtonHeight: doneButtonHeight,
        dividerHeight: dividerHeight,
        menuPadding: menuPadding,
        menuExtras: menuExtras
      };
    },

    setSize: function () {
      this.findLis();
      this.liHeight();
      var that = this,
          $menu = this.$menu,
          $menuInner = this.$menuInner,
          $window = $(window),
          selectHeight = this.$newElement[0].offsetHeight,
          liHeight = this.sizeInfo['liHeight'],
          headerHeight = this.sizeInfo['headerHeight'],
          searchHeight = this.sizeInfo['searchHeight'],
          actionsHeight = this.sizeInfo['actionsHeight'],
          doneButtonHeight = this.sizeInfo['doneButtonHeight'],
          divHeight = this.sizeInfo['dividerHeight'],
          menuPadding = this.sizeInfo['menuPadding'],
          menuExtras = this.sizeInfo['menuExtras'],
          notDisabled = this.options.hideDisabled ? '.disabled' : '',
          menuHeight,
          getHeight,
          selectOffsetTop,
          selectOffsetBot,
          posVert = function () {
            selectOffsetTop = that.$newElement.offset().top - $window.scrollTop();
            selectOffsetBot = $window.height() - selectOffsetTop - selectHeight;
          };

      posVert();

      if (this.options.header) $menu.css('padding-top', 0);

      if (this.options.size === 'auto') {
        var getSize = function () {
          var minHeight,
              hasClass = function (className, include) {
                return function (element) {
                    if (include) {
                        return (element.classList ? element.classList.contains(className) : $(element).hasClass(className));
                    } else {
                        return !(element.classList ? element.classList.contains(className) : $(element).hasClass(className));
                    }
                };
              },
              
              lis = that.$menu.find('.inner')[0].getElementsByTagName('li'),
              lisVisible = Array.prototype.filter ? Array.prototype.filter.call(lis, hasClass('hidden', false)) : that.$lis.not('.hidden'),
              optGroup = Array.prototype.filter ? Array.prototype.filter.call(lisVisible, hasClass('dropdown-header', true)) : lisVisible.filter('.dropdown-header');

          posVert();
          menuHeight = selectOffsetBot - menuExtras;

          if (that.options.container) {
            if (!$menu.data('height')) $menu.data('height', $menu.height());
            getHeight = $menu.data('height');
          } else {
            getHeight = $menu.height();
          }

          if (that.options.dropupAuto) {
            that.$newElement.toggleClass('dropup', selectOffsetTop > selectOffsetBot && (menuHeight - menuExtras) < getHeight);
          }
          if (that.$newElement.hasClass('dropup')) {
            menuHeight = selectOffsetTop - menuExtras;
          }

          if ((lisVisible.length + optGroup.length) > 3) {
            minHeight = liHeight * 3 + menuExtras - 2;
          } else {
            minHeight = 0;
          }

          $menu.css({
            'max-height': menuHeight + 'px',
            'overflow': 'hidden',
            'min-height': minHeight + headerHeight + searchHeight + actionsHeight + doneButtonHeight + 'px'
          });
          $menuInner.css({
            'max-height': menuHeight - headerHeight - searchHeight - actionsHeight - doneButtonHeight - menuPadding + 'px',
            'overflow-y': 'auto',
            'min-height': Math.max(minHeight - menuPadding, 0) + 'px'
          });
        };
        getSize();
        this.$searchbox.off('input.getSize propertychange.getSize').on('input.getSize propertychange.getSize', getSize);
        $window.off('resize.getSize scroll.getSize').on('resize.getSize scroll.getSize', getSize);
      } else if (this.options.size && this.options.size != 'auto' && this.$lis.not(notDisabled).length > this.options.size) {
        var optIndex = this.$lis.not('.divider').not(notDisabled).children().slice(0, this.options.size).last().parent().index(),
            divLength = this.$lis.slice(0, optIndex + 1).filter('.divider').length;
        menuHeight = liHeight * this.options.size + divLength * divHeight + menuPadding;

        if (that.options.container) {
          if (!$menu.data('height')) $menu.data('height', $menu.height());
          getHeight = $menu.data('height');
        } else {
          getHeight = $menu.height();
        }

        if (that.options.dropupAuto) {
          //noinspection JSUnusedAssignment
          this.$newElement.toggleClass('dropup', selectOffsetTop > selectOffsetBot && (menuHeight - menuExtras) < getHeight);
        }
        $menu.css({
          'max-height': menuHeight + headerHeight + searchHeight + actionsHeight + doneButtonHeight + 'px',
          'overflow': 'hidden',
          'min-height': ''
        });
        $menuInner.css({
          'max-height': menuHeight - menuPadding + 'px',
          'overflow-y': 'auto',
          'min-height': ''
        });
      }
    },

    setWidth: function () {
      if (this.options.width === 'auto') {
        this.$menu.css('min-width', '0');

        // Get correct width if element is hidden
        var $selectClone = this.$menu.parent().clone().appendTo('body'),
            $selectClone2 = this.options.container ? this.$newElement.clone().appendTo('body') : $selectClone,
            ulWidth = $selectClone.children('.dropdown-menu').outerWidth(),
            btnWidth = $selectClone2.css('width', 'auto').children('button').outerWidth();

        $selectClone.remove();
        $selectClone2.remove();

        // Set width to whatever's larger, button title or longest option
        this.$newElement.css('width', Math.max(ulWidth, btnWidth) + 'px');
      } else if (this.options.width === 'fit') {
        // Remove inline min-width so width can be changed from 'auto'
        this.$menu.css('min-width', '');
        this.$newElement.css('width', '').addClass('fit-width');
      } else if (this.options.width) {
        // Remove inline min-width so width can be changed from 'auto'
        this.$menu.css('min-width', '');
        this.$newElement.css('width', this.options.width);
      } else {
        // Remove inline min-width/width so width can be changed
        this.$menu.css('min-width', '');
        this.$newElement.css('width', '');
      }
      // Remove fit-width class if width is changed programmatically
      if (this.$newElement.hasClass('fit-width') && this.options.width !== 'fit') {
        this.$newElement.removeClass('fit-width');
      }
    },

    selectPosition: function () {
      var that = this,
          drop = '<div />',
          $drop = $(drop),
          pos,
          actualHeight,
          getPlacement = function ($element) {
            $drop.addClass($element.attr('class').replace(/form-control|fit-width/gi, '')).toggleClass('dropup', $element.hasClass('dropup'));
            pos = $element.offset();
            actualHeight = $element.hasClass('dropup') ? 0 : $element[0].offsetHeight;
            $drop.css({
              'top': pos.top + actualHeight,
              'left': pos.left,
              'width': $element[0].offsetWidth,
              'position': 'absolute'
            });
          };

      this.$newElement.on('click', function () {
        if (that.isDisabled()) {
          return;
        }
        getPlacement($(this));
        $drop.appendTo(that.options.container);
        $drop.toggleClass('open', !$(this).hasClass('open'));
        $drop.append(that.$menu);
      });

      $(window).on('resize scroll', function () {
        getPlacement(that.$newElement);
      });

      this.$element.on('hide.bs.select', function () {
        that.$menu.data('height', that.$menu.height());
        $drop.detach();
      });
    },

    setSelected: function (index, selected, $lis) {
      if (!$lis) {
        var $lis = this.findLis().eq(this.liObj[index]);
      }

      $lis.toggleClass('selected', selected);
    },

    setDisabled: function (index, disabled, $lis) {
      if (!$lis) {
        var $lis = this.findLis().eq(this.liObj[index]);
      }

      if (disabled) {
        $lis.addClass('disabled').children('a').attr('href', '#').attr('tabindex', -1);
      } else {
        $lis.removeClass('disabled').children('a').removeAttr('href').attr('tabindex', 0);
      }
    },

    isDisabled: function () {
      return this.$element[0].disabled;
    },

    checkDisabled: function () {
      var that = this;

      if (this.isDisabled()) {
        this.$newElement.addClass('disabled');
        this.$button.addClass('disabled').attr('tabindex', -1);
      } else {
        if (this.$button.hasClass('disabled')) {
          this.$newElement.removeClass('disabled');
          this.$button.removeClass('disabled');
        }

        if (this.$button.attr('tabindex') == -1 && !this.$element.data('tabindex')) {
          this.$button.removeAttr('tabindex');
        }
      }

      this.$button.click(function () {
        return !that.isDisabled();
      });
    },

    tabIndex: function () {
      if (this.$element.is('[tabindex]')) {
        this.$element.data('tabindex', this.$element.attr('tabindex'));
        this.$button.attr('tabindex', this.$element.data('tabindex'));
      }
    },

    clickListener: function () {
      var that = this,
          $document = $(document);

      this.$newElement.on('touchstart.dropdown', '.dropdown-menu', function (e) {
        e.stopPropagation();
      });

      $document.data('spaceSelect', false);
      
      this.$button.on('keyup', function (e) {
        if (/(32)/.test(e.keyCode.toString(10)) && $document.data('spaceSelect')) {
            e.preventDefault();
            $document.data('spaceSelect', false);
        }
      });

      this.$newElement.on('click', function () {
        that.setSize();
        that.$element.on('shown.bs.select', function () {
          if (!that.options.liveSearch && !that.multiple) {
            that.$menu.find('.selected a').focus();
          } else if (!that.multiple) {
            var selectedIndex = that.liObj[that.$element[0].selectedIndex];

            if (typeof selectedIndex !== 'number') return;
            
            // scroll to selected option
            var offset = that.$lis.eq(selectedIndex)[0].offsetTop - that.$menuInner[0].offsetTop;
            offset = offset - that.$menuInner[0].offsetHeight/2 + that.sizeInfo.liHeight/2;
            that.$menuInner[0].scrollTop = offset;
          }
        });
      });

      this.$menu.on('click', 'li a', function (e) {
        var $this = $(this),
            clickedIndex = $this.parent().data('originalIndex'),
            prevValue = that.$element.val(),
            prevIndex = that.$element.prop('selectedIndex');

        // Don't close on multi choice menu
        if (that.multiple) {
          e.stopPropagation();
        }

        e.preventDefault();

        //Don't run if we have been disabled
        if (!that.isDisabled() && !$this.parent().hasClass('disabled')) {
          var $options = that.$element.find('option'),
              $option = $options.eq(clickedIndex),
              state = $option.prop('selected'),
              $optgroup = $option.parent('optgroup'),
              maxOptions = that.options.maxOptions,
              maxOptionsGrp = $optgroup.data('maxOptions') || false;

          if (!that.multiple) { // Deselect all others if not multi select box
            $options.prop('selected', false);
            $option.prop('selected', true);
            that.$menu.find('.selected').removeClass('selected');
            that.setSelected(clickedIndex, true);
          } else { // Toggle the one we have chosen if we are multi select.
            $option.prop('selected', !state);
            that.setSelected(clickedIndex, !state);
            $this.blur();

            if (maxOptions !== false || maxOptionsGrp !== false) {
              var maxReached = maxOptions < $options.filter(':selected').length,
                  maxReachedGrp = maxOptionsGrp < $optgroup.find('option:selected').length;

              if ((maxOptions && maxReached) || (maxOptionsGrp && maxReachedGrp)) {
                if (maxOptions && maxOptions == 1) {
                  $options.prop('selected', false);
                  $option.prop('selected', true);
                  that.$menu.find('.selected').removeClass('selected');
                  that.setSelected(clickedIndex, true);
                } else if (maxOptionsGrp && maxOptionsGrp == 1) {
                  $optgroup.find('option:selected').prop('selected', false);
                  $option.prop('selected', true);
                  var optgroupID = $this.parent().data('optgroup');
                  that.$menu.find('[data-optgroup="' + optgroupID + '"]').removeClass('selected');
                  that.setSelected(clickedIndex, true);
                } else {
                  var maxOptionsArr = (typeof that.options.maxOptionsText === 'function') ?
                          that.options.maxOptionsText(maxOptions, maxOptionsGrp) : that.options.maxOptionsText,
                      maxTxt = maxOptionsArr[0].replace('{n}', maxOptions),
                      maxTxtGrp = maxOptionsArr[1].replace('{n}', maxOptionsGrp),
                      $notify = $('<div class="notify"></div>');
                  // If {var} is set in array, replace it
                  /** @deprecated */
                  if (maxOptionsArr[2]) {
                    maxTxt = maxTxt.replace('{var}', maxOptionsArr[2][maxOptions > 1 ? 0 : 1]);
                    maxTxtGrp = maxTxtGrp.replace('{var}', maxOptionsArr[2][maxOptionsGrp > 1 ? 0 : 1]);
                  }

                  $option.prop('selected', false);

                  that.$menu.append($notify);

                  if (maxOptions && maxReached) {
                    $notify.append($('<div>' + maxTxt + '</div>'));
                    that.$element.trigger('maxReached.bs.select');
                  }

                  if (maxOptionsGrp && maxReachedGrp) {
                    $notify.append($('<div>' + maxTxtGrp + '</div>'));
                    that.$element.trigger('maxReachedGrp.bs.select');
                  }

                  setTimeout(function () {
                    that.setSelected(clickedIndex, false);
                  }, 10);

                  $notify.delay(750).fadeOut(300, function () {
                    $(this).remove();
                  });
                }
              }
            }
          }

          if (!that.multiple) {
            that.$button.focus();
          } else if (that.options.liveSearch) {
            that.$searchbox.focus();
          }

          // Trigger select 'change'
          if ((prevValue != that.$element.val() && that.multiple) || (prevIndex != that.$element.prop('selectedIndex') && !that.multiple)) {
            that.$element.change();
            // $option.prop('selected') is current option state (selected/unselected). state is previous option state.
            that.$element.trigger('changed.bs.select', [clickedIndex, $option.prop('selected'), state]);
          }
        }
      });

      this.$menu.on('click', 'li.disabled a, .popover-title, .popover-title :not(.close)', function (e) {
        if (e.currentTarget == this) {
          e.preventDefault();
          e.stopPropagation();
          if (that.options.liveSearch && !$(e.target).hasClass('close')) {
            that.$searchbox.focus();
          } else {
            that.$button.focus();
          }
        }
      });

      this.$menu.on('click', 'li.divider, li.dropdown-header', function (e) {
        e.preventDefault();
        e.stopPropagation();
        if (that.options.liveSearch) {
          that.$searchbox.focus();
        } else {
          that.$button.focus();
        }
      });

      this.$menu.on('click', '.popover-title .close', function () {
        that.$button.click();
      });

      this.$searchbox.on('click', function (e) {
        e.stopPropagation();
      });

      this.$menu.on('click', '.actions-btn', function (e) {
        if (that.options.liveSearch) {
          that.$searchbox.focus();
        } else {
          that.$button.focus();
        }

        e.preventDefault();
        e.stopPropagation();

        if ($(this).hasClass('bs-select-all')) {
          that.selectAll();
        } else {
          that.deselectAll();
        }
        that.$element.change();
      });

      this.$element.change(function () {
        that.render(false);
      });
    },

    liveSearchListener: function () {
      var that = this,
          $no_results = $('<li class="no-results"></li>');

      this.$newElement.on('click.dropdown.data-api touchstart.dropdown.data-api', function () {
        that.$menuInner.find('.active').removeClass('active');
        if (!!that.$searchbox.val()) {
          that.$searchbox.val('');
          that.$lis.not('.is-hidden').removeClass('hidden');
          if (!!$no_results.parent().length) $no_results.remove();
        }
        if (!that.multiple) that.$menuInner.find('.selected').addClass('active');
        setTimeout(function () {
          that.$searchbox.focus();
        }, 10);
      });

      this.$searchbox.on('click.dropdown.data-api focus.dropdown.data-api touchend.dropdown.data-api', function (e) {
        e.stopPropagation();
      });

      this.$searchbox.on('input propertychange', function () {
        if (that.$searchbox.val()) {
          var $searchBase = that.$lis.not('.is-hidden').removeClass('hidden').children('a');
          if (that.options.liveSearchNormalize) {
            $searchBase = $searchBase.not(':a' + that._searchStyle() + '(' + normalizeToBase(that.$searchbox.val()) + ')');
          } else {
            $searchBase = $searchBase.not(':' + that._searchStyle() + '(' + that.$searchbox.val() + ')');
          }
          $searchBase.parent().addClass('hidden');

          that.$lis.filter('.dropdown-header').each(function () {
            var $this = $(this),
                optgroup = $this.data('optgroup');

            if (that.$lis.filter('[data-optgroup=' + optgroup + ']').not($this).not('.hidden').length === 0) {
              $this.addClass('hidden');
              that.$lis.filter('[data-optgroup=' + optgroup + 'div]').addClass('hidden');
            }
          });

          var $lisVisible = that.$lis.not('.hidden');

          // hide divider if first or last visible, or if followed by another divider
          $lisVisible.each(function (index) {
            var $this = $(this);

            if ($this.hasClass('divider') && (
              $this.index() === $lisVisible.eq(0).index() ||
              $this.index() === $lisVisible.last().index() ||
              $lisVisible.eq(index + 1).hasClass('divider'))) {
              $this.addClass('hidden');
            }
          });

          if (!that.$lis.not('.hidden, .no-results').length) {
            if (!!$no_results.parent().length) {
              $no_results.remove();
            }
            $no_results.html(that.options.noneResultsText.replace('{0}', '"' + htmlEscape(that.$searchbox.val()) + '"')).show();
            that.$menuInner.append($no_results);
          } else if (!!$no_results.parent().length) {
            $no_results.remove();
          }

        } else {
          that.$lis.not('.is-hidden').removeClass('hidden');
          if (!!$no_results.parent().length) {
            $no_results.remove();
          }
        }

        that.$lis.filter('.active').removeClass('active');
        that.$lis.not('.hidden, .divider, .dropdown-header').eq(0).addClass('active').children('a').focus();
        $(this).focus();
      });
    },

    _searchStyle: function () {
      var style = 'icontains';
      switch (this.options.liveSearchStyle) {
        case 'begins':
        case 'startsWith':
          style = 'ibegins';
          break;
        case 'contains':
        default:
          break; //no need to change the default
      }

      return style;
    },

    val: function (value) {
      if (typeof value !== 'undefined') {
        this.$element.val(value);
        this.render();

        return this.$element;
      } else {
        return this.$element.val();
      }
    },

    selectAll: function () {
      this.findLis();
      this.$element.find('option:enabled').not('[data-divider], [data-hidden]').prop('selected', true);
      this.$lis.not('.divider, .dropdown-header, .disabled, .hidden').addClass('selected');
      this.render(false);
    },

    deselectAll: function () {
      this.findLis();
      this.$element.find('option:enabled').not('[data-divider], [data-hidden]').prop('selected', false);
      this.$lis.not('.divider, .dropdown-header, .disabled, .hidden').removeClass('selected');
      this.render(false);
    },

    keydown: function (e) {
      var $this = $(this),
          $parent = $this.is('input') ? $this.parent().parent() : $this.parent(),
          $items,
          that = $parent.data('this'),
          index,
          next,
          first,
          last,
          prev,
          nextPrev,
          prevIndex,
          isActive,
          selector = ':not(.disabled, .hidden, .dropdown-header, .divider)',
          keyCodeMap = {
            32: ' ',
            48: '0',
            49: '1',
            50: '2',
            51: '3',
            52: '4',
            53: '5',
            54: '6',
            55: '7',
            56: '8',
            57: '9',
            59: ';',
            65: 'a',
            66: 'b',
            67: 'c',
            68: 'd',
            69: 'e',
            70: 'f',
            71: 'g',
            72: 'h',
            73: 'i',
            74: 'j',
            75: 'k',
            76: 'l',
            77: 'm',
            78: 'n',
            79: 'o',
            80: 'p',
            81: 'q',
            82: 'r',
            83: 's',
            84: 't',
            85: 'u',
            86: 'v',
            87: 'w',
            88: 'x',
            89: 'y',
            90: 'z',
            96: '0',
            97: '1',
            98: '2',
            99: '3',
            100: '4',
            101: '5',
            102: '6',
            103: '7',
            104: '8',
            105: '9'
          };

      if (that.options.liveSearch) $parent = $this.parent().parent();

      if (that.options.container) $parent = that.$menu;

      $items = $('[role=menu] li a', $parent);

      isActive = that.$menu.parent().hasClass('open');

      if (!isActive && (e.keyCode >= 48 && e.keyCode <= 57 || event.keyCode >= 65 && event.keyCode <= 90)) {
        if (!that.options.container) {
          that.setSize();
          that.$menu.parent().addClass('open');
          isActive = true;
        } else {
          that.$newElement.trigger('click');
        }
        that.$searchbox.focus();
      }

      if (that.options.liveSearch) {
        if (/(^9$|27)/.test(e.keyCode.toString(10)) && isActive && that.$menu.find('.active').length === 0) {
          e.preventDefault();
          that.$menu.parent().removeClass('open');
          if (that.options.container) that.$newElement.removeClass('open');
          that.$button.focus();
        }
        // $items contains li elements when liveSearch is enabled
        $items = $('[role=menu] li:not(.disabled, .hidden, .dropdown-header, .divider)', $parent);
        if (!$this.val() && !/(38|40)/.test(e.keyCode.toString(10))) {
          if ($items.filter('.active').length === 0) {
            $items = that.$newElement.find('li');
            if (that.options.liveSearchNormalize) {
              $items = $items.filter(':a' + that._searchStyle() + '(' + normalizeToBase(keyCodeMap[e.keyCode]) + ')');
            } else {
              $items = $items.filter(':' + that._searchStyle() + '(' + keyCodeMap[e.keyCode] + ')');
            }
          }
        }
      }

      if (!$items.length) return;

      if (/(38|40)/.test(e.keyCode.toString(10))) {
        index = $items.index($items.filter(':focus'));
        first = $items.parent(selector).first().data('originalIndex');
        last = $items.parent(selector).last().data('originalIndex');
        next = $items.eq(index).parent().nextAll(selector).eq(0).data('originalIndex');
        prev = $items.eq(index).parent().prevAll(selector).eq(0).data('originalIndex');
        nextPrev = $items.eq(next).parent().prevAll(selector).eq(0).data('originalIndex');

        if (that.options.liveSearch) {
          $items.each(function (i) {
            if (!$(this).hasClass('disabled')) {
              $(this).data('index', i);
            }
          });
          index = $items.index($items.filter('.active'));
          first = $items.first().data('index');
          last = $items.last().data('index');
          next = $items.eq(index).nextAll().eq(0).data('index');
          prev = $items.eq(index).prevAll().eq(0).data('index');
          nextPrev = $items.eq(next).prevAll().eq(0).data('index');
        }

        prevIndex = $this.data('prevIndex');

        if (e.keyCode == 38) {
          if (that.options.liveSearch) index -= 1;
          if (index != nextPrev && index > prev) index = prev;
          if (index < first) index = first;
          if (index == prevIndex) index = last;
        } else if (e.keyCode == 40) {
          if (that.options.liveSearch) index += 1;
          if (index == -1) index = 0;
          if (index != nextPrev && index < next) index = next;
          if (index > last) index = last;
          if (index == prevIndex) index = first;
        }

        $this.data('prevIndex', index);

        if (!that.options.liveSearch) {
          $items.eq(index).focus();
        } else {
          e.preventDefault();
          if (!$this.hasClass('dropdown-toggle')) {
            $items.removeClass('active').eq(index).addClass('active').children('a').focus();
            $this.focus();
          }
        }

      } else if (!$this.is('input')) {
        var keyIndex = [],
            count,
            prevKey;

        $items.each(function () {
          if (!$(this).parent().hasClass('disabled')) {
            if ($.trim($(this).text().toLowerCase()).substring(0, 1) == keyCodeMap[e.keyCode]) {
              keyIndex.push($(this).parent().index());
            }
          }
        });

        count = $(document).data('keycount');
        count++;
        $(document).data('keycount', count);

        prevKey = $.trim($(':focus').text().toLowerCase()).substring(0, 1);

        if (prevKey != keyCodeMap[e.keyCode]) {
          count = 1;
          $(document).data('keycount', count);
        } else if (count >= keyIndex.length) {
          $(document).data('keycount', 0);
          if (count > keyIndex.length) count = 1;
        }

        $items.eq(keyIndex[count - 1]).focus();
      }

      // Select focused option if "Enter", "Spacebar" or "Tab" (when selectOnTab is true) are pressed inside the menu.
      if ((/(13|32)/.test(e.keyCode.toString(10)) || (/(^9$)/.test(e.keyCode.toString(10)) && that.options.selectOnTab)) && isActive) {
        if (!/(32)/.test(e.keyCode.toString(10))) e.preventDefault();
        if (!that.options.liveSearch) {
          var elem = $(':focus');
          elem.click();
          // Bring back focus for multiselects
          elem.focus();
          // Prevent screen from scrolling if the user hit the spacebar
          e.preventDefault();
          // Fixes spacebar selection of dropdown items in FF & IE
          $(document).data('spaceSelect', true);
        } else if (!/(32)/.test(e.keyCode.toString(10))) {
          that.$menu.find('.active a').click();
          $this.focus();
        }
        $(document).data('keycount', 0);
      }

      if ((/(^9$|27)/.test(e.keyCode.toString(10)) && isActive && (that.multiple || that.options.liveSearch)) || (/(27)/.test(e.keyCode.toString(10)) && !isActive)) {
        that.$menu.parent().removeClass('open');
        if (that.options.container) that.$newElement.removeClass('open');
        that.$button.focus();
      }
    },

    mobile: function () {
      this.$element.addClass('mobile-device').appendTo(this.$newElement);
      if (this.options.container) this.$menu.hide();
    },

    refresh: function () {
      this.$lis = null;
      this.reloadLi();
      this.render();
      this.checkDisabled();
      this.liHeight(true);
      this.setStyle();
      this.setWidth();
      if (this.$lis) this.$searchbox.trigger('propertychange');

      this.$element.trigger('refreshed.bs.select');
    },

    hide: function () {
      this.$newElement.hide();
    },

    show: function () {
      this.$newElement.show();
    },

    remove: function () {
      this.$newElement.remove();
      this.$element.remove();
    }
  };

  // SELECTPICKER PLUGIN DEFINITION
  // ==============================
  function Plugin(option, event) {
    // get the args of the outer function..
    var args = arguments;
    // The arguments of the function are explicitly re-defined from the argument list, because the shift causes them
    // to get lost/corrupted in android 2.3 and IE9 #715 #775
    var _option = option,
        _event = event;
    [].shift.apply(args);

    var value;
    var chain = this.each(function () {
      var $this = $(this);
      if ($this.is('select')) {
        var data = $this.data('selectpicker'),
            options = typeof _option == 'object' && _option;

        if (!data) {
          var config = $.extend({}, Selectpicker.DEFAULTS, $.fn.selectpicker.defaults || {}, $this.data(), options);
          $this.data('selectpicker', (data = new Selectpicker(this, config, _event)));
        } else if (options) {
          for (var i in options) {
            if (options.hasOwnProperty(i)) {
              data.options[i] = options[i];
            }
          }
        }

        if (typeof _option == 'string') {
          if (data[_option] instanceof Function) {
            value = data[_option].apply(data, args);
          } else {
            value = data.options[_option];
          }
        }
      }
    });

    if (typeof value !== 'undefined') {
      //noinspection JSUnusedAssignment
      return value;
    } else {
      return chain;
    }
  }

  var old = $.fn.selectpicker;
  $.fn.selectpicker = Plugin;
  $.fn.selectpicker.Constructor = Selectpicker;

  // SELECTPICKER NO CONFLICT
  // ========================
  $.fn.selectpicker.noConflict = function () {
    $.fn.selectpicker = old;
    return this;
  };

  $(document)
      .data('keycount', 0)
      .on('keydown', '.bootstrap-select [data-toggle=dropdown], .bootstrap-select [role="menu"], .bs-searchbox input', Selectpicker.prototype.keydown)
      .on('focusin.modal', '.bootstrap-select [data-toggle=dropdown], .bootstrap-select [role="menu"], .bs-searchbox input', function (e) {
        e.stopPropagation();
      });

  // SELECTPICKER DATA-API
  // =====================
  $(window).on('load.bs.select.data-api', function () {
    $('.selectpicker').each(function () {
      var $selectpicker = $(this);
      Plugin.call($selectpicker, $selectpicker.data());
    })
  });
})(jQuery);


}));
/**
 * jquery.mask.js
 * @version: v1.14.0
 * @author: Igor Escobar
 *
 * Created by Igor Escobar on 2012-03-10. Please report any bug at http://blog.igorescobar.com
 *
 * Copyright (c) 2012 Igor Escobar http://blog.igorescobar.com
 *
 * The MIT License (http://www.opensource.org/licenses/mit-license.php)
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 */

/* jshint laxbreak: true */
/* global define, jQuery, Zepto */

'use strict';

// UMD (Universal Module Definition) patterns for JavaScript modules that work everywhere.
// https://github.com/umdjs/umd/blob/master/jqueryPluginCommonjs.js
(function (factory) {

    if (typeof define === 'function' && define.amd) {
        define(['jquery'], factory);
    } else if (typeof exports === 'object') {
        module.exports = factory(require('jquery'));
    } else {
        factory(jQuery || Zepto);
    }

}(function ($) {

    var Mask = function (el, mask, options) {

        var p = {
            invalid: [],
            getCaret: function () {
                try {
                    var sel,
                        pos = 0,
                        ctrl = el.get(0),
                        dSel = document.selection,
                        cSelStart = ctrl.selectionStart;

                    // IE Support
                    if (dSel && navigator.appVersion.indexOf('MSIE 10') === -1) {
                        sel = dSel.createRange();
                        sel.moveStart('character', -p.val().length);
                        pos = sel.text.length;
                    }
                    // Firefox support
                    else if (cSelStart || cSelStart === '0') {
                        pos = cSelStart;
                    }

                    return pos;
                } catch (e) {}
            },
            setCaret: function(pos) {
                try {
                    if (el.is(':focus')) {
                        var range, ctrl = el.get(0);

                        // Firefox, WebKit, etc..
                        if (ctrl.setSelectionRange) {
                            ctrl.focus();
                            ctrl.setSelectionRange(pos, pos);
                        } else { // IE
                            range = ctrl.createTextRange();
                            range.collapse(true);
                            range.moveEnd('character', pos);
                            range.moveStart('character', pos);
                            range.select();
                        }
                    }
                } catch (e) {}
            },
            events: function() {
                el
                .on('keydown.mask', function(e) {
                    el.data('mask-keycode', e.keyCode || e.which);
                })
                .on($.jMaskGlobals.useInput ? 'input.mask' : 'keyup.mask', p.behaviour)
                .on('paste.mask drop.mask', function() {
                    setTimeout(function() {
                        el.keydown().keyup();
                    }, 100);
                })
                .on('change.mask', function(){
                    el.data('changed', true);
                })
                .on('blur.mask', function(){
                    if (oldValue !== p.val() && !el.data('changed')) {
                        el.trigger('change');
                    }
                    el.data('changed', false);
                })
                // it's very important that this callback remains in this position
                // otherwhise oldValue it's going to work buggy
                .on('blur.mask', function() {
                    oldValue = p.val();
                })
                // select all text on focus
                .on('focus.mask', function (e) {
                    if (options.selectOnFocus === true) {
                        $(e.target).select();
                    }
                })
                // clear the value if it not complete the mask
                .on('focusout.mask', function() {
                    if (options.clearIfNotMatch && !regexMask.test(p.val())) {
                       p.val('');
                   }
                });
            },
            getRegexMask: function() {
                var maskChunks = [], translation, pattern, optional, recursive, oRecursive, r;

                for (var i = 0; i < mask.length; i++) {
                    translation = jMask.translation[mask.charAt(i)];

                    if (translation) {

                        pattern = translation.pattern.toString().replace(/.{1}$|^.{1}/g, '');
                        optional = translation.optional;
                        recursive = translation.recursive;

                        if (recursive) {
                            maskChunks.push(mask.charAt(i));
                            oRecursive = {digit: mask.charAt(i), pattern: pattern};
                        } else {
                            maskChunks.push(!optional && !recursive ? pattern : (pattern + '?'));
                        }

                    } else {
                        maskChunks.push(mask.charAt(i).replace(/[-\/\\^$*+?.()|[\]{}]/g, '\\$&'));
                    }
                }

                r = maskChunks.join('');

                if (oRecursive) {
                    r = r.replace(new RegExp('(' + oRecursive.digit + '(.*' + oRecursive.digit + ')?)'), '($1)?')
                         .replace(new RegExp(oRecursive.digit, 'g'), oRecursive.pattern);
                }

                return new RegExp(r);
            },
            destroyEvents: function() {
                el.off(['input', 'keydown', 'keyup', 'paste', 'drop', 'blur', 'focusout', ''].join('.mask '));
            },
            val: function(v) {
                var isInput = el.is('input'),
                    method = isInput ? 'val' : 'text',
                    r;

                if (arguments.length > 0) {
                    if (el[method]() !== v) {
                        el[method](v);
                    }
                    r = el;
                } else {
                    r = el[method]();
                }

                return r;
            },
            getMCharsBeforeCount: function(index, onCleanVal) {
                for (var count = 0, i = 0, maskL = mask.length; i < maskL && i < index; i++) {
                    if (!jMask.translation[mask.charAt(i)]) {
                        index = onCleanVal ? index + 1 : index;
                        count++;
                    }
                }
                return count;
            },
            caretPos: function (originalCaretPos, oldLength, newLength, maskDif) {
                var translation = jMask.translation[mask.charAt(Math.min(originalCaretPos - 1, mask.length - 1))];

                return !translation ? p.caretPos(originalCaretPos + 1, oldLength, newLength, maskDif)
                                    : Math.min(originalCaretPos + newLength - oldLength - maskDif, newLength);
            },
            behaviour: function(e) {
                e = e || window.event;
                p.invalid = [];
                var keyCode = e.keyCode || e.which;
                if ($.inArray(keyCode, jMask.byPassKeys) === -1) {

                    var tryChangeCarret = function() {
                        var caretPos = p.getCaret(),
                            currVal = p.val(),
                            currValL = currVal.length,
                            changeCaret = caretPos < currValL,
                            newVal = p.getMasked(),
                            newValL = newVal.length,
                            maskDif = p.getMCharsBeforeCount(newValL - 1) - p.getMCharsBeforeCount(currValL - 1);

                        p.val(newVal);

                        // change caret but avoid CTRL+A
                        if (changeCaret && !(keyCode === 65 && e.ctrlKey)) {
                            // Avoid adjusting caret on backspace or delete
                            if (!(keyCode === 8 || keyCode === 46)) {
                                caretPos = p.caretPos(caretPos, currValL, newValL, maskDif);
                            }
                            p.setCaret(caretPos);
                        }
                    };

                    if (navigator.userAgent.indexOf("Android") > -1) {
                        setTimeout(tryChangeCarret, 0);
                    } else {
                        tryChangeCarret();
                    }

                    return p.callbacks(e);
                }
            },
            getMasked: function(skipMaskChars, val) {
                var buf = [],
                    value = val === undefined ? p.val() : val + '',
                    m = 0, maskLen = mask.length,
                    v = 0, valLen = value.length,
                    offset = 1, addMethod = 'push',
                    resetPos = -1,
                    lastMaskChar,
                    check;

                if (options.reverse) {
                    addMethod = 'unshift';
                    offset = -1;
                    lastMaskChar = 0;
                    m = maskLen - 1;
                    v = valLen - 1;
                    check = function () {
                        return m > -1 && v > -1;
                    };
                } else {
                    lastMaskChar = maskLen - 1;
                    check = function () {
                        return m < maskLen && v < valLen;
                    };
                }

                while (check()) {
                    var maskDigit = mask.charAt(m),
                        valDigit = value.charAt(v),
                        translation = jMask.translation[maskDigit];

                    if (translation) {
                        if (valDigit.match(translation.pattern)) {
                            buf[addMethod](valDigit);
                             if (translation.recursive) {
                                if (resetPos === -1) {
                                    resetPos = m;
                                } else if (m === lastMaskChar) {
                                    m = resetPos - offset;
                                }

                                if (lastMaskChar === resetPos) {
                                    m -= offset;
                                }
                            }
                            m += offset;
                        } else if (translation.optional) {
                            m += offset;
                            v -= offset;
                        } else if (translation.fallback) {
                            buf[addMethod](translation.fallback);
                            m += offset;
                            v -= offset;
                        } else {
                          p.invalid.push({p: v, v: valDigit, e: translation.pattern});
                        }
                        v += offset;
                    } else {
                        if (!skipMaskChars) {
                            buf[addMethod](maskDigit);
                        }

                        if (valDigit === maskDigit) {
                            v += offset;
                        }

                        m += offset;
                    }
                }

                var lastMaskCharDigit = mask.charAt(lastMaskChar);
                if (maskLen === valLen + 1 && !jMask.translation[lastMaskCharDigit]) {
                    buf.push(lastMaskCharDigit);
                }

                return buf.join('');
            },
            callbacks: function (e) {
                var val = p.val(),
                    changed = val !== oldValue,
                    defaultArgs = [val, e, el, options],
                    callback = function(name, criteria, args) {
                        if (typeof options[name] === 'function' && criteria) {
                            options[name].apply(this, args);
                        }
                    };

                callback('onChange', changed === true, defaultArgs);
                callback('onKeyPress', changed === true, defaultArgs);
                callback('onComplete', val.length === mask.length, defaultArgs);
                callback('onInvalid', p.invalid.length > 0, [val, e, el, p.invalid, options]);
            }
        };

        el = $(el);
        var jMask = this, oldValue = p.val(), regexMask;

        mask = typeof mask === 'function' ? mask(p.val(), undefined, el,  options) : mask;


        // public methods
        jMask.mask = mask;
        jMask.options = options;
        jMask.remove = function() {
            var caret = p.getCaret();
            p.destroyEvents();
            p.val(jMask.getCleanVal());
            p.setCaret(caret - p.getMCharsBeforeCount(caret));
            return el;
        };

        // get value without mask
        jMask.getCleanVal = function() {
           return p.getMasked(true);
        };

        // get masked value without the value being in the input or element
        jMask.getMaskedVal = function(val) {
           return p.getMasked(false, val);
        };

       jMask.init = function(onlyMask) {
            onlyMask = onlyMask || false;
            options = options || {};

            jMask.clearIfNotMatch  = $.jMaskGlobals.clearIfNotMatch;
            jMask.byPassKeys       = $.jMaskGlobals.byPassKeys;
            jMask.translation      = $.extend({}, $.jMaskGlobals.translation, options.translation);

            jMask = $.extend(true, {}, jMask, options);

            regexMask = p.getRegexMask();

            if (onlyMask === false) {

                if (options.placeholder) {
                    el.attr('placeholder' , options.placeholder);
                }

                // this is necessary, otherwise if the user submit the form
                // and then press the "back" button, the autocomplete will erase
                // the data. Works fine on IE9+, FF, Opera, Safari.
                if (el.data('mask')) {
                  el.attr('autocomplete', 'off');
                }

                p.destroyEvents();
                p.events();

                var caret = p.getCaret();
                p.val(p.getMasked());
                p.setCaret(caret + p.getMCharsBeforeCount(caret, true));

            } else {
                p.events();
                p.val(p.getMasked());
            }
        };

        jMask.init(!el.is('input'));
    };

    $.maskWatchers = {};
    var HTMLAttributes = function () {
        var input = $(this),
            options = {},
            prefix = 'data-mask-',
            mask = input.attr('data-mask');

        if (input.attr(prefix + 'reverse')) {
            options.reverse = true;
        }

        if (input.attr(prefix + 'clearifnotmatch')) {
            options.clearIfNotMatch = true;
        }

        if (input.attr(prefix + 'selectonfocus') === 'true') {
           options.selectOnFocus = true;
        }

        if (notSameMaskObject(input, mask, options)) {
            return input.data('mask', new Mask(this, mask, options));
        }
    },
    notSameMaskObject = function(field, mask, options) {
        options = options || {};
        var maskObject = $(field).data('mask'),
            stringify = JSON.stringify,
            value = $(field).val() || $(field).text();
        try {
            if (typeof mask === 'function') {
                mask = mask(value);
            }
            return typeof maskObject !== 'object' || stringify(maskObject.options) !== stringify(options) || maskObject.mask !== mask;
        } catch (e) {}
    },
    eventSupported = function(eventName) {
        var el = document.createElement('div'), isSupported;

        eventName = 'on' + eventName;
        isSupported = (eventName in el);

        if ( !isSupported ) {
            el.setAttribute(eventName, 'return;');
            isSupported = typeof el[eventName] === 'function';
        }
        el = null;

        return isSupported;
    };

    $.fn.mask = function(mask, options) {
        options = options || {};
        var selector = this.selector,
            globals = $.jMaskGlobals,
            interval = globals.watchInterval,
            watchInputs = options.watchInputs || globals.watchInputs,
            maskFunction = function() {
                if (notSameMaskObject(this, mask, options)) {
                    return $(this).data('mask', new Mask(this, mask, options));
                }
            };

        $(this).each(maskFunction);

        if (selector && selector !== '' && watchInputs) {
            clearInterval($.maskWatchers[selector]);
            $.maskWatchers[selector] = setInterval(function(){
                $(document).find(selector).each(maskFunction);
            }, interval);
        }
        return this;
    };

    $.fn.masked = function(val) {
        return this.data('mask').getMaskedVal(val);
    };

    $.fn.unmask = function() {
        clearInterval($.maskWatchers[this.selector]);
        delete $.maskWatchers[this.selector];
        return this.each(function() {
            var dataMask = $(this).data('mask');
            if (dataMask) {
                dataMask.remove().removeData('mask');
            }
        });
    };

    $.fn.cleanVal = function() {
        return this.data('mask').getCleanVal();
    };

    $.applyDataMask = function(selector) {
        selector = selector || $.jMaskGlobals.maskElements;
        var $selector = (selector instanceof $) ? selector : $(selector);
        $selector.filter($.jMaskGlobals.dataMaskAttr).each(HTMLAttributes);
    };

    var globals = {
        maskElements: 'input,td,span,div',
        dataMaskAttr: '*[data-mask]',
        dataMask: true,
        watchInterval: 300,
        watchInputs: true,
        useInput: eventSupported('input'),
        watchDataMask: false,
        byPassKeys: [9, 16, 17, 18, 36, 37, 38, 39, 40, 91],
        translation: {
            '0': {pattern: /\d/},
            '9': {pattern: /\d/, optional: true},
            '#': {pattern: /\d/, recursive: true},
            'A': {pattern: /[a-zA-Z0-9]/},
            'S': {pattern: /[a-zA-Z]/}
        }
    };

    $.jMaskGlobals = $.jMaskGlobals || {};
    globals = $.jMaskGlobals = $.extend(true, {}, globals, $.jMaskGlobals);

    // looking for inputs with data-mask attribute
    if (globals.dataMask) {
        $.applyDataMask();
    }

    setInterval(function() {
        if ($.jMaskGlobals.watchDataMask) {
            $.applyDataMask();
        }
    }, globals.watchInterval);
}));(function defineMustache(global,factory){if(typeof exports==="object"&&exports&&typeof exports.nodeName!=="string"){factory(exports)}else if(typeof define==="function"&&define.amd){define(["exports"],factory)}else{global.Mustache={};factory(global.Mustache)}})(this,function mustacheFactory(mustache){var objectToString=Object.prototype.toString;var isArray=Array.isArray||function isArrayPolyfill(object){return objectToString.call(object)==="[object Array]"};function isFunction(object){return typeof object==="function"}function typeStr(obj){return isArray(obj)?"array":typeof obj}function escapeRegExp(string){return string.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function hasProperty(obj,propName){return obj!=null&&typeof obj==="object"&&propName in obj}var regExpTest=RegExp.prototype.test;function testRegExp(re,string){return regExpTest.call(re,string)}var nonSpaceRe=/\S/;function isWhitespace(string){return!testRegExp(nonSpaceRe,string)}var entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function escapeHtml(string){return String(string).replace(/[&<>"'`=\/]/g,function fromEntityMap(s){return entityMap[s]})}var whiteRe=/\s*/;var spaceRe=/\s+/;var equalsRe=/\s*=/;var curlyRe=/\s*\}/;var tagRe=/#|\^|\/|>|\{|&|=|!/;function parseTemplate(template,tags){if(!template)return[];var sections=[];var tokens=[];var spaces=[];var hasTag=false;var nonSpace=false;function stripSpace(){if(hasTag&&!nonSpace){while(spaces.length)delete tokens[spaces.pop()]}else{spaces=[]}hasTag=false;nonSpace=false}var openingTagRe,closingTagRe,closingCurlyRe;function compileTags(tagsToCompile){if(typeof tagsToCompile==="string")tagsToCompile=tagsToCompile.split(spaceRe,2);if(!isArray(tagsToCompile)||tagsToCompile.length!==2)throw new Error("Invalid tags: "+tagsToCompile);openingTagRe=new RegExp(escapeRegExp(tagsToCompile[0])+"\\s*");closingTagRe=new RegExp("\\s*"+escapeRegExp(tagsToCompile[1]));closingCurlyRe=new RegExp("\\s*"+escapeRegExp("}"+tagsToCompile[1]))}compileTags(tags||mustache.tags);var scanner=new Scanner(template);var start,type,value,chr,token,openSection;while(!scanner.eos()){start=scanner.pos;value=scanner.scanUntil(openingTagRe);if(value){for(var i=0,valueLength=value.length;i<valueLength;++i){chr=value.charAt(i);if(isWhitespace(chr)){spaces.push(tokens.length)}else{nonSpace=true}tokens.push(["text",chr,start,start+1]);start+=1;if(chr==="\n")stripSpace()}}if(!scanner.scan(openingTagRe))break;hasTag=true;type=scanner.scan(tagRe)||"name";scanner.scan(whiteRe);if(type==="="){value=scanner.scanUntil(equalsRe);scanner.scan(equalsRe);scanner.scanUntil(closingTagRe)}else if(type==="{"){value=scanner.scanUntil(closingCurlyRe);scanner.scan(curlyRe);scanner.scanUntil(closingTagRe);type="&"}else{value=scanner.scanUntil(closingTagRe)}if(!scanner.scan(closingTagRe))throw new Error("Unclosed tag at "+scanner.pos);token=[type,value,start,scanner.pos];tokens.push(token);if(type==="#"||type==="^"){sections.push(token)}else if(type==="/"){openSection=sections.pop();if(!openSection)throw new Error('Unopened section "'+value+'" at '+start);if(openSection[1]!==value)throw new Error('Unclosed section "'+openSection[1]+'" at '+start)}else if(type==="name"||type==="{"||type==="&"){nonSpace=true}else if(type==="="){compileTags(value)}}openSection=sections.pop();if(openSection)throw new Error('Unclosed section "'+openSection[1]+'" at '+scanner.pos);return nestTokens(squashTokens(tokens))}function squashTokens(tokens){var squashedTokens=[];var token,lastToken;for(var i=0,numTokens=tokens.length;i<numTokens;++i){token=tokens[i];if(token){if(token[0]==="text"&&lastToken&&lastToken[0]==="text"){lastToken[1]+=token[1];lastToken[3]=token[3]}else{squashedTokens.push(token);lastToken=token}}}return squashedTokens}function nestTokens(tokens){var nestedTokens=[];var collector=nestedTokens;var sections=[];var token,section;for(var i=0,numTokens=tokens.length;i<numTokens;++i){token=tokens[i];switch(token[0]){case"#":case"^":collector.push(token);sections.push(token);collector=token[4]=[];break;case"/":section=sections.pop();section[5]=token[2];collector=sections.length>0?sections[sections.length-1][4]:nestedTokens;break;default:collector.push(token)}}return nestedTokens}function Scanner(string){this.string=string;this.tail=string;this.pos=0}Scanner.prototype.eos=function eos(){return this.tail===""};Scanner.prototype.scan=function scan(re){var match=this.tail.match(re);if(!match||match.index!==0)return"";var string=match[0];this.tail=this.tail.substring(string.length);this.pos+=string.length;return string};Scanner.prototype.scanUntil=function scanUntil(re){var index=this.tail.search(re),match;switch(index){case-1:match=this.tail;this.tail="";break;case 0:match="";break;default:match=this.tail.substring(0,index);this.tail=this.tail.substring(index)}this.pos+=match.length;return match};function Context(view,parentContext){this.view=view;this.cache={".":this.view};this.parent=parentContext}Context.prototype.push=function push(view){return new Context(view,this)};Context.prototype.lookup=function lookup(name){var cache=this.cache;var value;if(cache.hasOwnProperty(name)){value=cache[name]}else{var context=this,names,index,lookupHit=false;while(context){if(name.indexOf(".")>0){value=context.view;names=name.split(".");index=0;while(value!=null&&index<names.length){if(index===names.length-1)lookupHit=hasProperty(value,names[index]);value=value[names[index++]]}}else{value=context.view[name];lookupHit=hasProperty(context.view,name)}if(lookupHit)break;context=context.parent}cache[name]=value}if(isFunction(value))value=value.call(this.view);return value};function Writer(){this.cache={}}Writer.prototype.clearCache=function clearCache(){this.cache={}};Writer.prototype.parse=function parse(template,tags){var cache=this.cache;var tokens=cache[template];if(tokens==null)tokens=cache[template]=parseTemplate(template,tags);return tokens};Writer.prototype.render=function render(template,view,partials){var tokens=this.parse(template);var context=view instanceof Context?view:new Context(view);return this.renderTokens(tokens,context,partials,template)};Writer.prototype.renderTokens=function renderTokens(tokens,context,partials,originalTemplate){var buffer="";var token,symbol,value;for(var i=0,numTokens=tokens.length;i<numTokens;++i){value=undefined;token=tokens[i];symbol=token[0];if(symbol==="#")value=this.renderSection(token,context,partials,originalTemplate);else if(symbol==="^")value=this.renderInverted(token,context,partials,originalTemplate);else if(symbol===">")value=this.renderPartial(token,context,partials,originalTemplate);else if(symbol==="&")value=this.unescapedValue(token,context);else if(symbol==="name")value=this.escapedValue(token,context);else if(symbol==="text")value=this.rawValue(token);if(value!==undefined)buffer+=value}return buffer};Writer.prototype.renderSection=function renderSection(token,context,partials,originalTemplate){var self=this;var buffer="";var value=context.lookup(token[1]);function subRender(template){return self.render(template,context,partials)}if(!value)return;if(isArray(value)){for(var j=0,valueLength=value.length;j<valueLength;++j){buffer+=this.renderTokens(token[4],context.push(value[j]),partials,originalTemplate)}}else if(typeof value==="object"||typeof value==="string"||typeof value==="number"){buffer+=this.renderTokens(token[4],context.push(value),partials,originalTemplate)}else if(isFunction(value)){if(typeof originalTemplate!=="string")throw new Error("Cannot use higher-order sections without the original template");value=value.call(context.view,originalTemplate.slice(token[3],token[5]),subRender);if(value!=null)buffer+=value}else{buffer+=this.renderTokens(token[4],context,partials,originalTemplate)}return buffer};Writer.prototype.renderInverted=function renderInverted(token,context,partials,originalTemplate){var value=context.lookup(token[1]);if(!value||isArray(value)&&value.length===0)return this.renderTokens(token[4],context,partials,originalTemplate)};Writer.prototype.renderPartial=function renderPartial(token,context,partials){if(!partials)return;var value=isFunction(partials)?partials(token[1]):partials[token[1]];if(value!=null)return this.renderTokens(this.parse(value),context,partials,value)};Writer.prototype.unescapedValue=function unescapedValue(token,context){var value=context.lookup(token[1]);if(value!=null)return value};Writer.prototype.escapedValue=function escapedValue(token,context){var value=context.lookup(token[1]);if(value!=null)return mustache.escape(value)};Writer.prototype.rawValue=function rawValue(token){return token[1]};mustache.name="mustache.js";mustache.version="2.2.1";mustache.tags=["{{","}}"];var defaultWriter=new Writer;mustache.clearCache=function clearCache(){return defaultWriter.clearCache()};mustache.parse=function parse(template,tags){return defaultWriter.parse(template,tags)};mustache.render=function render(template,view,partials){if(typeof template!=="string"){throw new TypeError('Invalid template! Template should be a "string" '+'but "'+typeStr(template)+'" was given as the first '+"argument for mustache#render(template, view, partials)")}return defaultWriter.render(template,view,partials)};mustache.to_html=function to_html(template,view,partials,send){var result=mustache.render(template,view,partials);if(isFunction(send)){send(result)}else{return result}};mustache.escape=escapeHtml;mustache.Scanner=Scanner;mustache.Context=Context;mustache.Writer=Writer});
/*!
 * accounting.js v0.4.2
 * Copyright 2014 Open Exchange Rates
 *
 * Freely distributable under the MIT license.
 * Portions of accounting.js are inspired or borrowed from underscore.js
 *
 * Full details and documentation:
 * http://openexchangerates.github.io/accounting.js/
 */

(function(root, undefined) {

	/* --- Setup --- */

	// Create the local library object, to be exported or referenced globally later
	var lib = {};

	// Current version
	lib.version = '0.4.1';


	/* --- Exposed settings --- */

	// The library's settings configuration object. Contains default parameters for
	// currency and number formatting
	lib.settings = {
		currency: {
			symbol : "$",		// default currency symbol is '$'
			format : "%s%v",	// controls output: %s = symbol, %v = value (can be object, see docs)
			decimal : ".",		// decimal point separator
			thousand : ",",		// thousands separator
			precision : 2,		// decimal places
			grouping : 3		// digit grouping (not implemented yet)
		},
		number: {
			precision : 0,		// default precision on numbers is 0
			grouping : 3,		// digit grouping (not implemented yet)
			thousand : ",",
			decimal : "."
		}
	};


	/* --- Internal Helper Methods --- */

	// Store reference to possibly-available ECMAScript 5 methods for later
	var nativeMap = Array.prototype.map,
		nativeIsArray = Array.isArray,
		toString = Object.prototype.toString;

	/**
	 * Tests whether supplied parameter is a string
	 * from underscore.js
	 */
	function isString(obj) {
		return !!(obj === '' || (obj && obj.charCodeAt && obj.substr));
	}

	/**
	 * Tests whether supplied parameter is a string
	 * from underscore.js, delegates to ECMA5's native Array.isArray
	 */
	function isArray(obj) {
		return nativeIsArray ? nativeIsArray(obj) : toString.call(obj) === '[object Array]';
	}

	/**
	 * Tests whether supplied parameter is a true object
	 */
	function isObject(obj) {
		return obj && toString.call(obj) === '[object Object]';
	}

	/**
	 * Extends an object with a defaults object, similar to underscore's _.defaults
	 *
	 * Used for abstracting parameter handling from API methods
	 */
	function defaults(object, defs) {
		var key;
		object = object || {};
		defs = defs || {};
		// Iterate over object non-prototype properties:
		for (key in defs) {
			if (defs.hasOwnProperty(key)) {
				// Replace values with defaults only if undefined (allow empty/zero values):
				if (object[key] == null) object[key] = defs[key];
			}
		}
		return object;
	}

	/**
	 * Implementation of `Array.map()` for iteration loops
	 *
	 * Returns a new Array as a result of calling `iterator` on each array value.
	 * Defers to native Array.map if available
	 */
	function map(obj, iterator, context) {
		var results = [], i, j;

		if (!obj) return results;

		// Use native .map method if it exists:
		if (nativeMap && obj.map === nativeMap) return obj.map(iterator, context);

		// Fallback for native .map:
		for (i = 0, j = obj.length; i < j; i++ ) {
			results[i] = iterator.call(context, obj[i], i, obj);
		}
		return results;
	}

	/**
	 * Check and normalise the value of precision (must be positive integer)
	 */
	function checkPrecision(val, base) {
		val = Math.round(Math.abs(val));
		return isNaN(val)? base : val;
	}


	/**
	 * Parses a format string or object and returns format obj for use in rendering
	 *
	 * `format` is either a string with the default (positive) format, or object
	 * containing `pos` (required), `neg` and `zero` values (or a function returning
	 * either a string or object)
	 *
	 * Either string or format.pos must contain "%v" (value) to be valid
	 */
	function checkCurrencyFormat(format) {
		var defaults = lib.settings.currency.format;

		// Allow function as format parameter (should return string or object):
		if ( typeof format === "function" ) format = format();

		// Format can be a string, in which case `value` ("%v") must be present:
		if ( isString( format ) && format.match("%v") ) {

			// Create and return positive, negative and zero formats:
			return {
				pos : format,
				neg : format.replace("-", "").replace("%v", "-%v"),
				zero : format
			};

		// If no format, or object is missing valid positive value, use defaults:
		} else if ( !format || !format.pos || !format.pos.match("%v") ) {

			// If defaults is a string, casts it to an object for faster checking next time:
			return ( !isString( defaults ) ) ? defaults : lib.settings.currency.format = {
				pos : defaults,
				neg : defaults.replace("%v", "-%v"),
				zero : defaults
			};

		}
		// Otherwise, assume format was fine:
		return format;
	}


	/* --- API Methods --- */

	/**
	 * Takes a string/array of strings, removes all formatting/cruft and returns the raw float value
	 * Alias: `accounting.parse(string)`
	 *
	 * Decimal must be included in the regular expression to match floats (defaults to
	 * accounting.settings.number.decimal), so if the number uses a non-standard decimal 
	 * separator, provide it as the second argument.
	 *
	 * Also matches bracketed negatives (eg. "$ (1.99)" => -1.99)
	 *
	 * Doesn't throw any errors (`NaN`s become 0) but this may change in future
	 */
	var unformat = lib.unformat = lib.parse = function(value, decimal) {
		// Recursively unformat arrays:
		if (isArray(value)) {
			return map(value, function(val) {
				return unformat(val, decimal);
			});
		}

		// Fails silently (need decent errors):
		value = value || 0;

		// Return the value as-is if it's already a number:
		if (typeof value === "number") return value;

		// Default decimal point comes from settings, but could be set to eg. "," in opts:
		decimal = decimal || lib.settings.number.decimal;

		 // Build regex to strip out everything except digits, decimal point and minus sign:
		var regex = new RegExp("[^0-9-" + decimal + "]", ["g"]),
			unformatted = parseFloat(
				("" + value)
				.replace(/\((.*)\)/, "-$1") // replace bracketed values with negatives
				.replace(regex, '')         // strip out any cruft
				.replace(decimal, '.')      // make sure decimal point is standard
			);

		// This will fail silently which may cause trouble, let's wait and see:
		return !isNaN(unformatted) ? unformatted : 0;
	};


	/**
	 * Implementation of toFixed() that treats floats more like decimals
	 *
	 * Fixes binary rounding issues (eg. (0.615).toFixed(2) === "0.61") that present
	 * problems for accounting- and finance-related software.
	 */
	var toFixed = lib.toFixed = function(value, precision) {
		precision = checkPrecision(precision, lib.settings.number.precision);
		var power = Math.pow(10, precision);

		// Multiply up by precision, round accurately, then divide and use native toFixed():
		return (Math.round(lib.unformat(value) * power) / power).toFixed(precision);
	};


	/**
	 * Format a number, with comma-separated thousands and custom precision/decimal places
	 * Alias: `accounting.format()`
	 *
	 * Localise by overriding the precision and thousand / decimal separators
	 * 2nd parameter `precision` can be an object matching `settings.number`
	 */
	var formatNumber = lib.formatNumber = lib.format = function(number, precision, thousand, decimal) {
		// Resursively format arrays:
		if (isArray(number)) {
			return map(number, function(val) {
				return formatNumber(val, precision, thousand, decimal);
			});
		}

		// Clean up number:
		number = unformat(number);

		// Build options object from second param (if object) or all params, extending defaults:
		var opts = defaults(
				(isObject(precision) ? precision : {
					precision : precision,
					thousand : thousand,
					decimal : decimal
				}),
				lib.settings.number
			),

			// Clean up precision
			usePrecision = checkPrecision(opts.precision),

			// Do some calc:
			negative = number < 0 ? "-" : "",
			base = parseInt(toFixed(Math.abs(number || 0), usePrecision), 10) + "",
			mod = base.length > 3 ? base.length % 3 : 0;

		// Format the number:
		return negative + (mod ? base.substr(0, mod) + opts.thousand : "") + base.substr(mod).replace(/(\d{3})(?=\d)/g, "$1" + opts.thousand) + (usePrecision ? opts.decimal + toFixed(Math.abs(number), usePrecision).split('.')[1] : "");
	};


	/**
	 * Format a number into currency
	 *
	 * Usage: accounting.formatMoney(number, symbol, precision, thousandsSep, decimalSep, format)
	 * defaults: (0, "$", 2, ",", ".", "%s%v")
	 *
	 * Localise by overriding the symbol, precision, thousand / decimal separators and format
	 * Second param can be an object matching `settings.currency` which is the easiest way.
	 *
	 * To do: tidy up the parameters
	 */
	var formatMoney = lib.formatMoney = function(number, symbol, precision, thousand, decimal, format) {
		// Resursively format arrays:
		if (isArray(number)) {
			return map(number, function(val){
				return formatMoney(val, symbol, precision, thousand, decimal, format);
			});
		}

		// Clean up number:
		number = unformat(number);

		// Build options object from second param (if object) or all params, extending defaults:
		var opts = defaults(
				(isObject(symbol) ? symbol : {
					symbol : symbol,
					precision : precision,
					thousand : thousand,
					decimal : decimal,
					format : format
				}),
				lib.settings.currency
			),

			// Check format (returns object with pos, neg and zero):
			formats = checkCurrencyFormat(opts.format),

			// Choose which format to use for this value:
			useFormat = number > 0 ? formats.pos : number < 0 ? formats.neg : formats.zero;

		// Return with currency symbol added:
		return useFormat.replace('%s', opts.symbol).replace('%v', formatNumber(Math.abs(number), checkPrecision(opts.precision), opts.thousand, opts.decimal));
	};


	/**
	 * Format a list of numbers into an accounting column, padding with whitespace
	 * to line up currency symbols, thousand separators and decimals places
	 *
	 * List should be an array of numbers
	 * Second parameter can be an object containing keys that match the params
	 *
	 * Returns array of accouting-formatted number strings of same length
	 *
	 * NB: `white-space:pre` CSS rule is required on the list container to prevent
	 * browsers from collapsing the whitespace in the output strings.
	 */
	lib.formatColumn = function(list, symbol, precision, thousand, decimal, format) {
		if (!list) return [];

		// Build options object from second param (if object) or all params, extending defaults:
		var opts = defaults(
				(isObject(symbol) ? symbol : {
					symbol : symbol,
					precision : precision,
					thousand : thousand,
					decimal : decimal,
					format : format
				}),
				lib.settings.currency
			),

			// Check format (returns object with pos, neg and zero), only need pos for now:
			formats = checkCurrencyFormat(opts.format),

			// Whether to pad at start of string or after currency symbol:
			padAfterSymbol = formats.pos.indexOf("%s") < formats.pos.indexOf("%v") ? true : false,

			// Store value for the length of the longest string in the column:
			maxLength = 0,

			// Format the list according to options, store the length of the longest string:
			formatted = map(list, function(val, i) {
				if (isArray(val)) {
					// Recursively format columns if list is a multi-dimensional array:
					return lib.formatColumn(val, opts);
				} else {
					// Clean up the value
					val = unformat(val);

					// Choose which format to use for this value (pos, neg or zero):
					var useFormat = val > 0 ? formats.pos : val < 0 ? formats.neg : formats.zero,

						// Format this value, push into formatted list and save the length:
						fVal = useFormat.replace('%s', opts.symbol).replace('%v', formatNumber(Math.abs(val), checkPrecision(opts.precision), opts.thousand, opts.decimal));

					if (fVal.length > maxLength) maxLength = fVal.length;
					return fVal;
				}
			});

		// Pad each number in the list and send back the column of numbers:
		return map(formatted, function(val, i) {
			// Only if this is a string (not a nested array, which would have already been padded):
			if (isString(val) && val.length < maxLength) {
				// Depending on symbol position, pad after symbol or at index 0:
				return padAfterSymbol ? val.replace(opts.symbol, opts.symbol+(new Array(maxLength - val.length + 1).join(" "))) : (new Array(maxLength - val.length + 1).join(" ")) + val;
			}
			return val;
		});
	};


	/* --- Module Definition --- */

	// Export accounting for CommonJS. If being loaded as an AMD module, define it as such.
	// Otherwise, just add `accounting` to the global object
	if (typeof exports !== 'undefined') {
		if (typeof module !== 'undefined' && module.exports) {
			exports = module.exports = lib;
		}
		exports.accounting = lib;
	} else if (typeof define === 'function' && define.amd) {
		// Return the library as an AMD module:
		define([], function() {
			return lib;
		});
	} else {
		// Use accounting.noConflict to restore `accounting` back to its original value.
		// Returns a reference to the library's `accounting` object;
		// e.g. `var numbers = accounting.noConflict();`
		lib.noConflict = (function(oldAccounting) {
			return function() {
				// Reset the value of the root's `accounting` variable:
				root.accounting = oldAccounting;
				// Delete the noConflict method:
				lib.noConflict = undefined;
				// Return reference to the library to re-assign it:
				return lib;
			};
		})(root.accounting);

		// Declare `fx` on the root (global/window) object:
		root['accounting'] = lib;
	}

	// Root will be `window` in browser or `global` on the server:
}(this));
ACC.account = {
	_autoload: [
		"addfields",
		"inputBlockValidator",
		"emailAndSmsSave",
		"bindAddressZipCodeInput",
		"bindOneClickToBuy",
		"bindValidateEmailEsqueciModal",
		"esqueciEmailtocpfcnpj",
		"extendsBoleto",
		"showFastBuyModal",
		"exchangeTickets",
		"validateEmails",
		"validateFields",
		"onlyLetters",
		"removePhone",
		"updateAddPhoneButton",
		"updateErrorMessage",
		"removePhoneClick",
		"updateRemovePhoneButton",
		"updateSaveButton",
		"disableSaveButtonIfHasEmptyPhones",
		"showHideOtherAddressLocationTypeDiv",
		["bindCheckResetPwd", $("body.page-updatePassword").length > 0],
		["changeMaskExpiryCard", $("body.page-myaccountfastbuy").length > 0]
	],
	inputBlockValidator: function() {
		$('.block-input-email-validator').blur(function() {
			var campoEmail = $("#email").val();
			if (campoEmail != "") {
				$('#cpfCnpj').prop('disabled', true);
				$('.help-block-validation-cpfCnpj').hide();
			}
		}),
			$("#cpfCnpj").blur(function() {
				var CampocpfCnpj = $("#cpfCnpj").val();
				if (CampocpfCnpj != "") {
					$("#email").prop('disabled', true);
					$('.help-block-validation-email').hide();
					$('.has-error .form-control').css('border-color', 'transparent', 'box-shadow', 'none');
				}
			}),
			$('#onSubmitForgotten').click(function() {
				$('.has-error .form-control').css('border-color', '#e6e7e8');
			}),
			$("#cpfCnpj").keyup(function() {
				var campoEmail = $("#email").val();
				if (campoEmail == "") {
					$("#email").prop('disabled', false);
				}
			}),
			$(".block-input-email-validator").keyup(function() {
				var CampocpfCnpj = $("#cpfCnpj").val();
				if (CampocpfCnpj == "") {
					$("#cpfCnpj").prop('disabled', false);
				}
			}),
			$('#closeModal').click(function() {
				$('.block-input-email-validator').prop('disabled', false);
				$('#cpfCnpj').prop('disabled', false);
				$('.has-error .form-control').css('border-color', '#e6e7e8');
			})
	},
	esqueciEmailtocpfcnpj: function(cpfCnpj) {


		$("#msgCpfNotRegister").hide();
		$("#msgEmail").hide();

		$("#clicButtonSend").on("click", function() {

			var cpfcnpjnumber = $("#cpfCnpjValId").val();
			var url1 = $("#forgottenPwdForm").attr("action");

			if (cpfcnpjnumber.length > 0) {

				$.ajax({
					url: url1,
					type: "post",
					data: {
						cpfCnpj: cpfcnpjnumber
					},

					success: function(result) {

						$('#msgEmail p').html(result.msg);
						$('#msgEmail').show();
						$("#msgCpfNotRegister").hide();
						$('#blockCpf').hide();


					},
					error: function() {
						$("#msgCpfNotRegister").show();
						$('#msgEmail').hide();
						$('#blockCpf').hide();

					},

				})

			}

			$("#closeButtonModalFlow").on("click", function() {
				$("#msgCpfNotRegister").hide();
				$('#msgEmail').hide();
				$("#cpfCnpjValId").val('');
				$('#blockCpf').show();
			});

		});
	},
	bindValidateEmailEsqueciModal: function(email, cpfCnpj) {
		//empty field validation
		$('input#email').focus(function() {
			if($('.help-block-validation-email-empty').is(':visible')) {
				$('.help-block-validation-email-empty').hide();
				$('.control-group-email, .control-group-cpfCnpj').removeClass('has-error');
			}
		});
		$("#onSubmitForgotten").on("click",
			function() {
				var emailCampo = $("#email").val();
				var firstNumber = $('#cpfCnpj').val();
				if (emailCampo == "" & firstNumber == "") {
					$('.control-group-email, .control-group-cpfCnpj').addClass('has-error');
					$('.help-block-validation-email-empty').show();
				}
				if (emailCampo != "") {
					var filtro = /^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;
					$.ajax({
						url: "/login/pw/request",
						type: "post",
						data: {
							email: emailCampo
						},
						success: function(result) {
							$("#formEsqueciSenha").focus();
							$('.control-group-email').removeClass('has-error').addClass('has-success');
							$('.help-block-validation-email').hide();
							$('.control-group-email').removeClass('has-error');
							$('#msgpassowrd').html(result.msg);
							$('#msgpassowrd').show();
							dataLayer[0] = JSON.parse(result.dataLayer);
						},
						error: function(error) {
							console.log(error);
							if (error.responseJSON.isnull === "false") {
								console.log(error);
								$.ajax({
									url: "login/cadastro-social",
									type: "post",
									data: {
										email: error.responseJSON.emailSocial,
										id: error.responseJSON.idSocial,
										gender: error.responseJSON.genderSocial,
										firstName: error.responseJSON.firstname,
										lastName: error.responseJSON.lastname,
									},
									success: function(result) {
										$("#verifiedSocialEmailnet").val(error.responseJSON.emailSocial);
										$("#idSubmitSocial").submit();
									},
									error: function(result) {}
								});
							} else {
								$('.control-group-email').addClass('has-error');
								$('.help-block-validation-email').show();
								$('#msgpassowrd').hide();
							}
						}
					})
					$("#closeModal").on("click", function() {
						$('.control-group-email').removeClass('has-error');
						$('.control-group-cpfCnpj').removeClass('has-error');
						$('.control-group-email').removeClass('has-success');
						$('.help-block-validation-email').hide();
						$("#email").val('');
						$('.control-group-cpfCnpj').removeClass('has-success');
						$('.group-form-sendEnvio').hide();
						$('#msgpassowrd').hide();
						$('.help-block-validation-email').hide();
					})
				}
				if (firstNumber != "") {
					$.ajax({
						url: "/login/pw/request",
						type: "post",
						data: {
							cpfCnpj: firstNumber
						},
						success: function(result) {
							$("#formEsqueciSenha").focus();
							$('.control-group-cpfCnpj').removeClass('has-error').addClass('has-success');
							$('.help-block-validation-cpfCnpj').hide();
							$('#msgpassowrd').html(result.msg);
							$('#msgpassowrd').show();
							dataLayer[0] = JSON.parse(result.dataLayer);
						},
						error: function() {
							$('.control-group-cpfCnpj').addClass('has-error');
							$('.help-block-validation-cpfCnpj').show();
							$('.group-form-sendEnvio').hide();
						},
					})
					$("#closeModal").on("click", function() {
						$('.control-group-email').removeClass('has-error');
						$('.control-group-cpfCnpj').removeClass('has-error');
						$('.control-group-email').removeClass('has-success');
						$('.control-group-cpfCnpj').removeClass('has-success');
						$('.help-block-validation-cpfCnpj').hide();
						$('.group-form-sendEnvio').hide();
						$("#cpfCnpj").val('');
						$('#msgpassowrd').hide();
					})
				}
			});
	},
	addfields: function() {
		ACC.account.email = 0;
		ACC.account.phone = 0;

		var pageAlreadyHasAphoneField = $('.phone-pk0').val()
		if (pageAlreadyHasAphoneField) {
			ACC.account.phone = 1;
		}

		$('.add').on('click', function() {
			$('#submitProfileForm').removeClass('hidden');
			$('#CloseModalForm').removeClass('hidden');
			if ($(this).val() == "buttonEmail") {
				if (ACC.account.email < 10) {
					var div = $('#email_scents');
					var html =
						'<div class="form-group email">' +
						'<input name="emails" class="form-control" id="idEmails" placeholder="E-mail">' +
						'</div>' +
						'<div class="custom-checkbox"> ' +
						'<input type="checkbox" class="email-check' + ACC.account.email + '" data-pk="' + ACC.account.email + '" checked> ' +
						'<input type="hidden" name="emailsPk" value="' + ACC.account.email + '">' +
						'<input class="email-news' + ACC.account.email + '" name="emailsNewsletter" type="hidden">' +
						'<span class="lbl" id="spanAlert">Quero receber ofertas e novidades do Grupo Carrefour neste e-mail.</span>' +
						'</div>';
					ACC.account.email++;
				}
			} else if ($(this).val() == "buttonPhone") {
				var div = $('#phone_scents');

                var removePhoneBlock = '';
                var enablePhoneMaxQuantity = $('#enablePhoneMaxQuantity').val() == "true";
                if(enablePhoneMaxQuantity) {
                    removePhoneBlock = '<div class="col-md-1 col-sm-1 col-xs-1 pull-right hidden remove-phone exclude-phone-pk'+ ACC.account.phone + ' center-block" style="padding-top: 10px; cursor: pointer;"><span> Excluir </span></div>';
                }


				var html =
					'<div class="col-md-6 col-sm-6">' +
					'<div class="form-group"> ' +
					'<input id="phones'+ ACC.account.phone + '" name="phones" placeholder="Telefone" class="phone'+ ACC.account.phone +' celphone-mask form-control"/>' +
					'</div> ' +
					'<div class="form-group">' +
					'<div class="custom-checkbox">' +
					'<input type="checkbox" id="phone-check' + ACC.account.phone + '" data-pk="' + ACC.account.phone + '" class="phone-check' + ACC.account.phone + '">' +
					'<input type="hidden" class="phone-news' + ACC.account.phone + '" name="phonesNewsletter" />' +
					'<label id="phoneCheckBox' + ACC.account.phone + '" class="lbl hidden" for="phone-check' + ACC.account.phone + '">&nbsp;Quero receber ofertas e novidades do Grupo Carrefour neste telefone.</label>' +							'</div>' +
					'</div>' +
					'</div> ' +
					removePhoneBlock +
					'<div class="col-md-5 col-sm-5"> ' +
					'<div class="form-group">'+
					'<div class="styled-select phone-pk'+ ACC.account.phone +'" data-phone="' + ACC.account.phone + '">' + $('#phoneTypesExample').html() +
					'</div> ' +
					'</div> ' +
					'</div> ' +
					'</div>' +
					'<input type="hidden" class="phone-check' + ACC.account.phone + '" name="phonesPk" value="' + ACC.account.phone + '" data-pk="' + ACC.account.phone + '"/>' +
					'<div class="col-md-12 col-sm-12"> ' +
					'<div class="custom-checkbox"> ' +
					'</div>';
				ACC.account.phone++;



			}
			$(html).appendTo(div);
			var options = $('select[id="phoneTypes"]').children();
			$('.phone').last().append(options.clone());
			ACC.account.updateAddPhoneButton();
			ACC.account.updateRemovePhoneButton();
			$(".remove-phone").on('click', ACC.account.removePhoneClick);

            var enablePhoneMaxQuantity = $('#enablePhoneMaxQuantity').val() == "true";
            if(enablePhoneMaxQuantity) {
                var indexField = ACC.account.phone - 1
                $('#phones'+indexField).focus();
            }


		});
		$("#CloseModalForm").on('click', function() {
			$('input[name="emails"]').remove();
			$('.custom-checkbox').remove();
			$('#CloseModalForm').addClass('hidden');
			$('#submitProfileForm').addClass('hidden');
		});
		$('input[name="emails"]').on('focus', function() {
			var result = $(this).val();
			var emailpk = $(this).data("emailpk");
			if (result != "") {
				var result = $(this).val();
				var emailpk = $(this).data("emailpk");
				$(".newsletter-checkox." + emailpk).removeClass('hidden');
			}
		});
		$('input[name="phones"]').on('click', function() {
			var result = $(this).val();
			var phonesPk = $(this).data("phonepk");
			if (result != "") {
				var result = $(this).val();
				var phonesPk = $(this).data("phonepk");
				$(".newsletter-addphones." + phonesPk).removeClass('hidden');
			}
		});
		$("#profileEditForm").on('blur', 'input[name="phones"]', function() {
			$(this).parent().find('.help-block').remove();
			var campoOutroTelefone = $(this).val();
			if (campoOutroTelefone.length < 14) {
				$(this).css("border", "1px solid red");
				$(this).parent().append('<span class="help-block"  style="color:red" >Numero incompleto</span>');
				$("#submitProfileForm").prop("disabled", true);
			}
		});
		$("#profileEditForm").on('keyup', 'input[name="phones"]', function() {
			var campoOutroTelefone = $(this).val();
			if (campoOutroTelefone.length === 14 || campoOutroTelefone.length === 15) {
				$(this).css("border", "");
				$(this).parent().find('.help-block').remove();
				$("#submitProfileForm").prop("disabled", false);
			}
		});
		$("#carrefourAddressForm").on('blur', 'input[id="firstPhone"]', function() {
			$(this).parent().find('.help-block').remove();
			var campoOutroTelefone = $(this).val();
			if (campoOutroTelefone.length < 14) {
				$(this).css("border", "1px solid red");
				$(this).parent().append('<span class="help-block"  style="color:red" >Numero incompleto</span>');
				$("#carrefourAddressForm").prop("disabled", true);
				$("#submitAddressFormFullRegister").prop("disabled", true);
				$("#submitAddressFormFullRegister").css('background-color', '#d3d3d3');
			}
			else   {
				$("#submitAddressFormFullRegister").prop("disabled", false);
				$("#submitAddressFormFullRegister").css('background-color', '');
			}
		});

		$("#carrefourAddressForm").on('keyup', 'input[id="firstPhone"]', function() {
			var campoOutroTelefone = $(this).val();
			if (campoOutroTelefone.length === 14 || campoOutroTelefone.length === 15) {
				$(this).css("border", "");
				$(this).parent().find('.help-block').remove();
				$("#carrefourAddressForm").prop("disabled", false);
				$("#submitAddressFormFullRegister").css('background-color', '');
				$("#submitAddressFormFullRegister").prop("disabled", false);

			}

		});
	},
	emailAndSmsSave: function() {
		$(document).on("click", "#sendAlertsButton", function() {
			$("input[id*='email-check']").each(function() {
				if ($(this).is(":checked")) {
					$("input[id='email-val" + $(this).data('pk') + "']").val(true);
				} else {
					$("input[id='email-val" + $(this).data('pk') + "']").val(false);
				}
			});
			$("input[id*='phone-check']").each(function() {
				if ($(this).is(":checked")) {
					$("input[id='phone-val" + $(this).data('pk') + "']").val(true);
				} else {
					$("input[id='phone-val" + $(this).data('pk') + "']").val(false);
				}
			});
			$("input[id*='default-email-check']").each(function() {
				if ($(this).is(":checked"))
				{
					$("input[id='emailcheck-val" + $(this).data('email-pk') + "']").val(true);
				} else {
					$("input[id='emailcheck-val" + $(this).data('email-pk') + "']").val(false);
				}
			});
			$("#alertsForm").submit();
		});
		$(document).on("click", "#submitProfileForm", function() {
		   var hasEmptyPhone = ACC.account.disableSaveButtonIfHasEmptyPhones();
			$("input[class*='email-check']").each(function() {
				if ($(this).is(":checked")) {
					$("input[class*='email-news" + $(this).data('pk') + "']").val(true);
				} else {
					$("input[class*='email-news" + $(this).data('pk') + "']").val(false);
				}
			});
			$("input[class*='phone-check']").each(function() {
				if ($(this).is(":checked")) {
					$("input[class*='phone-news" + $(this).data('pk') + "']").val(true);
				} else {
					$("input[class*='phone-news" + $(this).data('pk') + "']").val(false);
				}
			});
			if ($('select#gender').val() == "" || $('select#birthDay').val() == "" || $('select#birthMonth').val() == "" || $('select#birthYear').val() == "" || $('select#typePhone').val() == ""){
				$('#submitProfileForm').prop("disabled", true);
				$(this).parents('.form-group').addClass('has-error');
			} else if(!hasEmptyPhone) {
                $("#profileEditForm").submit();
            }
			$('#born select, form#profileEditForm select#birthYear').each(function() {
				if($(this).val() == "") {
					$(this).parents('.form-group').addClass('has-error');
				}
			});

		});
		$('#born select').change(function() {
			if($(this).val() != "") {
				$('button#submitProfileForm').removeAttr('disabled');
				$(this).parents('.form-group').removeClass('has-error');

			}
		});
		$(document).on("click", "#submitAddressFormFullRegister", function() {
			$("input[class*='phone-check']").each(function() {
				if ($(this).is(":checked")) {
					$("input[class*='phone-news" + $(this).data('pk') + "']").val(true);
				} else {
					$("input[class*='phone-news" + $(this).data('pk') + "']").val(false);
				}
			});

			if(!$("#input-district-block").hasClass("hidden"))
			{
				$("#district").val($("#inputDistrict").val());
			}

			if(!$("#input-paymentdistrict-block").hasClass("hidden"))
			{
				$("#paymentDistrict").val($("#inputPaymentDistrict").val());
			}

			$("#carrefourAddressForm").submit();
		});
	},
	bindnewAddressadded: function() {
		$("#btnAdressesNew").on("click", function() {
			$("#newAdressCarrefourChange").get(0).setAttribute("action", setDefaultDeliveryUrl + $("input[name=orderNewAdress]:checked").val());
			$("#newAdressCarrefourChange").submit();
		});
	},
	bindOneClickToBuy: function() {
		$("#submitChangeDefaultAddress").on("click", function() {
			$("#changeDefaultAddressForm").get(0).setAttribute("action", setDefaultDeliveryUrl + $("input[name=addressId]:checked").val());
			$("#changeDefaultAddressForm").submit();
		});
		$("#activateOneClickToBuy").on("click", function() {
			$.ajax({
				url: fastBuyUrl,
				type: 'POST',
				dataType: 'json',
				data: {
					activate: true
				},
			})
				.done(function(result) {
					$("#activateOneClickToBuy").text("Compra rÃ¡pida ativada");
					$("#activateOneClickToBuy").attr("disabled", "disabled");
				})
				.fail(function(err) {
					console.log(err);
				});
		});
	},
	// zip code event
	bindAddressZipCodeInput: function() {

		if ($("#line1").val() < 1)
		{
			$("#postal-code-result").addClass("hidden");
		}

		if($("#postalCode").val() != undefined && $("#postalCode").val())
		{
			ACC.account.executeZipSearch($("#postalCode").val(), true);
		}

		$("#postalCode").on("blur", function() {
			ACC.account.executeZipSearch($(this).val(), false);
		});

		if ($("#paymentLine1").val() < 1) {
			$("#payment-postal-code-result").addClass("hidden");
		}

		if($("#paymentPostalCode").val() != undefined && $("#paymentPostalCode").val())
		{
			ACC.account.executePaymentZipSearch($("#paymentPostalCode").val(), true);
		}

		$("#paymentPostalCode").on("blur", function() {
			ACC.account.executePaymentZipSearch($(this).val(), false);
		});

	},
	executeZipSearch: function(value, notEmpty) {
		var $zipcode_field = $(this);
		var response = JSON.parse(ACC.postalCode.consult(value));
		if ($("#line1").val() > 0) {
			$("#postal-code-result").removeClass("hidden");
		} else if (response.data == null) {
			$("#postal-code-result").addClass("hidden");
			$("#errorMsgAccount").removeClass("hidden");
			$("#postalCode").next(".help-block").hide();
			//$("#errorMsgAccount").text(response.errorMessages[0]);
			$('input#postalCode').css("border", "1px solid red");
			$("#submitAddressFormFullRegister").prop("disabled", true);
		} else if (response.data != null) {
			$("#errorMsgAccount").removeClass("hidden");
			$("#submitAddressFormFullRegister").prop("disabled", false);
			if(response.data.end == null || response.data.end == "")
			{
				$("#line1").removeClass("block-edit-address-input");
				$("#line1").addClass("block-separate-form-account");
				$("#input-district-block").removeClass("hidden");
				$("#inputDistrict").removeAttr("disabled");
			}
			else
			{
				$("#line1").removeClass("block-separate-form-account");
				$("#line1").addClass("block-edit-address-input");
				$("#input-district-block").addClass("hidden");
				$("#inputDistrict").attr("disabled", "disabled");
				$("#inputline1").attr("disabled", "disabled");
			}

			if(!notEmpty)
			{
				$("#line1").val(response.data.end);
				$("#inputline1").val(response.data.end);

			}

			$("#district").val(response.data.bairro);
			$("#complement").val(response.data.complemento2);
			$("#town").val(response.data.cidade);
			$("#regionIso").val('BR-' + response.data.uf);

			if(response.data.bairro == null)
			{
				$("#district-title").addClass("hidden");
			}
			else
			{
				$("#district-title").removeClass("hidden");
			}

			$("#district-label").text(response.data.bairro);
			$("#town-label").text(response.data.cidade);
			$("#regionIso-label").text(response.data.uf);
			$("#postal-code-result").removeClass("hidden");
			$("#errorMsgAccount").addClass("hidden");
			$('input#postalCode').css("border", "1px solid #e6e7e8");
		}
	},
	executePaymentZipSearch: function(value, notEmpty) {
		var $zipcode_field = $(this);
		var response = JSON.parse(ACC.postalCode.consult(value, true));
		if ($("#paymentLine1").val() > 0) {
			$("#payment-postal-code-result").removeClass("hidden");
		} else if (response.data == null) {
			$("#payment-postal-code-result").addClass("hidden");
			$("#paymentErrorMsgAccount").removeClass("hidden");
		} else if (response.data != null) {

			if(response.data.end == null || response.data.end == "")
			{
				$("#paymentLine1").removeClass("block-edit-address-input");
				$("#paymentLine1").addClass("block-separate-form-account");
				$("#input-paymentdistrict-block").removeClass("hidden");
				$("#inputPaymentDistrict").removeAttr("disabled");
			}
			else
			{
				$("#paymentLine1").removeClass("block-separate-form-account");
				$("#paymentLine1").addClass("block-edit-address-input");
				$("#input-paymentdistrict-block").addClass("hidden");
				$("#inputPaymentDistrict").attr("disabled", "disabled");
			}

			if(!notEmpty)
			{
				$("#paymentLine1").val(response.data.end);
			}
			$("#paymentDistrict").val(response.data.bairro);
			$("#paymentComplement").val(response.data.complemento2);
			$("#paymentTown").val(response.data.cidade);
			$("#paymentRegionIso").val('BR-' + response.data.uf);

			if(response.data.bairro == null)
			{
				$("#payment-district-title").addClass("hidden");
			}
			else
			{
				$("#payment-district-title").removeClass("hidden");
			}

			$("#payment-district-label").text(response.data.bairro);
			$("#payment-town-label").text(response.data.cidade);
			$("#payment-regionIso-label").text(response.data.uf);
			$("#paymentErrorMsgAccount").addClass("hidden");
			$("#payment-postal-code-result").removeClass("hidden");
		}
	},
	extendsBoleto: function() {
		$(document).on("click", ".extends-boleto", function(event) {
			event.preventDefault();
			var aElement = $(this);
			var orderId = aElement.parent().find('input[type="hidden"]').val();
			$.ajax({
				url: 'boleto-extension/' + orderId,
				type: 'GET'
			})
				.done(function(result) {
					window.open(result.url);
					aElement.attr("href", result.url);
					aElement.removeClass("extends-boleto");
					aElement.text("Clique aqui para ver o boleto");
				})
				.fail(function(err) {
					console.log(err);
					alert(err.responseJSON.message)
				});
		});
	},
	exchangeTickets: function() {
		$(document).on("click", ".js-exchangeTicketBalance", function(event) {
			var number = $(this).data('exchangeNumber');
			$.ajax({
				url: exchangeTicketBalanceUrl,
				type: 'POST',
				dataType: 'text',
				data: {
					'number': number
				},
			})
				.done(function(result) {
					$("#modalExchangeTicketBalance").modal('show');
					$("#modalExchangeTicketBalance #data-message").html("Saldo: " + result);
				})
				.fail(function(err) {
					console.log(err);
				});
		});
		$(document).on("click", ".js-activateExchangeTicket", function(event) {
			var cpf = $("#cpf").val();
			$.ajax({
				url: activateExchangeTicketUrl,
				type: 'POST',
				dataType: 'json',
				data: {
					'cpf': cpf
				},
			})
				.done(function(result) {
					if (result == true) {
						window.location.reload();
					} else {
						alert("CPF invÃ¡lido por favor verifique se digitou corretamente.");
					}
				})
				.fail(function(err) {
					console.log(err);
				});
		});
	},
	showFastBuyModal: function() {
		$(document).ready(function() {
			if(typeof showFastBuyModal !== 'undefined')
			{
				if (showFastBuyModal === 'true') {
					$('#modalErroAtivar').modal('show');
				}
			}
		});
	},

	showHideOtherAddressLocationTypeDiv: function() {
		if ($("#otherAddressLocationType").val() == '' && $(".select-full-addres").val() != 'DEFINIR') {
			$("#otherAddressLocationTypeDiv").addClass('hidden');
		} else {
			$("#otherAddressLocationTypeDiv").removeClass('hidden');
		}
		$(".select-full-addres").change(function() {
			if ($(this).val() == 'DEFINIR') {
				$("#otherAddressLocationTypeDiv").removeClass('hidden');
			} else {
				$("#otherAddressLocationTypeDiv").addClass('hidden');
			}
		});
	},

	validateEmails: function() {
		$('input[id*=email-opt]').on('change', function(){
			$('#selectedEmail').text($(this).val());
		});
	},


	validateFields: function(){

		$("#locationtype").on('blur', function() {

			if($(this).val() == ''){

				$(this).css("border", "1px solid red");
				$(".help-block").removeClass('invisible');
				$("#submitAddressForm").prop("disabled", true);

			}else{

				$(this).css("border", "none");
				$(".help-block").addClass('invisible');
				$("#submitAddressForm").prop("disabled", false);

			}
		});

	},



	bindCheckResetPwd: function(){
		$('input[type="password"].form-control').focus(function () {
			$('.form-group').removeClass('has-error');
			$('.help-block-validation-email-empty').hide();
		});

		$('#updatePwdForm').on('submit', function(e){
			var newPassword1 = $('input[type="password"].form-control:first-child').val();
			var newPassword2 = $('input[type="password"].form-control:last-child').val();
			if (newPassword1 == "" || newPassword2 == "") {
				e.preventDefault();
				$('.form-group').addClass('has-error');
				$('.help-block-validation-email-empty').show();
			} else {
				$(this).submit();
			}



		});
	},

	changeMaskExpiryCard: function(){
		var mes = $('.paymentInfo-mes').html();
		if(parseInt(mes) < 10){
			mes = '0'+mes;
		}
		var ano = $('.paymentInfo-ano').html();
		if(ano) {
			ano = ano.substring(2,ano.length);
		}
		$('.validate').html(' '+mes+'/'+ano);
	},

	onlyLetters: function(){

		$(".onlyLetters").keyup(function () {
			this.value = this.value.replace(/[^A-Za-záàâãéèêíïóôõöúçñÁÀÂÃÉÈÍÏÓÔÕÖÚÇÑ ]/g,'');
		});
	},
 	removePhone: function() {
        $(".remove-phone").on('click', ACC.account.removePhoneClick);
     },

     updateAddPhoneButton: function() {
        var enablePhoneMaxQuantity = $('#enablePhoneMaxQuantity').val() == "true";
        var phonesLength = $('input[name="phones"]').length;
        if(!enablePhoneMaxQuantity || phonesLength < 3) {
            $('#addPhone').removeClass('hidden');
        } else {
            $('#addPhone').addClass('hidden');
        }
     },

    updateRemovePhoneButton: function() {
         var enablePhoneMaxQuantity = $('#enablePhoneMaxQuantity').val() == "true";
         var phonesLength = $('input[name="phones"]').length;

         if (enablePhoneMaxQuantity && phonesLength > 1) {
             $('.remove-phone').removeClass('hidden');
         } else {
             $('.remove-phone').addClass('hidden');
         }
     },

    updateSaveButton: function() {
        var enablePhoneMaxQuantity = $('#enablePhoneMaxQuantity').val() == "true";
        var phonesLength = $('input[name="phones"]').length;

        if (enablePhoneMaxQuantity && phonesLength > 3) {
            $("#submitProfileForm").prop("disabled", true);
        } else {
          $("#submitProfileForm").prop("disabled", false);
        }

        ACC.account.disableSaveButtonIfHasEmptyPhones();

    },

    disableSaveButtonIfHasEmptyPhones: function() {
        var hasEmptyPhone = false;
        var enablePhoneMaxQuantity = $('#enablePhoneMaxQuantity').val() == "true";
        var phonesLength = $('input[name="phones"]').length;

        if(enablePhoneMaxQuantity) {
            for (var i = 0; i < phonesLength; i++) {
               if(Array.from($('input[name="phones"]'))[i].value == "") {
                    $("#submitProfileForm").prop("disabled", true);
                    hasEmptyPhone = true;
               }
            }
        }

        return hasEmptyPhone;
    },

    updateErrorMessage: function() {
        var enablePhoneMaxQuantity = $('#enablePhoneMaxQuantity').val() == "true";
        var phonesLength = $('input[name="phones"]').length;

        if (enablePhoneMaxQuantity && phonesLength > 3) {
            $('#error-msg-max-phone').removeClass('hidden');
        } else {
            $('#error-msg-max-phone').addClass('hidden');
        }
    },

    removePhoneClick: function(e) {
         var currentPhonePk  = Array.from(e.currentTarget.classList).filter((el) => {
             if (el.startsWith("exclude-phone-pk")) {
                 return el;
             }
         });

         var phonePk = currentPhonePk.toString().slice(16);

         var currentElement = e.currentTarget;
         var phoneType = currentElement.nextElementSibling;
         var newsLetterCheckbox = phoneType.nextElementSibling;
         var phoneNumber = currentElement.previousElementSibling;

         var isPhoneType = phoneType.getElementsByClassName("phone-pk"+phonePk);
         var isPhoneNumber = phoneNumber.getElementsByClassName("phone"+phonePk);
         var isNewsLetterCheckbox = newsLetterCheckbox.getElementsByClassName("phone-check"+phonePk);


         if(isPhoneType.length > 0 && isPhoneType.length > 0) {
             deleteElements(phoneNumber);
             deleteElements(phoneType);

             if(isNewsLetterCheckbox.length > 0) {
                deleteElements(newsLetterCheckbox);
             }

             currentElement.parentNode.removeChild(currentElement)

         }

         function deleteElements(elements) {
              if(elements) {
                  elements.parentNode.removeChild(elements);
              }
         }

         ACC.account.updateErrorMessage();
         ACC.account.updateAddPhoneButton();
         ACC.account.updateRemovePhoneButton();
         ACC.account.updateSaveButton();
      }
};

$(document).ready(function() {
    ACC.account.updateSaveButton();
    ACC.account.updateErrorMessage();
    ACC.account.updateAddPhoneButton();
    ACC.account.updateRemovePhoneButton();
});



ACC.myOrders = {
	_autoload : [
		"changeSelectedLabelColor",
		"loadOrders",
		"selectStatus",
		"changeClassBtnMsg"
	],

	statusFilter  : $('label.btn-white'),
	periodFilter  : $('#period_filter option'),
	loadOrdersBtn : $('.load-orders button'),
	currentPage   : 0,
	myOrdersUrl	  : window.location.pathname,

	changeSelectedLabelColor : function() {
		this.statusFilter.click(function(){
			ACC.myOrders.statusFilter.removeClass('selected');
			$(this).addClass('selected');
		});
	},
	
	selectStatus : function() {
		$('input[name="status"], select[name="period"]').change(function (){
			$('#orderFiltersForm').submit();
		});
	},

	changeClassBtnMsg : function(){
        if( $('#js-myModalEvaluateSeller').length ) {
            $('.btn-white').attr('style', 'padding: 7px 0 !important');
        }
    },

	loadOrders : function() {
		var that = this;
		this.loadOrdersBtn.click(function(){
			
			var checkedStatusFilter  = $('input[name=status]:radio:checked').val();
			var selectedPeriodFilter = that.periodFilter.filter(':selected').val();
			var selectedPeriodFilter = that.periodFilter.filter(':selected').val();
			var pageData = $(this).data("page");

			$.ajax({
				url: that.myOrdersUrl + "-ver-mais",
				type: 'GET',
				dataType: 'html',
				data: {
					status: checkedStatusFilter,
					period: selectedPeriodFilter,
					page: that.currentPage + 1,
				},
			})
			.done(function(result) {
				$("#orderHistory").append(result);
				$('.btn-white').attr('style', 'padding: 7px 0 !important');
				pageData = pageData + 1;
				that.currentPage = that.currentPage + 1;
		        ACC.sellerQuestions.listQuestionSeller();
		        ACC.sellerQuestions.gettingDataSeller();
				ACC.chatoffline.receiveMessage();
				ACC.chatoffline.sendMessage();
				$.ajax({
					url: that.myOrdersUrl + "-ver-mais",
					type: 'GET',
					dataType: 'html',
					data: {
						status: checkedStatusFilter,
						period: selectedPeriodFilter,
						page: that.currentPage + 1,
					},
				})
				.done(function(result) {
					if(numberOfLineBreaks = (result.match(/\n/g)||[]).length == 14)
					{
						$('#loadOrdersButton').addClass('hidden');
					}
				})
				.fail(function(err) {
					console.log(err);
				});

			})
			.fail(function(err) {
				console.log(err);
			});

		});
	}
};ACC.address = {

	_autoload: [
		"bindToChangeAddressButton",
		"bindCreateUpdateAddressForm",
		"bindSuggestedDeliveryAddresses",
		"bindCountrySpecificAddressForms",
		"showAddressFormButtonPanel",
		"bindViewAddressBook",
		"bindToColorboxClose",
		"showRemoveAddressFromBookConfirmation",
		"backToListAddresses",
		"searchAddressByCep",
		"showSmsOffers",
		"bindCreateBillingAddress"
	],

	spinner: $("<img src='" + ACC.config.commonResourcePath + "/images/spinner.gif' />"),
	addressID: '',

	handleChangeAddressButtonClick: function ()
	{


		ACC.address.addressID = ($(this).data("address")) ? $(this).data("address") : '';
		$('#summaryDeliveryAddressFormContainer').show();
		$('#summaryOverlayViewAddressBook').show();
		$('#summaryDeliveryAddressBook').hide();


		$.getJSON(getDeliveryAddressesUrl, ACC.address.handleAddressDataLoad);
		return false;
	},

	handleAddressDataLoad: function (data)
	{
		ACC.address.setupDeliveryAddressPopupForm(data);

		// Show the delivery address popup
		ACC.colorbox.open("",{
		 	inline: true,
			href: "#summaryDeliveryAddressOverlay",
			overlayClose: false,
			onOpen: function (){
				// empty address form fields
				ACC.address.emptyAddressForm();
				$(document).on('change', '#saveAddress', function ()
				{
					var saveAddressChecked = $(this).prop('checked');
					$('#defaultAddress').prop('disabled', !saveAddressChecked);
					if (!saveAddressChecked)
					{
						$('#defaultAddress').prop('checked', false);
					}
				});
			}
		});

	},

	setupDeliveryAddressPopupForm: function (data)
	{
		// Fill the available delivery addresses
		$('#summaryDeliveryAddressBook').html($('#deliveryAddressesTemplate').tmpl({addresses: data}));
		// Handle selection of address
		$('#summaryDeliveryAddressBook button.use_address').click(ACC.address.handleSelectExistingAddressClick);
		// Handle edit address
		$('#summaryDeliveryAddressBook button.edit').click(ACC.address.handleEditAddressClick);
		// Handle set default address
		$('#summaryDeliveryAddressBook button.default').click(ACC.address.handleDefaultAddressClick);
	},

	emptyAddressForm: function ()
	{
		var options = {
			url: getDeliveryAddressFormUrl,
			data: {addressId: ACC.address.addressID, createUpdateStatus: ''},
			type: 'GET',
			success: function (data)
			{
				$('#summaryDeliveryAddressFormContainer').html(data);
				ACC.address.bindCreateUpdateAddressForm();
			}
		};

		$.ajax(options);
	},

	handleSelectExistingAddressClick: function ()
	{
		var addressId = $(this).attr('data-address');
		$.postJSON(setDeliveryAddressUrl, {addressId: addressId}, ACC.address.handleSelectExitingAddressSuccess);
		return false;
	},

	handleEditAddressClick: function ()
	{

		$('#summaryDeliveryAddressFormContainer').show();
		$('#summaryOverlayViewAddressBook').show();
		$('#summaryDeliveryAddressBook').hide();

		var addressId = $(this).attr('data-address');
		var options = {
			url: getDeliveryAddressFormUrl,
			data: {addressId: addressId, createUpdateStatus: ''},
			target: '#summaryDeliveryAddressFormContainer',
			type: 'GET',
			success: function (data)
			{
				ACC.address.bindCreateUpdateAddressForm();
				ACC.colorbox.resize();
			},
			error: function (xht, textStatus, ex)
			{
				alert("Failed to update cart. Error details [" + xht + ", " + textStatus + ", " + ex + "]");
			}
		};

		$(this).ajaxSubmit(options);
		return false;
	},

	handleDefaultAddressClick: function ()
	{
		var addressId = $(this).attr('data-address');
		var options = {
			url: setDefaultAddressUrl,
			data: {addressId: addressId},
			type: 'GET',
			success: function (data)
			{
				ACC.address.setupDeliveryAddressPopupForm(data);
			},
			error: function (xht, textStatus, ex)
			{
				alert("Failed to update address book. Error details [" + xht + ", " + textStatus + ", " + ex + "]");
			}
		};

		$(this).ajaxSubmit(options);
		return false;
	},

	handleSelectExitingAddressSuccess: function (data)
	{
		if (data != null)
		{
			ACC.refresh.refreshPage(data);
			ACC.colorbox.close();
		}
		else
		{
			alert("Failed to set delivery address");
		}
	},

	bindCreateUpdateAddressForm: function ()
	{
		$('.create_update_address_form').each(function ()
		{
			var options = {
				type: 'POST',
				beforeSubmit: function ()
				{
					$('#checkout_delivery_address').block({ message: ACC.address.spinner });
				},
				success: function (data)
				{
					$('#summaryDeliveryAddressFormContainer').html(data);
					var status = $('.create_update_address_id').attr('status');
					if (status != null && "success" === status.toLowerCase())
					{
						ACC.refresh.getCheckoutCartDataAndRefreshPage();
						ACC.colorbox.close();
					}
					else
					{
						ACC.address.bindCreateUpdateAddressForm();
						ACC.colorbox.resize();
					}
				},
				error: function (xht, textStatus, ex)
				{
					alert("Failed to update cart. Error details [" + xht + ", " + textStatus + ", " + ex + "]");
				},
				complete: function ()
				{
					$('#checkout_delivery_address').unblock();
				}
			};

			$(this).ajaxForm(options);
		});
	},

	refreshDeliveryAddressSection: function (data)
	{
		$('.summaryDeliveryAddress').replaceWith($('#deliveryAddressSummaryTemplate').tmpl(data));

	},

	bindSuggestedDeliveryAddresses: function ()
	{
		var status = $('.add_edit_delivery_address_id').attr('status');
		if (status != null && "hasSuggestedAddresses" == status)
		{
			ACC.address.showSuggestedAddressesPopup();
		}
	},

	showSuggestedAddressesPopup: function ()
	{

		ACC.colorbox.open("",{
			href: "#popup_suggested_delivery_addresses",
			inline: true,
			overlayClose: false,
			width: 525,
		});
	},

	bindCountrySpecificAddressForms: function (){
		$(document).on("change",'#countrySelector select', function (){
			var options = {
				'addressCode': '',
				'countryIsoCode': $(this).val()
			};
			ACC.address.displayCountrySpecificAddressForm(options, ACC.address.showAddressFormButtonPanel);
		})

	},

	showAddressFormButtonPanel: function ()
	{
		if ($('#countrySelector :input').val() !== '')
		{
			$('#addressform_button_panel').show();
		}
	},

	bindToColorboxClose: function ()
	{
		$(document).on("click", ".closeColorBox", function ()
		{
			ACC.colorbox.close();
		})
	},


	displayCountrySpecificAddressForm: function (options, callback)
	{
		$.ajax({
			url: ACC.config.encodedContextPath + '/minha-conta/addressform',
			async: true,
			data: options,
			dataType: "html",
			beforeSend: function ()
			{
				$("#i18nAddressForm").html(ACC.address.spinner);
			}
		}).done(function (data)
				{
					$("#i18nAddressForm").html($(data).html());
					if (typeof callback == 'function')
					{
						callback.call();
					}
				});
	},

	bindToChangeAddressButton: function ()
	{
		$(document).on("click", '.summaryDeliveryAddress .editButton', ACC.address.handleChangeAddressButtonClick);
	},

	bindViewAddressBook: function ()
	{

		$(document).on("click",".js-address-book",function(e){
			e.preventDefault();

			ACC.colorbox.open("Saved Addresses",{
				href: "#addressbook",
				inline: true,
				width:"320px",
			});
			
		})

		
		$(document).on("click", '#summaryOverlayViewAddressBook', function ()
		{
			$('#summaryDeliveryAddressFormContainer').hide();
			$('#summaryOverlayViewAddressBook').hide();
			$('#summaryDeliveryAddressBook').show();
			ACC.colorbox.resize();
		});
	},
	
	showRemoveAddressFromBookConfirmation: function ()
	{
		$(document).on("click", ".removeAddressFromBookButton", function ()
		{
			var addressId = $(this).data("addressId");
			var popupTitle = $(this).data("popupTitle");

			ACC.colorbox.open(popupTitle,{
				inline: true,
				height: false,
				href: "#popup_confirm_address_removal_" + addressId,
				onComplete: function ()
				{
					$(this).colorbox.resize();
				}
			});

		})
	},

	backToListAddresses: function(){
		$(".addressBackBtn").on("click", function(){
			var sUrl = $(this).data("backToAddresses");
			window.location = sUrl;
		});
	},
	
	searchAddressByCep: function() {
		$("#address\\.postcode").on("keyup", function() {
			if ($("#address\\.postcode").val().length >= 8) {
				var postalCodeConsultResponse = JSON.parse(ACC.postalCode.consult($("#address\\.postcode").val()));
				if (!postalCodeConsultResponse.errorMessages) {
					$("#address\\.line1").val(postalCodeConsultResponse.data.end);
					$("#address\\.townCity").val(postalCodeConsultResponse.data.cidade);
					$('.postalCode-error-msg').addClass('hide');
				} else {
					$('.postalCode-error-msg').text(postalCodeConsultResponse.errorMessages).show();
					$('.postalCode-error-msg').removeClass('hide');
				}
			}
		});
	},
	
	showSmsOffers: function() {
		
		$(document).on('change', 'select[name*="phoneTypes"]', function(){
			
			var phone = $(this).parent().data('phone');
			
			if($(this).val() == 'CELULAR')
			{
				$('#phoneCheckBox' + phone).removeClass('hidden')
			}
			else
			{
				$('#phoneCheckBox' + phone).addClass('hidden');
			}
		});
	},
	
	bindCreateBillingAddress: function() {
		
		$('#billingCheckbox').change(function(){
			if ($(this).is(':checked')) {
				$('#billingAddress').addClass('hidden');
				$('#withPaymentAddress').val('true');
			}
			else {
				$('#billingAddress').removeClass('hidden');
				$('#withPaymentAddress').val('false');
			}
		});
		
	}
};ACC.autocomplete = {

    _autoload: [
        "bindNewSearchAutoComplete",
        //"bindSearchAutocomplete",
        "applyFocusStye"
    ],
    bindNewSearchAutoComplete: function () {
        var self = this, focused = false, crfAutoComplete, searchHistory = {}, log = function () {
        };//console.log;

        init();

        function init() {
            handleInput();
        }

        function hideSearch() {
            if (typeof crfAutoComplete == 'undefined')
                return;
            else if (crfAutoComplete.get(0).style.display == "none")
                return;

            log('hideSearch()');
            crfAutoComplete.hide().find("li").remove();
        }

        function submitSearch(str) {
            if (searchHistory.hasOwnProperty(str))
                callFromHistory(str);
            else
                callAjax(str, prepareList(crfAutoComplete));
        }

        function isMobileDevice() {
            var userAgent = navigator.userAgent.toLowerCase(), res = false;
            if (userAgent.search(/(android|avantgo|blackberry|bolt|boost|cricket|docomo|fone|hiptop|mini|mobi|palm|phone|pie|tablet|up\.browser|up\.link|webos|wos)/i) != -1)
                res = true;
            return res;
        }

        function handleInput() {
            var input = $(".js-site-search-input"), touchY = 0, deviceEvent = (isMobileDevice()) ? "input" : "keyup";
            self.options = getInputOptions(input);
            log("HANDLE INPUT", deviceEvent)

            var timeout;

            input.on(deviceEvent + ' focus click', function (ev) {
                var str = this.value.toLowerCase(), len = str.length;
                if (!isMobileDevice() && focused && ev.type != "keyup") return;
                focused = true;
                if (ev.keyCode == 27) {
                    input.trigger('blur');
                }
                if (len >= 3) {
                    crfAutoComplete = prepareList($(this));
                    if ((ev.key && (ev.key.length == 1 || ev.key.length == 9)) || !ev.type.match(/key/)) { // se escreveu algo, só busca se for char
                        clearTimeout(timeout);
                        timeout = setTimeout(function () {
                            submitSearch(str)
                        }, parseInt(autoCompleteTimeout));
                    }
                } else if (len < 3) {
                    hideSearch();
                }
            }).on('focusout', true, function (ev) {
                focused = false;
                ev.bubbles = true;
                log("FOCUS OUT")
                hideSearch();
            })
                .parent().on('mousedown', 'ul li a, .more-results button', function () {
                var type = this.tagName.toLowerCase();
                if (type == "a") {
                    window.location.href = this.href;
                } else {

                    // Food zip zone parameter for the search box (see [CACHE-57]):
                    var input = document.forms["search_form_SearchBox"].elements.namedItem("js-site-search-foodzipzone");
                    input.value = ACC.global.getFoodZipZoneValue();

                    document.forms["search_form_SearchBox"].submit();
                }
            })
                .on('touchstart', 'ul li a, .more-results button', function (ev) {
                    touchY = ev.originalEvent.changedTouches[0].pageY;
                })
                .on('touchend', 'ul li a, .more-results button', function (ev) {
                    var touchYEnd = ev.originalEvent.changedTouches[0].pageY, type = this.tagName.toLowerCase();
                    if (Math.abs(touchY - touchYEnd) < 1) {
                        if (type == "a") {
                            window.location.href = this.href;
                        } else {
                            document.forms["search_form_SearchBox"].submit();
                        }
                    }
                })
        }

        function prepareList(input) {
            var form = input.parent(), hasListAlready = form.children("ul.ui-autocomplete").length > 0, list;
            log('ALREADY? ', hasListAlready)
            if (!hasListAlready) {
                form.append('<ul class="crf-autocomplete ui-autocomplete ui-front ui-menu ui-widget ui-widget-content"><ul class="suggestions"></ul><ul class="products"><span class="title-produtos-sugeridos">Produtos sugeridos</span></ul><div class="more-results"><button type="button" id="submitSearchForm" class="more-autocomplete-btn bg-grey-light">VER MAIS</button></div>');
            }
            return form.children(".ui-autocomplete").css('top', form.outerHeight() + 'px');
        }

        function renderResults(data, whereTo) {
            var items = [], html = "", c = 1, holder = $(".ui-autocomplete");
            data.map(function (item) {
                var template = getItemTemplate(item, whereTo, c);
                html += template.html;
                items.push(template.data);
                c++;
            });
            log('WHERETO:', whereTo, items)

            holder.show().children(whereTo).find("li").remove();
            holder.show().children(whereTo).append(html);
        }

        function callFromHistory(str) {
            var data = searchHistory[str];
            if (data.suggestions != null) {
                renderResults(data.suggestions, "ul.suggestions");
            }

            if (data.products != null) {
                renderResults(data.products, "ul.products");
            }
        }

        function callAjax(str, domList) {
            log('calling ajax')
            log('domList:', domList)

            $.getJSON(self.options.autocompleteUrl, {term: str}, function (data) {
                if ((data.suggestions == null && data.products == null) || (data.suggestions.length == 0 && data.products.length == 0)) {
                    hideSearch();
                    return;
                }
                if (!searchHistory.hasOwnProperty(str)) {
                    searchHistory[str] = {};
                }
                if (data.suggestions != null) {
                    searchHistory[str]["suggestions"] = data.suggestions;
                    renderResults(data.suggestions, "ul.suggestions");
                }

                if (data.products != null) {
                    searchHistory[str]["products"] = data.products;
                    renderResults(data.products, "ul.products");
                }
                log(data);
            });
        }

        function getItemTemplate(item, whereTo, c) {
            var html = '', obj;
            log('whereTo', whereTo)
            if (whereTo == 'ul.suggestions') {
                var selectedPointOfServices = window.unescape(ACC.functionCookie.getCookie("selectedPointOfServices"));
                var selectedPOSParam = selectedPointOfServices !== "undefined" ? "&pos=" + selectedPointOfServices : "";
                obj = {term: item.term, url: ACC.config.encodedContextPath + "/busca?termo=" + item.term + selectedPOSParam};
                html = "<li class='ui-menu-item' tabIndex='" + c + "'><a href='" + obj.url + "'><div class='name'>" + obj.term + "</div></a></ul>";
            } else {
                obj = {
                    name: item.name,
                    code: item.code,
                    desc: item.description,
                    manufacturer: item.manufacturer,
                    url: ACC.config.encodedContextPath + item.url,
                    price: (item.price) ? item.price.formattedValue : 0,
                    installment: item.installmentNumber,
                    installmentValue: item.installmentValue != null ? item.installmentValue.formattedValue : null,
                    productRating: item.averageRating,
                    numberOfReviews: item.numberOfReviews,
                    type: "productResult",
                    image: (item.images != null && self.options.displayProductImages) ? item.images[2].url : null // prevent errors if obj.images = null
                }

                html = "<li class='ui-menu-item'><a href='" + obj.url + "' >";
                if (obj.image != null) {
                    html += "<div class='auto-complete-search'><div class='thumb'><img src='" + obj.image + "'  /></div></div>";
                }
                //Show only the first 54 characters and concat "..." if value is longer than 54 characters
                if (obj.name != null && obj.name.length > 54) {
                    obj.name = obj.name.substring(0, 54).concat('...');
                }
                html += "<div class='block-title-product-autocomplete'>" +
                    "<span class=''>" + obj.name + "</span><br>" +
                    "<div class='rating rating-autocomplete js-ratingCalc' data-rating='{\"rating\":" + obj.productRating + ",\"total\":5}'>" +
                    "<div class='rating-stars'>";
                for (var i = 1; i <= 5; i++) {
                    if (i <= obj.productRating) {
                        html += "<span class='glyphicon glyphicon-star active'></span>";
                    } else if (i - 0.5 == obj.productRating) {
                        html += "<span class='glyphicon glyphicon-star active fh'></span><span class='glyphicon glyphicon-star lh'></span>";
                    } else {
                        html += "<span class='glyphicon glyphicon-star'></span>";
                    }
                }
                html += "</div></div></div>";
                if (obj.installmentValue != null) {
                    html += "<div class='block-title-product-autocomplete-price'>" +
                        "<span class='price'>" + obj.price + "</span>" +
                        "<span class=''> Até " + obj.installment + "x de " + obj.installmentValue + " sem juros</span>" +
                        "</div>";
                }
                else {
                    html += "<div class='block-title-product-autocomplete-price'>" +
                        "<span class='price'>" + obj.price + "</span>" +
                        "<span class=''> Á vista </span>" +
                        "</div>";
                }
                html += "</a></li>";
            }
            return {html: html, data: obj};
        }

        function getInputOptions(input) {
            var options = input.data('options');
            return {
                minLength: options.minCharactersBeforeRequest,
                displayProductImages: options.displayProductImages,
                delay: options.waitTimeBeforeRequest,
                autocompleteUrl: options.autocompleteUrl,
            };
        }

    },
    submitSearchForm: function () {
        var urlInput;
        $('#js-site-search-input.js-site-search-input').each(function () {
            if ($(this).val() != "") {
                urlInput = $(this).val();
            }
        });
        var selectedPointOfServices = window.unescape(ACC.functionCookie.getCookie("selectedPointOfServices"));
        var selectedPOSParam = selectedPointOfServices !== "undefined" ? "&pos=" + selectedPointOfServices : "";

        window.location.href = searchComponentUrl + '?termo=' + urlInput + selectedPOSParam;


    },

    bindSearchAutocomplete: function () {
        // extend the default autocomplete widget, to solve issue on multiple instances of the searchbox component
        $.widget("custom.yautocomplete", $.ui.autocomplete, {
            _create: function () {

                // get instance specific options form the html data attr
                var option = this.element.data("options");
                // set the options to the widget
                this._setOptions({
                    minLength: option.minCharactersBeforeRequest,
                    displayProductImages: option.displayProductImages,
                    delay: option.waitTimeBeforeRequest,
                    autocompleteUrl: option.autocompleteUrl,
                    source: this.source
                });

                // call the _super()
                $.ui.autocomplete.prototype._create.call(this);

            },
            options: {
                cache: {}, // init cache per instance
                focus: function () {
                    return false;
                }, // prevent textfield value replacement on item focus
                select: function (event, ui) {
                    window.location.href = ui.item.url;
                }
            },
//			_resizeMenu: function() {
//				var ul = $("ul.ui-autocomplete");
//				ul.outerWidth( $(".site-search").outerWidth());
//			},
            _renderMenu: function (ul, items) {
                var that = this;

                ul.html("<ul class='suggestions' ></ul><ul class='products' ><span class='title-produtos-sugeridos'>Produtos sugeridos</span></ul><ul class='more-results' ></ul>");

                var product_quantity = 0;

                for (var i = 0; i < items.length; i++) {
                    if (items[i].type == "productResult") {
                        product_quantity++;
                    }

                    that._renderItemData(ul, items[i], product_quantity);
                }

                if (product_quantity >= 3) {
                    $('.more-results').append('<li><button type="button" id="submitSearchForm" class="more-autocomplete-btn bg-grey-light" onClick="ACC.autocomplete.submitSearchForm()">VER MAIS</button></li>');
                }

            },

            _renderItemData: function (ul, item, product_quantity) {
                if (item.type == "autoSuggestion") {
                    var sub_ul = $("ul.suggestions", ul);
                } else if (item.type == "productResult" && product_quantity <= 3) {
                    var sub_ul = $("ul.products", ul);
                }

                return this._renderItem(sub_ul, item).data("ui-autocomplete-item", item);
            },
            _renderItem: function (ul, item) {

                if (item.type == "autoSuggestion") {

                    var renderHtml = "<a href='" + item.url + "' ><div class='name'>" + item.value + "</div></a>";
                    return $("<li>")
                        .data("item.autocomplete", item)
                        .append(renderHtml)
                        .appendTo(ul);
                }
                else if (item.type == "productResult") {

                    var renderHtml = "<a class='' href='" + item.url + "' >";

                    if (item.image != null) {
                        renderHtml += "<div class='auto-complete-search'><div class='thumb'><img src='" + item.image + "'  /></div></div>";
                    }

                    //Show only the first 54 characters and concat "..." if value is longer than 54 characters
                    if (item.value != null && item.value.length > 54) {
                        item.value = item.value.substring(0, 54).concat('...');
                    }


                    renderHtml += "<div class='block-title-product-autocomplete'>" +
                        "<span class=''>" + item.value + "</span><br>" +
                        "<div class='rating rating-autocomplete js-ratingCalc' data-rating='{\"rating\":" + item.productRating + ",\"total\":5}'>" +
                        "<div class='rating-stars'>";
                    for (var i = 1; i <= 5; i++) {
                        if (i <= item.productRating) {
                            renderHtml += "<span class='glyphicon glyphicon-star active'></span>";
                        } else if (i - 0.5 == item.productRating) {
                            renderHtml += "<span class='glyphicon glyphicon-star active fh'></span><span class='glyphicon glyphicon-star lh'></span>";
                        } else {
                            renderHtml += "<span class='glyphicon glyphicon-star'></span>";
                        }
                    }

                    renderHtml += "</div>" +
                        "</div>" +
                        "</div>";


                    if (item.installmentValue != null) {
                        renderHtml += "<div class='block-title-product-autocomplete-price'>" +
                            "<span class='price'>" + item.price + "</span>" +
                            "<span class=''> Até " + item.installment + "x de " + item.installmentValue + " sem juros</span>" +
                            "</div>";
                    }
                    else {
                        renderHtml += "<div class='block-title-product-autocomplete-price'>" +
                            "<span class='price'>" + item.price + "</span>" +
                            "<span class=''> Á vista </span>" +
                            "</div>";
                    }

                    renderHtml += "</a>";

                    return $("<li>").data("item.autocomplete", item).append(renderHtml).appendTo(ul);
                }
            },
            source: function (request, response) {
                var self = this;
                var term = request.term.toLowerCase();
                if (term in self.options.cache) {
                    return response(self.options.cache[term]);
                }

                $.getJSON(self.options.autocompleteUrl, {term: request.term}, function (data) {

                    var autoSearchData = [];
                    if (data.suggestions != null) {
                        var selectedPointOfServices = window.unescape(ACC.functionCookie.getCookie("selectedPointOfServices"));
                        var selectedPOSParam = selectedPointOfServices !== "undefined" ? "&pos=" + selectedPointOfServices : "";
                        $.each(data.suggestions, function (i, obj) {
                            autoSearchData.push({
                                value: obj.term,
                                url: ACC.config.encodedContextPath + "/busca?termo=" + obj.term + selectedPOSParam,
                                type: "autoSuggestion"
                            });
                        });
                    }
                    if (data.products != null) {
                        $.each(data.products, function (i, obj) {
                            autoSearchData.push({
                                value: obj.name,
                                code: obj.code,
                                desc: obj.description,
                                manufacturer: obj.manufacturer,
                                url: ACC.config.encodedContextPath + obj.url,
                                price: (obj.price) ? obj.price.formattedValue : 0,
                                installment: obj.installmentNumber,
                                installmentValue: obj.installmentValue != null ? obj.installmentValue.formattedValue : null,
                                productRating: obj.averageRating,
                                numberOfReviews: obj.numberOfReviews,
                                type: "productResult",
                                image: (obj.images != null && self.options.displayProductImages) ? obj.images[2].url : null // prevent errors if obj.images = null
                            });
                        });
                    }
                    self.options.cache[term] = autoSearchData;
                    return response(autoSearchData);
                });
            }

        });


        $search = $(".js-site-search-input");
        $(".js-site-search-input").val("");
        if ($search.length > 0) {
            $search.yautocomplete()
        }
    },

    applyFocusStye: function () {
        var target = $('.js-site-search-input');
        var overlay = $('.overlay');

        $(target).focus(function () {
            ACC.autocomplete.applyOverlay();
            ACC.navigation.hideSubMenu();
        });

        $(target).blur(function () {
            ACC.autocomplete.removeOverlay();
        });

        /*	$('.js-site-search-input').on('mouseout keyup', function(){
                ACC.global.waitForIt(function(){
                    var isMenuOpened = $('.nav').hasClass('sub-navigation-opened');
                    var target = $('.js-site-search-input');
                    if(!isMenuOpened && target.val().length == 0)
                    {
                        target.blur();
                    }
                }, 2000);
            });*/
    },

    applyOverlay: function () {
        $('.js-site-search-input').parents('.site-search').addClass('focused');
        $('.overlay').addClass('over-menu').fadeIn('fast');
    },

    removeOverlay: function () {
        $('.js-site-search-input').parents('.site-search').removeClass('focused');
        $('.overlay').fadeOut('fast');
    },
};
ACC.carousel = {
  _autoload: [
    "carouselPDPQuanty",
    ["bindCarousel", $(".js-owl-carousel:not(.js-owl-carousel2)").length > 0],
    ["bindCustomCarousel", $(".crf-carousel").length > 0],
    ["bindCarousel2", $(".js-owl-carousel2").length > 0]
  ],

  carouselConfig: {
    "default": {
      navigation: true,

      //Lazy load
      lazyLoad: true,
      lazyFollow: true,
      lazyEffect: "fade",

      navigationText: ["<span class='glyphicon glyphicon-chevron-left'></span>", "<span class='glyphicon glyphicon-chevron-right'></span>"],
      pagination: true,
      itemsCustom: [[0, 1], [768, 2], [992, 6], [1400, 6]]
    },
    "default-infinite": {
      margin: 10,
      nav: true,
      responsive: {
        0: {
          items: 1
        },
        768: {
          items: 2
        },
        992: {
          items: 5
        },
        1400: {
          items: 7
        }
      },
      lazyLoad: true,
      //navText : ["<span class='glyphicon glyphicon-chevron-left'></span>", "<span class='glyphicon glyphicon-chevron-right'></span>"],
      navText: ["<", ">"],
      pagination: false,
      loop: true
    },
    "queridinhos": {
      //Items per resolution
      itemsCustom: [[0, 1], [768, 1], [992, 1], [1400, 1]],

      // Navigation
      navigation: true,
      navigationText: ["<span class='glyphicon glyphicon-chevron-left'></span>", "<span class='glyphicon glyphicon-chevron-right'></span>"],
      rewindNav: true,
      scrollPerPage: true,

      //Pagination
      pagination: true,
      paginationNumbers: false,
      dots: true,

      //Lazy load
      lazyLoad: true,
      lazyFollow: true,
      lazyEffect: "fade",
    },

    "lateral": {
      //Items per resolution
      itemsCustom: [[0, 1], [768, 2], [992, 4], [1400, 4]],

      // Navigation
      navigation: true,
      navigationText: ["<span class='glyphicon glyphicon-chevron-left'></span>", "<span class='glyphicon glyphicon-chevron-right'></span>"],
      rewindNav: true,
      scrollPerPage: true,

      //Pagination
      pagination: true,
      paginationNumbers: false,
      dots: true,

      //Lazy load
      lazyLoad: true,
      lazyFollow: true,
      lazyEffect: "fade",
    },

    "text50": {
      //Items per resolution
      itemsCustom: [[0, 1], [768, 2], [992, 2], [1400, 2]],

      // Navigation
      navigation: true,
      navigationText: ["<span class='glyphicon glyphicon-chevron-left'></span>", "<span class='glyphicon glyphicon-chevron-right'></span>"],
      rewindNav: true,
      scrollPerPage: true,

      //Pagination
      pagination: true,
      paginationNumbers: false,
      dots: true,
      //nav: true,

      //Lazy load
      lazyLoad: true,
      lazyFollow: true,
      lazyEffect: "fade",

      // Responsive
      responsive: true,
      responsiveRefreshRate: 200,
      responsiveBaseWidth: window,

      // CSS Styles
      baseClass: "owl-carousel",
      theme: "owl-theme",



    },

    "textMVBody": {
      //Items per resolution
      itemsCustom: [[0, 1], [768, 4], [992, 6], [1400, 6]],

      // Navigation
      navigation: true,
      navigationText: ["<span class='glyphicon glyphicon-chevron-left'></span>", "<span class='glyphicon glyphicon-chevron-right'></span>"],
      rewindNav: true,
      scrollPerPage: false,

      //Pagination
      pagination: true,
      paginationNumbers: false,
      dots: true,

      //Lazy load
      lazyLoad: true,
      lazyFollow: true,
      lazyEffect: "fade",
    },

    "textMVHeader": {
      //Items per resolution
      itemsCustom: [[0, 4], [768, 4], [992, 6], [1400, 6]],

      // Navigation
      navigation: true,
      navigationText: ["<span class='glyphicon glyphicon-chevron-left'></span>", "<span class='glyphicon glyphicon-chevron-right'></span>"],
      rewindNav: true,
      scrollPerPage: false,

      //Pagination
      pagination: true,
      paginationNumbers: false,
      dots: true,

      //Lazy load
      lazyLoad: true,
      lazyFollow: true,
      lazyEffect: "fade",
    },

    "rotating-image": {
      navigation: false,
      pagination: true,
      singleItem: true,
    },
    "lazy-reference": {
      navigation: true,
      navigationText: ["<span class='glyphicon glyphicon-chevron-left'></span>", "<span class='glyphicon glyphicon-chevron-right'></span>"],
      pagination: true,
      itemsDesktop: [5000, 7],
      itemsDesktopSmall: [992, 5],
      itemsTablet: [768, 4],
      itemsMobile: [320, 3],
      lazyLoad: true,
    }
  },

  queryStockApiForCarousel: function ($c, callbackDone) {
    console.log('Call queryStockApiForCarousel!');

    var carouselComponent = $c.closest('.carousel-component');
    carouselComponent.PDPLoading('open');
    carouselComponent.removeClass('hidden');

    var statusCepConsultation = ACC.functionCookie.getCookie("statusCepConsultation");

    var deferreds = [];

    stockAvaliable = function (item) {
      $(item).find('.unavailable-prd-info').remove();
    };
    stockUnavailable = function(item) {
      $(item).find('.available-prd-info').remove();
      $(item).find('.unavailable-prd-info').removeClass('hidden');
    };
    stockNotFound = function (item) {
      $(item).remove();
    };
    requestsDone = function () {
      if ($c.find('.itm-fd').length == 0) {
        carouselComponent.remove();
      }
      carouselComponent.PDPLoading('close');
      callbackDone($c);
    };

    $c.find('.itm-fd').each(function () {
      var $item = $(this);

      var btnAddToCard = $item.find('.btn-add-cart').first();
      var isFood = btnAddToCard.attr("data-food") === "true";

      if(isFood && statusCepConsultation === "false") {
        stockUnavailable($item);

      } else {
        var productId = btnAddToCard.attr('data-product-code');
        var baseCode = btnAddToCard.attr("data-product-base-code");
        var productPartnerId;

        if(baseCode) {
          productPartnerId = productId;
          productId = baseCode;
        }
        if(productId == productPartnerId){
          productPartnerId = undefined;
        }

        var deferred = ACC.product.getStockFromCatalogAPI(
        productId,
        productPartnerId,
        (function (data) {
          if(data.product.stock.quantity > 0) {
            stockAvaliable(this);
          } else {
            stockUnavailable(this);
          }

        }).bind($item),
        (function (data) {
          if(data.responseJSON && data.responseJSON.errorList) {
            for (var i = 0; i < data.responseJSON.errorList.length; i++) {
              if($.inArray(data.responseJSON.errorList[i].code, apiCatalogStockNotFoundErrorCodes) !== -1) {
                stockNotFound(this);
                return;
              }
              if($.inArray(data.responseJSON.errorList[i].code, apiCatalogStockUnavailableErrorCodes) !== -1) {
                stockUnavailable(this);
                return;
              }
            }
          }
          stockAvaliable(this);
        }).bind($item));

        deferreds.push(deferred);
      }
    });

    $.when.apply($, deferreds).always(requestsDone);

    if(deferreds.length == 0) {
      requestsDone();
    }
  },

  bindCarousel: function (id) {
    var carousels = (id) ? $("#recommendationUL"+id+".js-owl-carousel") : $(".js-owl-carousel:not(.js-owl-carousel2)"), resizeHandler, hasAnyLateralCarousel = false;
    carousels.each(function () {
      var $c = $(this);

      loadCarousel = function($c) {

		$.each(ACC.carousel.carouselConfig, function (key, config) {
			config.beforeInit = function(){
			  arrangeLazyMobile($(this.$elem));
			}
			config.afterInit = function () {
			  var blockedItems = $(this.$elem).find(".lz-img.prd-crsl-blckd");
			  setTimeout(function(){
				blockedItems.removeClass("prd-crsl-blckd");
			  },600);
			}
			if ($c.hasClass("js-owl-" + key)) {
			  $c.owlCarousel(config);
			  if (key == 'lateral') {
				hasAnyLateralCarousel = true;
			  }
			}
		  });

        setTimeout(function () {
          var item = $c.removeClass('loading').find('.owl-item>.itm-fd, .js-owl-item>.itm-fd').removeClass('hidden');
          setTimeout(function () {
            $c.parent().siblings().addClass("sh");
            item.addClass('show-itm-fd');
            $(window).trigger('scroll');
          }, 200);
		}, 400);

		$(window).resize(resizeHandler).trigger("resize");
      }

      if(enableCarouselApiStock) {
        ACC.carousel.queryStockApiForCarousel($c, loadCarousel);
      } else {
        loadCarousel($c);
      }

    });

    resizeHandler = function () {
      var resize = function () {
        carousels.each(function () {
          var $c = $(this),
            items = $c.find('.owl-item'),
            carouselW = $c.outerWidth(),
            contentW = items.outerWidth() * items.length,
            diffW = ~~((carouselW - contentW) * .5);
          diffW = (diffW < 0 ? 0 : diffW);

          $c.find('.owl-wrapper-outer').css('left', diffW + 'px');
        });
        if (hasAnyLateralCarousel) {
          resizeSideText();
        }
      }
      setTimeout(resize, 400);
    }

    getPadding = function(jDOM){
      return parseInt(jDOM.css('padding-top') || 0) + parseInt(jDOM.css('padding-bottom') || 0);
    }

    resizeSideText = function () {
      var sideText = $(".cmscomponent-carousel .side-text"), nH, winW = $(this).width(), isNoPAge, newH;
      isNoPage = sideText.children(".carousel").hasClass("no-pag");

      if (winW < 1020) {
        nH = 'auto';
      } else {
        if(isNoPage)
          nH = ((15 + sideText.siblings().outerHeight()) - getPadding(sideText)) + 'px';
        else
          nH = (sideText.siblings().outerHeight() - 4) + 'px';
      }
    }


    $(window).resize(resizeHandler).trigger("resize");

    function arrangeLazyMobile(item){
      var lzItems = item.find("img.lz-img.prd-crsl-blckd"),
      isLateral = item.hasClass('js-owl-lateral'),
      lzItemsToLoad = isLateral ? 4 : 6, winW = $(window).width();
      if(winW < 768){
        lzItemsToLoad = 1;
      }else if(winW >= 768 && winW < 992){
        lzItemsToLoad = 2;
      }
      lzItems.each(function(idx, itm){
        if(idx >= lzItemsToLoad){
          $(itm).removeClass("lz-img prd-crsl-blckd");
        }else{
          $(itm).removeClass("lazyOwl");
        }
      });

    }
  },

  bindCarousel2: function () {
    $(".js-owl-carousel2").each(function () {
      var $c = $(this)
      $.each(ACC.carousel.carouselConfig, function (key, config) {
        if ($c.hasClass("js-owl-" + key)) {
          var $e = $(".js-owl-" + key);
          $e.find("img.lazyOwl").removeClass("lazyOwl").addClass("owl-lazy");
          $e.owlCarousel2(config);
        }
      });
    });

  },

  /*This function was created to handle with CRF customized carousels*/
  bindCustomCarousel: function () {
    var that = this;
    $(".crf-carousel").each(function () {
      $(this).owlCarousel({
        // Most important owl features
        items: 2,
        itemsCustom: false,
        itemsDesktop: [1199, 2],
        itemsDesktopSmall: [980, 2],
        itemsTablet: [768, 2],
        itemsTabletSmall: false,
        itemsMobile: [479, 1],
        singleItem: false,
        itemsScaleUp: false
      });

      resizeHandler = function () {
        var resize = function () {
          carousels.each(function () {
            var $c = $(this),
              items = $c.find('.owl-item'),
              carouselW = $c.outerWidth(),
              contentW = items.outerWidth() * items.length,
              diffW = ~~((carouselW - contentW) * .5);
            diffW = (diffW < 0 ? 0 : diffW);

            $c.find('.owl-wrapper-outer').css('left', diffW + 'px');
          });
        }
        setTimeout(resize, 400);
      }

      $(window).resize(resizeHandler).trigger("resize");

    });
      /*$('.lazyOwl').on('click', function(e){
            e.preventDefault();
            $(this).css('border-color', 'lime');
      });*/
    },

    /*This function was created to handle with CRF customized carousels*/
    bindCustomCarousel: function () {
      var that = this;
      $(".crf-carousel").each(function () {
        $(this).owlCarousel({
          // Most important owl features
          items: 2,
          itemsCustom: false,
          itemsDesktop: [1199, 2],
          itemsDesktopSmall: [980, 2],
          itemsTablet: [768, 2],
          itemsTabletSmall: false,
          itemsMobile: [479, 1],
          singleItem: false,
          itemsScaleUp: false,

          //Basic Speeds
          slideSpeed: 200,
          paginationSpeed: 800,
          rewindSpeed: 1000,

          //Autoplay
          autoPlay: false,
          stopOnHover: false,

          // Navigation
          navigation: true,
          navigationText: ['<span class="crficon-chevron-left"></span>', '<span class="crficon-chevron-right"></span>'],
          rewindNav: true,
          scrollPerPage: false,

          //Pagination
          pagination: true,
          paginationNumbers: false,

          // Responsive
          responsive: true,
          responsiveRefreshRate: 200,
          responsiveBaseWidth: window,

          // CSS Styles
          baseClass: "owl-carousel",
          theme: "owl-theme",

          //Callbacks
          beforeUpdate: false,
          afterUpdate: false,
          beforeInit: false,
          afterInit: function () {
            that.getCarouselItemAmount(this);
          },
          beforeMove: false,
          afterMove: false,
          afterAction: false,
          startDragging: false,
          afterLazyLoad: false
        });
      });
    },

    carouselPDPQuanty: function () {
      var carousel = $('#carousel'),
        threshold = 150,
        slideWidth = 300,
        dragStart,
        dragEnd;

      $('#next').click(function () { shiftSlide(-1) })
      $('#prev').click(function () { shiftSlide(1) })

      carousel.on('mousedown', function () {
        if (carousel.hasClass('transition')) return;
        dragStart = event.pageX;
        $(this).on('mousemove', function () {
          dragEnd = event.pageX;
          $(this).css('transform', 'translateX(' + dragPos() + 'px)')
        })
        $(document).on('mouseup', function () {
          if (dragPos() > threshold) { return shiftSlide(1) }
          if (dragPos() < -threshold) { return shiftSlide(-1) }
          shiftSlide(0);
        })
      });

      function dragPos() {
        return dragEnd - dragStart;
      }

      function shiftSlide(direction) {
        if (carousel.hasClass('transition')) return;
        dragEnd = dragStart;
        $(document).off('mouseup')
        carousel.off('mousemove')
          .addClass('transition')
          .css('transform', 'translateX(' + (direction * slideWidth) + 'px)');
        setTimeout(function () {
          if (direction === 1) {
            $('.slide:first').before($('.slide:last'));
          } else if (direction === -1) {
            $('.slide:last').after($('.slide:first'));
          }
          carousel.removeClass('transition')
          carousel.css('transform', 'translateX(0px)');
        }, 700)
      }
    },
    //Auto height
    autoHeight : false,

    //JSON
    jsonPath : false,
    jsonSuccess : false,

    //Mouse Events
    dragBeforeAnimFinish : true,
    mouseDrag : true,
    touchDrag : true,

    //Transitions
    transitionStyle : false,

    // Other
    addClassActive : true,

    //Callbacks
    beforeUpdate : false,
    afterUpdate : false,
    beforeInit: false,
    afterInit: function () {
      that.getCarouselItemAmount(this);
    },
    beforeMove: false,
    afterMove: false,
    afterAction: false,
    startDragging : false,
    afterLazyLoad : false,
  getCarouselItemAmount: function(obj) {
    var itemAmount = $(obj).find('.owl-wrapper-outer').prevObject.get(0).itemsAmount;

    //If there is just one item on carousel, "single-item" css class is applied for centralize the content
    if (itemAmount == 1) {
      $(obj).get(0).$elem.children('.owl-wrapper-outer').addClass('single-item');
    }
  }
};
ACC.cart = {

	_autoload: [
		"bindHelp",
		"cartRestoration",
        "bindRemove",
        "scrollingOrderSumary",
		"cartViewMoreProducts",
		"cartModalContinue",
		["hybrisMarketingBuyBtn", $("body.page-cartPage").length != 0],
		"upperCaseVoucher"
	],

	bindHelp: function(){
       	$(document).on("click",".js-cart-help",function(e){
			e.preventDefault();
			var title = $(this).data("help");
			ACC.colorbox.open(title,{
				html:$(".js-help-popup-content").html(),
				width:"300px"
			});
		})
    },

    upperCaseVoucher: function(){
      $('.voucher-form__input input.form-control').on('keyup', function(){
              $(this).val($(this).val().toUpperCase().replace(" ", ""));
          });
    },
    
    scrollingOrderSumary: function(){
      enquire.register("screen and (min-width:"+screenSmMax+")", {
        match : function() {
          $(window).scroll(function(e) {
           
            $('.js-cart-sumary-other-payments').each(function(){
           var windowTop = $(window).scrollTop();
           var col3 = $(this).siblings('.js-blockMain__listContainer').offset().top;
           var col3Height = $(this).height();
           var col9 = $(this).siblings('.js-blockMain__listContainer').height();
           $(this).parent().css('position', 'relative');
           if (windowTop >= col3 && windowTop < ((col3 + col9) - col3Height)){
           $(this).css({'position':'fixed', 'right':'11px', 'top':'0px', 'bottom':'initial'});	
              } else if (windowTop >= col3 && windowTop > ((col3 + col9) - col3Height)  && col9 > col3Height){
           $(this).css({'position':'absolute', 'bottom':'0', 'top':'initial', 'right':'0'});
              } else if (windowTop < col3){
           $(this).css({'position':'relative', 'right':'0', 'top':'0px'});
              }



            });






           });
         }
      });
        
    },
	
	cartModalContinue: function(){
		$(".js-buy-modal-show-continue").modal("show");
	},
	
	bindRemove: function(){
		$(document).on("click",".js-cart-help",function(e){
			e.preventDefault();
			var title = $(this).data("help");
			ACC.colorbox.open(title,{
				html:$(".js-help-popup-content").html(),
				width:"300px"
			});
		})
	},

	cartRestoration: function(){
		$(document).on("click", ".cartRestoration", function(){
			var sCartUrl = $(this).data("cartUrl");
			window.location = sCartUrl;
		});
	},

	hybrisMarketingBuyBtn: function(){
		if(typeof cartAnalyticsData !== 'undefined' && cartAnalyticsData.fromBuyBtn){
			ACC.track.trackAddToCart(cartAnalyticsData.productCode, cartAnalyticsData.quantity, cartAnalyticsData);
		}
	},

	reloadCart: function(cartCode, quantityProduct, positionInCart, productCode, e) {

      var button = e.currentTarget;
	    var numberDisplayedEntries = $(".cartCode_" + cartCode + " .cart-list li.product-item:not(.hidden)").size();

        $.ajax({
            url: "/carrinho/updateAndReloadCart",
            method: "POST",
            cache: false,
            data: {
                cartCode: cartCode,
                quantityEntry: quantityProduct,
                entryNumber: positionInCart,
                productCode: productCode
            },
            success: function(result) {
            var isAsmUser =   ACC.config.isAsmUser
            if(isAsmUser === true || isAsmUser === "true")
            {
                 $('.continueShoppingButton').remove();
            }

                $(".js-inject-cart-" + cartCode).html(result);
                $('.cart-total-box').show();
                ACC.deliveryCost.getThePriceTotal();

                //Display the number of entries that was displayed before refreshing the cart, and hide the "Ver mais" button if all entries are displayed.
                $(".cartCode_" + cartCode + " .cart-list li.product-item:lt(" + numberDisplayedEntries + ")").removeClass("hidden");
                if($(".cartCode_" + cartCode + " .cart-list li.product-item.hidden").size() == 0) {
                    $(".cartCode_" + cartCode + " .js-loadCartPageproducts").hide();
                }

                ACC.cart.reloadMiniCartQuantity();

                    $('.discounts-list').each(function() {
                                    var $this = $(this);
                                    $this.find('.voucher-used').each(function(){
                                        if($(this).data().voucherUsed)
                                        {
                                            $this.removeClass("hidden");
                                        }
                                    });
                                });

                button.disabled = false;
            },
            error: function(error) {
                button.disabled = false;
                console.error(error);
            },
        });

    },
    
    reloadMiniCartQuantity: function() {

    	 $.ajax({
             url: "/carrinho/reloadMiniCartQuantity",
             method: "GET",
             cache: false,
             success: function(result) {
            	 $('.cart-item-count').html(result);
             },
             error: function(error) {
                 console.error(error);
             },
         });
    	
    }, 

    cartViewMoreProducts: function() {
        $(document).on("click", ".js-loadCartPageproducts", function(){
             var container = $(this).closest(".blockMain__listContainer");
             $(".cart-list li.product-item.hidden", container).removeClass("hidden");

             sessionStorage.setItem('cartViewMoreProducts', 'true');

             var cartCode = $(this).context.dataset.cartCode;
             if(sessionStorage.getItem("cartCode") != null){
                 sessionStorage.setItem('hideAllcartViewMoreProducts', 'true');
             }
             sessionStorage.setItem('cartCode', cartCode);
             if($(".cart-list li.product-item.hidden", container).size() == 0) {
                 $(this).hide();
             }
        });
    },


};



ACC.ajaxcartactions = {
		_autoload: [
    	],

    	bindRemoveEntry: function() {
    		
    		$(document).on("click", ".remove-entry-button", function(){
    			
    			var entryNumberParam = $(this).attr('id').split("_")
    			var productCode = $(this).data().productCode;
    			$.ajax({
    				url : removeEntryUrl,
    				cache:false,
    				type : 'GET',
    				data : {
    					entryNumber: entryNumberParam[1],
    					productCode: productCode
    				},
    				headers : {
    					Accept : 'application/json'
    				},
    				
    				success : function(result) {
    					alert('removed');
    				},
    				error: function (xhr, ajaxOptions, thrownError) {
    					alert(xhr.status);
    					alert(thrownError);
    			    }
    				
        		});
    			
    		});
    	},
    	
    	updateCartHTML: function() {
    		
    		var entryNumber = $(this).attr('id').split("_")
			var form = $('#updateCartForm' + entryNumber[1]);
    		var initialQuantity = form.find('input[name=initialQuantity]').val(); 
			var productCode = form.find('input[name=productCodePost]').val(); 
    		
    		$.ajax({
				url : getCartHTMLUrl,
				cache:false,
				type : 'GET',
				data : {
				},
				headers : {
					Accept : 'application/json'
				},
				
				success : function(result) {
					alert(result);
					$('#div-cart').html(result);
					
				}
    		});
    		
 
    	}

};ACC.cartitem = {

	_autoload: [
		"bindCartItem",
		"itemWarrantyToogle",
		"itemCloseCartItem",
		"variantToggle",
		"removeCartViewMoreSession",
		"displaySeeAllButton",
		"openModalOutOfStock"
	],

    /*
        A função displaySeeAllButton controla quando deve ou não
        aparecer o botão no mobile
    */
    displaySeeAllButton:function(){
        /* enquire.register executa a função apenas em resoluções menores que desktop */
        enquire.register("screen and (max-width: " + screenSmMax +")", {
            match : function() {

                /* Pega todos os 'filhos' do elemento js-cartList */
                var listItems = $(".js-cartList").children();

                /* Verifica se o tamanho da lista de produtos é maior do que tres e se o botão ainda não foi clicado */
                if(listItems.length > 3 && sessionStorage.getItem('cartbtnclick') !== 'true') {
                    /* Remove a class hidden do botão 'ver tudo' */
                    $('[class*="js-button-see-more-product"]').removeClass("hidden").removeAttr("style");

                    /* Percorre a lista de produtos incluindo a class hidden quando passar do terceiro produto para escondê-los */
                    $(".cartList__itemProduct").each(function(index){
                        if ((index + 1) > 3) {
                            $(this).addClass("hidden");
                        }
                    });
                }

                /* Evento click do botão 'ver tudo' */
                $(".js-button-see-more-products").click(function(){
                    /* Seta o click do botão na sessão para não esconder mais com os produtos e não exibir o botão */
                    sessionStorage.setItem('cartbtnclick', 'true');

                    /* Adiciona a class hidden para esconder o botão 'ver tudo' */
                    $(".js-button-see-more-products").addClass("hidden");

                    /* Percorre a lista de produtos para remover a class hidden, afim de exibi-los */
                    $(".cartList__itemProduct").each(function(){
                        $(this).removeClass("hidden");
                    });
                });
            }
        });
    },

	variantToggle: function()
	{
		$(document).on("click", ".item-variant-trigger", function(){
			$(this).parent().find('.item-variant-content').slideToggle();
		});
	},

	bindCartItem: function ()
	{
        $(document).on("click", ".remove-entry-button", function()
		{
			var entryNumber = $(this).attr('id').split("_");
			var form = $("form[data-code='" + $(this).data().productCode + "']");

			var productCode = $(this).data().productCode;
			var initialCartQuantity = form.find('input[name=initialQuantity]');
			var cartQuantity = form.find('input[name=quantity]');

			ACC.track.trackRemoveFromCart(productCode, initialCartQuantity.val());

			cartQuantity.val(0);
			initialCartQuantity.val(0);

			form.find("input[name='CSRFToken']").val(ACC.config.CSRFToken);
			form.submit();
		});

		$('.update-entry-quantity-input').on("blur change", function ()
		{
			var entryNumber = $(this).attr('id').split("_");
			var form = $('#updateCartForm' + entryNumber[1]);
			var productCode = form.find('input[name=productCode]').val();
			var initialCartQuantity = form.find('select').val();
            var newCartQuantity = form.find('select').val();

			if(initialCartQuantity == newCartQuantity)
			{
				ACC.track.trackUpdateCart(productCode, initialCartQuantity, newCartQuantity);
				form.submit();
			}

		});

		$('select#pdpAddtoCartSelect').each(function () {
			var numberMobile = $(this).val();
			$(this).parents('.block-variant-qtd').find('.update-entry-quantity-input').val(numberMobile);
		});
		//Update to desktop
		$('.update-entry-quantity-input').each(function () {
			var resultPlus = parseFloat($(this).parents('.block-variant-qtd').find('.update-entry-quantity-input').val());
			$(this).parents('.block-variant-qtd').find('select#pdpAddtoCartSelect').val(resultPlus);
		});

		var inputQty = $(this).closest("form").find(".update-entry-quantity-input");

        var seeMoreCart = sessionStorage.getItem('cartViewMoreProducts');
        var cartCode = sessionStorage.getItem('cartCode');
        var hideAllcartViewMoreProducts = sessionStorage.getItem('hideAllcartViewMoreProducts');

        var cartCodeUpdate = " ";

        for(i = 0; i < 2; i++){
            if($(".blockMain__loadCartPageProducts").size() > 0){
                cartCodeUpdate = $(".blockMain__loadCartPageProducts").get(i).getAttribute("data-cart-code");
            }

            if((seeMoreCart && (cartCodeUpdate == cartCode)) || (seeMoreCart && hideAllcartViewMoreProducts))
            {
               var container = $(".blockMain__listContainer").get(i);
               $(".cart-list li.product-item.hidden", container).removeClass("hidden");

               if($(".cart-list li.product-item.hidden", container).size() == 0)
               {
                $(".blockMain__loadCartPageProducts").eq(i).hide();
               }
            }
        };


		$(document).on("click", ".js-dropdown-qty", function(){
			inputQty.val($(this).data("qty"));
			inputQty.change();
		});
	},


    //FOOD-19 remove cartViewMoreProducts of session when logout //colocar no logout
    	removeCartViewMoreSession: function(){
    		$(document).on("click", ".no-food-login__link", function(){
            sessionStorage.removeItem('cartViewMoreProducts');
            sessionStorage.removeItem('cartCode');
            sessionStorage.removeItem('hideAllcartViewMoreProducts');
    		});
    	},

	callValueInput: function (self) {
    		var entryNumber = $(self).attr('class').split("_");
    		var cartCode  = entryNumber[2];
    		var form = $('#updateCartForm' + entryNumber[1] + '_' + cartCode);
    		var productCode = form.find('input[name=productCode]').val();
    		var initialCartQuantity = form.find('input[name=initialQuantity]').val();
    		var newCartQuantity = form.find('input[name=quantity]').val();

    		if(initialCartQuantity != newCartQuantity) {
    			ACC.track.trackUpdateCart(productCode, initialCartQuantity, newCartQuantity);
    		}

    },

    	checkQtySelectorCart:function(self, mode)
    	{
    	  var input= $(self).parents(".js-qty-selector").find(".js-qty-selector-input");
          		var inputVal = parseInt(input.val());

          		if(isNaN(inputVal))
                {
                  inputVal  = 1;
                }

          		var max = 999;

          		var minusBtn= $(self).parents(".js-qty-selector").find(".js-qty-selector-minus");
          		var plusBtn= $(self).parents(".js-qty-selector").find(".js-qty-selector-plus");

          		if(mode=="minus"){
          			if(inputVal != 1){
          				ACC.cartitem.updateQtyValueCart(self,inputVal-1)
          				if(inputVal-1 == 1){
          					minusBtn.attr("disabled","disabled")
          				}

          			}else{
          				minusBtn.attr("disabled","disabled")
          			}
          		}else if(mode=="reset"){
          			ACC.cartitem.updateQtyValueCart(self,1)

          		}else if(mode=="plus"){
          			if(inputVal != max){
          				ACC.cartitem.updateQtyValueCart(self,inputVal + 1)
          				if(inputVal+1 == max){
          					plusBtn.attr("disabled","disabled")
          				}
          			}else{
          				plusBtn.attr("disabled","disabled")
          			}
          		}else if(mode=="input"){
          			if(inputVal == 1){
          				$(self).parents(".js-qty-selector").find(".js-qty-selector-minus").attr("disabled","disabled")
          			}else if(inputVal == max){
          				$(self).parents(".js-qty-selector").find(".js-qty-selector-plus").attr("disabled","disabled")
          			}else if(inputVal<1){
          				ACC.cartitem.updateQtyValueCart(self,1)
          				$(self).parents(".js-qty-selector").find(".js-qty-selector-minus").attr("disabled","disabled")
          			}else if(inputVal>max){
          				ACC.cartitem.updateQtyValueCart(self,max)
          				$(self).parents(".js-qty-selector").find(".js-qty-selector-plus").attr("disabled","disabled")
          			}
          		}

    	},

    		checkQuantitySelector:function(self, mode){
        		var input= $(self).parents(".js-qty-selector").find(".js-qty-selector-input");
        		var inputVal = parseInt(input.val());
        		if(isNaN(inputVal))
        		{
        		  inputVal  = 1;
        		}
        		var max = 999;

        		var minusBtn= $(self).parents(".js-qty-selector").find(".js-qty-selector-minus");
        		var plusBtn= $(self).parents(".js-qty-selector").find(".js-qty-selector-plus");

        		if(mode=="minus"){
        			$(".msg-cart-qty-max").hide();
        			if(inputVal != 1){
        				ACC.productDetail.updateQtyValue(self,inputVal-1)
        				if(inputVal-1 == 1){
        					minusBtn.attr("disabled","disabled")
        				}

        			}else{
        				minusBtn.attr("disabled","disabled")
        			}
        		}else if(mode=="reset"){
        			ACC.productDetail.updateQtyValue(self,1)

        		}else if(mode=="plus"){
        			if(inputVal != max){
        				ACC.productDetail.updateQtyValue(self,inputVal + 1)
        				if(inputVal+1 == max){
        					plusBtn.attr("disabled","disabled")
        					$(".msg-cart-qty-max").show();
        				}
        			}else{
        				plusBtn.attr("disabled","disabled")
        			}
        		}else if(mode=="input"){
        			if(inputVal == 1){
        				$(self).parents(".js-qty-selector").find(".js-qty-selector-minus").attr("disabled","disabled")
        			}else if(inputVal == max){
        				$(self).parents(".js-qty-selector").find(".js-qty-selector-plus").attr("disabled","disabled")
        			}else if(inputVal<1){
        				ACC.productDetail.updateQtyValue(self,1)
        				$(self).parents(".js-qty-selector").find(".js-qty-selector-minus").attr("disabled","disabled")
        			}else if(inputVal>max){
        				ACC.productDetail.updateQtyValue(self,max)
        				$(self).parents(".js-qty-selector").find(".js-qty-selector-plus").attr("disabled","disabled")
        			}
        		}

        	},


    updateQtyValueCart: function(self,value){

        var input= $(self).parents(".js-qty-selector").find(".js-qty-selector-input").val(value);

        var productCode = $(self).parents('form').attr('data-code');

        var form = $('.addToCartForm' + productCode);

        form.find('.product-quantity-selector').val(value);

        var addtocartQty= $(self).parents('.product-item').find(".js-qty-selector-input").val(value);

        $(".addToCartForm"+productCode+" input.qty").val(value);
        $("#buyProductForm"+productCode+" input.qty").val(value);

         ACC.cartitem.callValueInput(input);


       },

	removeCartItem: function(productCode, entryNumber) {

		var form = $('#updateCartForm' + entryNumber);

		var initialCartQuantity = form.find('input[name=initialQuantity]');
		var cartQuantity = form.find('input[name=quantity]');

		ACC.track.trackRemoveFromCart(productCode, initialCartQuantity.val());

		cartQuantity.val(0);
		initialCartQuantity.val(0);
		form.submit();

	},

	itemWarrantyToogle: function(){
		$(document).on("click", ".item-extend-warranty-label", function(){
			$('.item-extend-warranty-label').click(function(){
                itemCode = $(this).data().itemCode;
                $('.warranty-info-' + itemCode).toggle();
            });

		});
	},

	itemCloseCartItem : function() {
		$(document).on("click", "#closeCartItem,#EntendiCloseDiv", function(){
			$("#strongCartItemClose").hide();
		});
	},

	openModalOutOfStock: function() {
        urlParams = new URLSearchParams(window.location.search);
        if ((urlParams.get('erro') === 'outOfStock') && (urlParams.get('food') === 'true')) {
			var redirect = function () {
				window.location = '/checkout'
			}
			ACC.unavailableItemsModal.open(redirect, redirect)
        }
    }
};

$(document).ready(function () {
	if ($("#out-of-stock").length === 1) {
		$("#btn-checkout-carrinho").prop("disabled",true);
    }
});
ACC.checkout = {

	_autoload: [
		"bindCheckO",
		"bindForms",
		"bindSavedPayments",
		["bindUraResponse", $("body.page-checkoutUraPage").length > 0],
		["btnScrollCheckout", $("body.page-multiStepCheckoutSummaryPage").length > 0],
		["validateGiftCard", $("body.page-multiStepCheckoutSummaryPage").length > 0],
	],
	
bindUraResponse:function(){

		setTimeout(function(){
			ACC.checkout.checkUraResponse();
		}, 10000);

	},

	checkUraResponse:function(){

		$.ajax({
			url: checkStatusUraUrl,
			type: 'POST'
		})
		.success(function(result) {
			if (result === true) {
            ACC.checkout.placeOrderProcess();
           } else if (result === false) {
               $('#msg-error-card-checkout-modal').modal('show');
                    $('[aria-label="Close"]').click(function(){
                  window.location.href = asmErrorUrl;
            });
           }
		})

		.fail(function(err) {
			console.log(err);
		});

		ACC.checkout.bindUraResponse();
	},

    placeOrderProcess:function(){

		$.ajax({
			url: asmPlaceOrderUrl,
			type: 'POST'
		})
		.success(function(result) {
			window.location.href = 'orderConfirmation/' + result.code;
		})
		.fail(function(err) {
			$('#msg-error-card-checkout-modal').modal('show');
			$('[aria-label="Close"]').click(function(){
				window.location.href = asmErrorUrl;
			});
		});

	},

	bindForms:function(){

		$(document).on("click","#addressSubmit",function(e){
			e.preventDefault();
			$('#addressForm').submit();
		})

		$(document).on("click","#deliveryMethodSubmit",function(e){
			e.preventDefault();
			$('#selectDeliveryMethodForm').submit();
		})

        setTimeout(function(){
          		var c = document.getElementById("optIn")
          		c.checked = true;
          		c.type = hidden;
        	}, 1000);
	},

	bindSavedPayments:function(){
		$(document).on("click",".js-saved-payments",function(e){
			e.preventDefault();

			ACC.colorbox.open("",{
				href: "#savedpayments",
				inline:true,
				width:"320px",
			});
		})
	},

	bindCheckO: function ()
	{
		var cartEntriesError = false;

		// Alternative checkout flows options
		$('.doFlowSelectedChange').change(function ()
		{
			if ('multistep-pci' == $('#selectAltCheckoutFlow').attr('value'))
			{
				$('#selectPciOption').css('display', '');
			}
			else
			{
				$('#selectPciOption').css('display', 'none');

			}
		});



		$('.continueShoppingButton').click(function ()
		{
			var checkoutUrl = $(this).data("continueShoppingUrl");
			window.location = checkoutUrl;
		});


		$('.expressCheckoutButton').click(function()
				{
					document.getElementById("expressCheckoutCheckbox").checked = true;
		});
		//show option 'Quero receber ofertas e novidades do Grupo Carrefour neste telefone.'
		$(window).load(function(){
			$('.newsletter-phone').change(function() {
				if($('.newsletter-phone option[label="Celular"]:selected').is(':selected')) {
					$('.tel-cel-ofertas').show();
				} else {
					$('.tel-cel-ofertas').hide();
				}
			});
		});

		$(document).on("change",".confirmGuestEmail,.guestEmail",function(){

			  var orginalEmail = $(".guestEmail").val();
			  var confirmationEmail = $(".confirmGuestEmail").val();

			  if(orginalEmail === confirmationEmail){
			    $(".guestCheckoutBtn").removeAttr("disabled");
			  }else{
			     $(".guestCheckoutBtn").attr("disabled","disabled");
			  }
		});

		$(document).on("click", ".checkoutButton", function(){

        		    // Select Cart to Checkout (Food Web has 2 carts APP & DESKTOP)
        		    ACC.functionCookie.deleteCookie("carrefourCheckoutCartCode");
        			var checkoutUrl = $(this).data("checkoutUrl");
        			console.log("checkoutUrl = " + checkoutUrl);
        			var checkoutCartCode = $(this).data("checkoutCartCode");
        			if(checkoutCartCode!=null) ACC.functionCookie.setCookie("carrefourCheckoutCartCode",checkoutCartCode);

        			if($("#showModalFoodCart").get(0)){
        				$('#cepModalCart').modal('show').on('hidden.bs.modal', function (e) {
        					var checkoutUrl = botao;
        					cartEntriesError = ACC.pickupinstore.validatePickupinStoreCartEntires();
        					if (!cartEntriesError){
        						var expressCheckoutObject = $('.express-checkout-checkbox');
        						if(expressCheckoutObject.is(":checked")){
        							window.location = expressCheckoutObject.data("expressCheckoutUrl");
        						} else{
        							var flow = $('#selectAltCheckoutFlow').attr('value');
        							if ( flow == undefined || flow == ''){
        								// No alternate flow specified, fallback to default behaviour
        								window.location = checkoutUrl;
        							} else{
        								// Fix multistep-pci flow
        								if ('multistep-pci' == flow){
        								flow = 'multistep';
        								}
        								var pci = $('#selectPciOption').attr('value');
        								// Build up the redirect URL
        								var redirectUrl = checkoutUrl + '/select-flow?flow=' + flow + '&pci=' + pci;
        								window.location = redirectUrl;
        							}
        						}
        					}
        				})
        			} else{

        				cartEntriesError = ACC.pickupinstore.validatePickupinStoreCartEntires();
        				if (!cartEntriesError){
        					var expressCheckoutObject = $('.express-checkout-checkbox');
        					if(expressCheckoutObject.is(":checked")){
        						window.location = expressCheckoutObject.data("expressCheckoutUrl");
        					} else{
        						var flow = $('#selectAltCheckoutFlow').attr('value');
        						if ( flow == undefined || flow == ''){
        							// No alternate flow specified, fallback to default behaviour
        							window.location = checkoutUrl;
        						} else{
        							// Fix multistep-pci flow
        							if ('multistep-pci' == flow){
        							flow = 'multistep';
        							}
        							var pci = $('#selectPciOption').attr('value');
        							// Build up the redirect URL
        							var redirectUrl = checkoutUrl + '/select-flow?flow=' + flow + '&pci=' + pci;
        							window.location = redirectUrl;
        						}
        					}
        				}

        			}
        			return false;
        		});

	},
	
	btnScrollCheckout: function(){
		/*$('body').on('click', 'button.btn.button-final.btn-finalizar-compra', function(){
	    });
		
		$('body').on('click', '.block-total-summary', function(){
	    });*/
		
		$(document).bind('scroll', function() {	
			/*if($('button.btn.button-final.btn-finalizar-compra').length > 0 && $('.block-total-summary').length > 0)
			{
				var posBtn = $('button.btn.button-final.btn-finalizar-compra').offset().top;
				var posSummary = $('.block-total-summary').offset().top;
				scr = $(window).scrollTop(); 
				console.log("btn "+scr);
				console.log("sum "+posSummary);
		         if (parseInt(scr) > parseInt(posSummary)) {
		        	
		         } 
		         if (parseInt(scr) < parseInt(posSummary)) { 
		        	 
		         }
			}*/
			/*if($('button.btn.button-final.btn-finalizar-compra').length > 0 && $('.block-total-summary').length > 0){
				var altura_documento = $(document).height();
				var scr = $(document).scrollTop(); 
				var flag_fixed =  parseInt(altura_documento) - parseInt(scr);
				console.log(flag_fixed);
				if($('#block-btn-final-fixed').hasClass('block-btn-final-fixed')){
					alert();
				}
				if(flag_fixed < 600){
				
					alert();
				}else{
					
				}
			}*/
	    });
		 
		 /*$(document).bind('scroll', function() {	
				var offsetBtnCheckout = $("#btn-finalizar-compra-checkout").offset.top;
				var offsetTable = $(".table-total-summary").offset.top;
				
				
				 if (offsetTable <= offsetBtnCheckout ) {
					
				}
				
				if (offsetBtnCheckout >= offsetTable) {
					
				}
				
			});*/
	},
	
	validateGiftCard:function(){
		$( ".page-multiStepCheckoutSummaryPage" ).on( "click","#cardNumber", function() {
			$( "#cardNumber" ).keypress(function(event) {
				var cardNumber = $('#cardNumber').val();
				if (cardNumber.length < 19) {
					$('.error-lenght#cardGiftNumberError').html('Preencha corretamente para continuar').css({color:'red'});
					$('.error-lenght#cardGiftNumberError').removeClass('hidden');
					$(".textHelp").hide();
					$('input#cardNumber').css({border:'1px solid red'});
				}else{
					$('.error-lenght#cardGiftNumberError').html('');
					$('.error-lenght#cardGiftNumberError').addClass('hidden');
					$('input#cardNumber').css({border:'1px solid #e6e7e8'});
				}
			});
		});
		$( ".page-multiStepCheckoutSummaryPage" ).on( "click","#cardPwd", function() {
			$( "#cardPwd" ).keypress(function() {
				var senha = $('#cardPwd').val();
				if (senha.length < 4) {
					$('.error-lenght#cardGiftPwdError').html('Preencha corretamente para continuar').css({color:'red'});
					$('.error-lenght#cardGiftPwdError').removeClass('hidden');
					$(".textHelp").hide();
					$('input#cardPwd').css({border:'1px solid red'});
				}else{
					$('.error-lenght#cardGiftPwdError').html('');
					$('.error-lenght#cardGiftPwdError').addClass('hidden');	
					$('input#cardPwd').css({border:'1px solid #e6e7e8'});
				}
			});
		});
	}

};
ACC.checkoutsteps = {

	_autoload: [
		"permeateLinks", "saveOption"
	],
			
	permeateLinks: function() {
	
		$(document).on("click",".js-checkout-step",function(e){
			e.preventDefault();
			window.location=$(this).closest("a").attr("href")
		})		
	},

	saveOption: function () {
		var successTick = '<span class="optin-glyphicon glyphicon glyphicon-ok" style="margin-left:10px"/> <span>Salvo com sucesso!</span>';
		var errorMessage = '<span class="optin-glyphicon glyphicon glyphicon-remove" style="margin-left:10px"/> <span>Desculpe estamos tendo problemas ao salvar seu número.</span>';

		$(document).on("click","#optIn",function(e){
			if($(this).is(':checked'))
			{
				$("#orderOptinForm #optionFormSubmit").removeClass("hidden");
				$("#orderOptinForm #cellPhone").removeClass("hidden");
			}
			else
			{
				$(".optin-glyphicon").remove();
				$("#orderOptinForm #optionFormSubmit").addClass("hidden");
				$("#orderOptinForm #cellPhone").addClass("hidden");
			}
		});

		$(document).on("submit","#orderOptinForm",function(e) {
			e.preventDefault();
			$.ajax({
				type: "POST",
				url: $(this).attr('action'),
				data: $(this).serialize(),
				success: function(data) {
					$(".optin-glyphicon").remove();
					$("#cellPhone").parent().append(successTick);
				},
				error: function ()
				{
					$(".optin-glyphicon").remove();
					$("#cellPhone").parent().append(errorMessage);
				}
			});
		});
	}

};ACC.colorbox = {
	config: {
		maxWidth:"100%",
		opacity:0.7,
		width:"auto",
		transition:"none",
		close:'<span class="glyphicon glyphicon-remove"></span>',
		title:'<div class="headline"><span class="headline-text">{title}</span></div>',
		onComplete: function() {
			$.colorbox.resize();
			ACC.common.refreshScreenReaderBuffer();
		},
		onClosed: function() {
			ACC.common.refreshScreenReaderBuffer();
		}
	},

	open: function(title,config){
		var config = $.extend({},ACC.colorbox.config,config);
		config.title = config.title.replace(/{title}/g,title);
		return $.colorbox(config);
	},

	resize: function(){
		$.colorbox.resize();
	},

	close: function(){
		$.colorbox.close();
		$.colorbox.remove();
	}
};ACC.common = {
	
	processingMessage: $("<img src='" + ACC.config.commonResourcePath + "/images/spinner.gif'/>"),

	
	blockFormAndShowProcessingMessage: function (submitButton)
	{
		var form = submitButton.parents('form:first');
		form.block({ message: ACC.common.processingMessage });
	},

	refreshScreenReaderBuffer: function ()
	{
		// changes a value in a hidden form field in order
		// to trigger a buffer update in a screen reader
		$('#accesibility_refreshScreenReaderBufferField').attr('value', new Date().getTime());
	}

};





/* Extend jquery with a postJSON method */
jQuery.extend({
	postJSON: function (url, data, callback)
	{
		return jQuery.post(url, data, callback, "json");
	}
});

// add a CSRF request token to POST ajax request if its not available
$.ajaxPrefilter(function (options, originalOptions, jqXHR)
{
	// Modify options, control originalOptions, store jqXHR, etc
	if ((options.type === "post" || options.type === "POST") && (options.addCsrf == undefined || options.addCsrf) )
	{
		var noData = (typeof options.data === "undefined");
		if (noData || options.data.indexOf("CSRFToken") === -1)
		{
			options.data = (!noData ? options.data + "&" : "") + "CSRFToken=" + ACC.config.CSRFToken;
		} else if(options.data.indexOf("CSRFToken") !== -1) {
			options.data = options.data.replace(/CSRFToken=[a-z0-9-]*/, "CSRFToken=" + ACC.config.CSRFToken);
		}
	}
});

ACC.forgottenpassword = {

	_autoload: [
		"bindLink"
	],

	bindLink: function(){
		$(document).on("click",".js-password-forgotten",function(e){
			e.preventDefault();

			ACC.colorbox.open(
				$(this).data("cboxTitle"),
				{
					href: $(this).attr("href"),
					width:"350px",
					onOpen: function()
					{
						$('#validEmail').remove();
					},
					onComplete: function(){
						$('form#forgottenPwdForm').ajaxForm({
							success: function(data)
							{
								if ($(data).closest('#validEmail').length)
								{
									
									if ($('#validEmail').length === 0)
									{
										$(".forgotten-password").replaceWith(data);
										ACC.colorbox.resize();
									}
								}
								else
								{
									$("#forgottenPwdForm .control-group").replaceWith($(data).find('.control-group'));
									ACC.colorbox.resize();
								}
							}
						});
					}
				}
			);
		});
	}

};ACC.global = {

	_autoload: [
		["passwordStrength", $('.password-strength').length > 0],
		["returnOfReason", $('#returnOfReason').length > 0],
		["typeOfDevice", $('#typeDevice').length > 0],
		["breadcrumb", $('.breadcrumb-section').length > 0],
		"ievalidation",
		"bindToggleOffcanvas",
		"closeBannerRebuy",
		"foodValidateCep",
		"bindToggleXsSearch",
		"bindToggleHeaderLinks",
		"bindHoverIntentMainNavigation",
		"initImager",
		"backToHome",
		"bootstrapComponentStarter",
		"inputMasks",
		"linkedButton",
		"backToLastPage",
		"inputMasksCPFCNPJ",
		"closeAlertsTimeout",
		"styledDropdownBtnPicker",
		"amountEntreyControls",
		"bindAsmAutocomplete",
		"svgLoad",
		"loadImportantMessage",
		"lazyLoad",
		"noFoodFunctionHeader",
		"validateUnavailableItems",
		//"typeOfDevice",
		["subhomeContextualMenuComponentHandler", $('.cmscomponent-imagemenu').length > 0],
		["subhomeVitrinaoComponentHandler", $('.cmscomponent-productshowcase').length > 0]
	],


	ievalidation: function() {
         $(document).on("ready", function () {
          var nAgt = navigator.userAgent;
          var fullVersion  = ''+parseFloat(navigator.appVersion);
           if ((verOffset=nAgt.indexOf("MSIE"))!=-1) {
            browserName = "Microsoft Internet Explorer";
            fullVersion = nAgt.substring(verOffset+5);
            fullVersion = fullVersion.slice(0, fullVersion.indexOf(';'))
             if(fullVersion <= 9) {
                location.href='/navegador-incompativel';
            }
          }
         });
    	},


	lazyLoad: function () {
		$(function () {
			if ($('img.lz-img, iframe.lz-ifrm').length) {
				$(window).bind('scroll', checkForLazy).trigger('scroll');
			}

			function keepLazying() {
				return document.body.className.toString().match(/(pageType-CategoryPage|page-search-grid|page-search-list)/g) != null
					|| document.querySelectorAll(".cmscomponent-imagemenu, .cmscomponent-productshowcase").length > 0;
			}

			function showLoader(elem) {
				elem.parent().addClass('lz-ldng');
				return elem;
			}

			function hideLoader(elem) {
				elem.parent().removeClass('lz-ldng');
				return elem;
			}

			function applyLazy(elem) {
				var dom = elem.get(0), isImg = dom.tagName.toLowerCase() === "img";
				showLoader(elem).attr('src', elem.attr('data-src')).removeAttr('data-src');
				if (isImg) {
					dom.onload = function () {
						hideLoader(elem).trigger('lazyLoaded').addClass('loaded');
					}
				} else {
					elem.addClass('loaded');
				}
			}

			function checkForLazy() {
				var win = $(window), elems = $("img.lz-img:not(.loaded), iframe.lz-ifrm:not(.loaded)"), top = win.scrollTop(), total = elems.length, winW = win.width();
				elems.each(function (idx, el) {
					var elem = $(el), elemTop = elem.offset().top, isIframe = elem.hasClass("lz-ifrm");
					if (elem.hasClass('prd-crsl-blckd')) return;

					if (top >= elemTop - (win.height() - 20)) {
						if (elem.attr('data-src') && !isIframe) {
							applyLazy(elem);
						} else if (elem.attr('data-src') && isIframe) {
							if (winW >= 992) {
								applyLazy(elem);
							} else {
								if (!elem.hasClass("hidden-xs") && !elem.hasClass("hidden-sm")) {
									applyLazy(elem);
								}
							}
						}
					}
				});
				if (total == 0) {
					if (!keepLazying())
						$(window).unbind('scroll', checkForLazy);
				}
			}
		});
	},
	loadImportantMessage: function () {
		$('#addedToCartModal').on('shown.bs.modal', function () {
			$.ajax({
				url: '/cart-important-message',
				cache: false,
				type: 'GET',
				dataType: "json",
				async: true,
			}).fail(function (error) {
				console.log(error);
			}).success(function (response) {
				$('#cartImportantMessage').text(response);
			});
		});
	},

	breadcrumb: function () {
		afterBreadcrumb = $('.cep-consultation').length > 0;
		!afterBreadcrumb ? $('header').after($('.breadcrumb-section')) : $('.cep-consultation').after($('.breadcrumb-section'));
	},

	svgLoad: function () {
		loadSvgSprites();
	},

	foodValidateCep: function () {
		var buttonStatus = null;
		$(".js-show-modal-food-add").click(function (e) {
			e.preventDefault();
			checkFood('add');
		});

		$('.js-show-modal-food-buy').click(function (e) {
			e.preventDefault();
			checkFood('buy');
		});

		$('#validateCepButton').click(function () {
			var zipCode = $('input#inputCepValidate').val();
			ACC.global.ajaxCep(zipCode, buttonStatus);
		});

		function checkFood(typeButton) {
			buttonStatus = typeButton;
			var cepCookie = ACC.functionCookie.getCookie('cepConsultation');

			if (cepCookie == undefined) {
				$('#cepModal').modal('show');
			} else {
				ACC.global.ajaxCep(cepCookie, buttonStatus);
			}
		}
	},

	ajaxCep: function (zipCode, button) {
		var urlCheckCep = "/cep/check?zipCode=" + zipCode;
		var productCode = $("input[name=productCodePost]").val();

		if(productCode != undefined) {
			urlCheckCep = urlCheckCep + "&productCode=" + productCode;
		} else {
			if(dataLayer[0].productSKU != undefined) {
				urlCheckCep = urlCheckCep + "&productCode=" + dataLayer[0].productSKU;
			}
		}

		$.ajax({
			url: urlCheckCep,
			method: "GET",
			success: function (data) {
				ACC.cepConsultationController.consultationCepModal(data, zipCode, true, button);
			}, error: function (data) {
				ACC.cepConsultationController.consultationCepModal(data, zipCode, false, button);
			}
		});
	},

	passwordStrength: function () {
		$('.password-strength').pstrength({
			verdicts: ["Fraca", "Fraca", "Fraca", "Média", "Forte", "Forte"],
			minchar: 1,
			minCharText: "",
			colors: ["#ff3030", "#ff3030", "#ff3030", "#fbe039", "#5dd39e", "#5dd39e"],
			values: [20, 30, 30, 60, 100, 100],
			scores: [21, 25, 34, 45, 70, 90]
		});
	},

	bindToggleOffcanvas: function () {
		$(document).on("click", ".js-toggle-sm-navigation", function () {
			ACC.global.toggleClassState($("main"), "offcanvas");
		});
	},

	bindToggleXsSearch: function () {
		$(document).on("click", ".js-toggle-xs-search", function () {
			ACC.global.toggleClassState($(".site-search"), "active");
		});
	},

	bindToggleHeaderLinks: function () {
		$(document).on("click", ".js-toggle-header-links", function () {
			var $e = $(".md-secondary-navigation");
			$(this).blur();
			ACC.global.toggleClassState($(this), "active");
			ACC.global.toggleClassState($e, "active") ? $e.slideDown(300) : $e.slideUp(300);
		})
	},

	toggleClassState: function ($e, c) {
		$e.hasClass(c) ? $e.removeClass(c) : $e.addClass(c);
		return $e.hasClass(c);
	},

	bindHoverIntentMainNavigation: function () {
		$("nav.main-navigation > ul > li").hoverIntent(function () {
			$(this).addClass("md-show-sub")
		}, function () {
			$(this).removeClass("md-show-sub")
		})
	},

	initImager: function () {
		new Imager('.js-responsive-image');
	},

	// usage: ACC.global.addGoogleMapsApi("callback function"); // callback function name like "ACC.global.myfunction"
	addGoogleMapsApi: function (callback) {
		if (callback != undefined && $(".js-googleMapsApi").length == 0) {
			var isAsmUser = ACC.config.isAsmUser;
			if (isAsmUser != "true" || $("#_asm").length == 0) {
				$('head').append('<script class="js-googleMapsApi" type="text/javascript" src="//maps.googleapis.com/maps/api/js?key=' + ACC.config.googleApiKey + '&sensor=false&callback=' + callback + '"></script>');
			}
		} else if (callback != undefined) {

			eval(callback + "()");
		}
	},

	backToHome: function () {
		$(".backToHome").on("click", function () {
			var sUrl = ACC.config.contextPath;
			window.location = sUrl;
		});
	},

	backToLastPage: function () {
		$(".goBack").on("click", function () {
			window.history.go(-1);
		});
	},

	/*Calling any bootstrap component globally*/
	bootstrapComponentStarter: function () {
		$('[data-toggle="popover"]').popover();
	},

	inputMasks: function () {

		$(".mask-district").keyup(function () {
			var valor = $(this).val().replace(/[^a-zA-Z 0-9]+/g, '');
			$(this).val(valor);
		});

		var isMobile = function () {
			var userAgent = navigator.userAgent.toLowerCase();
			if (userAgent.search(/(android|avantgo|blackberry|bolt|boost|cricket|docomo|fone|hiptop|mini|mobi|palm|phone|pie|tablet|up\.browser|up\.link|webos|wos)/i) != -1)
				return true;
		}

		$('.postal-code-mask').mask("99999-999");
		if (isMobile()) {
			$('.celphone-mask').focusin(function () {
				$('.celphone-mask').unmask();
				$('.celphone-mask').attr('maxlength', 11);
			})
			$('.celphone-mask').focusout(function () {
				$('.celphone-mask').mask("(99) 99999-9999");
				$('.celphone-mask').attr('maxlength', 15);
			})

		} else {
			$('.celphone-mask').mask("(99) 99999-9999");
		}

        var behavior = function (val) {
            return val.replace(/\D/g, '').length === 11 ? '(00) 00000-0000' : '(00) 0000-00009';
        },
        options = {
            onKeyPress: function (val, e, field, options) {
                field.mask(behavior.apply({}, arguments), options);
            }
        };

        var behaviorCEP = function (val) {
            return val.replace(/\D/g, '').length === 8 ? '00000-000' : '00000-000';
        },
        optionsCEP = {
            onKeyPress: function (val, e, field, optionsCEP) {
                field.mask(behaviorCEP.apply({}, arguments), optionsCEP);
            }
        };

        $('.celphone-mask').mask(behavior, options);
        $('.postal-code-mask').mask(behaviorCEP, optionsCEP);

		$('.cpf-mask').mask('000.000.000-00', { reverse: true });
		$('.credit-card-number-mask').mask("9999999999999999");
		$('.letters-mask').mask('L', { translation: { 'L': { pattern: /[a-z\u00C0-\u00ff \u0027 A-Z]/, recursive: true } } });
		$('.letters-and-numbers-mask').mask('L', { translation: { 'L': { pattern: /[a-z|A-z|0-9|\s]/, recursive: true } } });
		$('.only-numbers-mask').mask("9999999999");
		$('.password-mask-vale-troca').mask("9999");

		$("#phoneCell").mask("(99) 99999-9999");

		$("#phoneCell").on("blur", function () {
			var last = $(this).val().substr($(this).val().indexOf("-") + 1);

			if (last.length == 3) {
				var move = $(this).val().substr($(this).val().indexOf("-") - 1, 1);
				var lastfour = move + last;

				var first = $(this).val().substr(0, 9);

				$(this).val(first + '-' + lastfour);
			}
		});

		$('#phoneCell').mask(behavior, options);
	},

	inputMasksCPFCNPJ: function () {

		$(".cpfcnpj").mask("999.999.999-99");

		$(".cpfcnpj").keydown(function () {
			var tamanho = $(".cpfcnpj").val().length;
			if (tamanho < 11) {
				$(".cpfcnpj").mask("999.999.999-99");
			}
			else if (tamanho == 14) {
				$(".cpfcnpj").unmask();
				$(".cpfcnpj").mask("99.999.999/9999-99");
			}
		});
	},

	/*
	*You can use waitForIt() like a setTimeout(), but it's a little bit different.
	*Use waitForIt() if you need to wait for something after an user action.
	*e.g:
	*	- Do somethig after user stop type for 1s
	
	$('input').keyup(function() {
		waitForIt(function(){
			alert('Time elapsed!');
		}, 1000 );
	});
	
	*It will be legen...dary!
	*/
	waitForIt: function () {
		var clock = 0;
		return function (cb, ms) {
			clearTimeout(clock);
			clock = setTimeout(cb, ms);
		};
	}(),

	linkedButton: function () {
		$(document).on("click", "button[data-href]", function () {
			window.location.href = $(this).data().href;
		});
	},

	cpfValidator: function (strCPF) {
		var Soma = 0;
		var Resto;

		if (strCPF == "00000000000" || strCPF == "11111111111" || strCPF == "22222222222" ||
			strCPF == "33333333333" || strCPF == "44444444444" || strCPF == "55555555555" ||
			strCPF == "66666666666" || strCPF == "77777777777" || strCPF == "88888888888" ||
			strCPF == "99999999999") {
			return false;
		}

		for (i = 1; i <= 9; i++) {
			Soma = Soma + parseInt(strCPF.substring(i - 1, i)) * (11 - i);
		}

		Resto = (Soma * 10) % 11;

		if ((Resto == 10) || (Resto == 11)) {
			Resto = 0;

		}

		if (Resto != parseInt(strCPF.substring(9, 10))) {
			return false;
		}

		Soma = 0;

		for (i = 1; i <= 10; i++) {
			Soma = Soma + parseInt(strCPF.substring(i - 1, i)) * (12 - i);
		}

		Resto = (Soma * 10) % 11;

		if ((Resto == 10) || (Resto == 11)) {
			Resto = 0;
		}

		if (Resto != parseInt(strCPF.substring(10, 11))) {
			return false;
		}

		return true;
	},

	isMobile: function (screenSize) {
		var viewport = window.innerWidth;
		var screenCheck = (screenSize ? screenSize : 768);
		return viewport > screenCheck ? false : true;
	},

	urlParameter: function (name) {
		return decodeURIComponent((new RegExp('[?|&]' + name + '=' + '([^&;]+?)(&|#|;|$)').exec(location.search) || [, ""])[1].replace(/\+/g, '%20')) || null;
	},

	closeAlertsTimeout: function () {
		$('#j_username, #j_password').focus(function () {
			$(".global-alerts .alert-dismissable").alert('close');
		});
	},

	styledDropdownBtnPicker: function () {
		$(document.body).on('click', '.dropdown-menu li', function (event) {
			var target = $(this);

			//picking "li" value
			target.closest('.styled-dropdown')
				.find('[data-bind="label"]')
				.text(target.text())
				.end()
				.children('.dropdown-toggle').dropdown('toggle');

			//seting "li" value into a hidden input for a form submition
			var valueHolder = target.closest('.styled-dropdown').find('input[type="hidden"]');
			var inputName = target.closest('.styled-dropdown').data('inputName') || '';
			var newValueHolder = '<input type="hidden" name="' + inputName + '" value="' + target.text() + '">';

			if (valueHolder.length > 0) {
				valueHolder.val(target.text());
			} else {
				target.closest('.styled-dropdown').append(newValueHolder);
			}

			return false;
		});
	},

	amountEntreyControls: function () {
		var target = $('.amount-entry');
		var amountEntry = target.find('input[type="text"]') || 0;

		amountEntry.attr({
			'autocomplete': 'off',
			'maxlength': 3
		});

		amountEntry.val() == 0 || amountEntry.val() == '' ? amountEntry.val(1) : '';

		target.find('button').click(function () {
			var action = $(this);
			var amount = parseInt(amountEntry.val());

			if (action.hasClass('add') && amount < 99) {
				amount++;
				amountEntry.val(amount);
			}
			else if (action.hasClass('subtract') && amount > 1) {
				amount--;
				amountEntry.val(amount);
			}
		});
	},

	bindAsmAutocomplete: function () {
		if ($("input[name='customerName']").length > 0) {
			$('body').on('DOMNodeInserted', "#_asm .ui-autocomplete", function () {
				$("li", this).addClass("ui-menu-item");
			});

		}
	},

	returnOfReason: function () {
		$('select#returnOfReason').change(function () {
			if ($(this).val() != "") {
				$('.js-enable-btn').addClass('btn-default');
			} else {
				$('.js-enable-btn').removeClass('btn-default');
			}
		});
	},

	noFoodFunctionHeader: function () {
		var hidden = 'hidden';
		/*
		* Menu
		*/
		$('.js-toggle-sub-menu').click(function () {
			$('.no-food-menu').toggleClass('overlay-open');
			$('.no-food-stores, .no-food-login').removeClass('overlay-open');
			toggleHidden($('.no-food-menu__sub'));
			removeAddHidden($('.no-food-stores__dropdow, .no-food-login__dropdow'), false);
			$('.no-food-stores').removeClass('no-food-stores__pseudo');
			$('.no-food-login').removeClass('no-food-login__pseudo');
			var isMobile = screenSize();
			isMobile ? $('.no-food-menu').toggleClass('no-food-menu--blue') : '';
			$('.js-toggle-sub-menu').toggleClass('set-top-menu');
		});

		$('.js-show-menu-aside').click(function () {
			removeAddHidden($('.no-food-menu__menu-aside'), false);
			$(this).parent('ul').find('.no-food-menu__menu-aside').removeClass("hidden");
			var isMobile = screenSize();
			if (isMobile) {
				$('.no-food-menu__sub').addClass('animate-left');
				$(this).parent('ul').find('.no-food-menu__menu-aside').addClass('animate-right');
			} else {
				$('.js-show-menu-aside').parent('ul').removeClass('menu-aside-active');
				$(this).parent().addClass('menu-aside-active');
			}
		});

		$('.js-come-back-no-food').click(function () {
			$('.no-food-menu__sub').removeClass('animate-left');
			$('.js-show-menu-aside').parent().removeClass('menu-aside-active');
			var isMobile = screenSize();
			if (isMobile) {
				setTimeout(function () {
					removeAddHidden($('.no-food-menu__menu-aside'), false);
				}, 500);
			} else {
				removeAddHidden($('.no-food-menu__menu-aside'), false);
			}
		});
		/*
		* Search
		*/
		$('.js-site-search-input').focus(function () {
			$('.no-food-search').addClass('overlay-open');
			$('.no-food-menu, .no-food-login, .no-food-stores').removeClass('overlay-open no-food-menu--blue');
			removeAddHidden($('.no-food-menu__sub, .no-food-stores__dropdow, .no-food-login__dropdow'), false);
			$('.js-toggle-sub-menu').removeClass('set-top-menu');
			$('.no-food-login').removeClass('no-food-login__pseudo');
			$('.no-food-stores').removeClass('no-food-stores__pseudo');
			var screenSizeFocus = screenSize();
			screenSizeFocus ? $('.no-food-search').addClass('no-food-search__focus') : '';
		}).focusout(function () {
			$('.no-food-search').removeClass('no-food-search__focus overlay-open');
		});

		$('#js-site-search-input').keydown(function () {
			var isMobile = screenSize();
			if (isMobile) {
				var cleanInput = $(this).val().length > 0;
				cleanInput ? removeAddHidden('.clean-input-search', true) : removeAddHidden('.clean-input-search', false);
				cleanInput ? removeAddHidden('.no-food-search__button', false) : removeAddHidden('.no-food-search__button', true);
			}
		});

		$('.js-clean-input-search').click(function () {
			var isMobile = screenSize();
			if (isMobile) {
				$('#js-site-search-input').val('');
				removeAddHidden('.clean-input-search', false);
				removeAddHidden('.no-food-search__button', true);
				removeAddHidden('.clean-input-search', false);
			}
		});
		/*
		*  Stores
		*/
		$('.js-toggle-sub-menu-stores').click(function () {
			$('.no-food-stores').toggleClass('overlay-open no-food-stores__pseudo');
			$('.no-food-menu, .no-food-login').removeClass('overlay-open no-food-menu--blue');
			removeAddHidden($('.no-food-menu__sub, .no-food-login__dropdow'), false);
			$('.js-toggle-sub-menu').removeClass('set-top-menu');
			$('.no-food-login').removeClass('no-food-login__pseudo');
			toggleHidden('.no-food-stores__dropdow');
		});

		$('.js-toggle-overlay').click(function () {
			addAllHidden();
			$('header *').removeClass('overlay-open');
			$('.no-food-menu').removeClass('no-food-menu--blue');
		});
		/*
		*Login
		*/
		$('.js-no-food-login').click(function () {
			if ($('body').hasClass('logged-in')) {
				$(this).toggleClass('overlay-open no-food-login__pseudo');
				removeAddHidden('.overlay-no-food', true);
				toggleHidden('.no-food-login__dropdow');
				removeAddHidden($('.no-food-menu__sub, .no-food-stores__dropdow'), false);
				$('.no-food-stores').removeClass('no-food-stores__pseudo');
				$('.js-toggle-sub-menu').removeClass('set-top-menu');
				$('.no-food-stores, .no-food-menu').removeClass('overlay-open');
			};
		});
		/*
		*Cart
		*/
		/* Removed for a while. It must show all carts...
		$('.no-food-cart').hover(function () {
			$(this).addClass('overlay-open');
			removeAddHidden($('.no-food-menu__sub, .no-food-stores__dropdow, .no-food-login__dropdow'), false);
			$('.no-food-stores, .no-food-menu, .no-food-login').removeClass('overlay-open');
			$('.no-food-stores').removeClass('no-food-stores__pseudo');
			$('.js-toggle-sub-menu').removeClass('set-top-menu');
			$('.no-food-login').removeClass('no-food-login__pseudo');
			$('.mini-cart-container').show();
		}, function () {
			$('.mini-cart-container').hide();
			$('.no-food-cart').removeClass('overlay-open');
		});*/

		/*
		* Functions
		*/
		function addAllHidden() {
			removeAddHidden($('.no-food-menu__sub'), false);
			removeAddHidden($('.no-food-stores__dropdow'), false);
			removeAddHidden('.no-food-login__dropdow', false);
			$('.no-food-stores').removeClass('no-food-stores__pseudo');
			$('.js-toggle-sub-menu').removeClass('set-top-menu');
			$('.no-food-menu').removeClass('no-food-menu--blue');
			$('.no-food-login').removeClass('no-food-login__pseudo');
		}

		function removeAddHidden(selector, bool) {
			bool ? $(selector).removeClass("hidden") : $(selector).addClass("hidden");
		}

		function toggleHidden(selector) {
			$(selector).toggleClass("hidden");
		}

		function screenSize() {
			var screenSize = $('body').width() <= 1199;
			return screenSize;
		}

		//function for link IOS
		$('a.js-mini-cart-link.miniCart').on('click touchend', function (e) {
			if (!navigator.userAgent.match(/iPhone/i) || !navigator.userAgent.match(/iPad/i)) {
				var el = $(this);
				var link = el.attr('href');
				window.location = link;
			}
		});

		//function for link IOS
		$('a.js-mini-cart-link.miniCart').on('click touchend', function (e) {
			if (!navigator.userAgent.match(/iPhone/i) || !navigator.userAgent.match(/iPad/i)) {
				var el = $(this);
				var link = el.attr('href');
				window.location = link;
			}
		});
	},
	closeBannerRebuy: function () {

		$(document).on("click", "#banner-recompra__close", function () {
			$(this).closest(".banner-recompra").hide();
		});
	},
	subhomeContextualMenuComponentHandler: function () {
		var components = $(".cmscomponent-imagemenu");
		components.each(handlePagination);
		function handlePagination(index, item) {
			$(item).find(".more-btn").click(nextPage.bind($(item)));
		}
		function nextPage() {
			var component = this, moreBtn = component.find('.more-btn'), list = component.find('ul'),
				componentId = component.data("id"), page = parseInt(component.attr("data-page")) || 1, totalPages = parseInt(component.attr("data-total-pages"));

			page +=1;
			component.attr("data-page", page);
			moreBtn.attr("disabled", "disabled").toggleClass("loading");

			$.ajax({
				type: "get",
				url: "/subcontextualpagination?componentId=" + componentId + "&page=" + page,
				success: function (res) {
					setTimeout(function () {
						list.append(res);
						$(window).trigger("scroll");
						feedback(moreBtn, page == totalPages);
					}, 2000)
				}
			});
		}
		function feedback(moreBtn, removePagination) {
			if (removePagination)
				moreBtn.removeAttr("disabled").parent().remove();
			else
				moreBtn.removeAttr("disabled").toggleClass('loading');
		}

		function arrangeThumbnails() {
			var historics = $(".cmscomponent-imagemenu.historic"), totalImages = 0, totalLoadedImages = 0;
			function checkLoadedImages() {
				historics.find("img.lz-img.loaded:not(.clr)").each(function (idx, itm) {
					resizeThumb(itm);
				});
				setTimeout(checkLoadedImages, 500);
			}
			function resizeThumb(dom) {
				var img, holder, imgDimensions = { width: 0, height: 0 }, holderDimensions = { width: 0, height: 0 };
				img = $(dom);
				holder = img.parent().parent();
				imgDimensions = { width: img.width(), height: img.height() };
				holderDimensions = { width: holder.width(), height: holder.height() };
				applyResize(img.addClass('rsz'), imgDimensions, holderDimensions);
				return;
				if (imgDimensions.height < holderDimensions.height) {
					applyResize(img.addClass('rsz'), imgDimensions, holderDimensions);
				} else {
					if (!img.hasClass('rsz') && !img.hasClass('clr')) {
						img.width("100%").addClass('clr');
					}
				}
			}
			function applyResize(img, imgDimensions, holderDimensions) {
				var maxWidth = holderDimensions.width, maxHeight = holderDimensions.height, prop, newWidth = 0, newHeight = 0,
					currDimensions, left, top;
				prop = Math.max(maxWidth / imgDimensions.width, maxHeight / imgDimensions.height);
				currDimensions = (img.data('dimensions')) ? img.attr('data-dimensions').split('|') : [];
				newWidth = ~~(imgDimensions.width * prop);
				newHeight = ~~(imgDimensions.height * prop);
				left = ~~((maxWidth - newWidth) * .5);
				top = ~~((maxHeight - newHeight) * .5);
				if (
					newWidth !== parseInt(currDimensions[0]) ||
					newHeight !== parseInt(currDimensions[1]) ||
					top !== parseInt(currDimensions[2]) ||
					left !== parseInt(currDimensions[3])
				) {
					img.width(newWidth).height(newHeight)
						.css({
							'top': top + 'px',
							'left': left + 'px'
						})
						.attr('data-dimensions', newWidth + "|" + newHeight + "|" + top + "|" + left);
				}
			}
			setTimeout(checkLoadedImages, 1000);
			$(window).resize(checkLoadedImages);
		}
		arrangeThumbnails();
	},
	subhomeVitrinaoComponentHandler: function () {
		var components = $(".cmscomponent-productshowcase");
		components.each(handlePagination);
		function handlePagination(index, item) {
			$(item).find(".more-btn").click(nextPage.bind($(item)));
		}
		function nextPage() {
			var component = this, moreBtn = component.find('.more-btn'), list = component.find('ul.category-result-list'),
				componentId = component.attr("data-id"), page = parseInt(component.attr("data-page")) || 1, totalPages = parseInt(component.attr("data-total-pages"));

			page += 1;
			component.attr("data-page", page);
			moreBtn.attr("disabled", "disabled").toggleClass("loading");

			$.ajax({
				type: "get",
				url: "/view/ProductVitrinaoComponentController/vitrinaopagination?componentId=" + componentId + "&page=" + page,
				success: function (res) {
					setTimeout(function () {
						list.append(res);
						$(window).trigger("scroll");
						feedback(moreBtn, page == totalPages);
					}, 2000)
				}
			});
		}
		function feedback(moreBtn, removePagination) {
			if (removePagination)
				moreBtn.removeAttr("disabled").parent().remove();
			else
				moreBtn.removeAttr("disabled").toggleClass('loading');
		}
	},

	/**
	 * Method that reads the CEP cookies and based on them creates a value
	 * that indicates that a CEP wasn't chosen by the user (na), or that foods
	 * cannot be sent to the current CEP (false), or that foods may be sent to
	 * the current CEP (true). See [CACHE-57].
	 */
	getFoodZipZoneValue: function () {

		var cepCookie = ACC.functionCookie.getCookie('cepConsultation');
		var foodzipzone;

		if (cepCookie == undefined) {
			foodzipzone = this.FoodZipZoneEnum.NA; // not available
		}
		else {
			var statusCepConsultation = ACC.functionCookie.getCookie('statusCepConsultation');
			if (statusCepConsultation == "true") {
				foodzipzone = this.FoodZipZoneEnum.TRUE; // foods may be sent to the zip address
			}
			else {
				foodzipzone = this.FoodZipZoneEnum.FALSE;
			}
		}

		return foodzipzone;
	},

	/**
	 * The same as getFoodZipZoneValue(), but returns 'foodzipzone=<value of foodzipzone>'.
	 */
	getFoodZipZoneParameter: function () {

		return 'foodzipzone=' + this.getFoodZipZoneValue();

	},

	/**
	 * Changes the foodzipzone parameter value inside an URL, returning a new URL
	 * that contains the substitution. See [CACHE-57].
	 *
	 * @param url
	 *      The URL to be changed
	 * @param newParamValue
	 *      New parameter value. Use FoodZipZoneEnum to define this, for example: FoodZipZoneEnum.TRUE
	 */
	updateFoodZipZoneParameter: function (url, newParamValue) {

		var newUrl = url.replace(/foodzipzone=(na|true|false)/, 'foodzipzone=' + newParamValue);

		return newUrl;
	},

	FoodZipZoneEnum: {
		NA: "na",
		TRUE: true,
		FALSE: false
	},

	validateUnavailableItems: function () {
		urlParams = new URLSearchParams(window.location.search)
		if (urlParams.get('validateUnavailableItems')) {
			ACC.unavailableItemsModal.getUnavailableItems(function (data) {
				if (data.status == 200 && data.responseJSON.hasUnavailableItems) {
					var reload = function (data) {
						document.location.reload()
					}
					ACC.unavailableItemsModal.open(reload, reload)
				}
			})
		}
	}

};

$(window).load(function () {
	$('#birthYear').popover('hide');
	var currentTime = new Date().getFullYear();
	$('#birthYear').change(function () {
		var birthYear = $(this).val();
		if (birthYear != null && birthYear !== undefined && birthYear !== '') {
			var diffYear = currentTime - birthYear;
			if (diffYear < 18) {
				$('#birthYear').popover('show');
			}
		} else {
			$('#birthYear').popover('hide');
		}
	});
});

$('.panel.panel-default .panel-heading').click(function () {
	$(this).find('.glyphicon-plus').toggleClass('glyphicon-minus');
});

$(document).ready(function () {
	$("#carouselDinamicBanner").owlCarousel({
		navigation: true, // Show next and prev buttons
		slideSpeed: 300,
		paginationSpeed: 400,
		singleItem: true,
		autoPlay: true
	});
});

$('.mobile-nav').click(function () {
	$('.fixed-menu-top .dropdown-login.hidden-md').click();
	$('.overlay').toggleClass('over-menu').toggle();
	$('.aside-sub-navigation ul').owlCarousel({
		pagination: false,
		items: 3,
		itemsMobile: [320, 2],
		itemsMobile: [700, 2],
		dragBeforeAnimFinish: true,
		mouseDrag: true,
		touchDrag: true
	});
	$('.focused').click();
	$('li #block-search-mobile-add').show();
});

//keypress to mobile (button Ir)
$('#js-site-search-input.js-site-search-input').keypress(function (e) {
	if (e.which == 13) {
		var urlInput;
		$('#js-site-search-input.js-site-search-input').each(function () {
			if ($(this).val() != "") {
				urlInput = $(this).val();
			}
		});

        setTimeout(function(){
            // Food zip zone parameter (see [CACHE-57]):
            var foodzipzoneParam = ACC.global.getFoodZipZoneParameter();
            var selectedPointOfServices = window.unescape(ACC.functionCookie.getCookie("selectedPointOfServices"));
			var selectedPOSParam = selectedPointOfServices !== "undefined" ? "&pos=" + selectedPointOfServices : "";
            window.location.href = searchComponentUrl + '?termo=' + urlInput + '&' + foodzipzoneParam + selectedPOSParam;
        }, 250);

	}
});

// Selecting all the links inside the menu 'Mercado', plus the links 'Veja tudo de Mercado':
$('.menu-food-active .aside-no-food__link, .menu-food-active .top-submenu-link__link').click(function () {

	// Adding the food zip zone parameter to the link (see [CACHE-57]):

	if (this['href'].includes("?")) {
		// adding a new parameter to the existing URL parameters:
		this['href'] = this['href'] + '&' + ACC.global.getFoodZipZoneParameter();
	}
	else {
		// adding the first parameter to the URL:
		this['href'] = this['href'] + '?' + ACC.global.getFoodZipZoneParameter();
	}

});
ACC.cepConsultationController = {

	_autoload: [
		["consultationInitialize", $('.openBanner').length > 0]
	],

	consultationCepModal: function (data, zipCode, status, buttom) {
		var availableCep = null;
		var resultDataCep = data;

		status ? availableCep = data.data.available : availableCep = data.responseJSON.data.available;

		if(availableCep != undefined) {
			availableCep ?  feedbackOk() : feedbackNo();
		}

		function feedbackOk () {
            statusconsult('ok');
            ACC.functionCookie.setCookie('originalZipCode', ACC.functionCookie.getCookie('cepConsultation'));
            ACC.functionCookie.setCookie('cepConsultation', zipCode);
            ACC.functionCookie.setCookie('statusCepConsultation', true);
            ACC.functionCookie.setCookie('sideStoreOn', data.data.sideStoreFeatureToggleEnabled);
            ACC.functionCookie.setCookie('selectedPointOfServices', window.escape(data.data.sideStoreSelectedPointOfServices));
            ACC.functionCookie.setCookie('selectedWarehouses', window.escape(data.data.sideStoreSelectedWarehouses));
            dataLayer[0].statusCepFood = 'atendido';
            $('#cepModal').modal('hide');

            if (buttom === 'add') {

                 var code = $("#buyProductButtonBottom").data('productCode');
                 $.when(ACC.cepConsultationController.stockProduct(code)).done(function(stockLevel){
                    if(stockLevel <= '0') {
                       $('#outStockModalError').modal("show");
                    } else {
                        $(".addToCartButton").addClass("button-add-icon").html("ADICIONADO <i class='crficon-cart-add'/>");
                        $(".addToCartForm").submit();
                    }
                });

            } else if (buttom === 'buy') {
                ACC.product.setProductQuantity();
                var code = $("#buyProductButtonBottom").data('productCode');
                $.when(ACC.cepConsultationController.stockProduct(code)).done(function(stockLevel){
                    if(stockLevel <= '0') {
                        $('#outStockModalError').modal("show");
                    } else {
                        $("#buyProductForm").submit();
                    }
                });
            } else {
                if(globalCode != undefined) {
                     $.when(ACC.cepConsultationController.stockProduct(globalCode)).done(function(stockLevel){
                         if(stockLevel <= '0') {
                             $('#outStockModalError').modal("show");
                         } else {
                            ACC.product.submitFormByAjax("true");
                         }
                    });
                } else {
                    setTimeout(function(){
                        // Foods can be sent to the current CEP. See [CACHE-57]:
                        var param = ACC.global.FoodZipZoneEnum.TRUE;
                        var newUrl = ACC.global.updateFoodZipZoneParameter (window.location.href, param);

                        if (location.href.indexOf("?") > -1) {
                            newUrl += '&validateUnavailableItems=true'
                        } else {
                            newUrl += '?validateUnavailableItems=true'
                        }

                        window.location.href = newUrl; // reload current page
                    });
                }

        	}
        }

		function feedbackNo () {
            var notResult = resultDataCep.responseJSON.resultStatus;
            dataLayer[0].statusCepFood = 'não atendido';
            ACC.functionCookie.setCookie('selectedPointOfServices', "");
            ACC.functionCookie.setCookie('selectedWarehouses', "");
            if (notResult == 'NOTFOUND') {
                $('#inputCepValidate').css("border", "1px solid red");
                $(".help-block").show().css("color", "red");
            } else if (notResult == 'FAIL') {
                var zipeCodeCookieResult = ACC.functionCookie.getCookie('cepConsultation');
                if(buttom == 'add') {
                    ACC.product.setProductQuantity();
                    var code = $("#buyProductButtonBottom").data('productCode');

                    $.when(ACC.cepConsultationController.stockProduct(code)).done(function(stockLevel){

                        if(stockLevel <= '0') {
                           document.location.reload();
                           ACC.functionCookie.setCookie('cepConsultation', zipCode);
                           ACC.functionCookie.setCookie('statusCepConsultation', false);
                           statusconsult('no');
                        } else {
                            $('#cepModal').modal('hide');
                            ACC.functionCookie.setCookie('cepConsultation', zipCode);
                            ACC.functionCookie.setCookie('statusCepConsultation', false);
                            $(".addToCartForm").submit();
                            $('#addedToCartModal').modal('show');

                           $(document).on('click', '.center-block', function(e) {
                                 document.location.reload();
                           });
                        }
                    });


                } else if(zipeCodeCookieResult === undefined && buttom == 'buy') {
                    ACC.product.setProductQuantity();
                    var code = $("#buyProductButtonBottom").data('productCode');

                    $.when(ACC.cepConsultationController.stockProduct(code)).done(function(stockLevel){
                        if(stockLevel <= '0') {
                            ACC.functionCookie.setCookie('cepConsultation', zipCode);
                            ACC.functionCookie.setCookie('statusCepConsultation', false);
                            statusconsult('no');
                            $('#cepModal').modal('hide');
                            $('#cepModalError').modal('show');
                        } else {
                            $("#buyProductForm").submit();
                        }
                    });


                }else if(globalCode != undefined) {
                      $.when(ACC.cepConsultationController.stockProduct(globalCode)).done(function(stockLevel){
                          if(stockLevel <= '0') {
                             ACC.functionCookie.setCookie('cepConsultation', zipCode);
                             ACC.functionCookie.setCookie('statusCepConsultation', false);
                             document.location.reload();
                          } else {
                             ACC.functionCookie.setCookie('cepConsultation', zipCode);
                             ACC.functionCookie.setCookie('statusCepConsultation', false);
                             $('#cepModal').modal('hide');
                             ACC.product.submitFormByAjax("true");
                          }
                     });

                 } else {
                    $('#cepModal').modal('hide');
                    ACC.functionCookie.setCookie('cepConsultation', zipCode);
                    ACC.functionCookie.setCookie('statusCepConsultation', false);
                    dataLayer[0].statusCepFood = 'nulo';
                    $('#cepModalError').modal('show');
                    statusconsult('no');
                 }
            }
        }

		function statusconsult (status) {
			$('.cep-consultation').removeClass('cep-consultation--feedback-ok cep-consultation--feedback-no');
			$('.cep-consultation').addClass('cep-consultation--feedback-'+ status +'');
			$('.cep-consultation--feedback-'+ status +' .js-update-zip-code').text(zipCode);
		}
	},

	enableBrowseButton : function () {
		$('.js-keypress-cep').keyup(function () {
			var totalKeypress = $(this).val().length;
			totalKeypress == 9 ? $('#validateCepButton').removeAttr('disabled') : $('#validateCepButton').attr('disabled', 'disabled="disabled"');
		});
	},

	stockProduct : function (code) {

        var stockLevel;
        return $.ajax({
            url: "/carrinho/quantityProductStock",
            method: "GET",
            cache: false,
            async: false,
            data: {
                productCode: code,
            },
            success: function(result) {
                return stockLevel;
            },
            error: function(error) {
                console.error("ERROR");
            },
        });
    },

	consultationInitialize : function() {
        readCookie();
        enableBrowseButton();
     /*   $('.cep-consultation').css('display','none'); */

        function readCookie() {
            var statusCookie = 'statusCepConsultation';
            var zipeCodeCookieResult = ACC.functionCookie.getCookie('cepConsultation');
            var statusCookieResult = ACC.functionCookie.getCookie(statusCookie);
            var isHomePage = $('body').hasClass('page-homepage');

            if(statusCookieResult == 'true') {
                $('.cep-consultation').addClass('cep-consultation--feedback-ok');
                $('.cep-consultation--feedback-ok .js-update-zip-code').text(zipeCodeCookieResult);
            } else if(statusCookieResult == 'false') {
                $('.cep-consultation').addClass('cep-consultation--feedback-no');
                $('.cep-consultation--feedback-no .js-update-zip-code').text(zipeCodeCookieResult);
            }
            if(!isHomePage) {
                $('.cep-consultation').removeClass('hide');
            }
        }

        function enableBrowseButton() {
            $('.js-keypress-cep').keyup(function () {
                var totalKeypress = $(this).val().length;
                totalKeypress == 9 ? $('#validateCepButton').removeAttr('disabled') : $('#validateCepButton').attr('disabled', 'disabled="disabled"');
            });
        }

    }



}
ACC.imagegallery = {
		
	_autoload: [
		"bindImageGallery",
		"borderSetting",
		"controlActive"
	],
	
	bindImageGallery: function (){

		$(".js-gallery").each(function(){
			var $image = $(this).find(".js-gallery-image");
			var $carousel = $(this).find(".js-gallery-carousel");
			var imageTimeout;

			
			$image.owlCarousel({
				singleItem : true,
				pagination:true,
				navigation:true,
				lazyLoad:true,
				navigationText : ["<span class='glyphicon glyphicon-chevron-left'></span>", "<span class='glyphicon glyphicon-chevron-right'></span>"],
				afterAction : function(){
					ACC.imagegallery.syncPosition($image,$carousel,this.currentItem)
					$image.data("zoomEnable",true)				
				},
				startDragging: function(){
					
					$image.data("zoomEnable",true)
				},
				afterLazyLoad:function(e){

					var b = $image.data("owlCarousel") || {}
					if(!b.currentItem){
						b.currentItem = 0
					}
	
					var $e=$($image.find("img.lazyOwl")[b.currentItem]);
					startZoom($e.parent())
				}
			});


			$carousel.owlCarousel({
				navigation:false,
				navigationText : ["<span class='glyphicon glyphicon-chevron-left'></span>", "<span class='glyphicon glyphicon-chevron-right'></span>"],
				pagination:false,
				items:2,
				itemsDesktop : [5000,8], 
				itemsDesktopSmall : [1200,8], 
				itemsTablet: [768,8], 
				itemsMobile : [480,3], 
				lazyLoad:true,
				afterAction : function(){

				},
			});


			$carousel.on("click","a.item",function(e){
				e.preventDefault();
				$image.trigger("owl.goTo",$(this).parent(".owl-item").data("owlItem"));
				$(this).parents('.owl-carousel').find('a.item.active').removeClass('active');
				$(this).addClass('active');
			})



			function startZoom(e){
			


				$(e).zoom({
					url: $(e).find("img.lazyOwl").data("zoomImage"),
					touch: true,
					on: "grab",
					touchduration:300,

					onZoomIn:function(){
					
					},

					onZoomOut:function(){
						var owl = $image.data('owlCarousel');
						owl.dragging(true)
						$image.data("zoomEnable",true)
					},

					zoomEnableCallBack:function(){
						var bool = $image.data("zoomEnable")

						var owl = $image.data('owlCarousel');
						if(bool==false){
							owl.dragging(true)
						}
						else{

						 	owl.dragging(false)
						}
						return bool;
					}
				});
			}
		})
	},


	syncPosition: function($image,$carousel,currentItem){
		$carousel.trigger("owl.goTo",currentItem);
	},

	borderSetting: function(){
		$('.block-desktop-modal .owl-item .item img').click(function() {
            setActiveItemOnModal($('.block-thumb-desktop-gallery'), $(this).data('index'));
		});

		$('.block-thumb-desktop-gallery .owl-item .item img').click(function() {
            setActiveItemOnModal($('.block-desktop-modal'), $(this).data('index'));
		});

		function setActiveItemOnModal(modal, indexSelectedImage) {
            $(modal).find('.owl-item a').each(function(index) {
                if(index == indexSelectedImage) {
                    $(modal).find('.owl-item a').removeClass('active');
                    $(this).addClass('active');
                }
            });
        }
	},

	controlActive: function(){
		$( ".firstCol .owl-item" ).click(function() {
			$(".secCol .owl-item a").each(function() {
			  $(this).removeClass("active");
			});
		});
		
		$( ".secCol .owl-item" ).click(function() {
			$(".firstCol .owl-item a").each(function() {
			  $(this).removeClass("active");
			});
		});
	}
};ACC.langcurrency = {

	_autoload: [
		"bindLangCurrencySelector"
	],

	bindLangCurrencySelector: function (){

		$('#lang-selector').change(function(){
			$('#lang-form').submit();
		});

		$('#currency-selector').change(function(){
			$('#currency-form').submit();
		});
	}
};ACC.minicart = {
	_autoload:[
		"bindMiniCart"
	],

	$layer:$('.mini-cart-container'),

	bindMiniCart: function (){
		
		//$(document).on('mouseenter', '.no-food-cart', this.showMiniCart);
		//$(document).on('mouseleave', '.mini-cart-container', this.hideMiniCart);
		
	},

	refreshAllMiniCart: function()
	{
		ACC.minicart.getMiniCartData();
		ACC.minicart.showMiniCart();
	},
	
	showMiniCart: function (){

		$('.border-mask').show();
		$('.overlay').fadeOut('fast');
		ACC.navigation.hideSubMenu();
		
		if(ACC.minicart.$layer.data("hover"))
		{
			return;
		}
		
		if(ACC.minicart.$layer.data("needRefresh") != false){
			ACC.minicart.getMiniCartData(function(){
				ACC.minicart.$layer.fadeIn(function(){
					ACC.minicart.$layer.data("hover", true);
					ACC.minicart.$layer.data("needRefresh", false);
				});
			})
		}
		
		ACC.minicart.$layer.fadeIn(function(){

			ACC.minicart.$layer.data("hover", true);
			$('.vertical-border.right').addClass('expand');
			$('[class*="dropdown-submenu-"]').fadeOut('fast');
		});
	},
	
	hideMiniCart: function ()
	{
		$('.border-mask').hide();

		ACC.minicart.$layer.fadeOut(function(){
			ACC.minicart.$layer.data("hover", false);
			$('.vertical-border.right').removeClass('expand');
		});
	},
	
	getMiniCartData : function(callback)
	{
		console.log('miniCartUrl', ACC.minicart.$layer.attr("data-rolloverPopupUrl"));
		$.ajax({
			url: ACC.minicart.$layer.attr("data-rolloverPopupUrl"),
			cache: false,
			type: 'GET',
			success: function (result)
			{
				ACC.minicart.$layer.html(result);
				callback();
			}
		});	
	},

	refreshMiniCartCount : function(openSuccessModal)
	{
		return $.ajax({
			dataType: "json",
			url: ACC.minicart.$layer.attr("data-refreshMiniCartUrl") + Math.floor(Math.random() * 101) * (new Date().getTime()),
			success: function (data)
			{
				openSuccessModal ? ACC.product.addToCartModalHandler(data) : '';
				$(".miniCart .count").html(data.miniCartCount);
				$(".miniCart .price").html(data.miniCartPrice);
				ACC.minicart.$layer.data("needRefresh", true);
			}
		}).fail(function(){
			$('.errorModal').modal('show');
		});
	}
};
ACC.navigation = {

	_autoload : [ "subMenuDisplayToggle", "hideSubMenu",
			"asideSubMenuNavigation", "hamburguerMenu" ],

	subMenuDisplayToggle : function() {
		var that = this;		
		// add class first submenu
		$('.sub-navigation .aside-sub-navigation ul li:eq(0)').addClass('focused');
		
		var delay= 200, setTimeoutConst;
		$('ul.nav.nav-pills > li.auto > a').not('.link-mobile-toggle').hover(function() {
			thisHover = this;
			function hoverMenu () {
				$('.dropdown-answer .crficon-caret-down, .login .crficon-caret-down').removeClass('crficon-caret-up');
				$('.answer ul, .login ul').hide();
				$('.focused').click();
				$('.overlay').addClass('over-menu').show();
				$(thisHover).parents('li.auto').addClass('hover-menu-worlds');
				$(thisHover).find('.icon').css("fill","#1e56c9");
			}
			
			setTimeoutConst = setTimeout(function(){hoverMenu()}, delay);
			
		}, function () {
			clearTimeout(setTimeoutConst);
			$('.overlay').removeClass('over-menu').hide();
			$(this).parent().find('.sub-navigation').hide();
			$('li.auto').removeClass('hover-menu-worlds');
			$(thisHover).find('.icon').css("fill","#fff");
		});
		
		$('ul.nav.nav-pills').hover(function () {
			function borderPink () {
				$('li.auto').addClass('hover-border-pink');
			}
			//Delay border pink
			setTimeoutBorderPink = setTimeout(function(){borderPink()}, delay);
		}, function () {
			//Clean delay
			clearTimeout(setTimeoutBorderPink);
			$('li.auto').removeClass('hover-border-pink');
		});
		
		$('.sub-navigation').hover(function () {
			$(this).parent('li.auto').addClass('hover-menu-worlds');
			$(this).parent('li.auto').find('a:first').addClass('linkHover');
			$('.overlay').addClass('over-menu').show();	
			$(thisHover).find('.icon').css("fill","#1e56c9");
		}, function () {
			$('li.auto').removeClass('hover-menu-worlds');
			$(this).parent('li.auto').find('a:first').removeClass('linkHover');
			$('.sub-navigation').parent('li.auto').removeClass('hover-border-pink');
			$('.overlay').removeClass('over-menu').hide();	
			$(thisHover).find('.icon').css("fill","#fff");
		});
		
		$('.toogle-menu-desk li.auto').each(function (i) {
		    i = i+1;
		    $(this).attr('data-index', + i);
		});		
		$('.toogle-sub-mobile li.auto').each(function (i) {
		    i = i+1;
		    $(this).attr('data-index', + i);
	   });
		
		$('.sub-menu-mobile-nav').click(function() {
			$(this).find('.crficon-plus').toggleClass('glyphicon-minus');
		});
		
		$('.toogle-sub-mobile .link-mobile-toggle').click(function () {
			//transition menu mobile, left to right
			$(this).parents('ul.nav.nav-pills').toggle('slide', { direction: 'left' }, 150);
			$('.toogle-menu-desk ul.nav.nav-pills').toggle('slide', { direction: 'right' }, 145).addClass('scroll-menu-fade');
			//inclusion of data-index equal in menu
			var captData= $(this).parent().attr('data-index');
			$('.toogle-menu-desk li[data-index]').hide();
			var liSelectedSubMenu = '.toogle-menu-desk li[data-index='+captData+']';			
			$(liSelectedSubMenu).show().find('.sub-navigation').show('slide', { direction: 'right' }, 145);
		});
		
		$('.toogle-menu-desk li.auto a.link-mobile-toggle').click(function() {
			if($('.link-mobile-toggle').is(':visible')) {
				$(this).parents('ul.nav.nav-pills').toggle('slide', { direction: 'right' }, 150).removeClass('scroll-menu-fade');
				$('.toogle-sub-mobile ul.nav.nav-pills').toggle('slide', { direction: 'left' }, 145);
			}			
		});
		
	},

	hideSubMenu : function(hideOverlay) {
		$('.sub-navigation').fadeOut('fast').parent().find('.opened')
				.removeClass('opened');

		if (hideOverlay)
			$('.overlay').fadeOut('fast');

		$('.overlay').click(function() {
				$('.sub-navigation').fadeOut('fast').parent().find('.opened').removeClass('opened');
					$('.overlay').fadeOut('fast');
				});

		$('.sub-navigation-opened').removeClass('sub-navigation-opened');
	},

	asideSubMenuNavigation : function() {
		$('.aside-sub-navigation li').click(function(event) {
			$('.aside-sub-navigation li').removeClass('focused');
			$(this).addClass('focused');
			var focusedTemplate = $(this).data('targetTemplate');
			$('.sub-template').hide();
			$('#' + focusedTemplate).fadeIn('fast');
		});
	},

	hamburguerMenu : function() {
		$('.mobile-nav').click(function() {
			$(this).find('[class*="crficon-"]').toggleClass('crficon-times crficon-hamburguer');
			$(this).toggleClass('expand');
			$('.toogle-sub-mobile .nav-pills').fadeToggle(100);
			if($('.scroll-menu-fade').is(':visible')){
				$('ul.nav.nav-pills').hide();
			}
		});
	}
};

// hide label spot sub menu
$('.sub-navigation-gallery .brand .name').each(function() {
	if ($(this).text() == "") {
		$(this).hide();
	}
});

$('ul.nav-pills li:last + .crficon-caret-down').hide();

//function back to top
function clickSetaTop () {
	$('.setaTop').click(function () {
		$('html,body').animate({scrollTop: $('html,body').offset().top}, 800);
	});
}

$(window).scroll(function () {
	var valueWindow = $(window).scrollTop();
	if (valueWindow >= 736) {
		$('.setaTop').remove();
		$('.category-result-list').before('<span class="setaTop"><svg xlink:href="icones_font.svg#play" viewBox="225 72 40 40" class="icon play"><path class="st0" d="M244.5,77.4c-8.1,0-14.6,6.6-14.6,14.6c0,8.1,6.6,14.6,14.6,14.6s14.6-6.6,14.6-14.6C259.2,83.9,252.6,77.4,244.5,77.4z M248.2,92.3l-6.6,8.2c-0.1,0.1-0.2,0.2-0.4,0.2c-0.1,0-0.2,0-0.3-0.1c-0.2-0.2-0.2-0.5-0.1-0.7l6.3-7.9l-6.3-7.9c-0.2-0.2-0.1-0.5,0.1-0.7c0.2-0.2,0.5-0.1,0.7,0.1l6.6,8.2C248.3,91.9,248.3,92.2,248.2,92.3z"/></svg></span>');
		clickSetaTop();
	} else {
		$('.setaTop').remove();
	}	
});















ACC.order = {

	_autoload: [
	    "backToOrderHistory",
	    "backToOrders"
	],

	backToOrderHistory: function(){
		
		/*var clipboard = new Clipboard('.btn-copy-bank-slip-code');
		
		$(".orderBackBtn").on("click", function(){
			var sUrl = $(this).data("backToOrders");
			window.location = sUrl;
		});*/
	},
	backToOrders: function(){
		$(".orderTopBackBtn").on("click", function(){
			var sUrl = $(this).data("backToOrders");
			window.location = sUrl;
		});
	}
};ACC.paginationsort = {

	_autoload: [
		"seeMoreProductsTrigger",
		["markDownListViewBtn", $('.view-switch').length > 0],
		"submitSortForm"
	],
	seeMoreProductsTrigger: function ()
	{
		$('.bt-more-products a').click(function(e){
			e.preventDefault();
			$.get(this.href, function(data){
				var nextProducts = $("ul.product-listing.product-list", data).children('li');
				$("ul.product-listing.product-list").append(nextProducts);
				$(".section-more-products").html($(".section-more-products", data));
				$('[data-toggle="popover"]').popover();
				 ACC.ratingstars.bindRatingStars();
				 ACC.ratingstars.bindRatingStarsSet();
			});
		});
	},
	markDownListViewBtn: function(){
		

	},
	submitSortForm: function(){
		var targets = $('#sort-navigation-form select[name="sort"], #sort-navigation-form input[name="isGrid"]');
		targets.change(function(){
			$('#sort-navigation-form').submit();
		});
	},
	
	setSearchPageMode: function() {
		var actionMode = "sort";
			$.ajax({
            url: "setSearchPageMode",
            method: "GET",
            data: {
            	mode: actionMode,
            },
            beforeSend: function(){
            	console.log('mode:', actionMode);
            }
        })
		}
};
ACC.paymentDetails = {
	_autoload: [
		"showRemovePaymentDetailsConfirmation"
	],
	
	showRemovePaymentDetailsConfirmation: function ()
	{
		$(document).on("click", ".removePaymentDetailsButton", function ()
		{
			var paymentId = $(this).data("paymentId");
			var popupTitle = $(this).data("popupTitle");

			ACC.colorbox.open(popupTitle,{
				inline: true,
				transition: "elastic",
				href: "#popup_confirm_payment_removal_" + paymentId,
				onComplete: function ()
				{
					$(this).colorbox.resize();
				}
			});

		})
	}
};ACC.functionCookie = {
	_autoload: [],
	
	setCookie: function (name, value) {
	    var cookiesDomain = ["statusCepConsultation", "cepConsultation", "selectedWarehouses", "selectedPointOfServices"];
		var data = new Date();
		data = new Date(data.getTime() + 1000 * 60 * 60 * 24 * 365);

        var domain = window.location.hostname;

        if(cookiesDomain.includes(name)) {
            domain = domain.replace("www.", "");

            document.cookie = name + '=; expires=Thu, 01 Jan 1970 00:00:01 GMT;';
        }

        var um = document.cookie = name + '=' + value + ';path=/' + ';expires='+ data.toGMTString() + ';domain=' + domain;
	},
	
	getCookie: function (name) {
	    for (i in j = document.cookie.split(';')) {
            if (j[i].indexOf(name + '=') > -1) {
            	return j[i].substr(j[i].indexOf('=') + 1, this.length);
            }
	    }
	},
	
	deleteCookie: function (name) {
		document.cookie = name + '=; expires=Thu, 01 Jan 1970 00:00:01 GMT;';
	},
	
	setLocalStorage: function (name, value) {
		localStorage.setItem(name, value);
	},
	
	getLocalStorage: function (name) {
		return localStorage.getItem(name);
	}
}
	ACC.pickupinstore = {

	_autoload: [
		"bindClickPickupInStoreButton",
		"bindPickupButton",
		"bindPickupClose",
		"bindPickupInStoreSearch"
	],

	storeId:"",

	unbindPickupPaginationResults:function ()
	{
		$(document).off("click","#colorbox .js-pickup-store-pager-prev")
		$(document).off("click","#colorbox .js-pickup-store-pager-next")
	},

	bindPickupPaginationResults:function ()
	{
		var listHeight=  $("#colorbox .js-pickup-store-list").height();
		var $listitems= $("#colorbox .js-pickup-store-list > li");
		var listItemHeight = $listitems.height();
		var displayCount = 5;
		var totalCount= $listitems.length;
		var curPos=0
		var pageEndPos = (((totalCount/displayCount)-1) * (displayCount*listItemHeight)) * -1;


		$("#colorbox .js-pickup-store-pager-item-all").html(totalCount);

		$("#colorbox .store-navigation-pager").show();



		checkPosition()

		$(document).on("click","#colorbox .js-pickup-store-pager-prev",function(e){
			e.preventDefault();
			$listitems.css("transform","translateY("+(curPos+listHeight)+"px)")
			curPos = curPos+listHeight;
			checkPosition("prev");
		})

		$(document).on("click","#colorbox .js-pickup-store-pager-next",function(e){
			e.preventDefault();
			$listitems.css("transform","translateY("+(curPos-listHeight)+"px)")
			curPos = curPos-listHeight;
			checkPosition("next");
		})

		function checkPosition(){

			var curPage = Math.ceil((curPos/(displayCount*listItemHeight))*-1)+1;
			$("#colorbox .js-pickup-store-pager-item-from").html(curPage*displayCount-4);

			var tocount = (curPage*displayCount > totalCount)? totalCount :curPage*displayCount;

			if(curPage*displayCount-4 == 1){
				$("#colorbox .js-pickup-store-pager-prev").hide()
			}else{
				$("#colorbox .js-pickup-store-pager-prev").show()
			}

			if(curPage*displayCount > totalCount){
				$("#colorbox .js-pickup-store-pager-next").hide()
			}else{
				$("#colorbox .js-pickup-store-pager-next").show()
			}


			$("#colorbox .js-pickup-store-pager-item-to").html(tocount);
		}
	},



	bindPickupInStoreQuantity:function(){
		$('.pdpPickupQtyPlus').click(function(e){
			e.preventDefault();

			var inputQty = $('.js-add-pickup-cart #pdpPickupAddtoCartInput');
			var currentVal = parseInt(inputQty.val());
			var maxVal = inputQty.data('max');

			if (!isNaN(currentVal) && currentVal < maxVal) {
				inputQty.val(currentVal + 1);
				inputQty.change();
			}
		});

		$('.pdpPickupQtyMinus').click(function(e){
			e.preventDefault();
			var inputQty = $('.js-add-pickup-cart #pdpPickupAddtoCartInput');
			var currentVal = parseInt(inputQty.val());
			var minVal = inputQty.data('min');

			if (!isNaN(currentVal) && currentVal > minVal) {
				inputQty.val(currentVal - 1);
				inputQty.change();
			}
		});

		$("body").on("keyup", ".js-add-pickup-cart #pdpPickupAddtoCartInput", function(event) {
			var input = $(event.target);
			input.val(this.value.match(/[0-9]*/));
			var value = input.val();
		});
	},

	bindPickupInStoreSearch: function ()
	{
		$(document).on('click', '#pickupstore_location_search_button', function (e)
		{
			ACC.pickupinstore.locationSearchSubmit($('#locationForSearch').val(), $('#atCartPage').val(), $('#entryNumber').val(), $(this).parents('form').attr('action'));
			return false;
		});

		$(document).on('keypress', '#locationForSearch', function (e)
		{
			if (e.keyCode === 13)
			{
				e.preventDefault();
				ACC.pickupinstore.locationSearchSubmit($('#locationForSearch').val(), $('#atCartPage').val(), $('input.entryNumber').val(), $(this).parents('form').attr('action'));
				return false;
			}
		});
	},

	bindPickupHereInStoreButtonClick: function ()
	{
		$(document).on('click','.pickup_add_to_bag_instore_button', function (e){
			$(this).prev('.hiddenPickupQty').val($('#pickupQty').val());
		});

		$(document).on('click','.pickup_here_instore_button', function (e){
			$(this).prev('.hiddenPickupQty').val($('#pickupQty').val());
			ACC.colorbox.close();
		});
	},

	locationSearchSubmit: function (location, cartPage, entryNumber, productCode, latitude, longitude)
	{
		$("#colorbox .js-add-to-cart-for-pickup-popup, #colorbox .js-qty-selector-minus, #colorbox .js-qty-selector-input, #colorbox .js-qty-selector-plus").attr("disabled","disabled");

		$.ajax({
			url: productCode,
			data: {locationQuery: location, cartPage: cartPage, entryNumber: entryNumber, latitude: latitude, longitude: longitude},
			type: "post",
			success: function (response)
			{
				ACC.pickupinstore.refreshPickupInStoreColumn(response);
			}
		});
	},

	createListItemHtml: function (data,id){

		var item="";
		item+='<li class="pickup-store-list-entry">';
		item+='<input type="radio" name="storeNamePost" value="'+data.displayName+'" id="pickup-entry-'+id+'" class="js-pickup-store-input" data-id="'+id+'">';
		item+='<label for="pickup-entry-'+id+'" class="js-select-store-label">';
		item+='<span class="pickup-store-info">';
		item+='<span class="pickup-store-list-entry-name">'+data.displayName+'</span>';
		item+='<span class="pickup-store-list-entry-address">'+data.line1+' '+data.line2+'</span>';
		item+='<span class="pickup-store-list-entry-city">'+data.town+'</span>';
		item+='</span>';
		item+='<span class="store-availability">';
		item+='<span class="available">'+data.formattedDistance+'<br>'+data.stockPickup+'</span>';
		item+='</span>';
		item+='</label>';
		item+='</li>';

		return item;
	},

	refreshPickupInStoreColumn: function (data){
		data = $.parseJSON(data);
		var listitems = "";

		$("#colorbox .js-pickup-component").data("data",data);

		for(i = 0;i < data["data"].length;i++){
			listitems += ACC.pickupinstore.createListItemHtml(data["data"][i],i)
		}

		$('#colorbox .js-pickup-store-list').html(listitems);
		ACC.pickupinstore.unbindPickupPaginationResults()
		ACC.pickupinstore.bindPickupPaginationResults()

		// select the first store
		var firstInput= $("#colorbox .js-pickup-store-input")[0];
		$(firstInput).click();


		$("#colorbox .js-add-to-cart-for-pickup-popup, #colorbox .js-qty-selector-minus, #colorbox .js-qty-selector-input, #colorbox .js-qty-selector-plus").removeAttr("disabled");


	},

	bindClickPickupInStoreButton :function()
	{


		$(document).on("click",".js-pickup-in-store-button",function(e){
			e.preventDefault();
			var ele = $(this);
			var productId = "pickupModal_" + $(this).attr('id');
			var cartItemProductPostfix = '';
			var productIdNUM = $(this).attr('id');
			productIdNUM = productIdNUM.split("_");
			productIdNUM = productIdNUM[1];

			if (productId !== null)
			{
				cartItemProductPostfix = '_' + productId;
			}

			var boxContent =  $("#popup_store_pickup_form > #pickupModal").clone();
			var titleHeader = $('#pickupTitle > .pickup-header').html();


			ACC.colorbox.open(titleHeader,{
				html:boxContent,
				width:"870px",
				onComplete: function(){

					$("#colorbox .js-add-to-cart-for-pickup-popup, #colorbox .js-qty-selector-minus, #colorbox .js-qty-selector-input, #colorbox .js-qty-selector-plus").attr("disabled","disabled");


					boxContent.show();
					ACC.pickupinstore.pickupStorePager();
					var tabs = $("#colorbox .js-pickup-tabs").accessibleTabs({
						tabhead:'.tabhead',
						tabbody: '.tabbody',
						fx:'show',
						fxspeed: 0,
						currentClass: 'active',
						autoAnchor:true,
						cssClassAvailable:true
					});

					$("#colorbox #pickupModal *").each(function ()
					{
						if($(this).attr("data-id")!= undefined)
						{
							$(this).attr("id", $(this).attr("data-id"));
							$(this).removeAttr("data-id");
						}
					});

					$("#colorbox input#locationForSearch").focus();

					// set a unique id
					$("#colorbox #pickupModal").attr("id", productId);

					// insert the product image
					$("#colorbox #" + productId + " .thumb").html(ele.data("img"));

					// insert the product cart details
					$("#colorbox #" + productId + " .js-pickup-product-price").html(ele.data("productcart"));


					var variants=ele.data("productcartVariants");
					var variantsOut="";

					$.each(variants,function(key,value){
						console.log(value)

						variantsOut += "<span>"+value+"</span>";

					})

					$("#colorbox #" + productId + " .js-pickup-product-variants").html(variantsOut);


					// insert the product name
					$("#colorbox  #" + productId + " .js-pickup-product-info").html(ele.data("productname"))

					// insert the form action
					$("#colorbox #" + productId + " form.searchPOSForm").attr("action", ele.data("actionurl"));

					// set a unique id for the form
					$("#colorbox #" + productId + " form.searchPOSForm").attr("id", "pickup_in_store_search_form_product_" + productIdNUM);

					// set the quantity, if the quantity is undefined set the quantity to the data-value defined in the jsp
					$("#colorbox #" + productId + " #pdpPickupAddtoCartInput").attr("value", ($('#pdpPickupAddtoCartInput').val() !== undefined ? $('#pdpPickupAddtoCartInput').val() : ele.data("value")));
					// set the entry Number
					$("#colorbox #" + productId + " input#entryNumber").attr("value", ele.data("entrynumber"));
					// set the cartPage bolean
					$("#colorbox #" + productId + " input#atCartPage").attr("value", ele.data("cartpage"));

					
					if(navigator.geolocation){
						navigator.geolocation.getCurrentPosition(
							function (position){
								ACC.pickupinstore.locationSearchSubmit('', $('#atCartPage').val(),  ele.data("entrynumber"), ele.data("actionurl"),position.coords.latitude, position.coords.longitude);
							},
							function (error){
									console.log("An error occurred... The error code and message are: " + error.code + "/" + error.message);
							}
						);
					}
					
					ACC.product.bindToAddToCartStorePickUpForm();

					
				}

			});

		})
	},

	pickupStorePager:function()
	{
		$(document).on("change","#colorbox .js-pickup-store-input",function(e){
			e.preventDefault();


			$("#colorbox .js-pickup-tabs li.first a").click();

			var storeData=$("#colorbox .js-pickup-component").data("data");
			storeData=storeData["data"];

			var storeId=$(this).data("id");

			var $ele = $("#colorbox .display-details");


			$.each(storeData[storeId],function(key,value){
				if(key=="url"){
					if(value!=""){
						$ele.find(".js-store-image").html('<img src="'+value+'" alt="" />');
					}else{
						$ele.find(".js-store-image").html('');
					}
				}else if(key=="productcode"){
					$ele.find(".js-store-productcode").val(value);
				}
				else if(key=="openings"){
					if(value!=""){
						var $oele = $ele.find(".js-store-"+key);
						var openings = "";
						$.each(value,function(key2,value2){
							openings += "<dt>"+key2+"</dt>";
							openings += "<dd>"+value2+"</dd>";
						});

						$oele.html(openings);

					}else{
						$ele.find(".js-store-"+key).html('');
					}

				}
				else if(key=="specialOpenings"){}
				else{
					if(value!=""){
						$ele.find(".js-store-"+key).html(value);
					}else{
						$ele.find(".js-store-"+key).html('');
					}
				}

			})





			$(document).one("click", "#colorbox .js-pickup-map-tab",function(){
				ACC.pickupinstore.storeId = storeData[storeId];
				var isAsmUser = ACC.config.isAsmUser;
                if (isAsmUser == "false" || isAsmUser == false || isAsmUser == null) {
				    ACC.global.addGoogleMapsApi("ACC.pickupinstore.drawMap");
				}
			})

			
			

			var e=$("#colorbox .pickup-store-list-entry input:checked");


			$("#add_to_cart_storepickup_form .js-store-id").attr("id",e.attr("id"))
			$("#add_to_cart_storepickup_form .js-store-id").attr("name",e.attr("name"))
			$("#add_to_cart_storepickup_form .js-store-id").val(e.val())

			if(storeData[storeId]["stockLevel"] > 0 || storeData[storeId]["stockLevel"] == "")
			{
				var input = $("#add_to_cart_storepickup_form .js-qty-selector-input");
				input.data("max",storeData[storeId]["stockLevel"]); 
				ACC.productDetail.checkQtySelector(input, "reset");
				$("#add_to_cart_storepickup_form").show()
				
			} else{
				$("#add_to_cart_storepickup_form").hide()
			}


		})

		$(document).on("click",".js-select-store-label",function(e){
			$("#colorbox .js-pickup-component").addClass("show-store")
			$("#colorbox #cboxTitle .headline-inner").hide()
			$("#colorbox #cboxTitle .back-to-storelist").show()
		})

		$(document).on("click",".js-back-to-storelist",function(e){
			$("#colorbox .js-pickup-component").removeClass("show-store")
			$("#colorbox #cboxTitle .headline-inner").show()
			$("#colorbox #cboxTitle .back-to-storelist").hide()
		})

	},


	bindPickupButton : function(){
		$(document).on("click",".js-pickup-button",function(e){
			e.preventDefault();
			$e = $(this).parent().nextAll(".js-inline-layer")
			$e.addClass("open")

			//$e.height($e.height())
			var h= $e.height()
			$e.removeClass("open")

			$e.animate({
				height: h
			})
		})
	},


	bindPickupClose : function(){
		$(document).on("click",".js-close-inline-layer",function(e){
			e.preventDefault();
			$e = $(this).parents(".js-inline-layer")

			$e.animate({
				height: 0
			})
		})
	},
	
	checkIfPointOfServiceIsEmpty: function (cartEntryDeliveryModeForm)
	{
		return (!cartEntryDeliveryModeForm.find('.pointOfServiceName').text().trim().length);
	},
	
	validatePickupinStoreCartEntires: function ()
	{
		var validationErrors = false;
		$("form.cartEntryShippingModeForm").each(function ()
		{
			var formid = "#" + $(this).attr('id');
			if ($(formid + ' input[value=pickUp][checked]').length && ACC.pickupinstore.checkIfPointOfServiceIsEmpty($(this)))
			{
				$(this).addClass("shipError");
				validationErrors = true;
			}
		});

		if (validationErrors)
		{
			$('div#noStoreSelected').show().focus();
			$(window).scrollTop(0);
		}
		return validationErrors;
	},

	
	drawMap: function(){

		storeInformation = ACC.pickupinstore.storeId;

		if($("#colorbox .js-map-canvas").length > 0)
		{			


			$("#colorbox .js-map-canvas").attr("id","pickup-map")
			var centerPoint = new google.maps.LatLng(storeInformation["storeLatitude"], storeInformation["storeLongitude"]);
			
			var mapOptions = {
				zoom: 13,
				zoomControl: true,
				panControl: true,
				streetViewControl: false,
				mapTypeId: google.maps.MapTypeId.ROADMAP,
				center: centerPoint
			}
			
			var map = new google.maps.Map(document.getElementById("pickup-map"), mapOptions);
			
			var marker = new google.maps.Marker({
				position: new google.maps.LatLng(storeInformation["storeLatitude"], storeInformation["storeLongitude"]),
				map: map,
				title: storeInformation["name"],
				icon: "https://maps.google.com/mapfiles/marker" + 'A' + ".png"
			});
			var infowindow = new google.maps.InfoWindow({
				content: storeInformation["name"],
				disableAutoPan: true
			});
			google.maps.event.addListener(marker, 'click', function (){
				infowindow.open(map, marker);
			});
		}
		
	}

};
var globalTarget;
var globalRedirection;
var globalCode;
var globalIsVariant;
var globalData;
var globalQty;
var globalSubmit = false;



var globalSubmit = false;
var arrayOfselectbox = [];


ACC.product = {

	_autoload: [
		"bindToAddToCartForm",
		"bindPromotions",
		"controleWishlist",
		"controleCarouselVariantModal",
		"enableStorePickupButton",
		"enableAddToCartButton",
		"enableVariantSelectors",
		"bindFacets",
		"bindComprarButton",
		"bundleAnchorToDetails",
		"addToCartFormByAjax",
		"bundleAnchorToDetails",
		"setProductQuantity",
		"toogleIconDetailsPanel",
		"addProductToWishlistURL",
		"controlShowAndHideAdicionarCartButton",
		"showAddedToCartFromVariantConfirmationModal",
		"hideVariantConfirmationModal",
		"applyVariant",
		"selectOnSelected",
		["bindReviewForm", $("body.page-productDetails").length > 0],
		"infoBox"
	],

	/**
	 * Updates the data layer object, saving inside it the names of the
	 * wish lists were some product was saved. The names will be joined
	 * using '|'.
	 *
	 * @param {object} dataLayer
	 *   Data Layer object.
	 * @param {Array} wishListsNamesArray
	 *   The names of the wish lists were some product was saved.
	 * @see [CACHE-186]
	 */
	addWishListInfoToDataLayer: function(dataLayer, wishListsNamesArray) {

		var list = wishListsNamesArray.map(function(e){
      ACC.product.normalizeString(e);
		});


		dataLayer[0].minhasListasCompras = list.join('|');
		dataLayer[0].quantidadeListas = list.length;
	},

	normalizeString: function(str){

		// Remove diacritics in a string.
		// See: https://stackoverflow.com/questions/990904/remove-accents-diacritics-in-a-string-in-javascript
		var tmp = str.normalize('NFD').replace(/[\u0300-\u036f]/g, "");

		// Strip everything that is not alphanumeric or whitespace:
		tmp = tmp.replace(/[^a-zA-Z0-9 ]/g, '');

		// Turn multiple whitespaces into single whitespaces:
		tmp = tmp.replace(/\s{2,}/g, " ").trim();

		return tmp;
	},

	toogleIconDetailsPanel: function(){
		$('#accordionFichaTecnica .collapse_trigger').click(function(){
			$(this).find('.collapse_icon').toggleClass('crficon-plus crficon-minus');
		});
	},

	bundleAnchorToDetails: function(){
		$('.more-detail-bundle').click(function(e){
			e.preventDefault();

			var targetDetails = $(this).data().targetDetails;
			var anchor = $('.bundle-detail-title');

			$('html, body').animate({
			  scrollTop: anchor.offset()
			  }, 1000);

			$('#bundleDetailTab'+targetDetails).click();
		});
	},

	bindComprarButton: function(){
		$('.comprar-button').click(function (){
			var productCode = $(this).data('productCode');

			var form = $('.addToCartForm'+productCode);

			form.find('input[name="redirection"]').val(true);

			form.ajaxFormUnbind();
			form.submit();
		});
	},

	bindFacets:function(){
		$(document).on("click",".js-show-facets",function(e){
			e.preventDefault();

			ACC.colorbox.open("Select Refinements",{
				href: "#product-facet",
				inline: true,
				width:"320px",
				onComplete: function(){

					$(document).on("click",".js-product-facet .js-facet-name",function(e){
						e.preventDefault();
						$(".js-product-facet  .js-facet").removeClass("active");
						$(this).parents(".js-facet").addClass("active");
						$.colorbox.resize()
					})
				},
				onClosed: function(){
					$(document).off("click",".js-product-facet .js-facet-name");
				}
			});
		});



		enquire.register("screen and (min-width:"+screenSmMax+")",  function() {
			$("#cboxClose").click();
		});


	},

	enableAddToCartButton: function ()
	{

		$('.js-add-to-cart').removeAttr('disabled');
	},

	initVariantOptions: function (){
		$('.js-variants').each(function(){
			$(this).find($('option')).each(function(){
				$(this).removeAttr('disabled','disabled');
			});
		});
	},

	initVariants: function (){
		if($('body').hasClass('page-atendimentoT')){
			// T Page
			$('.js-variants').each(function(){
				var productCode = $(this).data().code;
				// condition on T page for same product selected many times

				var	selectedVoltage = $($('.option-voltage-' + productCode)[0]).text();
				var	selectedColor = $($('.option-color-' + productCode)[0]).text();
				var	selectedSize = $($('.option-size-' + productCode)[0]).text();


				$(this).find($('option')).each(function(){
					if($(this).val() == selectedVoltage || $(this).val() == selectedColor || $(this).val() == selectedSize)
					{
						if($($('select[id="variant"] option[data-voltage="'+selectedVoltage+'"]')[0]).data().stockstatus != 'outOfStock' && selectedVoltage.length > 0)
							$(this).attr('selected', 'selected');
						if($($('select[id="variant"] option[data-color="'+selectedColor+'"]')[0]).data().stockstatus != 'outOfStock' && selectedColor.length > 0)
							$(this).attr('selected', 'selected');
						if($($('select[id="variant"] option[data-size="'+selectedSize+'"]')[0]).data().stockstatus != 'outOfStock' && selectedSize.length > 0)
							$(this).attr('selected', 'selected');
					}
				});

			});
		}
		else
		{
			//Product Detail Page
			$('.js-variants').each(function(){
				var productCode = $(this).data().code;
				var selectedVoltage = $('.option-voltage-' + productCode).text();
				var selectedColor = $('.option-color-' + productCode).text();
				var selectedSize = $('.option-size-' + productCode).text();

				if($('body').hasClass('pageType-CategoryPage') || $('body').hasClass('pageType-CategoryPage') || $('body').hasClass('template-pages-product-productLayout2Page') || $('body').hasClass('page-productDetails') && selected === "true")
				{
					$(this).find($('option')).each(function(){
						if($(this).val() == selectedVoltage || $(this).val() == selectedColor || $(this).val() == selectedSize)
						{
							$(this).attr('selected', 'selected');
						}
					});

					$('.js-variants').each(function(){
						$(this).prepend($(this).find($('select option[selected]')));
					});
				}
				else
				{
					$(this).find($('option')).each(function(){
						 if($(this).text() == 'SELECIONE')
						 {
							 $(this).attr('selected', 'selected');
						 }
					});

					$("#addToCartButton").prop('disabled', true);
					$("#buyProductButton").prop('disabled', true);

					ACC.product.variantSelected();
				}
			});
		}
	},

	validateVariant: function(productCode, list, cl)
	{
		$(".js-variant-not-selected").addClass('hidden');

		$(".variant-block").each(function (){
			$(this).removeClass('has-error');
		});

		$('select[data-code="' + productCode + '"][class*="' + cl +'"] option').each(function (){
			var contains = 0;
			var value = $(this).text();

			for (var i = 0; i <list.length; i++)
			{
				if(list[i] == value || value == "" || value == "SELECIONE")
				{
					contains = 1;
				}
			}

			if(contains == 0)
			{
				$(this).attr("disabled","disabled");

				var selectedOption = $('select[data-code="' + productCode + '"][class*="' + cl + '"] option:selected:disabled');

				if (selectedOption.text() == value)
				{
					$('select[data-code="' + productCode + '"][class*="' + cl + '"]')[0].selectedIndex = 0;

					$("#addToCartButton").prop('disabled', true);
					$("#buyProductButton").prop('disabled', true);

					ACC.product.variantSelected();
				}
			}
		});

		//$('select[data-code="' + productCode + '"][class*="' + cl +'"]').selectpicker('refresh');
	},

	variantSelected: function()
	{
		$(".addtocart-component").on("click", function() {
					$(".js-variant-not-selected").removeClass('hidden');
					$(".variant-block").each(function (){
					$(this).addClass('has-error');
				});
		});

		selected = false;
	},

	validateVariantTPage: function(productCode, list, cl, idx)
	{
		$('select[data-code="' + productCode + '"][class*="' + cl +'"] option').each(function (){
			var contains = 0;
			var value = $(this).text();

			for (var i = 0; i <list.length; i++)
			{
				if(idx === this.id){
					if(list[i] == value || value == "")
					{
						contains = 1;
					}
				}
			}

			if(contains == 0)
			{
				if(this.id ===idx){
					$(this).attr("disabled","disabled");
				}
				$('select[data-code="' + productCode + '"][class*="' + cl + '"] option[class*="default"]').each(function (){
					if(this.id === idx){
						$(this).attr('selected', 'selected');
					}

				});
			}
		});
	},

	enableVariantSelectors: function ()
	{

		$('.variant-select').removeAttr("disabled");

		ACC.product.initVariants();

		$(document).on('change', ".js-variants", function (){

			ACC.product.initVariantOptions();

			var productCode = $(this).data().code;
			var variantCode = "";
			var price = parseFloat("0.0");
			var that = this;
			var voltage = typeof $('select[data-code="' + productCode + '"][class*="js-voltages"] option:selected').val() === 'undefined' ? 'undefined' : $('select[data-code="' + productCode + '"][class*="js-voltages"] option:selected').val();
			var color = typeof $('select[data-code="' + productCode + '"][class*="js-colors"] option:selected').val() === 'undefined' ? 'undefined' : $('select[data-code="' + productCode + '"][class*="js-colors"] option:selected').val();
			var size = typeof $('select[data-code="' + productCode + '"][class*="js-sizes"] option:selected').val() === 'undefined' ? 'undefined' : $('select[data-code="' + productCode + '"][class*="js-sizes"] option:selected').val();
			var url = "";
			var urlLandingPage="";
			var selectedIndex = 0;
			var isSelectedVariant = false;

			$('#addToCartButton' + productCode).attr('disabled', 'disabled');
			$('#buyProductButton' + productCode).attr('disabled', 'disabled');

			// Atendimento T Page - separate case
			if($('body').hasClass('page-atendimentoT')){

				 $('select[data-code="' + productCode + '"][class*="js-voltages"] option:selected').each(function () {
					 if(that.id ===this.id){
						 voltage = $(this).val();
					 }
				 });
				 $('select[data-code="' + productCode + '"][class*="js-colors"] option:selected').each(function () {
					 if(that.id ===this.id){
						 color = $(this).val();
					 }
				 });
				if($(that).hasClass("js-sizes")){
					size = $(that).val();
				}
				$('select[data-code="' + productCode + '"][class*="js-sizes"] option:selected').each(function () {
					 if(that.id ===this.id){
						 size = $(this).val();
					 }
				});

				if($(this).hasClass('js-voltages') && voltage != "")
				{
					var colors = [];
					var sizes = [];
					$('select[id="variant"] option[data-voltage="'+voltage+'"]').each(function () {
						if($(this).data().stockstatus != 'outOfStock')
						{
							if(that.id === this.id){
								if($(this).data().color != "")
									colors.push($(this).data().color);

								if($(this).data().size != "")
									sizes.push($(this).data().size);
							}
						}
					});

					$('#variant option').each(function () {
						if(((voltage != "" && $(this).text().indexOf(voltage) > -1 ) || voltage == 'undefined') && ((color != '' && $(this).text().indexOf(color) > -1 ) || color == 'undefined') && ((size != '' && $(this).text().indexOf(size) > -1 ) || size == 'undefined'))
						{
							if(that.id === this.id){
								variantCode = $(this).data().code;
								url = $(this).attr('value');
								price = $(this).data().price;
								$(this).attr('selected', 'selected');
								selectedIndex = $(this).attr("index");
							}
						}
					});
					if(that.id !== undefined){
						if(url === '' || url===undefined){
							ACC.product.validateVariantTPage(productCode, colors, 'js-colors',that.id);
							ACC.product.validateVariantTPage(productCode, sizes, 'js-sizes',that.id);
							}

					}
					else{
						if(url === '' || url===undefined){
							ACC.product.validateVariant(productCode, colors, 'js-colors');
							ACC.product.validateVariant(productCode, sizes, 'js-sizes');
							}

					}
				}

				if($(this).hasClass('js-colors') && color != "")
				{
					var sizes = [];
					var voltages = [];
					$('select[id="variant"] option[data-color="'+color+'"]').each(function () {
						if($(this).data().stockstatus != 'outOfStock')
						{
							if(that.id === this.id){
								if($(this).data().size != "")
									sizes.push($(this).data().size);

								if($(this).data().voltage != "")
									voltages.push($(this).data().voltage);
							}
						}
					});
					$('#variant option').each(function () {
						if(((voltage != "" && $(this).text().indexOf(voltage) > -1 ) || voltage == 'undefined') && ((color != '' && $(this).text().indexOf(color) > -1 ) || color == 'undefined') && ((size != '' && $(this).text().indexOf(size) > -1 ) || size == 'undefined'))
						{
							if(that.id === this.id){
								variantCode = $(this).data().code;
								url = $(this).attr('value');
								selectedIndex = $(this).attr("index");
								price = $(this).data().price;
								$(this).attr('selected', 'selected');
						}
						}
					});
					if(that.id !== undefined){
						if(url === '' || url===undefined){
							ACC.product.validateVariantTPage(productCode, voltages, 'js-voltages',that.id);
							ACC.product.validateVariantTPage(productCode, sizes, 'js-sizes',that.id);
							}

					}
					else{
						if(url === '' || url===undefined){
							ACC.product.validateVariant(productCode, voltages, 'js-voltages');
							ACC.product.validateVariant(productCode, sizes, 'js-sizes');
							}
					}
				}

				if($(this).hasClass('js-sizes') && size != "")
				{
					var colors = [];
					var voltages = [];
					$('select[id="variant"] option[data-size="'+size+'"]').each(function () {
						if($(this).data().stockstatus != 'outOfStock')
						{
							if(that.id === this.id){
								if($(this).data().size != "")
									colors.push($(this).data().color);

								if($(this).data().voltage != "")
									voltages.push($(this).data().voltage);
							}
						}
					});
					$('#variant option').each(function () {
						if(((voltage != "" && $(this).text().indexOf(voltage) > -1 ) || voltage == 'undefined') && ((color != '' && $(this).text().indexOf(color) > -1 ) || color == 'undefined') && ((size != '' && $(this).text().indexOf(size) > -1 ) || size == 'undefined'))
						{
							if(that.id === this.id){
								variantCode = $(this).data().code;
								url = $(this).attr('value');
								selectedIndex = $(this).attr("index");
								price = $(this).data().price;
								$(this).attr('selected', 'selected');
						}
						}
					});
					if(that.id !== undefined){
						if(url === '' || url===undefined){
							ACC.product.validateVariantTPage(productCode, voltages, 'js-voltages',that.id);
							ACC.product.validateVariantTPage(productCode, colors, 'js-colors',that.id);
							}

					}
					else{
						if(url === '' || url===undefined){
							ACC.product.validateVariant(productCode, voltages, 'js-voltages');
							ACC.product.validateVariant(productCode, colors, 'js-colors');
							}
					}
				}
				if (selectedIndex != 0) {
					var tBalance = parseFloat($('#tBalance').val());
					var group = "input:checkbox[id='productList_" + this.id+ "']";
					$(group).prop("checked", true);
					$(group).val(url);
					$($(".item-info .price .text-color")[this.id]).text(accounting.formatMoney(price, "R$ ", 2, ".", ","));
				}

			}
			//Product Detail Page -- usual
			else{
				if($(this).hasClass('js-voltages') && voltage != "")
				{
					ACC.product.checkSelectOption(voltage);

					var colors = [];
					var sizes = [];
					$('select[id="variant"] option[data-voltage="'+voltage+'"]').each(function () {
						if($(this).data().stockstatus != 'outOfStock')
						{
							if($(this).data().color != "")
								colors.push($(this).data().color);

							if($(this).data().size != "")
								sizes.push($(this).data().size);
						}
					});

					ACC.product.validateVariant(productCode, colors, 'js-colors');
					ACC.product.validateVariant(productCode, sizes, 'js-sizes');
				}

				if($(this).hasClass('js-colors') && color != "")
				{
					ACC.product.checkSelectOption(color);

					var sizes = [];
					var voltages = [];
					$('select[id="variant"] option[data-color="'+color+'"]').each(function () {
						if($(this).data().stockstatus != 'outOfStock')
						{
							if($(this).data().size != "")
								sizes.push($(this).data().size);

							if($(this).data().voltage != "")
								voltages.push($(this).data().voltage);
						}
					});

					ACC.product.validateVariant(productCode, voltages, 'js-voltages');
					ACC.product.validateVariant(productCode, sizes, 'js-sizes');
				}

				if($(this).hasClass('js-sizes') && size != "")
				{
					ACC.product.checkSelectOption(size);

					var colors = [];
					var voltages = [];
					$('select[id="variant"] option[data-size="'+size+'"]').each(function () {
						if($(this).data().stockstatus != 'outOfStock')
						{
							if($(this).data().size != "")
								colors.push($(this).data().color);

							if($(this).data().voltage != "")
								voltages.push($(this).data().voltage);
						}
					});

					ACC.product.validateVariant(productCode, voltages, 'js-voltages');
					ACC.product.validateVariant(productCode, colors, 'js-colors');
				}

				$('#variant option').each(function () {
					var dataColor = $(this).data().color;
					var dataColorNoSpace = (typeof dataColor == "string") ? dataColor.trim() : dataColor;
					if(((voltage != "" && $(this).text().indexOf(voltage) > -1 ) || voltage == 'undefined')
							&& ( (color != '' && dataColorNoSpace === color ) || color == 'undefined')
							&& ((size != '' && $(this).text().indexOf(size) > -1 ) || size == 'undefined'))
					{
						variantCode = $(this).data().code;
						if($(this).attr('selected') != undefined){
							isSelectedVariant = true;
						}
						url = $(this).attr('value');
						selectedIndex = $(this).attr("index");
					}
				});
			}

			if($('body').hasClass('page-productList') || $('body').hasClass('page-search') || $('body').hasClass('page-search-grid'))
			{
				if (selectedIndex !== 0 && variantCode !== '')
				{
					$('.addToCartForm' + productCode).find('input[name="productCodePost"]').val(variantCode);
					$('#addToCartButton' + productCode).removeAttr('disabled');
					$('#buyProductButton' + productCode).removeAttr('disabled');

				}
			}
			if($('body').hasClass('page-cartPage'))
			{
				if (variantCode != '')
				{
					var variantOption = $('select[id="variant"] option[data-code="'+ variantCode +'"]');

					if(variantOption.data().stockstatus != 'outOfStock')
					{
						$('.addToCartForm' + productCode).find('input[name="productCodePost"]').val(variantCode);
						var qty = $('form[data-code="' + productCode + '"]').find('input[name="quantity"]').val();
						$('.addToCartForm' + productCode).find('input[name="qty"]').val(qty);
						//$('.addToCartForm' + productCode).submit();
					}
				}
			}
			else
			{
				if (selectedIndex != 0 && !($('body').hasClass('page-atendimentoT') && selectedIndex == undefined))
				{
					if(!isSelectedVariant && $('body').hasClass('pageType-ProductPage')|| $('body').hasClass('page-productDetails') || $('body').hasClass('template-pages-product-productLayout2Page'))
					{
						window.location.href = url + '?selected=true';
					}
					if(!isSelectedVariant && $('body').hasClass('page-productGrid')==true)
					{
						urlLandingPage = window.location.protocol+"//"+window.location.host+window.location.pathname+"?destaque="+variantCode+"&selected=true";
						window.location.href=urlLandingPage;
					}
					else
					{
						$("#addToCartButton").prop('disabled', false);
						$("#buyProductButton").prop('disabled', false);

						bypassSameVar = true;
					}
				}
			}

		});
	},

	checkSelectOption: function(option)
	{
		if (option == "SELECIONE")
		{
			$("#addToCartButton").prop('disabled', true);
			$("#buyProductButton").prop('disabled', true);

			ACC.product.variantSelected();
		}
	},

	bindToAddToCartForm: function ()
	{
		var addToCartForm = $('.add_to_cart_form');
		addToCartForm.ajaxForm({success: function(result){
			console.log(result);

			ACC.product.displayAddToCartPopup(result);

			if (result.quantityNotFulfilled) {
				ACC.productDetail.showAddToCartError();
				return
			}

			ACC.cart.reloadMiniCartQuantity();
			$("#addToCartButton.button-add").addClass("button-add-icon").html("ADICIONADO <i class='crficon-cart-add'/>");
			$("#addedToCartModal").modal('show');
		}});
	},

	submitFormByAjax: function(cepBoolStr) {
		globalSubmit = true;
		$(this).addToCartButtonAction(cepBoolStr);
	},



	addToCartFormByAjax: function ()
	{
		(function( $ ){
		    $.fn.addToCartButtonAction = function(cepBoolStr) {
			    //if product modal is open, close it (search result page grid view behaviour).
			    $('.productModal').hasClass('in') ? $('.productModal').modal('hide') : '';

                var code = $(this).data('productCode');
                var isFood = $(this).data('food');
                var target = $(this);
                var redirection = $(this).parents('form').find('input[name="redirection"]');

                if(globalSubmit) {
                    var target = globalTarget;
                    var redirection = globalRedirection;
                    var code = globalCode;

                }

                //Disabling add button to wait server response
                //target.addClass('disabled');

                //Do not need redirection cuz it's Ajax, baby!
                redirection.val(false);

				var url = '/carrinho/add';
				var validateStockUrl = "/validate-stock";
				var qty;

                $(".addToCartForm" + $(this).data('productCode')).each(function(){
                    qty = $(this).find(".pdpAddtoCartInput").val()
                });
				
                if(globalSubmit) {
                    qty = globalQty;
                }

				if(qty === undefined){
					qty = 1;
				}

				if(qty == 0) {

                    var data = $(this).parents('form').serialize();

                    if(globalSubmit) {
                        data = globalData;
                    }

                    var adicionarValorQty = data.split('qty=');
                    data = adicionarValorQty[0] + 'qty=1' + adicionarValorQty[1];

                }
                else
                {
                    //Getting all data from form and transforming it to pass to server
                    $(this).parents('form').find(".productQty").val(qty);
                    var data = $(this).parents('form').serialize();
                     if(globalSubmit) {
                        data = globalData;
                     }
                }

                $.ajax({
                    url: validateStockUrl,
                    cache: false,
                    type: 'POST',
                    data: data,
                    dataType: "json",
                    async: true,
                }).fail(function(error){
                    console.log(error);

                })
                .success(function(response) {

                if(response.isavailable)
                {
                  $.ajax({
                              url: url,
                              cache: false,
                              type: 'POST',
                              data: data,
                              dataType: "json"
                          }).fail(function(error){

                          console.log(error)


                          })
                          .success(function(response) {

                              $('#grid'+code+'.icon-product-add-cart').removeClass('hidden');
                              $('#list'+code+'.icon-product-add-cart-list').removeClass('hidden');
                              $("button[data-product-code="+code+"]").addClass("added");

                              if (typeof response !== 'undefined')
                              {
                                  var cartAnalyticsData = response.cartAnalyticsData;
                                  var cartData = {"cartCode": cartAnalyticsData.cartCode,
                                      "productCode": code, "quantity": qty,
                                      "productPrice":cartAnalyticsData.productPostPrice,
                                      "productName":cartAnalyticsData.productName} ;
                                  ACC.track.trackAddToCart(code, qty, cartData);
                              }

                                if(!isFood) {
                                    $("#addedToCartModal").modal();
                                }
                          })
                          .always(function(){

                              target.removeClass('disabled');
                              redirection.val(true);
                             ACC.cart.reloadMiniCartQuantity();
                          });

                }

                else

					{
						if ( response.quantityavailable > 0) {
								$(".addToCartForm"+ code).find(".msg-cart-qty-max-search").html("Permitido comprar até " + response.quantityavailable + " itens");
						} else {
							$(".addToCartForm"+ code).find(".msg-cart-qty-max-search").html("Produto indisponível");
							$(".addToCartForm"+ code).find(".msg-cart-qty-max-search").css("height","60px");
						}
					}

                    if(globalSubmit) {
                        if(cepBoolStr == "true"){
                            setTimeout(function() {
                                location.reload();
                            }, 500);
                        }else{
                            $("#addedToCartModal").modal();
                            setTimeout(function() {
                                location.reload();
                            }, 5000);
                        }
                    }
                });
		   };
		})( jQuery );

		$(document).on('click', '.btn-add-cart', function(e) {
			e.preventDefault();
			e.stopPropagation();

			var zipeCodeCookieResult = ACC.functionCookie.getCookie('cepConsultation');
			var code = $(this).data('productCode');
			var stockLevel = $(this).data('stock-level');
			var food = $(this).data('food');
            var isVariant = $(this).data('productVariant');
            var baseCode = $(this).data('productBaseCode');

			if(globalSubmit){
				isVariant = globalIsVariant;
			}

			if(stockLevel > 0) {
			    if (isVariant == true) {
            	    var finalCode = baseCode ? baseCode : code;
            		window.location.href = "/p/" + finalCode;
            	}
			    else if (food == false) {
			        $(this).addToCartButtonAction();
			    }
			}

			if(food == true) {

				if(zipeCodeCookieResult === undefined) {
					globalTarget =  $(this);
					globalRedirection = $(this).parents('form').find('input[name="redirection"]');
					globalCode = $(this).data('productCode');
					globalIsVariant = $(this).data('productVariant');
					globalData = $(this).parents('form').serialize();
					globalQty = $(this).parents('form').find("input[name='qty']").val();
					var $cepModalShow = $('#cepModal').modal('show');

				 } else {
					$(this).addToCartButtonAction();
				}
			}
		});

		 $('body').on('click', function() {

             $('#cepModalError').on('shown.bs.modal', function () {
                $('body').on('click', function(){
                    // Foods cannot be sent to the current CEP. See [CACHE-57]:
                    var param = ACC.global.FoodZipZoneEnum.FALSE;
                    var newUrl = ACC.global.updateFoodZipZoneParameter (window.location.href, param);
                    window.location.href = newUrl; // reload current page
                });
             });

             $('#cepModalOk').on('shown.bs.modal', function () {
                 $('body').on('click', function(){
                    window.location.reload();
                 });
             });




		 });

		//If you need to add some product to cart using Ajax, set '"class="btn-add-cart"' to the element
		//Look for a form example o project to see what inputs values do you need to submit it.
		$(document).on('click', '.btn-add-cart-modal-variant', function(){

			//if product modal is open, close it (search result page grid view behaviour).
			$('.productModal').hasClass('in') ? $('.productModal').modal('hide') : '';

			var target = $(this);
			var redirection = $(this).parents('form').find('input[name="redirection"]');

			var code = $(this).data('productVariantCode');

			//Disabling add button to wait server response
			target.addClass('disabled');

			//Do not need redirection cuz it's Ajax, baby!
			redirection.val(false);

			var url = '/carrinho/add';
			var validateStockUrl = "/validate-stock";

			// Get qty from grid layout
			var gridQtyField = $(this).parents('form').find('input[name="pdpAddtoCartInput"]');
			if(gridQtyField.length > 0){
				$(this).parents('form').find("input[name='qty']").val(gridQtyField.val());
			}

			var qty = $(this).parents('form').find("input[name='qty']").val();

			//Getting all data from form and transforming it to pass to server
			var data = $(this).parents('form').serialize();

			//Simple ajax api
			$.post(url, data)
			.fail(function(error){
				//Guess what this do!
				console.error(error);
				$('.errorModal').modal('show');
				return false;
			})
			.success(function(result) {

				$('#grid'+code+'.icon-product-add-cart').removeClass('hidden');
				$('#list'+code+'.icon-product-add-cart-list').removeClass('hidden');

				if (typeof result !== 'undefined')
				{
					var cartAnalyticsData = result.cartAnalyticsData;
					var cartData = {"cartCode": cartAnalyticsData.cartCode,
						"productCode": code, "quantity": qty,
						"productPrice":cartAnalyticsData.productPostPrice,
						"productName":cartAnalyticsData.productName} ;
					ACC.track.trackAddToCart(code, qty, cartData);
				}
			})
			.always(function(){
				//Enabling add button again
				target.removeClass('disabled');

				//Returning redirection value to default state
				redirection.val(true);

				//Refresing cart counter on minicart
				//temp comment. there is no minicart at this moment
				//var refreshedCounter = ACC.minicart.refreshMiniCartCount(true);
				ACC.cart.reloadMiniCartQuantity();
			});
		});
	},

	controleWishlist : function() {
		$(document).on('click', '.call-wishlist-box, .call-wishlist-button', function(e){
	  var productCode = $(this).attr("product-code");
	  var url = "/minhas-listas/ajax-wishlis/" + productCode;

			$.post(url, function(result) {

				$("#wishlistAddProduct .name p").html(result.name);
				$("#wishlistAddProduct .price p").html(result.price.formattedValue);
				$("#wishlistAddProduct #productCodeToWishlist").val(result.code);
				if (result.images != null) {
					var primaryImage = result.images[0];
					$("#wishlistAddProduct .img-responsive").attr("src", primaryImage.url);
					$("#wishlistAddProduct .img-responsive").attr("alt", primaryImage.altText);
					$("#wishlistAddProduct .img-responsive").attr("title", primaryImage.altText);
				}
				var variantOptions = null;
				if (result.variantOptions) {
					var variantOptions = result.variantOptions[0].variantOptionQualifiers;
				}
				if(variantOptions != null) {
					var html = '<div class="clearfix row"></div>' +
					'<div>' +
						'<label>Escolha as opções abaixo:</label>' +
					'</div>';
					variantOptions.forEach(function(variantObject) {

						if (variantObject.qualifier == 'voltage') {
							html += '<div class="edit-controls col-md-6 pull-left">' +
									'<div class="styled-select">' +
										'<div class="col-md-3 pull-left">Volt.</div>' +
										'<div class="col-md-9">' +
											'<select id="targetWishlist" class="form-control pull-right row">';

							html += '<option data-content="' +
										variantObject.value +'">' +
										variantObject.value +
										"</option>";
							html += '</select>' +
									'</div>' +
									'</div>' +
									'</div>';
						}

						if (variantObject.qualifier == 'color') {
							html += '<div class="edit-controls col-md-6 pull-right">' +
									'<div class="styled-select">' +
										'<div class="col-md-3 pull-left">Cor.</div>' +
										'<div class="col-md-9">' +
											'<select id="targetWishlist" class="form-control pull-right row">';

							html += '<option data-content="' +
										variantObject.value +'">' +
										variantObject.value +
										"</option>";
							html += '</select>' +
							'</div>' +
							'</div>';
						}
					});
				}
				$("#wishlistAddProduct .products-variant").html(html);
				$("#wishlistAddProduct").modal();
				$('#targetWishlist option.js-qty-selector.default').prop('selected','true');
				//$('#newListName').hide();
	  });
	  return false;
		});
	},


	controleCarouselVariantModal : function() {
		$(document).on('click', '.call-home-variant-modal', function(){
			var productCode = $(this).data("productCode");
			var url = "/ajax-variant-modal/" + productCode;

			$.post(url, function(result) {

				$("#variantConfirmationAddModal .name p").html(result.name);
				$("#variantConfirmationAddModal .price p").html(result.price.formattedValue);
				//$("#variantConfirmationAddModal #productCodeToWishlist").val(result.code);
				var primaryImage = result.images[0];
				$("#variantConfirmationAddModal .img-responsive").attr("src", primaryImage.url);
				$("#variantConfirmationAddModal .img-responsive").attr("alt", primaryImage.altText);
				$("#variantConfirmationAddModal .img-responsive").attr("title", primaryImage.altText);

				var variantOptions = null;

				if (result.variantOptions) {
					var variantOptions = result.variantOptions[0].variantOptionQualifiers;
				}
				if(variantOptions != null) {
					var html = '<div class="clearfix row"></div>' +
					'<div>' +
						'<label>Escolha as opções abaixo:</label>' +
					'</div>';
					variantOptions.forEach(function(variantObject) {

						if (variantObject.qualifier == 'voltage') {
							html += '<div class="edit-controls col-md-6 pull-left">' +
									'<div class="styled-select">' +
										'<div class="col-md-3 pull-left">Volt.</div>' +
										'<div class="col-md-9">' +
											'<select id="targetWishlist" class="form-control pull-right row">';

							html += '<option data-content="' +
										variantObject.value +'">' +
										variantObject.value +
										"</option>";
							html += '</select>' +
									'</div>' +
									'</div>' +
									'</div>';
						}

						if (variantObject.qualifier == 'color') {
							html += '<div class="edit-controls col-md-6 pull-right">' +
									'<div class="styled-select">' +
										'<div class="col-md-3 pull-left">Cor.</div>' +
										'<div class="col-md-9">' +
											'<select id="targetWishlist" class="form-control pull-right row">';

							html += '<option data-content="' +
										variantObject.value +'">' +
										variantObject.value +
										"</option>";
							html += '</select>' +
							'</div>' +
							'</div>' +
							'</div>';
						}
					});
				}
				$("#variantConfirmationAddModal .products-variant").html(html);
				$("#variantConfirmationAddModal").modal();
			});
		});
	},

	addToCartModalHandler: function(data){
		var currentCount = parseInt($('.cart-item-count').text());
		$('.add-cart-modal-product').show();

	  /* data.miniCartCount > currentCount ? $('.addedToCartModal').first().modal('show') : $('.errorModal').first().modal('show'); */
	},

	bindToAddToCartStorePickUpForm: function ()
	{
		var addToCartStorePickUpForm = $('#colorbox #add_to_cart_storepickup_form');
		addToCartStorePickUpForm.ajaxForm({success: ACC.product.displayAddToCartPopup});
	},


	enableStorePickupButton: function ()
	{
		$('.js-pickup-in-store-button').removeAttr("disabled");
	},

	displayAddToCartPopup: function (cartResult, statusText, xhr, formElement)
	{
		$('#addToCartLayer').remove();

		if (typeof ACC.minicart.refreshMiniCartCount == 'function')
		{
			//temporary comment. there is no minicart at this moment
			//ACC.minicart.refreshMiniCartCount(false);
			ACC.cart.reloadMiniCartQuantity();
		}
		var titleHeader = $('#addToCartTitle').html();
		var productCode = $('[name=productCodePost]', formElement).val();
		var quantityField = $('[name=qty]', formElement).val();

		var quantity = 1;
		if (quantityField != undefined)
		{
			quantity = quantityField;
		}

		if (typeof cartResult !== 'undefined' && cartResult.cartAnalyticsData !== undefined)
		{
			var cartAnalyticsData = cartResult.cartAnalyticsData;

			var cartData = {"cartCode": cartAnalyticsData.cartCode,
				"productCode": productCode, "quantity": quantity,
				"productPrice":cartAnalyticsData.productPostPrice,
				"productName":cartAnalyticsData.productName} ;

			ACC.track.trackAddToCart(productCode, quantity, cartData);
		}

	},

	setProductQuantity : function() {

		$(document).on('click', 'button[id*="addToCartButton"]', function() {

		 var qty =  $(this).parents('form').find(".pdpAddtoCartInput").val();

		 if(qty === undefined)
		 {
		  qty =  $(".pdpAddtoCartInput").val();
		 }
		 $(this).parents('form').find('input:hidden.js-qty-selector-input').val(qty);
		  var productCode = $(this).parents('form').find('input[name="productCodePost"]').val();
		  $(".addToCartForm"+productCode).find('input[id="productQty"]').val(qty);
					$('input:hidden.js-qty-selector-input').val(qty)


		});

		$(document).on('click', 'button[id*="buyProductButton"]', function(event) {

			var qty = $(".pdpAddtoCartInput").val();
			var target = $(this).data('target');
			if(target == '#cepModal'){
				$('.js-cep-check').click(function(){
					$('#cepModal').modal('show');
					$('input:hidden.js-qty-selector-input').val(qty);
				})
			}else{
				$('input:hidden.js-qty-selector-input').val(qty);
			}

			try {

		  if ($(".commission").find().size() > 0 || $("#js-asm-stock-change option:selected").data("stocklevel") > 0) {
			event.preventDefault();

			var deliveryType = $("input[name='deliveryType']").val();

			if (deliveryType != 'undefined' && deliveryType != undefined && deliveryType != null && deliveryType == "ECOMMERCE_DELIVERY") {

				validateQuantityOfProductEcommerce(this);

			} else {
				validateAddProductDirectTypeToCart(this);
			}

		  }
			} catch (e) {
				$(this).parents('form').submit();
			}

		});
	},


//aqui
	addProductToWishlistURL : function() {

		//esconde titulo caso nao tenha lista salva
		if ($("#targetWishlist .custom-checkbox").length == 0) {
			$("#targetWishlist .title-buy-list").hide();
		}


		$(document).on('click', 'input[id*="checkbox-wishlistpdp"]', function () {
			arrayOfselectbox = new Array();
			$('input[id*="checkbox-wishlistpdp"]:checked').each(function(){
				arrayOfselectbox.push($(this).val());
			});
		});

		enquire.register("screen and (max-width: " + screenSmMax +")", {
			match : function() {
				$(document).on("click", "#shopping-list-button, #close-modal-shopping-list", function() {
					$("#productNavFixed").toggle();
				});
			}
		});

		$(document).on("click", "#shopping-list-button", function(){
			$(".modal-backdrop").addClass("backdrop-wishlist");
			$(".wishListExistingName").hide();
			$("#message").hide();
			$("#wishListName").removeClass("alert-danger");
		});

		$(document).on("click", ".modal-backdrop", function(){
			document.querySelector(".close-modal-shopping-list").click();
		});

		var labelNewList = "+ Criar nova lista";
		var targetWishList = "#addProductToWishListForm #targetWishlist";

		$("#addProductToWishListForm").submit(function(e){
			e.preventDefault();
			$("#wishlistAddProductButton").trigger("click");
		});

		$(document).on('click', '#wishlistAddProductButton', function() {

			var wishListName = $("#wishListName").val().trim();
			var targetWishListValue = $('#targetWishlist input:checked').val();

			if (targetWishListValue == labelNewList || targetWishListValue == undefined){
				if (wishListName === '')  {
					$("#message").show();
					$("#wishListName").addClass("alert-danger");
					return false;
				}
			}

			for(var i = 0; i < $('input[id*="checkbox-wishlistpdp"]').length; i++){
			    if($('input[id*="checkbox-wishlistpdp"]:eq('+ i +')').val() == wishListName){
                    $(".wishListExistingName").show();
                    $("#wishListName").addClass("alert-danger");
                    $("#wishListName").val("");
                    return false;
                }

			}

			if(wishListName.length > 30){
				$("#messageLength").show();
				$("#wishListName").addClass("alert-danger");
				return false;
			}
			else {
				wishListName = targetWishListValue;
			}

			var productCode = $("#productCodeToWishlist").val();

			$("#wishlistAddProduct").modal('hide');
	        var newListName = $("#wishListName").val().trim();

			//esconde msgs de erro antes de submeter novo ajax
			 $("#create-list-error #data-message-create, #create-list-error #data-message-add").addClass("hidden");
			var isNewName = true;
			for(var i = 0; i < arrayOfselectbox.length; i++){
				if(arrayOfselectbox[i] == newListName){
					isNewName = false;
				}
			}

			//se esta CRIANDO lista (unica ou junto com existentes)
			 if(newListName != undefined && newListName != "" && isNewName)
			  {
				ACC.product.putNewListForm(productCode,newListName);
				arrayOfselectbox.push(newListName);
			  }else{ // se esta apenas inserindo em listas existentes
				ACC.product.putproductsAllWishList(productCode,false);
			  }

		});

		$(document).on('change', ' #targetWishlist', function() {
			$("#wishListName").removeClass("alert-danger");
			var targetWishlistVal = $('#addProductToWishListForm #targetWishlist').val();

		});
	},

	checkWishListToShow: function(){

            var isLogged = ACC.isUserLoggedIn;
            if(isLogged){
                $("#modal-not-logged").hide();
                $("#modal-is-logged").show();

                $.ajax({
                	url: ACC.config.encodedContextPath + "/minhas-listas",
                    type: "POST",
                	success: function(data){
                        $('#targetWishlist .block-buy-list').empty();
                        var totalDeListas = data.list.length;
                        $("#targetWishlist .title-buy-list").show();

                        for(var i=0; i < totalDeListas; i++){
                            var clonedLista = $(".template-lista .custom-checkbox").clone();
                            clonedLista.find("input").val(data.list[i]);
                            clonedLista.find("input").attr("id" , "checkbox-wishlistpdp-" + i);
                            clonedLista.find("label").attr("for" , "checkbox-wishlistpdp-" + i);
                            clonedLista.find("label").html(data.list[i]);
                            $("#targetWishlist .block-buy-list").append(clonedLista);
                        }
                    }
                });
            };
	},

	putproductsAllWishList : function(productCode, newListCreated)

	{
	 $.ajax({
		 method : "POST",
		 url: ACC.config.encodedContextPath + "/minhas-listas/add-multi-listas-produtos",
		 data :
		 {
		 wishlistCodes: arrayOfselectbox,
		 productCode: productCode
		 },

	 }).success(function(result) {
		$("#"+productCode).find('.icon-wishlist-gallery').before('<span class="center-block hidden-xs"><i class="icon-wishlist-add-gallery center-block"></i></span>');
		$("#"+productCode).find('.icon-wishlist-gallery').remove();
		$('.page-productDetails .icon-wishlist-gallery').attr('class', 'icon-wishlist-add-gallery');
		if ($('div#newListName').is(":visible")) {
			//$('#targetWishlist option:last').prev().after("<option value="+$("#wishListName").val()+">"+$("#wishListName").val()+"</option>");
		}
		$('div#newListName, #addProductToWishListForm .first-wish-list').hide();
		$('#addProductToWishListForm .none').show();
		$('#targetWishlist option.js-qty-selector.default').prop('selected','true');


		//edita msg de sucesso de acordo com a qtde de listas selecionadas
		if (arrayOfselectbox.length == 1) {
			$("#data-message").html("Produto adicionado a lista <strong>"+ arrayOfselectbox[0] +"</strong> com sucesso.");
		}else if (arrayOfselectbox.length == 2) {
			$("#data-message").html("Produto adicionado as listas <strong>"+ arrayOfselectbox[0] +"</strong> e <strong class='two'>"+arrayOfselectbox[1] + "</strong> com sucesso.");

		}else if (arrayOfselectbox.length == 3) {
			$("#data-message").html("Produto adicionado as listas <strong>"+ arrayOfselectbox[0] +"</strong>, <strong class='two'>"+ arrayOfselectbox[1]+ "</strong> e mais <strong>1</strong> lista com sucesso.");

		}
		else{
			$("#data-message").html("Produto adicionado as listas <strong>"+ arrayOfselectbox[0] +"</strong>, <strong class='two'>"+ arrayOfselectbox[1]+ "</strong> e mais <strong>"+ (arrayOfselectbox.length - 2)+"</strong> listas com sucesso.");

		}

		// [CACHE-186]:
		ACC.product.addWishListInfoToDataLayer(dataLayer, arrayOfselectbox);

		//limpa array de lista para a proxima requisicao e desmarca os checkboxes
		arrayOfselectbox = new Array();
		$("#targetWishlist input[type='checkbox']").prop("checked", false);


		$("#confirm-create-list").modal("show");

	}).fail(function(err)
	{
		$("#"+productCode).find('.icon-wishlist-gallery').before('<span class="center-block hidden-xs"><i class="icon-wishlist-add-gallery center-block"></i></span>');
			 $("#"+productCode).find('.icon-wishlist-gallery').remove();
			 $('.page-productDetails .icon-wishlist-gallery').attr('class', 'icon-wishlist-add-gallery');
			 if ($('div#newListName').is(":visible")) {
				 //$('#targetWishlist option:last').prev().after("<option value="+$("#wishListName").val()+">"+$("#wishListName").val()+"</option>");
			 }
			 $('div#newListName, #addProductToWishListForm .first-wish-list').hide();
			 $('#addProductToWishListForm .none').show();
			 $('#targetWishlist option.js-qty-selector.default').prop('selected','true');

			 $("#create-list-error #data-message-add").removeClass("hidden");
			 $("#create-list-error").modal("show");

			 //desmarca os checkboxes para a proxima requisicao
			$("#targetWishlist input[type='checkbox']").prop("checked", false);

			 arrayOfselectbox = new Array();

			  $('input[id*="checkbox-wishlistpdp"]').each(function(){

				console.log($(this).val());
			});
	});

	},

	putNewListForm : function(productCode,newListName)

	{
		$.ajax({
			url: ACC.config.contextPath + "/minha-conta/minhas-listas/salvar/produto",
			type: 'POST',
			data: {
				productCode: productCode,
				wishListName: encodeURIComponent(newListName)
			},

		}).success(function(result) {
			$("#"+productCode).find('.icon-wishlist-gallery').before('<span class="center-block hidden-xs"><i class="icon-wishlist-add-gallery center-block"></i></span>');
			$("#"+productCode).find('.icon-wishlist-gallery').remove();
			$('.page-productDetails .icon-wishlist-gallery').attr('class', 'icon-wishlist-add-gallery');
			$("#wishListName").val("");
			$("#message").hide();
			$("#wishListName").removeClass("alert-danger");
			if ($('div#newListName').is(":visible")) {
				//$('#targetWishlist option:last').prev().after("<option value="+$("#wishListName").val()+">"+$("#wishListName").val()+"</option>");
			}
			$('div#newListName, #addProductToWishListForm .first-wish-list').hide();
			$('#addProductToWishListForm .none').show();
			$('#targetWishlist option.js-qty-selector.default').prop('selected','true');


			//exibe mensagem apenas se nao tiver listas selecionadas
			if ($("#targetWishlist input:checked").length == 0) {
				$("#data-message").html("Produto adicionado a lista <strong>"+ arrayOfselectbox[0] +"</strong> com sucesso.");
				$("#confirm-create-list").modal("show");

				// [CACHE-186]:
				ACC.product.addWishListInfoToDataLayer(dataLayer, arrayOfselectbox);

				//limpa array de lista para a proxima requisicao e desmarca os checkboxes
				arrayOfselectbox = new Array();
				$("#targetWishlist input[type='checkbox']").prop("checked", false);
			 }else{
				//chama ajax de adicao em grupo se tiver listas selecionadas
				ACC.product.putproductsAllWishList(productCode,true);
			 }


			 //atualiza listas no modal
			$.ajax({
            url: ACC.config.encodedContextPath + "/minhas-listas/update",
            type: "POST",
            success: function(data)
            {

				$('#targetWishlist .block-buy-list').empty();
				var totalDeListas = data.length;
				$("#targetWishlist .title-buy-list").show();

				for(var i=0; i < totalDeListas; i++)
                {
					 var clonedLista = $(".template-lista .custom-checkbox").clone();
					 clonedLista.find("input").val(data[i].name );
					 clonedLista.find("input").attr("id" , "checkbox-wishlistpdp-" + i);
					 clonedLista.find("label").attr("for" , "checkbox-wishlistpdp-" + i);
					 clonedLista.find("label").html(data[i].name );
					 $("#targetWishlist .block-buy-list").append(clonedLista);
				}

	          }

	         });

		}).fail(function(err) {
			console.log(err);
			$("#create-list-error #data-message-create").removeClass("hidden");
			$("#create-list-error").modal("show");
		});

	},

	productPagination : function(categoryResultsUrl, hasNextPage, termo, sort, page, isGrid) {

		if(typeof categoryResultsUrl !== 'undefined')
		{
			if((parseInt($(window).width()) <= parseInt(screenXs.replace('px',''))) && ($('body').hasClass('page-productGrid')))
			{
				$('#gridView').val('false');
				$('#listView').val('true');
				$('#sort-navigation-form').submit();
			}
			else
			{
				$.ajax({
					url: categoryResultsUrl,
					type: 'GET',
					dataType: 'html',
					data: {
						page: page,
						sort: sort,
						termo: termo,
						isGrid: isGrid
					},
				})
				.done(function(result) {
					$('#loadNextPage').removeAttr('disabled');
					$('#loadAsmNextPage').removeAttr('disabled');
				})
				.success(function(result) {
					$('.category-result-list').append(result);
					hasNextPage = $('li.liHasNextPage:last').text();
					 ACC.ratingstars.bindRatingStars();

					if(hasNextPage === 'true')
					{
						$('#loadNextPage').removeClass('hidden');
						$('#loadAsmNextPage').removeClass('hidden');
					}
					else
					{
						$('#loadNextPage').addClass('hidden');
						$('#loadAsmNextPage').addClass('hidden');
					}
				})
				.fail(function(err) {
					console.log(err);
				});
			}
		}
        var selectedPointOfServices = window.unescape(ACC.functionCookie.getCookie("selectedPointOfServices"));
		var selectedPOSParam = selectedPointOfServices !== "undefined" ? "&pos=" + selectedPointOfServices : "";
		return categoryResultsUrl+"?page="+page+"&sort="+sort+"&termo="+termo+"&isGrid="+isGrid + selectedPOSParam;
	},

	controlShowAndHideAdicionarCartButton : function() {

		$(document).on('click', 'button[id*="addToCartButton"]', function() {



			var target = $(this).data('target');

			if(target == '#addedToCartModal' && ($(".commission").find().size() == 0 && $("#js-asm-stock-change option:selected").data("stocklevel") == 0)) {
				$("#botaoAdicionarNoCarrinhoDiv").hide();
				$("#botaoAdicionadoNoCarrinhoDiv").show();

			} else if ($(".commission").find().size() > 0 || $("#js-asm-stock-change option:selected").data("stocklevel") > 0) {
				event.preventDefault();
				var deliveryType = $("input[name='deliveryType']").val();
				if (deliveryType != 'undefined' && deliveryType != undefined && deliveryType != null &&  deliveryType == "ECOMMERCE_DELIVERY") {
					validateQuantityOfProductEcommerceToMiniticart(this);
				} else {
					validateAddProductTypeToCart(this);
				}
			}

		});

	},

	hideVariantConfirmationModal : function() {

		$(document).on('click', 'button[id*="addToCartVariantButton"]', function() {

			$("#variantConfirmationBuyModal").modal('hide');
		});

	},


	showAddedToCartFromVariantConfirmationModal :  function() {

		$(document).on('click', 'button[id*="continueVariantConfirmationAddModal"]', function() {

			$("#botaoAdicionarNoCarrinhoDiv").hide();

			$("#botaoAdicionadoNoCarrinhoDiv").show();

		});

	},

	applyVariant : function() {

		$('.applyVariant').click(function(){

			var variantCode = $('.show-menu-arrow').val();

			var variantOption = $('select[id="variant"] option[data-code="'+ variantCode +'"]');

			$('.addToCartForm' + productCode).find('input[name="productCodePost"]').val(variantOption);


			var productCode = $(this).data('product');
			var qty = $('form[data-code="' + productCode + '"]').find('input[name="quantity"]').val();

			$('.addToCartForm' + productCode).find('input[id="productQty"]').val(qty);
			$('.addToCartForm' + productCode).submit();

		});

	},

	selectOnSelected : function() {
		$(document).on('change', "select[name=selectStockLevelProduct]", function(el) {
				var selectOption  =  $(this).parents("form").find('select[name=selectStockLevelProduct]');
				$(this).parents("form").find('input[name=qty]').val(selectOption.val());
		});
	},

	bindReviewForm: function() {
		$("#reviewForm").ajaxForm({success: function(){
			$(".js-review-write").hide();
			$(".block-doRating-tab").hide();
			$('.review-list').show();
			$('.block-msg-sucess-review-product').show();
			$(".review-pagination-bar").show();
			$('.review-list').show();
			$('.btn-custom-allreviews').show();
			window.scrollTo(0, $('#review').offset().top);

	  var dataReview = this.data.split("&").reduce(function(result, item) {
		var obj = item.split("=");
		result[obj[0]] = obj[1];
		return result;
	  }, {});
	  var event = new CustomEvent('productReview', {"detail": dataReview });
	  document.getElementById("adobeAnalytics").dispatchEvent(event);
		}

		});
	},

	bindPromotions: function() {

		var active = $('#progressivePromotionFound').data('active');

		if (active)
		{
			$('#promotionCarousel').removeClass('hidden');
		}
		else
		{
			$('#productQuantity').removeClass('hidden');
		}


		$('.js-progressive-slider').click(function(){
			var quantity = $(this).data('quantity');

			$('.pdpAddtoCartInput').val(quantity);
			$("input[name='qty']").val(quantity);

			$('.js-progressive-slider').removeClass('active');

			$(this).addClass('active');
		});
	},

	infoBox: function(){

       $(".sellerLink").hover(function(){
            var productCode = $(this).data("product-code");
            $('.js-infoBox-'+productCode).removeClass('hidden');
       }, function(){
           var productCode = $(this).data("product-code");
           window.setTimeout(function(){
               $('.js-infoBox-'+productCode).addClass('hidden');
           }, 2000);
       });

       $(".infoBoxPdp").hover(function(){
            var productCode = $(this).data("product-code");
             $('.js-infoBox-'+productCode).removeClass('hidden');
        });

       $(".infoBoxPdp").onmouseout(function(){
           var productCode = $(this).data("product-code");
           window.setTimeout(function(){
              $('.js-infoBox-'+productCode).addClass('hidden');
           }, 2000);
       });

	},

    getStockFromCatalogAPI: function(productCode, productPartnerCode, successCallback, errorCallback) {

        var requestUrl = apiCatalogUrl + '/' + productCode;
        var statusCepConsultation = ACC.functionCookie.getCookie("statusCepConsultation") == "true";
        var urlData = {};

        if (statusCepConsultation) {
            urlData.warehouses = Array.from(this.getWarehouseList()).join(",");
        }

        if (productPartnerCode) {
            urlData.productPartnerId = productPartnerCode;
		}

		var dfd = $.Deferred();

        $.ajax
        (
             {
                 type: 'GET',
                 url: requestUrl,
                 data: urlData,
                 dataType: 'json',
                 headers: {
                     'Authorization': 'Basic ' + apiCatalogAuthorization,
                     'X-IBM-Client-Id': apiCatalogIbmClientId
                 },
                 timeout: apiCatalogTimeout,
                 success: function(data) {
					successCallback(data);
					dfd.resolve();
				 },
                 error: function(data) {
					errorCallback(data);
					dfd.resolve();
				 }
             }
		);

		return dfd.promise();
    },

    getWarehouseList: function() {
        selectedWarehouses = decodeURIComponent(ACC.functionCookie.getCookie("selectedWarehouses")).split(",");
        selectedWarehouses.push(defaultEcommerceWarehouse);
        return new Set(selectedWarehouses);
    },

    updateOffer: function(offerItem, offerData) {
    	if(offerData.inStock) {
    		$(offerItem).addClass('in-stock');
    	} else {
    		$(offerItem).addClass('hidden');
    	}
    	var maxQuantity = offerData.stockQuantity !== undefined ? offerData.stockQuantity : 999;
    	$(offerItem).find('input[name="stock"]').val(maxQuantity);
    },

    updateOffersList: function(buyBoxOffers, availableOffersQuantity) {
    	var offersList = $('.list-group-item.item-offer');

    	for(var i = 0; i < buyBoxOffers.length; i++){
    		ACC.product.updateOffer(offersList[i], buyBoxOffers[i]);
    	}

    	$('.list-group-item.item-offer.in-stock:lt(1)').addClass('selected');
    	$('.list-group-item.item-offer.in-stock:lt(1) input[type=radio]').click();
    	$('.sku.cod-product').text('Cód. ' + $('.list-group-item.item-offer.in-stock:lt(1)').attr('data-id-offers'));
    	$('.list-group-item.item-offer.in-stock:lt(2)').removeClass('display-none');
    	if(availableOffersQuantity <= 2) {
    	    $('#show-more-results').remove();
    	}

    	$('#productDetailsPanelOffer').show();
    	$('#productDetailsInfo').remove();
    	$('#productAddCart').remove();
    	$('#productDetailsUnavailable').remove();
    },

    updateProductAvailable: function(offer) {
    	$('#productDetailsInfo').show();
    	$('#productAddCart').show();
    	$('#productDetailsPanelOffer').remove();
    	$('#productDetailsUnavailable').remove();

    	if(offer.stockQuantity) {
    		var divMaxQty = $(".qnt-error-msg");
    		var maxQuantity = divMaxQty.data('maxQty');
    		var newMaxQuantity = Math.min(maxQuantity, offer.stockQuantity);
    		divMaxQty.data('maxQty', newMaxQuantity);

    		var divErrorMessage = $('.stock-status.qnt-error-msg');
            var errorMessage = divErrorMessage.text();
            divErrorMessage.text(errorMessage.replace(maxQuantity, newMaxQuantity));
            divErrorMessage.attr('data-max-qty',newMaxQuantity);
    	}
    },

    updateProductUnavailable: function() {
    	$('#productDetailsUnavailable').show();
    	$('#productDetailsInfo').remove();
    	$('#productAddCart').remove();
    	$('#productDetailsPanelOffer').remove();
    },

    updateProductNavFixed: function(isAvailable, isFood) {
        if(isAvailable) {
            $('#productNavFixed').show();
        } else {
            $('#productNavFixed').remove();
        }
    },

    updateAvailabilityInfo: function(buyBoxOffers) {
    	var availableOffersQuantity = 0;
    	var oneOfferAvailableIndex;

        for(var i = 0; i< buyBoxOffers.length; i++) {
    		if(buyBoxOffers[i].inStock) {
    			availableOffersQuantity++;
    			oneOfferAvailableIndex = i;
    		}
    	}

        if(availableOffersQuantity == 0) {
            ACC.product.updateProductUnavailable();
        } else if (availableOffersQuantity == 1 && oneOfferAvailableIndex == 0) {
            ACC.product.updateProductAvailable(buyBoxOffers[0]);
        } else {
            ACC.product.updateOffersList(buyBoxOffers, availableOffersQuantity);
        }

        ACC.product.updateProductNavFixed(availableOffersQuantity > 0);

        $('.sku.cod-product').removeClass('hidden');
    },

    processSuccessReturn: function(data) {
    	this.stockQuantity = data.product.stock.quantity;
    	this.inStock = this.stockQuantity > 0;
    },

    processErrorReturn: function(data) {
        if(data.responseJSON && data.responseJSON.errorList) {
            for (var i = 0; i < data.responseJSON.errorList.length; i++) {
                if($.inArray(data.responseJSON.errorList[i].code, apiCatalogStockUnavailableErrorCodes) !== -1) {
    				this.inStock = false;
    				return;
                }
            }
    	}
    	this.inStock = true;
    },

    showLoading: function(){
        $("#loadingPdp").PDPLoading("open", function() {
            $(".block-add-cart").css("display", "none");
            $(".mobile-btn").css("display", "none");
         })
    },

     hideLoading: function(){
            $("#loadingPdp").PDPLoading("close", function() {
                $(".block-add-cart").css("display", "block");
                $(".mobile-btn").css("display", "block");
                $("#loadingPdp").css("display", "none");
             })
    },

    startPdpApiStockRequests: function() {
        console.log("Call startPdpApiStockRequests!");
        ACC.product.showLoading();

        updateAfterRequests = function(){
            ACC.product.updateAvailabilityInfo(buyBoxOffers);
            ACC.product.enableVariantSelectors();
            ACC.product.bindPromotions();
            ACC.product.hideLoading();
        };

        var statusCepConsultation = ACC.functionCookie.getCookie("statusCepConsultation");

        if(isFood && statusCepConsultation === "false") {
            updateAfterRequests();

        } else {
            var deferreds = [];

            buyBoxOffers.forEach(function (offer) {

                var deferred = ACC.product.getStockFromCatalogAPI(
                    offer.productId,
                    offer.productPartnerId,
                    ACC.product.processSuccessReturn.bind(offer),
                    ACC.product.processErrorReturn.bind(offer));

                deferreds.push(deferred);
            });

            $.when.apply($, deferreds).always(function() {
                updateAfterRequests();
            });
        }
    },

    populatePageWithApiInfo: function(){
        $(".loadingInStockApi").PDPLoading("open");
        $('.stockApiPending').each(function() {

            var addToCart = $(this).find('.btn-add-cart').first();
            var productId = addToCart.attr("data-product-code");
            var baseCode = addToCart.attr("data-product-base-code");
            var isFood = addToCart.attr("data-food") == "true";
            var statusCepConsultation = ACC.functionCookie.getCookie("statusCepConsultation");
            var productPartnerId;

            if(baseCode){
                productPartnerId = productId;
                productId = baseCode;
            }
            if(productId == productPartnerId){
                productPartnerId = undefined;
            }

            if( isFood && statusCepConsultation === "false"){

                $(this).find(".loadingInStockApi").remove();
                $(this).find('.outStockAPI').show();

            }else{
                ACC.product.getStockFromCatalogAPI(productId,
                                                   productPartnerId,
                                                   ACC.product.successCallback.bind(this),
                                                   ACC.product.errorCallback.bind(this));
            }

            $(this).removeClass("stockApiPending");
        });
    },

    successCallback : function(data){
        $(this).find('.btn-add-cart').first().attr("data-stock-level",data.product.stock.quantity);
        $(this).find(".loadingInStockApi").remove();

        if(data.product.stock.quantity > 0){
           $(this).find('.inStockAPI').show();
        }else{
            $(this).find('.outStockAPI').show();
        }
    },

    errorCallback : function(data){
        $(this).find(".loadingInStockApi").remove();
        if(data.responseJSON && data.responseJSON.errorList) {
                    for (var i = 0; i < data.responseJSON.errorList.length; i++) {
                        if($.inArray(data.responseJSON.errorList[i].code, apiCatalogStockUnavailableErrorCodes) !== -1) {
                             $(this).find('.outStockAPI').show();
                             return;
                        }
                    }
                }

        $(this).find('.btn-add-cart').first().attr("data-stock-level", 999);
        $(this).find('.inStockAPI').show();
    }
};

$(document).ready(function(){
	
  var isMobile = $(window).width() <= 1199;

  $(".addToCartForm input[name='warehouse']").val($("#js-asm-stock-change option:selected").val());
  $(".addToCartForm input[name='deliveryType']").val($("#js-asm-stock-change option:selected").data('deliverytype'));
  $("#buyProductForm input[name='warehouse']").val($("#js-asm-stock-change option:selected").val());
  $("#buyProductForm input[name='deliveryType']").val($("#js-asm-stock-change option:selected").data('deliverytype'));
  $("#addToCartForm").append('<input autocomplete="off" type="hidden" name="mobile" value="'+isMobile+'">');
  $("#buyProductForm").append('<input autocomplete="off" type="hidden" name="mobile" value="'+isMobile+'">');
  $("*[class^='addToCartForm']").append('<input autocomplete="off" type="hidden" name="mobile" value="'+isMobile+'">');

  if(typeof enablePdpApiStock !== 'undefined' && enablePdpApiStock) {
    ACC.product.startPdpApiStockRequests();
  }

  if(typeof enableCategorySearchApiStock !== 'undefined' && enableCategorySearchApiStock) {
    ACC.product.populatePageWithApiInfo();
  }
});

ACC.productDetail = {

	_autoload: [
		"initPageEvents",
		"bindVariantOptions",
		"bundleAnchorMoreDetails",
		"showMoreOffers",
		"selectOffer",
		"checkStock",
		[ "checkQtyStock" , $("body.page-productDetails").length != 0],
		"productBoxToggle",
		"confirmVoltage"
	],

	showAddToCartError: function() {

		$(".qnt-error-msg").show();

	},

	checkQtySelector:function(self, mode){
		var input= $(self).parents(".js-qty-selector").find(".js-qty-selector-input");
		var inputVal = parseInt(input.val());
		if(isNaN(inputVal))
		{
		  inputVal  = 1;
		}
		var max = 999;

		var minusBtn= $(self).parents(".js-qty-selector").find(".js-qty-selector-minus");
		var plusBtn= $(self).parents(".js-qty-selector").find(".js-qty-selector-plus");


		$(self).parents(".js-qty-selector").find(".btn").removeAttr("disabled");

		if(mode=="minus"){
			$(".msg-cart-qty-max").hide();
			if(inputVal != 1){
				ACC.productDetail.updateQtyValue(self,inputVal-1)
				if(inputVal-1 == 1){
					minusBtn.attr("disabled","disabled")
				}

			}else{
				minusBtn.attr("disabled","disabled")
			}
		}else if(mode=="reset"){
			ACC.productDetail.updateQtyValue(self,1)

		}else if(mode=="plus"){
			if(inputVal != max){
				ACC.productDetail.updateQtyValue(self,inputVal + 1)
				if(inputVal+1 == max){
					plusBtn.attr("disabled","disabled")
					$(".msg-cart-qty-max").show();
				}
			}else{
				plusBtn.attr("disabled","disabled")
			}
		}else if(mode=="input"){
			if(inputVal == 1){
				$(self).parents(".js-qty-selector").find(".js-qty-selector-minus").attr("disabled","disabled")
			}else if(inputVal == max){
				$(self).parents(".js-qty-selector").find(".js-qty-selector-plus").attr("disabled","disabled")
			}else if(inputVal<1){
				ACC.productDetail.updateQtyValue(self,1)
				$(self).parents(".js-qty-selector").find(".js-qty-selector-minus").attr("disabled","disabled")
			}else if(inputVal>max){
				ACC.productDetail.updateQtyValue(self,max)
				$(self).parents(".js-qty-selector").find(".js-qty-selector-plus").attr("disabled","disabled")
			}
		}

	},

	updateQtyValue: function(self,value){
		var input= $(self).parents(".js-qty-selector").find(".js-qty-selector-input").val(value);

         var productCode = $(self).parents('form').find('input[name="productCodePost"]');

        var form = $('.addToCartForm' + productCode[0].value);

        form.find('.product-quantity-selector').val(value);

        var addtocartQty= $(self).parents('.product-item').find(".js-qty-selector-input").val(value);

         input.val(value);
         addtocartQty.val(value);

   	  $(".addToCartForm"+productCode[0].value).find('input[id="productQty"]').val(value);
   	  $(".buyProductForm"+productCode[0].value).find('input[id="productQty"]').val(value);
   	  $(".addToCartButton"+productCode[0].value).find('input[id="productQty"]').val(value);

        ACC.cartitem.callValueInput(input);
	},
	initPageEvents: function(){

		$("#buyProductButtonBottom").click(function() {
			$("#buyProductButton").trigger("click");
		});

		$(document).on('click', '.js-qty-selector-minus', function(e) {
            e.currentTarget.disabled = true;
            ACC.cartitem.checkQtySelectorCart(this,"minus");

            var maxQty = $(".qnt-error-msg").data("maxQty");
            var minQty = $(this).parents(".js-qty-selector").find(".js-qty-selector-input").val();

            if(minQty <= maxQty)
            {
              $(".block-variant-qtd").removeClass("has-error");
              $(".qnt-error-msg").hide();
              $(".addToCartButton, #buyProductButton, #buyProductButtonBottom").prop('disabled', false);

            }

            var cartCode = $(this).parents('.cart-list-container-sust').find('input[name="cartCode"]').val();
            var quantityProduct = $(this).parents('.qty').find('.js-qty-selector-input').val();
            var positionInCart = $(this).parents('.product-item').index();
            var productCode = $(this).closest('.product-item').find('input[name="productCode"]').val();
            ACC.cart.reloadCart(cartCode, quantityProduct, positionInCart, productCode, e);

            try
            {
                  for(index = 0 ; index < dataLayer[0].carts.length; index++)
                  {
                      var cart = dataLayer[0].carts[index];
                      if(cart.code === cartCode) {
                          for(indexb = 0 ; indexb < cart.products.length; indexb++) {
                              var product = cart.products[indexb];
                              if(product.sku === productCode) {
                                  product.quantity = product.quantity - 1;
                              }
                          }
                      }
                  }
            }

            catch(error)
            {

            }

        });


        $(document).on('click', '.js-qty-selector-minus-search', function() {
            ACC.productDetail.checkQtySelector(this,"minus");


        });

        $(document).on('click', '.js-qty-selector-plus', function(e) {
            e.currentTarget.disabled = true;
            ACC.cartitem.checkQtySelectorCart(this,"plus");

           var maxQty = $(".qnt-error-msg").data("maxQty");
           var minQty = $(this).parents(".js-qty-selector").find(".js-qty-selector-input").val();

            if(minQty > maxQty)
            {
              $(".block-variant-qtd").addClass("has-error");
              ACC.productDetail.showAddToCartError();
              $(".addToCartButton, #buyProductButton, #buyProductButtonBottom").prop('disabled', true);

            }

            var cartCode = $(this).parents('.cart-list-container-sust').find('input[name="cartCode"]').val();
            var quantityProduct = $(this).parents('.qty').find('.js-qty-selector-input').val();
            var positionInCart = $(this).parents('.product-item').index();
            var productCode = $(this).closest('.product-item').find('input[name="productCode"]').val();
            ACC.cart.reloadCart(cartCode, quantityProduct, positionInCart, productCode, e);

            try

            {
                   for(index = 0 ; index < dataLayer[0].carts.length; index++)
                    {
                        var cart = dataLayer[0].carts[index];
                        if(cart.code === cartCode) {
                            for(indexb = 0 ; indexb < cart.products.length; indexb++) {
                                var product = cart.products[indexb];
                                if(product.sku === productCode) {
                                    product.quantity = product.quantity + 1;
                                }
                            }
                        }
                    }
            }

            catch(error)
            {
            }
        });

        $(document).on('click', '.js-qty-selector-plus-search', function() {
            ACC.productDetail.checkQtySelector(this,"plus");

        });



		$(document).on("keydown",'.js-qty-selector .js-qty-selector-input',function(e){

			if(($(this).val() != " " && ((e.which >= 48 && e.which <= 57 ) ||(e.which >= 96 && e.which <= 105 ))  ) || e.which == 8 || e.which == 46 || e.which == 37 || e.which == 39 || e.which == 9 ){}
			else if(e.which == 38 ){
				ACC.productDetail.checkQtySelector(this,"plus");
			}
			else if(e.which == 40 ){
				ACC.productDetail.checkQtySelector(this,"minus");
			}
			else{
				e.preventDefault();
			}
		});

		$(document).on("keyup",'.js-qty-selector .js-qty-selector-input',function(e){
			ACC.cartitem.checkQuantitySelector(this,"input");
			ACC.productDetail.updateQtyValue(this,$(this).val());

		});


		$("#Size").change(function () {
			var url = "";
			var selectedIndex = 0;
			$("#Size option:selected").each(function () {
				url = $(this).attr('value');
				selectedIndex = $(this).attr("index");
			});
			if (selectedIndex != 0) {
				window.location.href=url;
			}
		});

		$("#variant").change(function () {
			var url = "";
			var selectedIndex = 0;
			$("#variant option:selected").each(function () {
				url = $(this).attr('value');
				selectedIndex = $(this).attr("index");
			});
			if (selectedIndex != 0) {
				window.location.href=url;
			}
		});

	},

	bindVariantOptions: function()
	{
		ACC.productDetail.bindCurrentStyle();
		ACC.productDetail.bindCurrentSize();
		ACC.productDetail.bindCurrentType();
	},

	bindCurrentStyle: function(){
		var currentStyle = $("#currentStyleValue").data("styleValue");
		var styleSpan = $(".styleName");
		if (currentStyle != null) {
			styleSpan.text(": " + currentStyle);
		}

	},

	bindCurrentSize: function(){
		var currentSize = $("#currentSizeValue").data("sizeValue");
		var sizeSpan = $(".sizeName");
		if(currentSize != null){
			sizeSpan.text(": " + currentSize);
		}

	},

	bindCurrentType: function(){
		var currentSize = $("#currentTypeValue").data("typeValue");
		var sizeSpan = $(".typeName");
		if(currentSize != null){
			sizeSpan.text(": " + currentSize);
		}

	},


	bundleAnchorMoreDetails: function(){

		//DO NOT DELETE (:
		$(".more-detail-bundle").click(function (){

			var targetDetails = $(this).data("targetDetails");

			var target = $("#bundleDetailTab" + targetDetails);

			target.click();

			$('html,body').animate({scrollTop: target.offset().top},'slow');

		});

	},

	checkQtyStock: function(){

		var maxQty = $(".qnt-error-msg").data("maxQty");
		   $(".block-variant-qtd").removeClass("has-error");
           $(".qnt-error-msg").hide();
           $(".addToCartButton, #buyProductButton, #buyProductButtonBottom").prop('disabled', false);

		$(".pdpAddtoCartInput").change(function(){
			if(selected)
			{
			  var maxStockASM = $("#js-asm-stock-change option:selected").data('stocklevel');
				if($(".offers").length == 0)
			  {
				    if (maxStockASM != undefined && maxStockASM != null)
				    {
	                    if($(this).val() > maxStockASM){
	                        $(".block-variant-qtd").addClass("has-error");
	                        $(".block-add-cart .qnt-asm-stock-select-error-msg").show();
	                        $(".addToCartButton, #buyProductButton, #buyProductButtonBottom").prop('disabled', true);
	                     }else {
	                        $(".block-variant-qtd").removeClass("has-error");
	                        $(".block-add-cart .qnt-asm-stock-select-error-msg").hide();
	                        $(".addToCartButton, #buyProductButton, #buyProductButtonBottom").prop('disabled', false);
	                    }
	                } else {
	                    if($(this).val() >  maxQty){
	                        $(".block-variant-qtd").addClass("has-error");
	                        ACC.productDetail.showAddToCartError();
	                        $(".addToCartButton, #buyProductButton, #buyProductButtonBottom").prop('disabled', true);
	                    } else {
	                        $(".block-variant-qtd").removeClass("has-error");
	                        $(".qnt-error-msg").hide();
	                        $(".addToCartButton, #buyProductButton, #buyProductButtonBottom").prop('disabled', false);
	                    }
					}

			  }


			}
		});

		$(".pdpAddtoCartSelect").change(function(){
			var inputVal = parseInt($(this).val());

			if(isNaN(inputVal)){
				$(".pdpAddtoCartInput").val(1);
			} else {
				$(".pdpAddtoCartInput").val(inputVal);
			}
			$(".pdpAddtoCartInput").change();
		});

	},

    showMoreOffers: function(){
        $("#show-more-results").click(function(){
            $(".display-none").slideToggle();
            $("button", this).toggleClass('btn-show btn-hide');
        });
    },

    selectOffer: function(){
    	var stock = parseInt($(this).find(".stock").val());
        var hasOffer = $('.list-offer-by-box').length > 0;
        if(hasOffer){
    	code1p = $('.item-offer').eq(0).attr('data-id-offers');
    	$('.cod-product').text('Cód. '+code1p);
        }

    	$(".item-offer").click(function(){
    		stock = parseInt($(this).find(".stock").val());
    		if (!$(this).hasClass('disabled-offer')) {
    			$(".item-offer").removeClass('selected');
    			$(this).addClass("selected");
        		$(this).find("input[type='radio']").prop("checked", true);
        		$("input[name='productCodePost']").val($(this).attr("data-id-offers"));
				$("input[name='freightValue']").val($(this).data("freight-value"));

                $(".pdpAddtoCartInput").change();

                updateCode = $(this).attr('data-id-offers');
                   	$('.cod-product').text('Cód. '+updateCode);

                $('#productNavFixed .prince-product-default .priceBig').text($(this).find('.debit-payment .big-price').text());
                $('#productNavFixed .installment').html($(this).find('.prices .installment').html());
                $('#productNavFixed .price-old').hide();
                $('#productNavFixed .installment-parcel').hide();
                $('#productNavFixed .text-price-in-cash').hide();
            }

            $('.receiveOldPrice').text($(this).find('.sendOldPrice').text());

        });



    	$(".pdpAddtoCartInput").change(function(){

    		   if($(this).val() >  stock)
    		   {
                   $(".block-variant-qtd").addClass("has-error");

                   $(".qnt-error-msg").text("Só temos mais " + stock + " itens em estoque.");
                   ACC.productDetail.showAddToCartError();
                   $(".addToCartButton, #buyProductButton, #buyProductButtonBottom").prop('disabled', true);


               } else
               {
                   $(".block-variant-qtd").removeClass("has-error");
                   $(".qnt-error-msg").hide();
                   $(".addToCartButton, #buyProductButton, #buyProductButtonBottom").prop('disabled', false);
               }


    	});


    	$(".item-offer").eq(0).trigger("click");


    },

    updateListOffer: function (codeOffer, estimatedDays, valueDelivery, valueDeliveryDouble) {

    	 var selectorOffer = $('.item-offer[data-id-offers='+ codeOffer +']');
		 if($('.send-results').hasClass('list-offer-by-box')) {
		 	$('#block-view-delivery').hide();
		 	valueDelivery != '' ? updateValue() : deliveryUnavailable();
		 }

    	 function updateValue() {
    		 selectorOffer.find('.js-days-delivery').text('Em até ' + estimatedDays + '. Por: ');
    		 selectorOffer.find('.js-value-delivery').text(valueDelivery);
    		 selectorOffer.addClass('stock-level-ok');
			 selectorOffer.data("freight-value", valueDeliveryDouble);
    		 selectorOffer.removeClass('disabled-offer').find('.select-seller').attr('disabled', false);
    	 }

    	 function deliveryUnavailable () {
    		 var unavailable = 'Indisponível';
    		 selectorOffer.find('.js-days-delivery').text('');
    		 selectorOffer.find('.js-value-delivery').text(unavailable);
    		 selectorOffer.addClass('disabled-offer').find('.select-seller').attr('disabled', true);
    	 }

 		 $('.list-offer-by-box').prepend(selectorOffer);
    },

    ordinationListOffer: function () {
		 $($('.list-offer-by-box .item-offer').get().reverse()).each(function() {
			 $('.list-offer-by-box').append(this);
		 });

		 $('.list-offer-by-box').append($('#show-more-results'));
		 $('.list-offer-by-box').prepend($('.stock-level-ok'));

		 $('.item-offer').each(function() {
			 if(!$(this).hasClass('stock-level-ok')) {
				 var unavailable = 'Indisponível';
				 $(this).find('.js-days-delivery').text('');
				 $(this).find('.js-value-delivery').text(unavailable);
				 $(this).addClass('disabled-offer').find('.select-seller').attr('disabled', 'disabled');
			 }
		 });

		$(".item-offer").removeAttr("style");
		$('.item-offer').each(function(index) {
			if(index > 1)
				$(this).addClass("display-none");
		 	else $(this).removeClass("display-none");
		});
		$(".item-offer").eq(0).trigger("click");
    },

    cleanTargetOfferValid: function () {
    	$('.item-offer').removeClass('stock-level-ok');
    },

    productBoxToggle: function(){
		function productBoxCloser (container){
			var productToggleBox =$('.product-box__seta', container);
			productToggleBox.find('span').toggleClass('crficon-caret-up', container).toggleClass('crficon-caret-down');
			$('.cart-list', container).slideToggle('fast');
			$(".cart-summary-container--new__block__subtotal").slideToggle('fast');
			$(".cart-subtotal").slideToggle('fast');
			if ($('.product-box__seta', container).find('span').hasClass('crficon-caret-down')){
				$('.cart-list-container', container).addClass('product-box--selected');
			}else {
				 $('.cart-list-container', container).removeClass('product-box--selected');
			}
		}


		$(document).on("click", ".container-cart-list-title", function(){
			var container = $(this).closest(".cart-list-container");
			enquire.register("screen and (max-width: 768px)", {
			    match : function() {
					productBoxCloser(container);
			    }
			});
		});
	},

	enableBrowseButton : function ()
	{
	$('.js-keypress-cep').keyup(function () {

    var totalKeypress = $(this).val().length;
    totalKeypress == 9 ? $('#validateCepButton').removeAttr('disabled') : $('#validateCepButton').attr('disabled', 'disabled="disabled"');
     });

	},

	checkStock: function(){
		$(".InStock").hide();
		$('.navFix_inStock').hide();
		$('.navFix_outStock').hide();
	 	window.onload = function(){

		//	stockStatus = $('#stockStatus').val();
   stockStatus = 'inStock';
	 //stockStatus = 'outOfStock';
		 if(stockStatus == 'inStock'){
			 $(".InStock").show();
			 $(".outStock").hide();
       $('.navFix_inStock').show();
			 $('.navFix_outStock').hide();
	   }

		 if(stockStatus == 'outOfStock'){
			 $(".InStock").hide();
			 $(".outStock").show();
       $('.navFix_inStock').hide();
			 $('.navFix_outStock').show();
		 }

	 };
	},
	confirmVoltage: function(){

       var hasVolt = $('.js-voltages').length > 0;
       var hasColor = $('.js-colors').length > 0;
       var hasSize = $('.js-sizes').length > 0;
       if(hasVolt || hasColor || hasSize){


       if(hasSize == false){
       $('.sizeCondition').hide();
       }

       if(hasColor == false){
          $('.colorCondition').hide();
          }

       if(hasVolt == false){
        $('.voltageCondition').hide();
    }

         $('#buyProductButton').bind("click", function( event ) {
             $("#confirmVoltageModal").modal('show');
             selectedVoltage = $('.js-voltages').val();
             selectedColor = $('.js-colors').val();
             selectedSize = $('.js-sizes').val();
             $('.voltageValue').text(selectedVoltage);
             $('.colorValue').text(selectedColor);
             $('.sizeValue').text(selectedSize);
             event.preventDefault();
             $(this).unbind( event );
             $('.btnContinueVolt').on('click',function(){
                         $("#confirmVoltageModal").modal('hide');
				 		$('#buyProductButton').trigger('click');
				 		$('.modal-backdrop').hide();
               });
        });

        $('#addToCartButton').bind("click", function( event ) {

             $("#confirmVoltageModal").modal('show');
             selectedVoltage = $('.js-voltages').val();
             selectedColor = $('.js-colors').val();
             selectedSize = $('.js-sizes').val();
             $('.voltageValue').text(selectedVoltage);
             $('.colorValue').text(selectedColor);
             $('.sizeValue').text(selectedSize);
             event.preventDefault();
             $(this).unbind( event );
             $('.btnContinueVolt').on('click',function(){
                         $("#confirmVoltageModal").modal('hide');
                          $('#addToCartButton').trigger('click');
                          $('.modal-backdrop').hide();
               });
            });


          $('.btnChangeVolt , .close').on('click', function(){
           $("#confirmVoltageModal").modal('hide');
          });
       }

	}


};
ACC.quickview = {

	_autoload: [
		"bindToUiCarouselLink",
	],
		
		
	initQuickviewLightbox:function(){
		ACC.product.enableAddToCartButton();
		ACC.product.bindToAddToCartForm();
		ACC.product.enableStorePickupButton();
	},
		
	refreshScreenReaderBuffer: function ()
	{
		// changes a value in a hidden form field in order
		// to trigger a buffer update in a screen reader
		$('#accesibility_refreshScreenReaderBufferField').attr('value', new Date().getTime());
	},
	


	bindToUiCarouselLink: function ()
	{
		var titleHeader = $('#quickViewTitle').html();
		$(".js-owl-carousel-reference .js-reference-item").colorbox({
			close:'<span class="glyphicon glyphicon-remove"></span>',
			title: titleHeader,
			maxWidth:"100%",
			onComplete: function ()
			{
				ACC.quickview.refreshScreenReaderBuffer();
				ACC.quickview.initQuickviewLightbox();
				ACC.ratingstars.bindRatingStars($(".quick-view-stars"));
			},

			onClosed: function ()
			{
				ACC.quickview.refreshScreenReaderBuffer();
			}
		});
	}
	
};ACC.ratingstars = {

	_autoload: [
		["bindRatingStars", $(".js-ratingCalc").length > 0],
		["bindRatingStarsSet", $(".js-ratingCalcSet").length > 0]
	],

	bindRatingStars: function(){

		$e = $(".js-ratingCalc");

		$e.each(function(){
			
			if(!$(this).data("processed") ) {
			
				var ratingData = $(this).data("rating");
				$(this).data("processed", true);
				
				
				var $ratingIcon = $(this).find(".js-ratingIcon");
				var $clonelh;
	
				for (var i = 1; i <= ratingData.total; i++) {
					var $clone = $ratingIcon.clone().removeClass("js-ratingIcon");
					
					// adds the active class to the stars that are less than or equal than the current rating
					if(i <= ratingData.rating){
						$clone.addClass("active");
					}
	
					// divides the icons for the half rating points
					if(i-0.5 == ratingData.rating){
						$clone.addClass("active fh")
						$clonelh = $ratingIcon.clone().removeClass("ratingIcon");
						$clonelh.addClass("lh")
					}
					
					// inert the rating icons in the dom
					$clone.insertBefore($ratingIcon);
					
					if($clonelh){
						$clonelh.insertBefore($ratingIcon);
						$clonelh=null
					}
				}
				// delete the template icon
				$ratingIcon.remove();
			
			}
		})
	},
	bindRatingStarsSet: function(){

		$e = $(".js-ratingCalcSet");


		$e.on("mouseenter",".js-rationIconSet",function(e){
			e.preventDefault();
			$(this).parent().children().removeClass("active")
			var cindex =  $(this).index()+1;
			var $i = $(this).parent().children(".js-rationIconSet:lt("+cindex+")")
			$i.addClass("active");
		})


		$(document).on("mouseleave",".js-ratingCalcSet",function(e){
			e.preventDefault();

			$(this).find(".js-rationIconSet").removeClass("active")
			var rating = $(".js-ratingSetInput").val();
			var $i = $(this).find(".js-rationIconSet:lt("+rating*2+")");
			$i.addClass("active");
			
		})

		$e.on("click",".js-rationIconSet",function(e){
			e.preventDefault();
			var ratingData = $(this).closest(".js-ratingCalcSet").data("rating");
			var cindex =  $(this).index()+1;
			ratingData.rating = cindex/2;

			$(".js-ratingSetInput").val(ratingData.rating); 
			var a = $(this).attr("value");
			
			if (a == 1){
				$(".nota").text("Muito ruim");
			}else if(a == 2){
				$(".nota").text("Ruim");
			}else if(a == 3){
				$(".nota").text("Regular");
			}else if(a == 4){
				$(".nota").text("Bom");
			}else if(a == 5){
				$(".nota").text("Excelente");
			}
		})

		$e.each(function(){
			var ratingData = $(this).data("rating");
			var $ratingIcon = $(this).find(".js-ratingIcon");
			var $clonelh;

			for (var i = 1; i <= ratingData.total; i++) {
				var $clone = $ratingIcon.clone().removeClass("js-ratingIcon");
				
				// divides the icons for the half rating points
				$clone.addClass("fh").attr("value", i);
				$clonelh = $ratingIcon.clone().removeClass("js-ratingIcon");
				$clonelh.addClass("lh").attr("value", i);
			
				// inert the rating icons in the dom
				$clone.insertBefore($ratingIcon);
				if($clonelh){
					$clonelh.insertBefore($ratingIcon);
					$clonelh=null
				}
			}
			// delete the template icon
			$ratingIcon.remove()
		})
	}

};ACC.refinements = {

	_autoload: [
		["bindMoreLessToggles", $(".js-facet-form").length != 0],
		["bindMoreStoresToggles", $(".js-facet-form").length != 0],
//		["init", $(".js-facet-form").length != 0],
//		["bindSearch", $(".js-facet-form").length != 0],
		["bindMoreFacets", $(".js-facet-form").length != 0]
	],


	coords:{},
	storeSearchData:{},


	init:function(){
		navigator.geolocation.getCurrentPosition(
			function (position){
				ACC.refinements.coords = position.coords;
			},
			function (error)
			{
				console.log("An error occurred... The error code and message are: " + error.code + "/" + error.message);
			}
		);

	},


	bindSearch:function(){

		$(document).on("submit",'#user_location_form', function(e){
			e.preventDefault()
			var q = $(".js-shop-stores-facet .js-shop-store-search-input").val();
			 if(q.length>0){
				 ACC.refinements.getInitStoreData(q);				
			 }
		})


		$(document).on("click",'#findStoresNearMeAjax', function(e){
			e.preventDefault()
			ACC.refinements.getInitStoreData(null,ACC.refinements.coords.latitude,ACC.refinements.coords.longitude);
		})


	},


	getInitStoreData: function(q,latitude,longitude){
		$(".alert").remove();
		data ={
			"q":"" ,
			"page":"0"
		}

		if(q != null){
			data.q = q;
		}
		

		if(latitude != null){
			data.latitude = latitude;
		}

		if(longitude != null){
			data.longitude = longitude;
		}

		ACC.refinements.storeSearchData = data;
		ACC.refinements.getStoreData();
	},


	getStoreData: function(){
		url= $(".js-facet-form").data("url");
		$.ajax({
			url: url,
			data: ACC.refinements.storeSearchData,
			type: "get",
			success: function (response){
				window.location.reload();
			}
		});
	},
	
	bindMoreLessToggles: function (){

		$(document).on("click",".js-shop-stores-facet .js-facet-change-link",function(e){
			e.preventDefault();
			$(".js-shop-stores-facet .js-facet-container").hide();
			$(".js-shop-stores-facet .js-facet-form").show();
		})


		$(document).on("change",".js-product-facet .js-facet-checkbox",function(){
			$(this).parents("form").submit();
		})
		
		$(document).on("click",".js-product-facet .js-more-facet-values-link",function(e){
			e.preventDefault();
			$(this).parents(".js-facet").find(".js-facet-top-values").hide();
			$(this).parents(".js-facet").find(".js-facet-list-hidden").show();

			$(this).parents(".js-facet").find(".js-more-facet-values").hide();
			$(this).parents(".js-facet").find(".js-less-facet-values").show();
		})

		$(document).on("click",".js-product-facet .js-less-facet-values-link",function(e){
			e.preventDefault();
			$(this).parents(".js-facet").find(".js-facet-top-values").show();
			$(this).parents(".js-facet").find(".js-facet-list-hidden").hide();

			$(this).parents(".js-facet").find(".js-more-facet-values").show();
			$(this).parents(".js-facet").find(".js-less-facet-values").hide();
		})

	},
	
	bindMoreStoresToggles: function ()
	{
		$(document).on("click",".js-shop-stores-facet .js-more-stores-facet-values",function(e){
			e.preventDefault();
			$(".js-shop-stores-facet ul.js-facet-list li.hidden").slice(0, 5).removeClass('hidden').first().find('.js-facet-checkbox').focus();
			if($(".js-shop-stores-facet ul.js-facet-list li.hidden").length==0){
				$(".js-shop-stores-facet .js-more-stores-facet-values").hide()
			}
		})
		
	},
	
	bindMoreFacets: function (){
		
		$('.btn-more-facets').on('click', function(){
			
			$('div[id*="facet_block"]').each(function(){
				$(this).removeClass('hidden');
			});
			
			$(this).addClass('hidden');
			
		});
		
		$('button[id*="facetDataMoreOptions"]').on('click', function(){
			
			var code = $(this).data('code');
			
			$('div[id*="facetValue_' + code + '"]').each(function(){
				$(this).removeClass('hidden');
			});
			
			$(this).addClass('hidden');
			
		});
		
		$('.facet-searchbox').on('input', function(){
			
			var code = $(this).data('code');
			var text = $(this).val().toLowerCase().replace(/[áàâã]/g,'a').replace(/[éèê]/g,'e').replace(/[óòôõ]/g,'o').replace(/[úùû]/g,'u').replace(/[ç]/g,'c').replace(/ /g,'');
			
			$('div[id*="facetValue_' + code + '"]').each(function(){
				$(this).removeClass('hidden');
				
				if($(this).parent().is('li'))
				{
					$(this).parent().removeClass('hidden');
				}
				
			});
			
			$('#facetDataMoreOptions' + code).click();
			
			$('div[id*="facetValue_' + code + '"]').each(function(){
				
				var name = $(this).data('name').toLowerCase().replace(/[áàâã]/g,'a').replace(/[éèê]/g,'e').replace(/[óòôõ]/g,'o').replace(/[úùû]/g,'u').replace(/[ç]/g,'c').replace(/ /g,'');
				
				if(name.indexOf(text) < 0)
				{
					$(this).addClass('hidden');
					
					if($(this).parent().is('li'))
					{
						$(this).parent().addClass('hidden');
					}
				}
			});
			
		});
	}
	
};
ACC.tabs = {

	_autoload: [
		["bindTabs", $(".js-tabs").length > 0],
		"hideReviewBtn",
		"determineToDisplayReviews"
	],

	bindTabs: function(){

		$e = $(".js-tabs");
		 var tabs = $e.accessibleTabs({
			tabhead:'.tabhead',
			tabbody: '.tabbody', 
			fx:'show', 
			fxspeed: 0,
			currentClass: 'active', 
			autoAnchor:true
		});


		$e.on("click",".tabhead",function(e){
			e.preventDefault();

			if($(this).hasClass("active")){
				$(this).removeClass("active");
			}else{
				$(this).parents(".js-tabs").children(".tabs-list").find("a[href="+"#"+$(this).attr("id")+"]").click();

				var offset = $(this).position().top;
				$("body,html").scrollTop(offset)
			}
			
		});
		
		$e.on("click","#tabreview",function(e){
			var url = $("#url-reviews").val();
			e.preventDefault();
			ACC.tabs.showReviewsAction(url + 2);
		});
		
		$e.on("click",".all-reviews-btn",function(e){
			var url = $("#url-reviews").val();
			var amountReviews = $("#amount-reviews").val();
			e.preventDefault();
			ACC.tabs.showReviewsAction(url + amountReviews);
			ACC.tabs.hideReviewBtn(".all-reviews-btn");
			ACC.tabs.showReviewBtn(".less-reviews-btn");
		});
		
		$e.on("click", ".more-reviews-btn", function(e) {
			var url = $("#url-reviews").val();
			var numberActual = $("#number-actual").val();
			var amountReviews = $("#amount-reviews").val();
			var missingAmount = amountReviews - numberActual;
			var numberOfReviews = 0;
			
			e.preventDefault();
			numberOfReviews = ACC.tabs.calcReviews(numberActual, amountReviews);
			ACC.tabs.showReviewsAction(url + numberOfReviews);
			$("#number-actual").empty()
			$("#number-actual").val(numberOfReviews);
			console.log("Quantidade de reviews: " + numberOfReviews);
			if (numberOfReviews == amountReviews) {
				ACC.tabs.hideReviewBtn(".more-reviews-btn");
				ACC.tabs.showReviewBtn(".less-reviews-btn");
			}
		});		
		
		$e.on("click", ".less-reviews-btn", function(e) {
			var url = $("#url-reviews").val();
			e.preventDefault();
			ACC.tabs.showReviewsAction(url + 2);
			ACC.tabs.hideReviewBtn(".less-reviews-btn");
			ACC.tabs.showReviewBtn(".more-reviews-btn");
		});
		
		$(document).on("click", '.js-writeReviewTab', function(e){
			e.preventDefault();
			tabs.showAccessibleTabSelector($(this).attr("href"));
			$(".js-review-write").show();
			$('#reviewForm input[name=headline]').focus();
		});
		
		$(document).on("click",".js-review-write-toggle",function(e){
			e.preventDefault();
			
			$("#backInfoReviewMsgProduct").click(function() {
				location.reload();
			});
			var logged = $(".js-review-write-toggle").attr("isuserlogged");

			if(logged === 'false'){
				window.location = "/login";
			}else{
				if($(".js-review-write:visible").length<1){
					$(".js-review-write").show();
					$(".review-pagination-bar").hide();

					$('.review-list').hide();
					$('.btn-custom-allreviews').hide();
				}else{
					$(".js-review-write").hide();
					$(".review-pagination-bar").show();
					$(".review-list").show();
				}	
			}
				
		});

		$(document).on("click",".js-openTab",function(){
            tabs.showAccessibleTabSelector($(this).attr("href")); 
		}),
		
		$(document).on("click",".btn-send-review",function(){
			$('.sust-review-container').show();
			$('.review-list').show(); 
			$('.btn-custom-allreviews').show();
		})
	
	},
	
	showReviewsAction : function(url) {
		if ($("#reviews").length > 0) {
			$.get(url, function(result) {
				$('#reviews').html(result);
				if ($(".js-ratingCalc").length > 0) {
					ACC.ratingstars.bindRatingStars();
					ACC.tabs.showingAllReviews();
				}
			});
		}
	},
	
	calcReviews : function (numberActual, amountReviews) {
		
		var numberOfReviews = 0;
		if((amountReviews - numberActual) > 5) {
			numberOfReviews = parseInt(numberActual) + 5;
		} else {
			numberOfReviews = parseInt(amountReviews);
		}
		return numberOfReviews;
	},
	
	hideReviewBtn: function (btnClass){

		btnClass = (btnClass == undefined)? ".less-reviews-btn" : btnClass;
		$(btnClass).hide();
		
	},
	
	showReviewBtn: function (btnClass){
		$(btnClass).show();

	},
	
	showingAllReviews: function()
	{
		var isShowingAllReviews = $("#showingAllReviews").data("showingallreviews");
		if(isShowingAllReviews){
			ACC.tabs.hideReviewBtn(".all-reviews-btn");
		}
	},
	
	determineToDisplayReviews: function ()
	{
		var url = $("#url-reviews").val();
		//if(location.hash == "#tabreview"){
			ACC.tabs.showReviewsAction(url + 2);
		//}
	},

};ACC.track = {
	trackAddToCart: function (productCode, quantity, cartData)
	{
		window.mediator.publish('trackAddToCart',{
			productCode: productCode,
			quantity: quantity,
			cartData: cartData
		});
	},
	trackRemoveFromCart: function(productCode, initialCartQuantity)
	{
		window.mediator.publish('trackRemoveFromCart',{
			productCode: productCode,
			initialCartQuantity: initialCartQuantity
		});
	},

	trackUpdateCart: function(productCode, initialCartQuantity, newCartQuantity)
	{
		window.mediator.publish('trackUpdateCart',{
			productCode: productCode,
			initialCartQuantity: initialCartQuantity,
			newCartQuantity: newCartQuantity
		});
	}
	

};ACC.storefinder = {

	_autoload: [
		["init", $(".js-store-finder").length != 0],
		["bindStoreChange", $(".js-store-finder").length != 0],
		["bindSearch", $(".js-store-finder").length != 0],
		["getMapGlobal", $(".js-store-finder").length != 0],
		["getCoords", $(".js-store-finder").length != 0],
		["getStoreId", $(".js-store-finder").length != 0],
		"bindPagination"
	],
	
	storeData:"",
	storeId:"",
	coords:{
		latitude: -15.7801000,
		longitude: -47.9292000
	},
	storeSearchData:{},
	mapGlobal:"",
	geoLocation:"",
	
	traceRouteButton: function() {
		var startPoint = new google.maps.LatLng(ACC.storefinder.coords["latitude"], ACC.storefinder.coords["longitude"]); 
		var endPoint = new google.maps.LatLng(ACC.storefinder.storeId["latitude"], ACC.storefinder.storeId["longitude"]);
		ACC.storefinder.displayRoute(startPoint, endPoint, ACC.storefinder.mapGlobal);
	},
	
	getMapGlobal: function() {
		return ACC.storefinder.mapGlobal;
	},
	
	getCoords: function () {
		return ACC.storefinder.coords;
	},
	
	getStoreId: function () {
		return ACC.storefinder.storeId;
	},
	
	displayRoute: function(start, end, map) {

	    var directionsDisplay = new google.maps.DirectionsRenderer();// also, constructor can get "DirectionsRendererOptions" object
	    directionsDisplay.setMap(ACC.storefinder.mapGlobal); // map should be already initialized.

	    var request = {
	        origin : start,
	        destination : end,
	        travelMode : google.maps.TravelMode.DRIVING
	    };
	    var directionsService = new google.maps.DirectionsService(); 
	    directionsService.route(request, function(response, status) {
	        if (status == google.maps.DirectionsStatus.OK) {
	            directionsDisplay.setDirections(response);
	        }
	    });
	},
	
	//function that returns a marker icon location according to the point of service type
	getMarker: function (posType) {
		if(posType != undefined) {
			if(posType == 'HIPERMERCADO') {
				return "http://imgur.com/1vAnHSv.png";
				//carrefour.png
			}
			if(posType == 'SUPERMERCADO') {
				return "http://imgur.com/047sTqa.png";
				//carrefour_bairro.png
			}
			if(posType == 'EXPRESS') {
				return "http://imgur.com/047sTqa.png";
				//carrefour_express.png
			}
			if(posType == 'DROGARIA') {
				return "http://imgur.com/047sTqa.png";
				//drograria.png
			}
			if(posType == 'POSTO') {
				return "http://imgur.com/jlsNbSc.png";
				//carrefour_posto.png
			}
			if(posType == 'ATACADAO') {
				return "http://imgur.com/14ckvQ9.png";
				//atacadao.png
			}
			if(posType == 'SUPECO') {
				return "http://imgur.com/14ckvQ9.png";
				//supeco.png
			}
			if(posType == 'USER') {
				return "http://imgur.com/14ckvQ9.png";
				//voceestaaqui.png
			}
		}
		return "https://maps.google.com/mapfiles/marker" + 'A' + ".png";
		//carrefour.png ???
	},
	
	//list item left
	createListItemHtml: function (data,id){
		String.prototype.capitalize = function(lower) {
		    return (lower ? this.toLowerCase() : this).replace(/(?:^|\s)\S/g, function(a) { return a.toUpperCase(); });
		};
		
		var item="<hr>";
		item+='<li class="store-finder-navigation-list-entry">';
		item+='<input type="radio" name="storeNamePost" value="'+data.displayName+'" id="store-filder-entry-'+id+'" class="js-store-finder-input" data-id="'+id+'">';
		item+='<label for="store-filder-entry-'+id+'" class="js-select-store-label">';
		item+='<span class="store-finder-navigation-list-entry-info">';
		item+='<span class="store-finder-navigation-list-entry-name">'+data.displayName.capitalize(true)+'</span>';
		item+='<span class="store-finder-navigation-list-entry-name">'+data.pointOfServiceType.capitalize(true)+'</span>';
		item+='<span class="store-finder-navigation-list-entry-address">'+data.line1+', '+data.line2+'</span>';
		
//		item+='<span class="store-finder-navigation-list-entry-address">'+data.line1+' '+ data.line2+ '</span>';
		if(data.neighborhood != undefined) {
			item+='<span class="store-finder-navigation-list-entry-city">' +data.neighborhood+ ', '+data.town+'</span>';
		} else {
			item+='<span class="store-finder-navigation-list-entry-city">'+data.town+'</span>';			
		}
		item+='<span class="store-finder-navigation-list-entry-city">CEP '+data.postalCode+'</span>';
		item+='</span>';
		item+='<span class="store-finder-navigation-list-entry-distance">';
		if(geoLocation){
			item+='<span>'+data.formattedDistance+'</span>';
		}
		item+='</span>';
		item+='</label>';
		item+='</li>';
		return item;
	},

	refreshNavigation: function (){
		var listitems = "";
		data = ACC.storefinder.storeData
		
		if(data){
			for(i = 0;i < data["data"].length;i++){
				listitems += ACC.storefinder.createListItemHtml(data["data"][i],i)
			}
	
			$(".js-store-finder-navigation-list").html(listitems);
	
			// select the first store
			var firstInput= $(".js-store-finder-input")[0];
			$(firstInput).click();
		}


		var page = ACC.storefinder.storeSearchData.page;
		$(".js-store-finder-pager-item-from").html(page*5+1);

		var to = ((page*5+5)>ACC.storefinder.storeData.total)? ACC.storefinder.storeData.total : page*5+5 ;
		$(".js-store-finder-pager-item-to").html(to);
		$(".js-store-finder-pager-item-all").html(ACC.storefinder.storeData.total);
		$(".js-store-finder").removeClass("show-store");

	},

	bindPagination:function ()
	{
		$(document).on("click",".js-store-finder-details-back",function(e){
			e.preventDefault();
			$(".js-store-finder").removeClass("show-store");
		})
		
		$(document).on("click",".js-store-finder-pager-prev",function(e){
			e.preventDefault();
			var page = ACC.storefinder.storeSearchData.page;
			ACC.storefinder.getStoreData(page-1)
			checkStatus(page-1);
		})

		$(document).on("click",".js-store-finder-pager-next",function(e){
			e.preventDefault();
			var page = ACC.storefinder.storeSearchData.page;
			ACC.storefinder.getStoreData(page+1)
			checkStatus(page+1);
		})

		function checkStatus(page){
			if(page==0){
				$(".js-store-finder-pager-prev").attr("disabled","disabled")
			}else{
				$(".js-store-finder-pager-prev").removeAttr("disabled")
			}
			
			if(page == Math.floor(ACC.storefinder.storeData.total/5)){
				$(".js-store-finder-pager-next").attr("disabled","disabled")
			}else{
				$(".js-store-finder-pager-next").removeAttr("disabled")
			}
		}

	},

	bindStoreChange:function()
	{
		$(document).on("change",".js-store-finder-input",function(e){
			e.preventDefault();
			storeData=ACC.storefinder.storeData["data"];
			var storeId=$(this).data("id");
			var $ele = $(".js-store-finder-details");
			
			$.each(storeData[storeId],function(key,value){
				if(key=="image"){
					if(value!=""){
						$ele.find(".js-store-image").html('<img src="'+value+'" alt="" />');
					}else{
						$ele.find(".js-store-image").html('');
					}
				}else if(key=="productcode"){
					$ele.find(".js-store-productcode").val(value);
				}
				else if(key=="openings"){
					if(value!=""){
						var $oele = $ele.find(".js-store-"+key);
						var openings = "";
						$.each(value,function(key2,value2){
							openings += "<dt>"+key2+"</dt>";
							openings += "<dd class=\"text-right\">"+value2+"</dd>";
						});

						$oele.html(openings);

					}else{
						$ele.find(".js-store-"+key).html('');
					}

				}
				else if(key=="specialOpenings"){}
				else if(key=="features"){
					var features="";
					$.each(value,function(key2,value2){
						features += "<li>"+value2+"</li>";
					});

					$ele.find(".js-store-"+key).html(features);

				}
				/*else{
					if(value!=""){
						$ele.find(".js-store-"+key).html(value);
					}else{
						$ele.find(".js-store-"+key).html('');
					}
				}*/

			});
			
			String.prototype.capitalize = function(lower) {
			    return (lower ? this.toLowerCase() : this).replace(/(?:^|\s)\S/g, function(a) { return a.toUpperCase(); });
			};
			
			$('.js-store-displayName').html('<b>'+storeData[storeId].displayName.capitalize(true)+'</b>');
			$('.js-store-line1').html(storeData[storeId].line1+', '+storeData[storeId].line2);
			$('.js-store-town').html(storeData[storeId].district+', '+storeData[storeId].neighborhood+' - '+storeData[storeId].town);
			$('.js-store-zipcode').html('CEP '+storeData[storeId].postalCode);
			
			$('#telStore').html('<a href=tel:"'+storeData[storeId].phone+'" class="btn btn-block see">'+storeData[storeId].phone+'</a>');

			ACC.storefinder.storeId = storeData[storeId];
			ACC.storefinder.initGoogleMap();

		})
		
		$(document).on("click",".js-select-store-label",function(e){
			$(".store-finder-panel").addClass("hidden");
			$(".search-panel").addClass("hidden");
			$(".lb-find").addClass("hidden");
			$(".store-finder-pagination").addClass("hidden");
			
			$(".title-custom-component").html("Detalhe da loja");
			
			$(".store-finder-details").removeClass("hidden");
		})
		
		$(document).on("click",".store-details-back",function(e){
			$(".store-finder-details").addClass("hidden");
			
			$(".store-finder-panel").removeClass("hidden");
			$(".search-panel").removeClass("hidden");
			$(".lb-find").removeClass("hidden");
			$(".store-finder-pagination").removeClass("hidden");
			
			$(".title-custom-component").html("Encontre uma loja");
		})

		$(document).on("click",".js-store-finder-input",function(e){
			$(".js-store-finder").addClass("show-store");
		})

		$(document).on("click",".js-back-to-storelist",function(e){
			$(".js-store-finder").removeClass("show-store");
		})

	},

	initGoogleMap:function(){

		if($(".js-store-finder-map").length > 0){
		    var isAsmUser = ACC.config.isAsmUser;
            if (isAsmUser == "false" || isAsmUser == false || isAsmUser == null) {
			    ACC.global.addGoogleMapsApi("ACC.storefinder.loadGoogleMap");
			}
		}
	},
	
	loadGoogleMap: function(){

		storeInformation = ACC.storefinder.storeId;

		if($(".js-store-finder-map").length > 0)
		{			
			$(".js-store-finder-map").attr("id","store-finder-map")
			var centerPoint = new google.maps.LatLng(storeInformation["latitude"], storeInformation["longitude"]);
			
			var contentString = '';
			
			if(storeInformation["pointOfServiceType"] != undefined) {
				contentString += '<span class="store-finder-navigation-list-entry-name>' + storeInformation["pointOfServiceType"] + '</span> <br>';
			} 
			
			contentString += '<span class="store-finder-navigation-list-entry-address>' + storeInformation["line1"] + ' ' + storeInformation["line1"] + '</span> <br>';
			contentString += '<span class="store-finder-navigation-list-entry-address>';
			if(storeInformation["neighborhood"] != undefined) {
				contentString += storeInformation["neighborhood"] + ', ';
			}
			contentString += storeInformation["town"];
			if(storeInformation["district"] != undefined) {
				contentString += ' ,' + storeInformation["district"] + ', ';
			}
			contentString += '</span> <br>';
			contentString += '<span class="store-finder-navigation-list-entry-address>CEP ' + storeInformation["postalCode"] + ' </span>';
			
			if(geoLocation){
				var mapOptions = {
					zoom: 13,
					zoomControl: true,
					panControl: true,
					streetViewControl: false,
					mapTypeId: google.maps.MapTypeId.ROADMAP,
					center: centerPoint
				}
			}else{
				var mapOptions = {
						zoom: 5,
						zoomControl: true,
						panControl: true,
						streetViewControl: false,
						mapTypeId: google.maps.MapTypeId.ROADMAP,
						center: centerPoint
					}
			}
			
			var map = new google.maps.Map(document.getElementById("store-finder-map"), mapOptions);
			var posType = storeInformation["pointOfServiceType"];
			var iconIdentifier = ACC.storefinder.getMarker(posType); // EDIT THIS FUNCTION TO PUT THE CUSTOM MARKERS XXX TODO
			
			var marker = new google.maps.Marker({
				position: new google.maps.LatLng(storeInformation["latitude"], storeInformation["longitude"]),
				map: map,
				title: storeInformation["displayName"],
				icon: iconIdentifier
			});
			var infowindow = new google.maps.InfoWindow({
				title: storeInformation["displayName"],
				content: contentString,
				disableAutoPan: true
			});
			google.maps.event.addListener(marker, 'click', function (){
				infowindow.open(map, marker);
			});
			
			ACC.storefinder.mapGlobal = map;
			
			//map mobile 
//			var map = new google.maps.Map(document.getElementById("store-finder-map-mobile"), mapOptions);
//			var posType = storeInformation["pointOfServiceType"];
//			var iconIdentifier = ACC.storefinder.getMarker(posType); // EDIT THIS FUNCTION TO PUT THE CUSTOM MARKERS XXX TODO
//			
//			var marker = new google.maps.Marker({
//				position: new google.maps.LatLng(storeInformation["latitude"], storeInformation["longitude"]),
//				map: map,
//				title: storeInformation["displayName"],
//				icon: iconIdentifier
//			});
//			var infowindow = new google.maps.InfoWindow({
//				title: storeInformation["displayName"],
//				content: contentString,
//				disableAutoPan: true
//			});
//			google.maps.event.addListener(marker, 'click', function (){
//				infowindow.open(map, marker);
//			});
//			
//			ACC.storefinder.mapGlobal = map;
		}
	},

	bindSearch:function(){

		$(document).on("submit",'#storeFinderForm', function(e){
			e.preventDefault()
			var q = $(".js-store-finder-search-input").val();
			var type = $("select#pointOfServiceType").val();
			
			if(q.length>0){
				ACC.storefinder.getInitStoreData(q, null, null, type);
			}else{
				if($(".js-storefinder-alert").length<1){
					var emptySearchMessage = $(".btn-primary").data("searchEmpty")
					//$("#storeFinder").before('<div class="js-storefinder-alert alert alert-danger alert-dismissable" ><button class="close" type="button" data-dismiss="alert" aria-hidden="true">×</button>' + emptySearchMessage + '</div>');
				}
			}
		})
		$(document).on("click",'#findStoresNearMe', function(e){
			e.preventDefault();
			var type = $("select#pointOfServiceType").val();
			ACC.storefinder.getInitStoreData(null,ACC.storefinder.coords.latitude,ACC.storefinder.coords.longitude, type);
		})
	},

	getStoreData: function(page){
		ACC.storefinder.storeSearchData.page = page;
		url= $(".js-store-finder").data("url");
		$.ajax({
			url: url,
			data: ACC.storefinder.storeSearchData,
			type: "get",
			success: function (response){
				ACC.storefinder.storeData = $.parseJSON(response);
				ACC.storefinder.refreshNavigation();
			}
		});
	},

	getInitStoreData: function(q,latitude,longitude, type){
		$(".alert").remove();
		data ={
			"q":"" ,
			"page":0,
			"type":""
		}
		if(q != null){
			data.q = q;
		}

		if(latitude != null){
			data.latitude = latitude;
		}

		if(longitude != null){
			data.longitude = longitude;
		}
		
		if(type != null){
			data.type = type;
		}

		ACC.storefinder.storeSearchData = data;
		ACC.storefinder.getStoreData(data.page);
		$(".js-store-finder").show();
		$(".js-store-finder-pager-prev").attr("disabled","disabled")
		$(".js-store-finder-pager-next").removeAttr("disabled")
	},

	init:function(){
		$("#findStoresNearMe").attr("disabled","disabled");
		if(navigator.geolocation){
			navigator.geolocation.getCurrentPosition(
				function (position){
					geoLocation = true;
					$('.lb-info').html('<b>Veja abaixo as lojas mais próximas de você:</b>');
					ACC.storefinder.coords = position.coords;
					$('#findStoresNearMe').removeAttr("disabled");
					ACC.storefinder.getInitStoreData(null,ACC.storefinder.coords.latitude,ACC.storefinder.coords.longitude, $("select#pointOfServiceType").val());
				},
				function (error)
				{
					geoLocation = false;
					
					switch(error.code)
				    {
				    case error.PERMISSION_DENIED:
				    	$('.lb-info').html('<b>Veja agora todas as lojas do Brasil.<br>Para procurar uma região específica,<br>use o espaço de busca acima.</b>');
				      break;
				    case error.POSITION_UNAVAILABLE: 
				    	$('.lb-info').html('<b>Não foi possível identificar a sua localização exata.<br>Veja abaixo a lista de todas as lojas no Brasil:</b>');
				      break;
				    case error.TIMEOUT:
				    	$('.lb-info').html('<b>Não foi possível identificar a sua localização exata.<br>Veja abaixo a lista de todas as lojas no Brasil:</b>');
				      break;
				    case error.UNKNOWN_ERROR:
				    	$('.lb-info').html('<b>Não foi possível identificar a sua localização exata.<br>Veja abaixo a lista de todas as lojas no Brasil:</b>');
				      break;
				    }

					ACC.storefinder.getInitStoreData(null,ACC.storefinder.coords.latitude,ACC.storefinder.coords.longitude, $("select#pointOfServiceType").val());
					console.log("An error occurred... The error code and message are: " + error.code + "/" + error.message);
				}
			);
		}
	}
};/*
 * Send Facebook script
*/
var isAsmUser = ACC.config.isAsmUser;
ACC.socialMedia = {

	_autoload: [
		"bindSendFacebook"
	],

    bindSendFacebook: function() {

        if (ACC.config.isAsmUser != "true") {
            (function(d, s, id) {
                var js, fjs = d.getElementsByTagName(s)[0];
                if (d.getElementById(id)) return;
                js = d.createElement(s); js.id = id;
                js.src = "//connect.facebook.net/pt_BR/sdk.js#xfbml=1&version=v2.5&appId=1576524369235190";
                fjs.parentNode.insertBefore(js, fjs);
            }(document, 'script', 'facebook-jssdk'));

        }
    }
}
/*
 * Wishlist
 */

ACC.wishlist = {
	_autoload : [
	        "editTitleWishlist","scrollQtdItem",
            [ "wishlistFuncFood", $('.wishlist').length > 0],
			[ "initWishlist", $('.wishlist').length > 0 ],
			[ "initWishlistCarrousel", $('.carousel-component').length > 0 ],
			[ "onChangeWishlist", $('.wishlist').length > 0 ],
			[ "registerCreateBtn", $('.wishlist').length > 0 ],
			[ "loadUserWishlists", $('.wishlist').length > 0 ],
			[ "initProdPageWishlistBtn", $('.btn-whilist-product').length > 0 ],
			[ "loadWishList", $('.wishlist').length > 0 ],
			[ "editTitleWishlist", $('.wishlist').length > 0 ],
			[ "buttonTopScrollWishlist", $('.wishlist').length > 0 ],
			[ "addTokenBuyAll", $('.wishlist').length > 0 ]],


	buttonTopScrollWishlist : function() {
		$(".js-icon-top-wishlist").click(function(){
           $('html, body').animate({scrollTop:0}, 'slow');
        });
	},

	editTitleWishlist : function() {
    		//Botão Editar nome da lista
    		$(".js-enable-edit-title-wishlist").click(function (e){
                  e.preventDefault();
    			   var totalInput = $('#rename').val().length;
    				if(totalInput == 0){
    					$(".js-input-edit-title-wishlist").addClass('js-input-edit-title-wishlist--color');
    					$('.form-check-label').removeClass('monthshopping-border');
    					$(".js-input-edit-title-wishlist").addClass('monthshopping-border');
    					$('#productsSizeList').addClass('display-none');
    					$(".js-enable-edit-title-wishlist").show();
                        $('.js-removeWishlist').show();
    				}
    				if(totalInput > 0){
    					$(".js-input-edit-title-wishlist").removeClass('js-input-edit-title-wishlist--color');
    					$(".wishlist-name-error").addClass('display-none');
    					$('.form-check-label').removeClass('monthshopping-border');
    					$(".js-input-edit-title-wishlist").addClass('monthshopping-border');
    					$('#productsSizeList').addClass('display-none');
    					$(".js-enable-edit-title-wishlist").hide();
    					$('.js-removeWishlist').hide();
    					$('.js-disable-cancel-title-wishlist').show();
    					$('.wishlist-rename-button').show();
                              $('#check-list-all').prop('checked',false);
                               $('.checkbox-product-wishlist').prop('checked',false);
                               $('#check-list-all').prop('disabled', true);
                                $('.checkbox-product-wishlist').prop('disabled',true);

    				}
    				else
    				    $(".monthshopping").addClass('monthshopping-border');
    		    // habilita o campo
    			$(".js-input-edit-title-wishlist").prop("disabled", false);
                  $(".js-input-edit-title-wishlist").addClass('onEditName');
    			$(".js-enable-edit-title-wishlist").addClass("display-none");
    			$(".js-disable-edit-title-wishlist").removeClass("display-none");
    			$(".js-disable-cancel-title-wishlist").removeClass("display-none");
    			$(".js-enable-edit-title-wishlist").addClass("display-none");
    			$(".js-delete-list-wishlist").addClass("display-none");
    			$(".js-input-edit-title-wishlist").attr("data-previous-value",$(".js-input-edit-title-wishlist").val());
    			$(".js-enable-edit-title-wishlist").hide();
                $('.js-removeWishlist').hide();
                $('#add-to-cart').addClass("btn-cancel-wishlist");
                $('#remove-from-list').addClass("btn-cancel-wishlist");
                $('#add-to-cart-rodape').addClass("btn-cancel-wishlist");
                $('#remove-from-list-rodape').addClass("btn-cancel-wishlist");
                ACC.wishlist.initialInputSize();
    			// armazena campo anterior para verificar
    			// quando editar para não exibir modal
    			// se depois de editar só apertar ok
    			// sem mudar o nome
    		});

    		//Botão Ok
    		$(".js-disable-edit-title-wishlist").click(function (e){

                  e.preventDefault();
    	         // desabilita o campo
    			  var totalInput = $('#rename').val().length;
    			  if(totalInput == 0){
    				  $('.wishlist-name-error-caracter').addClass('display-none');
                          ACC.wishlist.addClassOnError();
    				  return;
    			  }
    			  else if(totalInput > 20){
    				  $('.wishlist-name-error-caracter').removeClass('display-none');
                          $('.confirmCancelBtn').addClass('onError');
    				  $('.wishlist-name-error').addClass('display-none');
    				  $('#rename').addClass('js-input-edit-title-wishlist--color');
                          ACC.wishlist.addClassOnError();
    				  return;
    			  }
    			  else{
    				   $('.wishlist-name-error-caracter').addClass('display-none');
    				   $(".js-input-edit-title-wishlist").prop("disabled", true);

               $(".js-input-edit-title-wishlist").removeClass('onEditName');
    				   $(".monthshopping").addClass('monthshopping-border');
    				   $(".monthshopping").removeClass('monthshopping-border');
    				   $(".wishlist-name-error").addClass("display-none");
    				   $(".js-input-edit-title-wishlist").removeClass('js-input-edit-title-wishlist--color');
    				   $('#productsSizeList').removeClass('display-none');
    				   $('#rename').removeClass('js-input-edit-title-wishlist--color');
                       $('.js-disable-cancel-title-wishlist').hide();
                       $('.wishlist-rename-button').hide();
                       $(".js-enable-edit-title-wishlist").show();
                       $('.js-removeWishlist').show();
                       $('#check-list-all').prop('disabled', false);
                       $('.checkbox-product-wishlist').prop('disabled',false);
                       ACC.wishlist.autosizeInput();
    			  }
    		});

    		//Botão Cancelar

    		$(".js-disable-cancel-title-wishlist").click(function (){
              ACC.wishlist.cancelEdit();
            });

    	},
      cancelEdit: function(){
            $(".js-input-edit-title-wishlist").prop("disabled", true);
           $(".js-disable-cancel-title-wishlist").removeClass("display-none");
           $(".js-delete-list-wishlist").removeClass("display-none");
           $(".js-disable-cancel-title-wishlist").addClass("display-none");
           $(".js-disable-edit-title-wishlist").addClass("display-none");
           $(".js-enable-edit-title-wishlist").removeClass("display-none");
           $(".monthshopping").removeClass('monthshopping-border');
           $("#rename").val($("#selectWishlist option:selected" ).val());
           $('.wishlist-name-error').addClass("display-none");
           $(".js-input-edit-title-wishlist").removeClass('js-input-edit-title-wishlist--color');
           $('.wishlist-name-error-caracter').addClass('display-none');
           $('#productsSizeList').removeClass('display-none');
           $(".js-input-edit-title-wishlist").removeClass('onEditName');
           $('.js-disable-cancel-title-wishlist').hide();
           $('.wishlist-rename-button').hide();
           $(".js-enable-edit-title-wishlist").show();
           $('.js-removeWishlist').show();
           $('#check-list-all').prop('disabled', false);
           $('.checkbox-product-wishlist').prop('disabled',false);
           ACC.wishlist.autosizeInput();
      },

	initProdPageWishlistBtn : function() {
		$(".btn-whilist-product").click(function() {
		    try {
                // Create a event to read on piwik tracking
                var event = new CustomEvent('itemAddedToWishList', {"detail": {"productCode" : productCode} });
                document.getElementById("adobeAnalytics").dispatchEvent(event);

            } catch (e) {
                console.error("dispatchEvent events.push", e);
            }
			ACC.wishlist.btnAddProductWishlist();
		});
	},

	btnAddProductWishlist : function() {
		// if user logged{
		ACC.wishlist.showEditModal($("#productCod").val());
		

		// }else
		//{}
	},

     addTokenBuyAll : function() {
             //esperando o elemento existir
              setTimeout(function() {
              $('#buy-all-wishlist-form #CSRFToken').val(ACC.config.CSRFToken);
              }, 1000);
                  //cada mudanca na lista add o token novamente
            $('#selectWishlist').focusout(function () {
               $('#buy-all-wishlist-form #CSRFToken').val(ACC.config.CSRFToken);
            });
       	},

	variantSelectorInit : function() {
		$('.js-variants').change(function() {
//			alert(1);
		});
	},

	initWishlist : function() {
		$('.wishlist-creation-form').ajaxForm(function() {
			ACC.wishlist.createWishlist($("#newWishlistName").val());
		});
		$('#buy-all-wishlist-form').on(
				'submit',
				function(e) {
					$('#buy-all-wishlist-form input[name="wishlist"]').val(
							$("#selectWishlist").val());
				});
	},

	initWishlistCarrousel: function()
	{

		if(ACC.config.isUserLoggedIn === 'true')
		{
			$(".wishlist-logged-in").removeClass("hidden");
			$(".wishlist-not-logged-in").hide();
		} else
		{
			$(".wishlist-not-logged-in").show();
			$(".wishlist-logged-in").hide();

		}
	},

	onChangeWishlist : function() {
		// Cadastro do evento de change para mudar a lista de produtos ao mudas
		// a wishlist selecionada
		$("#selectWishlist").change(function() {
			$("#selectedWishlist").val($("#selectWishlist option:selected" ).val());
			$(".js-input-edit-title-wishlist").val($("#selectWishlist option:selected" ).val());
                  ACC.wishlist.cancelEdit();
			ACC.wishlist.loadWishList();
			ACC.wishlist.autosizeInput();
                  $('#add-cart-list').addClass("btn-cancel-wishlist");
                  $('#add-cart-list').attr('disabled', true);
                  $('#add-to-cart').addClass("btn-cancel-wishlist");
                  $('#remove-from-list').addClass("btn-cancel-wishlist");
                  $('#add-to-cart').attr('disabled', true);
                  $('#remove-from-list').attr('disabled', true);
                  $('#add-to-cart-rodape').addClass("btn-cancel-wishlist");
                  $('#remove-from-list-rodape').addClass("btn-cancel-wishlist");
                  $('#add-to-cart-rodape').attr('disabled', true);
                  $('#remove-from-list-rodape').attr('disabled', true);
		});
	},

    //VERIFICA SE JA EXISTE UMA LISTA COM O NOME PASSADO
    checkWishlistExistence: function() {
       var wishlistName =  $("#newWishlistName").val().trim();

        $.ajax({
            method: "GET",
            url: ACC.config.encodedContextPath + "/minhas-listas/validateListName",
            wishlist: encodeURIComponent(wishlistName),
        }).done(function() {
           //OK?
        }).fail(function() {
            //JA EXISTE WISHLIST COM ESSE NOME - MOSTRAR MENSAGEM
            $("#list-name-error-modal").modal('show');
        });
    },

	//função de criar wishlist utilizada tanto para food quanto para a wishlist normal
	createWishlist: function(wishlist) {
        // Cria lista com o nome dado, caso já exista uma lista com o mesmo nome
        // nada será alterado

        var wishlistTrim = wishlist.trim();

        if(wishlistTrim.length <= 0 || wishlistTrim.length > 30) {
            return;
        }

        if (wishlist == null || wishlist == "") {
            $('#newWishlistName').css("border", "1px solid red");
            $(".help-block").show().css("color", "red");
            return;
        }

        encodedWishlist = encodeURIComponent( wishlist );

        var json = {
            wishlistName: encodedWishlist
        }



        $.ajax({
            url: ACC.config.encodedContextPath + "/minhas-listas/validateListName",
            type: "GET",
            data : {
            wishlistName: encodedWishlist
            },

        }).done(function() {

           $.ajax({
               method: "POST",
               url: ACC.config.encodedContextPath + "/minhas-listas/criarLista",
               data: json,
           }).done(function() {
               $("#modalWishListNewList").modal('show');
              // ACC.wishlist.updateWishlist();
           }).fail(function() {
              $("#modalCriateList").modal('hide');
              $("#list-name-error-modal").modal('show');
              console.log("Erro ao criar nova lista!");
           });

        }).fail(function() {
            //JA EXISTE WISHLIST COM ESSE NOME - MOSTRAR MENSAGEM
            $("#list-name-error-modal").modal('show');
        });

    },

        scrollQtdItem: function() {

                var url = $('#requestURL').val() + "/minhas-listas/lista-ver-mais";

            	 $(document).scroll(function() {

            	    //dont go ahead if the previous ajax doesnt have finished
            	    if($(".doingAjax").length > 0 || $("#wishlistProducts").length == 0){
            	        return;
                    }

            	    var wishlistCode = $("#selectWishlist  option:selected").text();
                    var sizeList = $("#wishlistProducts").val();
             		var elementTop = $('#wishListContent li:last').offset().top;
             		var elementBottom = elementTop + $('#wishListContent li:last').outerHeight();
             		var viewportTop = $(window).scrollTop();
             		var viewportBottom = viewportTop + $(window).height();
             		var isVisible = (elementBottom > viewportTop) && (elementTop < viewportBottom);
             		var validateScroll  = $("#tovalidateScroll").val();



                    if(isVisible &&  validateScroll === "true")
                     {

                       //add ajax flag in order to avoid too many requests
                       $('#wishListContent').addClass("doingAjax");

                       $.ajax({url: url,
                        type: "POST",
                        data :
                        { wishlist: encodeURIComponent(wishlistCode),
                          wishlistSize: sizeList
                        },

                        success: function(data)
                        {
                            $('#wishListContent').html(data);

                        },
                        complete: function(){

                             //remove ajax flag in order to allow the next request
                             $('#wishListContent').removeClass("doingAjax");

                        },
                        error: function(data)
                        {
                        }
                        });
                      }

             	});
            },

    registerCreateBtn: function() {
        // Associa a função de criar lista ao botão
    	$(".btn-create-favorite").click(function() {
    		var qtdInput = $("#newWishlistName").val().length;
    		if(qtdInput > 20){
    			$('.error-qtd-character').removeClass('display-none');
        	}else{
        		$('.error-qtd-character').addClass('display-none');
    		    ACC.wishlist.createWishlist($("#newWishlistName").val());
    		     $('#newWishlistName').val('');
        	}
    	});
    },

	loadUserWishlists : function(wishlist) {
	 setTimeout(function() {
          $("#rename").val($("#selectWishlist option:first").attr("value"));
          		$("#selectWishlist").val($("#selectWishlist option:first").attr("value"));
          		// Carrega os nomes das listas no select
          		if(!ACC.config.CSRFToken){
          			$("#adobeAnalytics").on('dynamicInfoLoaded', function(){
          				ACC.wishlist.loadUserWishlists(wishlist);
          			});
          			return;
          		}

          		if (!wishlist) {
          			wishlist = $("#selectedWishlist").val();
          		} else {
          			$("#selectedWishlist").val(wishlistId);
          		}

          		var wishlistId = $("#selectWishlist").val();
          		var url = $('#requestURL').val() + "/minhas-listas/mostrarListas";
          		$("#selectWishlist").empty();
          		$("#newWishlistName").val("");
          		$("#selectWishlist").load(url, {
          			'wishlist' : wishlistId,
          			'selectedwishlist' : $("#selectedWishlist").val()
          		}, function() {
          			if (!$('#selectWishlist').val() == "") {
          				$("#minhaslistas").removeClass("hidden");
          				$(".whishlist-empty-msg").addClass("hidden");
          				$(".form-check").show();
          			} else {
          				$("#minhaslistas").addClass("hidden");
          				$(".whishlist-empty-msg").removeClass("hidden");
          				$(".form-check").hide();
          			}
          			$("#selectWishlist").val($("#selectWishlist option:selected" ).val());

          		});
        }, 2000);


	},

	loadWishList : function(wishlistId) {
		// Carrega no front os produtos associados a lista
		 setTimeout(function() {
                if(!ACC.config.CSRFToken){
                			$("#adobeAnalytics").on('dynamicInfoLoaded', function(){
                				ACC.wishlist.loadWishList(wishlistId);
                			});
                			return;
                		}

                		if (!wishlistId) {
                			wishlistId = $("#selectedWishlist").val();
                		} else {
                			$("#selectedWishlist").val(wishlistId);
                		}

                		var url = $('#requestURL').val() + "/minhas-listas/listaProdutos";
                		$("#wishlistProductsContent").empty();
                		$("#wishlistProductsContent").load(url, {
                			'wishlist' : encodeURIComponent(wishlistId)
                		}, function() {
                		    $('#check-list-all').prop('checked',false);
                			ACC.wishlist.loadProductButtonsEvents();
                                  ACC.wishlist.addClassOnError();
                		});



                        //Datalayer update
                        $.ajax({
                            method : "POST",
                            url : "/minhas-listas/updateDataLayer",
                            data : {
                                        wishlistName: encodeURIComponent(wishlistId),
                            },
                        }).success(function(response) {
                            dataLayer[0] = JSON.parse(response);
                        }).fail(function() {
                            console.log("error");
                        });
            }, 3000);

	},

    loadProductButtonsEvents: function() {
        // Carrega os eventos de click nos botões para cada produto de uma
        var countProducts = $('#countProducts').val();
        var selectboxName  = $("#wishlistName" ).val();
        $(".js-input-edit-title-wishlist").val($("#selectWishlist option:selected" ).val());
        $( "#js-id-listname" ).append('"'+selectboxName +'"');

        $('#productsSizeList').text('(' + countProducts + ')');
        $("#wishListContent li").each(function(idx, obj) {
            var productid = $(obj).attr('productid')
            var productid_selector = "#wishListContent li[productid='" + productid + "']";
            $(productid_selector + " .btn-edit").click(function() {
                ACC.wishlist.showEditModal(productid);
            });
            $(productid_selector + " .btn-delete").click(function() {
                ACC.wishlist.showDeleteModal(productid);
            });
        });
        if ($("#wishListContent .product").length == 0)
        {
           $(".bt-add-delete, .select-all-wishlist").hide();
        } else {
            $(".bt-add-delete, .select-all-wishlist").show();
        }
        $('.add_to_cart_form').ajaxForm({
            delegation: true,
            success: ACC.minicart.refreshMiniCartCount
        });
    },

	showDeleteModal : function(productid) {
		var wishlist = $('#selectedWishlist').val();
		// alert(wishlist + " " + productid);
		$('#modal-excluir-' + productid).modal('show');
	},

	confirmRemoveProduct : function(wishlist, productCode) {
		// Efetivamente remove o produto da lista
		var json = {
			wishlist : wishlist,
			productCode : productCode
		}
		$.ajax({
			method : "POST",
			url : $('#requestURL').val() + "/minhas-listas/confirmaRemoveProduto",
			data : json,
		}).done(function() {
			$("#modal-excluir-" + productCode).modal('hide');
			$('body').removeClass('modal-open');
			$('.modal-backdrop').remove();

			ACC.wishlist.loadWishList($("#selectedWishlist").val());
		}).fail(function() {
            console.log("Erro ao remover produto" + product + "da lista" + wishlist);
        });
    },

    showEditModal: function(productCode) {
        // Mostra o modal de edição/adição de produto para wishlist
        $('.wishlist-modal').modal('show');
        $('#wishlist_spinner_gif').removeClass('hidden');
        var productid_selector = "#wishListContent li[productid='" + productCode + "']";
        $("#edit-modal-content").empty();
        // Carrega o conteúdo do modal usando o fragment obtido pela request
        var url = $('#requestURL').val() + "/minhas-listas/editaProduto";
        $("#edit-modal-content").load(url, {
            wishlist: $("#selectedWishlist").val(),
            productCode: productCode
        }, function() {
            $('#targetWishlist').change(function() {
                $('#newListName').show();
                // Verifica se a lista será
                // criada no modal
                if ($('#targetWishlist').val() == $('#createNewListOption').val()) {
                    // Mostra o componente para
                    // criar uma nova
                    // lista no modal
                    $('#editModalCreateList').removeClass('hidden');
                } else {
                    $('#editModalCreateList').addClass('hidden');
                    $('#editedList').val($('#targetWishlist').val());
                }
								if (!$('#editModalContent #blankList').is(':selected')){
			                    	$('#editModalContent .btn-salvar').prop('disabled', false);
			                    }

            });

							if ($('#editModalContent .block-variant').text().indexOf('Selecione') > -1 || $('#editModalContent #blankList').is(':selected')){
			                  	 $('#editModalContent .btn-salvar').prop('disabled', true);
			                   }

            ACC.global.styledDropdownBtnPicker();
            $('#edit-modal-content .btn-salvar').click(// Função de salvar confirma a
            // mudança de variante
            // e/ou move o produto para outra
            // lista
            function() {
                if ($('#targetWishlist').val() == $('#createNewListOption').val() && $('#createNewListOption').val()) {
                    // Criar lista antes de
                    // mover/trocar
                    // variante
                    ACC.wishlist.createWishlist($('#createNewList').val());
                    $('#editedList').val($('#createNewList').val());
                } else {
                    $("#editedList").val($('#targetWishlist').val());
													$("#editedList").val($('#targetWishlist').val());
												}

												//Definir produto selecionado
												$("#variant option").each(function(index, value)
												{
													if ($(this).attr('data-voltage') == $("input[name=voltage]").val())
													{
														$("#editedProduct").val($(this).attr('data-code'));
                }

												});

                // Trocar variante/Mover Produto
                $("#saveProductForm").ajaxSubmit({
                    url: $('#requestURL').val() + "/minhas-listas/salvar/produto",
                    type: 'post',
                    success: function() {
                        ACC.wishlist.loadWishList($("#originalList").val());
                    }
                })
                // Encerrar edição
                $('.wishlist-modal').modal('hide');
            });
            $('#wishlist_spinner_gif').addClass('hidden');
        });
    },

	// WISHLIST FOOD FUNCTIONS
	//efetua o update de todos os templates
	updateWishlist: function()
    {
		$.ajax({
            url: ACC.config.encodedContextPath + "/minhas-listas/update",
            type: "POST",
            success: function(data)
            {
               $('#selectWishlist').empty();

                for(var i=0; i<data.length; i++)
                {
                    $('#selectWishlist').
                    append('<option value="' + data[i].name + '">'+ data[i].name + '</option>').attr("selected","selected");
                }
                ACC.wishlist.loadWishList($('#selectWishlist').find('option:selected').val());
       			$(".js-input-edit-title-wishlist").val($("#selectWishlist option:selected" ).val());

                   //verifica se o select esta vazio
                if ($('#selectWishlist option').length == 0) {
				    $(".form-check").hide();
				    $("#minhaslistas").hide();
				} else {
				    $(".form-check").show();
				    $("#minhaslistas").show();
				}
            },
            error: function(data)
            {
            	console.log("Could not retrieve wishlist information.");
            }
        });
    },

    //efetua o update do template de menu
    updateWishlistMenu: function(data)
    {
    	$('.wishlist-menu').empty();

    	var source = $("#wishlist-menu-template").html();
    	var template = Handlebars.compile(source);

    	var context = {
		    result: data
    	};

    	$(".wishlist-menu").append(template(context));
    },

    //efetua o update do template de conteudo
    updateWishlistContent: function(data)
    {
    	$('.contentListFood').empty();

    	var source = $("#wishlist-content-template").html();
    	var template = Handlebars.compile(source);

    	var context = {
		    result: data
        };

    	$(".contentListFood").append(template(context));
    },

    //remover wishlist
    removeWishlist: function(code) {
        $.ajax({
            method: "POST",
            url: ACC.config.encodedContextPath + "/minhas-listas/remover",
            data: {
            		code : code
            }
        }).done(function() {
            ACC.wishlist.updateWishlist();
            $("#modalWishListDelete").modal('show');
            $('#check-list-all').prop('checked',false);
            $('#add-to-cart').addClass("btn-cancel-wishlist");
            $('#remove-from-list').addClass("btn-cancel-wishlist");
            $('#add-to-cart').attr('disabled', true);
            $('#remove-from-list').attr('disabled', true);

            $('#add-to-cart-rodape').addClass("btn-cancel-wishlist");
            $('#remove-from-list-rodape').addClass("btn-cancel-wishlist");
            $('#add-to-cart-rodape').attr('disabled', true);
            $('#remove-from-list-rodape').attr('disabled', true);
        }).fail(function() {
            console.log("Error trying to remove the wishlist with code" + code + "!");
        });
    },

    //renomear wishlist
    renameWishlist: function(code, name) {

        if(name === $(".js-input-edit-title-wishlist").attr("data-previous-value")) { //nesse caso apertou ok sem editar
            return;
        }

        encodedWishlistName = encodeURIComponent( name );

        $.ajax({
            method: "GET",
            url: ACC.config.encodedContextPath + "/minhas-listas/validateListName",
            data : {
              wishlistName: encodedWishlistName
            }
            ,
        }).done(function() {

            $.ajax({
                method: "POST",
                url: ACC.config.encodedContextPath + "/minhas-listas/editWishListName",
                data: {
                    wishListCode : code,
                    newWishListName : encodedWishlistName
                }
            }).done(function() {

                $( "#selectWishlist option:selected" ).empty();
                $( "#selectWishlist option:selected" ).append(name)
                .find('option:selected').attr("selected","selected");
                 $( "#selectWishlist option:selected" ).val(name);
                ACC.wishlist.updateWishListForEdit(name);

            }).fail(function() {
                console.log("Error trying to rename the wishlist with code" + code + "!");
            });

        }).fail(function() {
            $("#list-name-error-modal").modal('show');
            $(".js-input-edit-title-wishlist").val($(".js-input-edit-title-wishlist").attr("data-previous-value")); //volta o valor anterior ja q
                                                                                                                    //a edição não foi concluida
        });

    },

    updateWishListForEdit : function(name)
        {
    		$.ajax({
                url: ACC.config.encodedContextPath + "/minhas-listas/update",
                type: "POST",
                success: function(data)
                {
                    ACC.wishlist.loadWishList(name);
                },
                error: function(data)
                {
                	console.log("Could not retrieve wishlist information.");
                }
            });
        },


    //editar quantidade de produto da wishlist
    updateWishlistQuantity: function(wishlistCode, productCode, quantity, previous, input) {
        $.ajax({
            method: "POST",
            url: ACC.config.encodedContextPath + "/minhas-listas/atualizarQuantidadeProduto",
            data: {
                wishlistCode : wishlistCode,
                productCode : productCode,
                quantity: quantity
            }
        }).done(function() {
            ACC.wishlist.updateWishlist();
        }).fail(function(result) {
        	$('.js-max-quantity-value').text(result.responseJSON);
            $('#max-quantity-error-modal').modal('show');
            input.val(previous);
        });
    },

    //remover produto da lista de wishlist
    removeFromWishlist: function(code, productcodelist, flagRemoveItem, deleteOrigin) {
    	$.ajax({
            method: "POST",
            url: ACC.config.encodedContextPath + "/minhas-listas/excluirProdutosSelecionados",
            data: {
            	productCodes : productcodelist,
    			wishlistCode : code
	    	}
        }).done(function() {

           	if (flagRemoveItem != null) {

           	  $('#add-to-cart').addClass("btn-cancel-wishlist");
              $('#remove-from-list').addClass("btn-cancel-wishlist");
              $('#add-to-cart').attr('disabled', true);
              $('#remove-from-list').attr('disabled', true);

              $('#add-to-cart-rodape').addClass("btn-cancel-wishlist");
              $('#remove-from-list-rodape').addClass("btn-cancel-wishlist");
              $('#add-to-cart-rodape').attr('disabled', true);
              $('#remove-from-list-rodape').attr('disabled', true);

              //Datalayer handling
              var listExcludedProducts;
              if(deleteOrigin == "single")
              {
                  listExcludedProducts = dataLayer[0].productsExcludedButton;
              }
              else
              {
                  listExcludedProducts = dataLayer[0].productsExcludedCheckbox;
              }

              for(i = 0; i < productcodelist.length; i++)
              {
                  for(j = 0; j < dataLayer[0].products.length; j++)
                  {
                      if(dataLayer[0].products[j].sku === productcodelist[i] + "")
                      {
                          listExcludedProducts.push(dataLayer[0].products.splice(j, 1)[0]);
                          break;
                      }
                  }
              }
              //Datalayer handling end

           	  setTimeout(function(){
           	  ACC.wishlist.updateWishlistForProduct();
                   	$(".removing").slideUp(
                   			function(){
                   				$(".removing").remove();
                   			}
                   	);
                   }, 3000  );

           		return;
   			}


        }).fail(function() {
            console.log("Error trying to remove product " + code + " from the wishlist with code " + productcodelist + "!");
            $(".removing").find('.removeFromWishlist').hide();
            $(".removing").removeClass("removing");
        }).always(function(){
            $("#modal-excluir-produto").modal("hide");
            $("#remove-quantity-zero-modal").modal("hide");

        });
    },

    	updateWishlistForProduct: function()
        {
          var wishlistaname =  $('#selectWishlist').find('option:selected').val();

    		$.ajax({
    		    method : "POST",
                url: ACC.config.encodedContextPath + "/minhas-listas/update-for-product",
                  data :
                    {
                      wishListCode: encodeURIComponent(wishlistaname)
                    },

                success: function(data)
                {

                if ($("#wishListContent .product").length == 0)
                {
                   $(".bt-add-delete, .select-all-wishlist").hide();
                } else {
                    $(".bt-add-delete, .select-all-wishlist").show();
                }

                  $('#check-list-all').prop('checked',false);
                  $('#wishListContent').empty();
                  $('#countProducts').remove();

                  $('#wishListContent').html(data);
                  var countProducts = $('#countProducts').val();
                  $('#productsSizeList').text('(' + countProducts + ')');

                  var selectboxName  = $("#wishlistName" ).val();
                  $( "#js-id-listname" ).append('"'+selectboxName +'"');

                  var buttons = $(".bt-add-delete, .select-all-wishlist");

                   if (countProducts == 0){
                   buttons.hide();
                   } else {
                   buttons.show();
                   }

                },
                error: function(data)
                {
                	console.log("Could not retrieve wishlist information.");
                }
            });
        },

    //adicionar todos os produtos da wishlist ao carrinho
    addWishlistToCart: function(code) {
        $.ajax({
            method: "POST",
            url: ACC.config.encodedContextPath + "/minhas-listas/comprarTodosProdutos",
            data: {
                wishlistCode : code
            }
        }).done(function(data) {
        	ACC.minicart.refreshMiniCartCount();
        }).fail(function() {
            console.log("Error trying to add all products of wishlist with code " + code + "!");
        });
    },

    //adicionar produtos selecionados ao carrinho
    addSelectedProductsToCart: function(code, productcodelist) {
        $.ajax({
            method: "POST",
            url: ACC.config.encodedContextPath + "/minhas-listas/comprarProdutosSelecionados",
            data: {
                productCodes : productcodelist,
                wishlistCode : code
            }
        }).done(function(data) {
        	ACC.minicart.refreshMiniCartCount();
             //Datalayer handling
            for(i = 0; i < productcodelist.length; i++)
            {
                for(j = 0; j < dataLayer[0].products.length; j++)
                {
                    if(dataLayer[0].products[j].sku === productcodelist[i] + "")
                    {
                        dataLayer[0].productsAddedToCart.push(dataLayer[0].products[j]);
                        break;
                    }
                }
            }

        }).fail(function() {
            console.log("Error trying to add products " + productcodelist + " to Cart from the wishlist with code " + code + "!");
        });
    },

    //validar estoque de produtos selecionados
    checkSelectedProductsStock: function(code, productcodelist) {
        $.ajax({
            method: "POST",
            url: ACC.config.encodedContextPath + "/minhas-listas/checkStock",
            data: {
                productCodes : productcodelist,
                wishlistCode : code
            }
        }).done(function(data) {
        	ACC.wishlist.addSelectedProductsToCart(code, productcodelist);
        }).fail(function(error) {
        	ACC.wishlist.showStockModal(error.responseJSON, code, false);
        });
    },

    //validar estoque de toda wishlist
    checkWishlistStock: function(code) {
        $.ajax({
            method: "POST",
            url: ACC.config.encodedContextPath + "/minhas-listas/checkStock",
            data: {
                wishlistCode : code
            }
        }).done(function(data) {
        	ACC.wishlist.addWishlistToCart(code);
        }).fail(function(error) {
        	ACC.wishlist.showStockModal(error.responseJSON, code, true);
        });
    },

    //exibir modal de estoque
    showStockModal: function(result, code, buyall) {

    	$('#modal-stock-submit-button').data('buyall', buyall);
    	$('#modal-stock-submit-button').data('code', code);

    	$("#modal-no-stock-products").empty();

    	$('#modal-no-stock-body').addClass('hidden');

    	var source = $("#wishlist-product-template").html();
    	var template = Handlebars.compile(source);

    	$.each(result, function(i, value) {
	    	$("#modal-no-stock-products").append(template(value));
    	});


    	if ($('#modal-no-stock-products li').length != 0)
    	{
    		$('#modal-no-stock-body').removeClass('hidden');
    	}

    	$('#wishlist-stock-modal').modal('show');
    },

    //habilita editar da wishlist
    editWishlist: function(code) {

    	$('#editButton' + code).addClass('hidden');
    	$('#editButtonMobile' + code).addClass('hidden');
    	$('#wishlistResult' + code).addClass('hidden');
    	$('.js-cornerDelete' + code).addClass('hidden');

    	$('#cancelEditButton' + code).removeClass('hidden');
    	$('#cancelEditButtonMobile' + code).removeClass('hidden');
    	$('.js-cornerSelect' + code).removeClass('hidden');
    	$('#wishlistEditMenu' + code).removeClass('hidden');
    },

    //cancela editar da wishlist
    cancelWishlistEdit: function(code) {
    	$('#editButton' + code).removeClass('hidden');
    	$('#editButtonMobile' + code).removeClass('hidden');
    	$('#wishlistResult' + code).removeClass('hidden');
    	$('.js-cornerDelete' + code).removeClass('hidden');

    	$('#cancelEditButton' + code).addClass('hidden');
    	$('#cancelEditButtonMobile' + code).addClass('hidden');
    	$('.js-cornerSelect' + code).addClass('hidden');
    	$('#wishlistEditMenu' + code).addClass('hidden');

    	$('li').removeClass('wishListContentFood__product--border-blue');
    	$('.js-blue-check').attr('checked', false);
    },

    //habilita accordion
    initAccordion: function() {
        $('.expand').click();
    	$('.expand').each(function() {
        	$(this).find(">:first-child").text("-");
        });
    },



	wishlistFuncFood: function(){

		//botão de remover no menu da wishlist
    	$(document).on('click', '.wishlist-remove-button', function() {
    	var wishlistcode = $("#wishlistCode").val();
    	var wishlistname = $("#wishlistName").val();
        $('#modalLabelName').text(wishlistname);
            ACC.wishlist.removeWishlist(wishlistcode);
        });

    	//botão de adicionar produto ao carrinho no editar da wishlist
		$(document).on('click', '.js-wishlist-add-selected', function() {
			var code = $(this).data('code');
			if ($('.accordion-food').find('.checkbox-food-product:checked').size() > 0)
			{
				$('#modal-add-select-products' + code).modal('show');
			}
    	});

		//botão de adicionar do modal de adicionar produto ao carrinho
		$(document).on('click', '.wishlist-additemstocart-button', function() {
			var code = $(this).data('code');
            var productlist = [];
            $('.accordion-food').find('.checkbox-food-product:checked').each(function(){
               productlist.push("" + $(this).data('code') + "");
            });
            ACC.wishlist.checkSelectedProductsStock(code, productlist);
    		$('div[id*="modal-add-select-products"]').modal('hide');
        });

		//botão de adicionar todos os produtos ao carrinho
		$(document).on('click', '.js-buy-all-wishlist', function() {
            var code = $(this).data('code');
            ACC.wishlist.checkWishlistStock(code);
            $('div[id*="modal-add-carrinho"]').modal('hide');
        });

		//botão de adicionar ao carrinho no modal de validação de estoque
		$(document).on('click', '.wishlist-buyitems-button', function() {
		if ($('#wishListContent').find('.select-checkbox-product:checked').size() > 0) {
            var wishlistcode = $("#wishlistCode").val();
            var productcodes = [];
            $('#wishListContent').find('.select-checkbox-product:checked').each(function(){
            	productcodes.push($(this).closest("li").attr("productId"));
            });
            	ACC.wishlist.addSelectedProductsToCart(wishlistcode, productcodes);
            }
        });

        //validacao do checkbox de produto para esmaecer os botoes de compra e exclusao
        $(document).on('click', '.checkbox-product-wishlist', function () {

            var ischecked =  $('.checkbox-product-wishlist:checked').is(":checked");

              if (ischecked) {
               $('#add-to-cart').removeAttr('disabled');
               $('#remove-from-list').removeAttr('disabled');
               $('#add-to-cart').removeClass("btn-cancel-wishlist");
               $('#remove-from-list').removeClass("btn-cancel-wishlist");

               $('#add-to-cart-rodape').removeAttr('disabled');
               $('#remove-from-list-rodape').removeAttr('disabled');
               $('#add-to-cart-rodape').removeClass("btn-cancel-wishlist");
               $('#remove-from-list-rodape').removeClass("btn-cancel-wishlist");

          } else {
              $('#add-to-cart').addClass("btn-cancel-wishlist");
              $('#remove-from-list').addClass("btn-cancel-wishlist");
              $('#add-to-cart').attr('disabled', true);
              $('#remove-from-list').attr('disabled', true);

              $('#add-to-cart-rodape').addClass("btn-cancel-wishlist");
              $('#remove-from-list-rodape').addClass("btn-cancel-wishlist");
              $('#add-to-cart-rodape').attr('disabled', true);
              $('#remove-from-list-rodape').attr('disabled', true);
          }

        });

        //validacao do checkbox selecionar todos para esmaecer os botoes de compra e exclusao
        $(document).on('click', '#check-list-all', function () {
            if ($(this).is(':checked')) {
                $('#add-to-cart').removeAttr('disabled');
                $('#remove-from-list').removeAttr('disabled');
                $('#add-to-cart').removeClass("btn-cancel-wishlist");
                $('#remove-from-list').removeClass("btn-cancel-wishlist");

               $('#add-to-cart-rodape').removeAttr('disabled');
               $('#remove-from-list-rodape').removeAttr('disabled');
               $('#add-to-cart-rodape').removeClass("btn-cancel-wishlist");
               $('#remove-from-list-rodape').removeClass("btn-cancel-wishlist");

            } else {
                $('#add-to-cart').addClass("btn-cancel-wishlist");
                $('#remove-from-list').addClass("btn-cancel-wishlist");

                $('#add-to-cart').attr('disabled', true);
                $('#remove-from-list').attr('disabled', true);

              $('#add-to-cart-rodape').addClass("btn-cancel-wishlist");
              $('#remove-from-list-rodape').addClass("btn-cancel-wishlist");
              $('#add-to-cart-rodape').attr('disabled', true);
              $('#remove-from-list-rodape').attr('disabled', true);
            }
        });

        // funcao que marca/desmarca check box all caso todos estejam marcados/desmarcados
        $(document).on('click', '.checkbox-product-wishlist', function() {
            $('#check-list-all').prop('checked',false);
            var checked = $("[type='checkbox']:checked").length;

            if ($('#wishListContent').find('.select-checkbox-product').length === checked) {
                     $('#check-list-all').prop('checked',true);
                }
            });

		//botão de renomear no menu da wishlist
        $(document).on('click', '.wishlist-rename-button', function() {
    	    var wishlistcode = $("#wishlistCode").val();
        	var value = $('#rename').val();
                if(value.length == 0)
                 {
            	$('#rename').addClass('js-input-edit-title-wishlist--color');
                $('.wishlist-name-error').removeClass('display-none');
                return;
                 }

            else if(value.length > 0 && value.length <= 20)
                {
            	$('#rename').removeClass('js-input-edit-title-wishlist--color');
            	ACC.wishlist.renameWishlist(wishlistcode, value);
            }
            else if(value.length > 20)
                {
            	return;
                }
        });

        //botão de editar no menu da wishlist
    	$(document).on('click', '.wishlist-edit-button', function() {
    		var code = $(this).data('code');
            ACC.wishlist.editWishlist(code);
            $('.overlay').click();
        });

        //Remover WishList
              $('.js-removeWishlist').on('click', function() {
                var code = $("#wishlistCode").val();
                    ACC.wishlist.removeWishlist(code);
                });

      //funÃ§Ã£o para popular produtos selecionados em uma lista no editar da wishlist
      (function( $ ){
            $.fn.addProductToModal = function(target_modal_id, target_ul_id, productid, emptylist) {
                 if(emptylist) $("#"+target_modal_id).find("#"+target_ul_id).empty();
                 $(this).find('li[productid="'+productid+'"]').each(function(){
                     var target_li_content = '<li data-productid="'+productid+'" class="list-modal-excluir">';
                     target_li_content = target_li_content + '<div class="col-xs-3 col-sm-3 col-md-3 image">' + $(this).find('.image').html() + '</div>';
                     target_li_content = target_li_content + '<div class="col-xs-6 col-sm-6 col-md-6 name">' + $(this).find('.name').html() + '</div>';
                     target_li_content = target_li_content + '<div class="col-xs-3 col-sm-3 col-md-3 price">' + $(this).find('.price').html() + '</div>';
                     target_li_content = target_li_content + "</li>";
                     $("#"+target_modal_id).find("#"+target_ul_id).append(target_li_content);
                 });
            };
         })( jQuery );

    	//botão remover produto especifico da wishlist
    	$(document).on('click', '.js-remove-from-list', function() {
    	    var wishlistcode = $("#wishlistCode").val();
    		var productcode = [$(this).find('.js-remove-from-product').data('productcode')];
    		$(this).closest('li').addClass("removing").find('.container-delete-icon-effect').show();
    		ACC.wishlist.removeFromWishlist(wishlistcode, productcode, true, "single");
        });

    	//botão de cancelar editacao no menu da wishlist
    	$(document).on('click', '.wishlist-cancel-edit-button', function() {
            var code = $(this).data('code');
    		ACC.wishlist.cancelWishlistEdit(code);
        });

    	//botão de remover produtos selecionados
    	$(document).on('click', '.wishlist-deleteitems-button', function() {
            if ($('#wishListContent').find('.select-checkbox-product:checked').size() > 0) {
            	var wishlistcode = $("#wishlistCode").val();
            	var productcodes = [];
            	$('#wishListContent').find('.select-checkbox-product:checked').each(function(){
            	    productcodes.push($(this).closest("li").attr("productId"));
            	    $(this).closest('li').addClass("removing").find('.container-delete-icon-effect').show();
                });
                ACC.wishlist.removeFromWishlist(wishlistcode, productcodes,true, "multiple");
        	}
        });

        //checkbox para selecionar todos da lista ou remove-los
        $(document).on('click', '#check-list-all', function() {
            if($(this).is(":checked")){
                $('#wishListContent').find('.select-checkbox-product').prop('checked',true);
            }else{
                $('#wishListContent').find('.select-checkbox-product').prop('checked',false);
            }

         });

    	//botão de remover produto da wishlist do modal de remoção
    	$(document).on('click', '.wishlist-remove-product-button', function() {
            var code = $(this).data('code');
            var productlist = [];
            $("#wishListContentFood-modal-excluir-produto").find('li').each(function(){
                productlist.push("" + $(this).data('productid') + "");
            });
            ACC.wishlist.removeFromWishlist(code, productlist, "modal");
        });

    	//botão de selecionar lista no mobile
        $(document).on('click', '.list-food-mobile', function() {
    		var valueList = $(this).text();
            ACC.wishlist.loadWishList(valueList);
            $('.menuWishlistMobile').addClass('hidden');
            if ($('.menuWishlistMobile').hasClass('hidden')){
        		$('.wishlistFood').show();
        	}
    	});

        //botão voltar para menu mobile
        $(document).on('click', '.voltarMenu', function(){
        	$('.menuWishlistMobile').removeClass('hidden');
        	$('.wishlistFood').hide();
        });

        //habilita menu de edição das listas
        $('.js-edit-button-hide').addClass('hidden');
        $(document).on("click", ".js-editButton", function() {
        	var code = $(this).data('code');
        	$('#editListButtons' + code).toggleClass('hidden');
        	$('.overlay').toggle();
        });

        //habilita menu de edição das listas no mobile
        $(document).on("click", ".js-editButtonMobile", function() {
        	var code = $(this).data('code');
        	$('#editListButtonsMobile' + code).toggleClass('hidden');
        	$('.overlay').toggle();
        });

        //input de atualizar quantidade de um produto na wishlist
        (function () {

        	var previous;
        	var productCode;
        	var wishlistCode;
        	var input;

        	//habilita gravar quando mudar o campo quantidade
            $(document).on("focus", ".js-wishlist-quantity-update", function() {
        		previous = $(this).val();
	        	productCode = $(this).data('code');
	            wishlistCode = $(this).data('wishlistcode');
	            quantity = $(this).val();
	            input = $(this);
            });

            //habilita gravar quando mudar o campo quantidade
            $(document).on("change", ".js-wishlist-quantity-update", function() {
            	var clickListActive= '#wishlist_' + $(this).attr('data-wishlistcode');
            	var quantity = $(this).val();

                if (quantity < 1)
            	{
                	$(this).closest("ul").addProductToModal("modal-excluir-produto", "wishListContentFood-modal-excluir-produto", productCode, true);
            		$("#remove-quantity-zero-modal").find(".wishlist-remove-product-button").data('code', wishlistCode);
            		$("#remove-quantity-zero-modal").modal("show");
            	}
                else
            	{
                	ACC.wishlist.updateWishlistQuantity(wishlistCode, productCode, quantity, previous, input);
            	}
            });

            //retorna valor anterior ao input
            $(document).on("click", ".js-modal-excluir-cancelar", function() {
            	if (input.val() < 1)
            	{
            		input.val(previous);
            	}
            });

        })();

        //overlay
        $(document).on('click', '.overlay', function(){
        	$(this).hide();
    		$('.menu-edit-food').each(function (){
    			if (!$(this).hasClass('hidden'))
				{
    				$(this).addClass('hidden')
				}
    		});
    	});

        //hide overlay
        $(document).on('click', '.clickModal', function(){
        	$('.menu-edit-food').each(function (){
    			if (!$(this).hasClass('hidden'))
				{
    				$(this).addClass('hidden')
				}
    		});
    		$('.overlay').toggle().hide();
    	});

        //função accordion
        $(function() {
    	 	$(document).on("click", ".expand", function() {
    	 		$expand = $(this).find(">:first-child");
    	 		if($expand.text() == "-") {
    	 			$expand.text("+");
    	 		} else {
    	 			$expand.text("-");
    	 		}
    	 	});
        });

        //selecionar produto no editar da wishlist
        $(document).on('click', '.js-blue-check', function(){
        	$(this).parents('.wishListContentFood__product').toggleClass('wishListContentFood__product--border-blue');
        	if($(this).hasClass('wishListContentFood__product--border-blue')){
        		$(this).removeClass('wishListContentFood__product--border-grey');
        	}
        });

        //esconder header e busca do site quando o menu fixo do mobile estiver visível
        $('.menu-mobile-fixo').hide()
        $('.list-food-mobile').on('click', function() {
            $('.menu-mobile-fixo').show();
            if($('.menu-mobile-fixo').css('display') == 'block'){
            	$('.search-box-mobile-food').hide();
            	$('.header-food').hide();
            }
        });
        $('.voltarMenu ').on('click', function() {
            $('.menu-mobile-fixo').hide();
            if($('.menu-mobile-fixo').css('display') == 'none'){
            	$('.search-box-mobile-food').show();
            	$('.header-food').show();
            }
        });

        $('#newWishlistName').on('keyup', function(e){

          e.preventDefault();
          if($(this).val().length > 0 )
          {
           $("#createNewWishList").removeClass("btn-cancel-wishlist");
           $("#createNewWishList").removeAttr("disabled");
          }
          else
          {
           $("#createNewWishList").addClass("btn-cancel-wishlist");
           $("#createNewWishList").attr('disabled', true);;
          }

        });

        $('#newWishlistName').on('keypress', function(e){
            $(".wishListExistingName").hide();
        });


      //esconde menu editar quando a lista estÃ¡ vazia
        $(function() {
          $('.tab-pane-food').each(function(){
            if($(this).find('.wishListContentFood__product').length >= 1) {
              $(this).find('.js-edit-button-hide').removeClass('hidden');
            }
          });
        });


	},

      initialInputSize: function(){
            windowSize = $(window).width();
            $("#rename").width(300);
            if(windowSize < 400){
            $("#rename").width(230);
            }
      },

	//autosize input on edit

      autosizeInput: function(){


            var inputSize = 13.3;
            var inputMobile = 10.2;


            $("#rename").innerWidth($("#rename").val().length * inputSize + 5);


            windowSize = $(window).width();
            if(windowSize < 400){
            $("#rename").width($("#rename").val().length * inputMobile);
            }




},
        addClassOnError: function(){
             window.onload = function(){
                  ACC.wishlist.autosizeInput();
                  productsSize = $('#productsSizeList').text();
                  formatSize = productsSize.replace('(','').replace(')','');
                  if(formatSize == "0"){
                        $('.form-check').addClass('emptyList');
                        $('.select-all-wishlist').hide();
                  } else if(formatSize > 0){
                        $('.wishlist-name-error').addClass('notEmptyError');
                        $('.wishlist-name-error-caracter').addClass('notEmptyError');
                        $('.confirmCancelBtn').addClass('hasCheckBox');

                  }



            }

            productsSize = $('#productsSizeList').text();
            formatSize = productsSize.replace('(','').replace(')','');
            if(formatSize > 0){
                  $('.confirmCancelBtn').addClass('hasCheckBox');
                  $('.form-check').removeClass('emptyList');
                  $('.wishlist-name-error').addClass('notEmptyError');
                  $('.wishlist-name-error-caracter').addClass('notEmptyError');
            } else{
                  $('.confirmCancelBtn').removeClass('hasCheckBox');
                  $('.form-check').addClass('emptyList');
                  $('.wishlist-name-error').removeClass('notEmptyError');
                  $('.wishlist-name-error-caracter').removeClass('notEmptyError');
            }
      },


};
/*
 * Buy Later
 *
 */
ACC.buylater = {
    _autoload: ["createBuyLaterList"],

    createBuyLaterList: function() {

        var productCode = 0;
        
        $(document).on("click", ".btn-create-buy-later-list", function(){
        	productCode = $(this).attr("data-product-code");
        	var entryNumber = $(this).attr('id').split("_");
            ACC.buylater.createBuyLaterWishlist(productCode, entryNumber[1]);
           
        });
    },
    
    removeItemCart: function(productCode, entryNumber) {
    	
        
        ACC.cartitem.removeCartItem(productCode, entryNumber);
    	
    },    

	createBuyLaterWishlist: function(productCode, entryNumber) {
		
		var modalDiv = $('.modal');
        var json = {
    		productCode: productCode
        }
        $.ajax({
            method: "POST",
            url: $('#requestURL').val() + "/minhas-listas/comprarMaisTarde",
            data: json,
        }).done(function() {
        	var wishlist = "Comprar depois";
            ACC.wishlist.loadUserWishlists(wishlist);
            ACC.wishlist.loadWishList(wishlist);
            ACC.buylater.removeItemCart(productCode, entryNumber);
            $('.modal').modal('hide');
        }).fail(function() {
            console.log("Erro ao criar nova lista!");
            $('.modal').modal('hide');
        });
    }
};/*
* Stamp
*/

ACC.stamp = {

	_autoload: [
		"bindstamp",
		"changeProdSize"
	],

	bindstamp: function()
	{
	$(".list-stamp-product-mobile li:last-child").addClass("last");
},

 changeProdSize: function(){

  windowSize = $( window ).width();


   if(windowSize >= 1199){

	 if($('#hasStamp') != null){
		actualHeight =	$('.crf-prd-card').height();
		 plus = 30;
		 $('.crf-prd-card').height(actualHeight + plus);
	 }

	 }


 }
}
/*
 * Já tenho 
*/

ACC.jatenho = {

	_autoload: [
		"bindjatenho"
	],

	bindjatenho: function ()
	{
		$(".blockModaljatenho").click (function ()
		{
			 if(isUserLogged) {
			     $('.block-disable').removeClass('block-disable') .addClass('block-enable');
			     $('.close-modal').on('click',function(c) {
					 $('.block-enable').addClass('block-disable');
				 });			 
				 $('a').click( function(event) {
					
					 ACC.tabs.showReviewsAction('reviews');
					 event.preventDefault();
					 
					/* var hash = $(this).attr('href');
					  var offset = $(hash).offset();
					  if (offset) {
					    $('html, body').animate({ scrollTop: offset.top }, 'slow');
					    location.hash = hash;
					    return false;
					  }*/
					 
				 });
				 
			 } else {
				 
				 $('.block-disable').removeClass('block-disable').addClass('block-enable');

				 $('a').click( function() {
					 $(location).attr('href', loginUrl);
				 })
				 
				 $('.close-modal').on('click',function(c) {
					 $('.block-enable').addClass('block-disable');
				 })
				 
				 
				} 
		})
	}
};/*
 * Payment
*/

ACC.productPayment = {

	_autoload: [
		"regulationCart",
		"cartPayments"
	],
	
	regulationCart: function ()
	{
		$('.block-regulation-text').hide();
		$('.block-regulation').click (
		 function () {
			$('.block-regulation-text').toggle();
			$('.close-modal').on('click',function(c) {
				 $('.block-regulation-text').hide();
			 })
		 }
	  )
	},

	cartPayments: function ()
	{
		$('.block-cart-form').hide();
		$('.block-payment').click (
		 function () {
			$('.block-cart-form').toggle();
			$('.close-modal').on('click',function(c) {
				 $('.block-cart-form').hide();
			 })
		 }
		)
	}
};/*
 * Avisa me
*/

ACC.avisame = {

	_autoload: [
		"bindAvisame",
		"bindAviseMeValidation"
	],

	bindAvisame: function ()
	{
			if(ACC.config.isUserLoggedIn === 'true')
    		{
    			$(".block-avisame-no-variant").hide();
    		} else
    		{
    			$(".block-avisame-logado-variant").hide();
    		}
		$("#aviseMeForm, #aviseMeFormLogged").ajaxForm({success: ACC.avisame.handleAviseMeSuccess});
	},

	handleAviseMeSuccess: function(response){
		var  object =  JSON.parse(response);

		   if(object.aviseme[0].status === "fail")
		   {
		      if(object.aviseme[0].duplicated = true)
		    	{
		    	  $("#emailjacadastradoAviseme").show();
            $("#feedbackAviseme").hide();
		    	  $(".js-avise-me").hide();
		    	}
		   }else if(object.aviseme[0].status === "Ok"){
			   $("#feedbackAviseme").show();
			   $("#emailjacadastradoAviseme").hide();
		     $(".js-avise-me").hide();
		   }
	},

	bindAviseMeValidation: function(response){

		$('#inputAvisameNameAnonymous').keyup(function(){
			$('#avisemeName').removeClass('has-error');
			$('#avisemeNameError').addClass('hidden');
		});

		$('#inputAvisameEmailAnonymous').keyup(function(){
			$('#avisemeEmail').removeClass('has-error');
			$('#avisemeEmailError').addClass('hidden');
		});

		$('#submitAvisemeForm').click(function(){

			var name = $('#inputAvisameNameAnonymous').val();
			var email = $('#inputAvisameEmailAnonymous').val();
			var valid = true;

			if(name == "")
			{
				$('#avisemeName').addClass('has-error');
				$('#avisemeNameError').removeClass('hidden');
				valid = false;
			}

			if(email == "")
			{
				$('#avisemeEmail').addClass('has-error');
				$('#avisemeEmailError').removeClass('hidden');
				valid = false;
			}

			if(valid)
			{
				$('#aviseMeForm').submit();
			}

		});
	}

}
 /*
 * Delivery Cost
 */
ACC.deliveryCost = {

    _autoload: [
        "deliveryCalc",
        "bindZipCodeNotFound",
        "toggleCartShippingInfo",
        "disableDefaultSubmit",
        "aboutDeliveryModalTrigger",
        "deliveryHideBlockDelivery",
        "showBoxFrete",
        "toggleResumeCart",
        "getThePriceTotal",
        "validateContinueButton"
    ],

    deliveryHideBlockDelivery: function () {
      $(document).on("click", "#close-delivery-block-product", function(){
    	  $( "#block-view-delivery" ).toggle();
      });
    },

    getThePriceTotal: function () {
    	$('#SpanValueFormatted,.SpanValueFormatted').each(function(){
                     var decimalValue = $.trim($(this).text()).slice(-3);
                     var oldHtml = $(this).html();
                     $(this).empty();
                     $(this).html(function(){
                         var newHtml = oldHtml.split('R$').join("<span class='smallcaps'>R$</span>");
                         newHtml = newHtml.split(decimalValue).join("<span class='smallcaps'>"+decimalValue+"</span>");
                         return newHtml;
                     });
                 });

                $('.voucher-box--new + .cart-total-box').show();
      },


    toggleResumeCart: function(){
		function toggleBoxCloser (container){
        			var toggleBox =$('.calc-shipping-box__seta', container);
        			toggleBox.find('span').toggleClass('crficon-caret-down').toggleClass('crficon-caret-up');
        			$('.calc-shipping-box__container', container).slideToggle('fast');
        			if ($('.calc-shipping-box__seta', container).find('span').hasClass('crficon-caret-down')){
        				$('.calc-shipping-box', container).addClass('calc-shipping-box--selected');
        			}else {
        				 $('.calc-shipping-box', container).removeClass('calc-shipping-box--selected');
        			}
        		}

        		$(document).on("click", ".calc-shipping-box__cep", function(){
        			var container = $(this).closest(".cart-summary-container");
        			toggleBoxCloser(container);
        		});
	},

    showBoxFrete:function(){
    	$(document).on("click", "#showFrete", function(){
    		$('.block-mobile-tab-delivery').removeClass('hidden');
    		$('.bt-mobile-tab-delivery').addClass('hidden');
    	});
    },

    deliveryCalc: function () {
        $('#block-not-deliver, #block-view-delivery').hide();

        $(document).on("click", "#btn-calc-delivery, .btn-calc-other-cep", function(){
        	$("#btn-calc-delivery").prop('disabled', true);
        	$("#site-loader").show();

          if($("#inputCepView, #inputCepCart").val().length > 0) {
              postalCode = $("#inputCepView, #inputCepCart").val();
              $("#inputCep").val('');
            }
        	else
        	{
        		postalCode = $("#inputCep").val();
        	}

          $("#tableProductDelivery tbody").empty();
          $("#correiosInformation").empty();

          $.ajax({
              url: ACC.url.addressSearchByCepUrl,
              method: "GET",
              data: {
                  zipCode: postalCode
              }
          }).done(function (response) {
            	var info = (response.data.end != null ? (response.data.end + ' - ') : '') + (response.data.bairro != null ? (response.data.bairro + ', ') : '') + response.data.cidade + ' – ' + response.data.uf;

              $("#correiosInformation").html(info);
              $('.calc-shipping-box__cep').click();
              ACC.deliveryCost.getDeliveryCosts(postalCode);

          }).fail(function (response) {
            	$("#btn-calc-delivery").prop('disabled', false);
            	$("#site-loader").hide();
            	$('#block-not-found-cep').modal('show');
            	$('.postalCode-error-msg').find('small').text('CEP não encontrado. Confira o número digitado ou clique em "Não sei o CEP".').show();
            });
        });
    },

    getDeliveryCosts: function (postalCode) {
    	$.ajax({
            url: deliveryCalculatorUrl,
            method: "GET",
            data: {
                zipCode: postalCode,
                productCode: $('#productCod').val(),
                productQTY: $('.pdpAddtoCartInput').val(),
                pageType: $('#pageType').val()!=undefined ? $('#pageType').val() : null
            }
        })
        .done(function (response) {
            var detailreturn = JSON.parse(response);

            ACC.deliveryCost.mktpPdpDeliveryErrorMessages(detailreturn.deliveryModes);

            $("#btn-calc-delivery").prop('disabled', false);
            $("#site-loader").hide();

            var table;
            ACC.productDetail.cleanTargetOfferValid();
            for(var i=0; i< detailreturn.deliveryModes.length;i++) {
                $('#block-view-delivery').show();

                var diasText = '';

                if(detailreturn.deliveryModes[i].estimatedDays > 1){
                	diasText = ' dias úteis';
                } else{
                	diasText = ' dia útil'
                }

                table = "<tr>";
                table += "<td>"+ detailreturn.deliveryModes[i].name +"</td>";

                if(detailreturn.deliveryModes[i].name == "Agendada") {
                    table += "<td> A agendar </td>";
                } else if (detailreturn.deliveryModes[i].name == "Click&Retire") {
                    if (detailreturn.deliveryModes[i].estimatedMinutes > 0) {
                        var hours = detailreturn.deliveryModes[i].estimatedMinutes > 60 ? ' horas' : ' hora';
                        table += "<td>A partir de " + formatDeliveryMinutesToHour(detailreturn.deliveryModes[i].estimatedMinutes) + hours + "</td>";
                    } else {
                        var days = detailreturn.deliveryModes[i].estimatedDays > 1 ? ' dias' : ' dia';
                        table += "<td>A partir de " + detailreturn.deliveryModes[i].estimatedDays + days + "</td>";
                    }
                } else {
                    table += "<td>"+ detailreturn.deliveryModes[i].estimatedDays + diasText +"</td>";
                }

                if (detailreturn.deliveryModes[i].name == "Click&Retire") {
                    table += "<td>Valor a partir de " + detailreturn.deliveryModes[i].price + "</td>";
                } else {
                    table += "<td>" + detailreturn.deliveryModes[i].price + "</td>";
                }

                table += "</tr>";

                $("#tableProductDelivery tbody").append(table);

                $('.js-days-delivery:eq('+ i +')').text(detailreturn.deliveryModes[i].estimatedDays + diasText);

                if($('.send-results').hasClass('list-offer-by-box')) {
                	$('#block-view-delivery').hide();
                	ACC.productDetail.updateListOffer(
    	        		detailreturn.deliveryModes[i].name,
    	        		detailreturn.deliveryModes[i].estimatedDays + diasText,
    	        		detailreturn.deliveryModes[i].price,
                        detailreturn.deliveryModes[i].doublePrice
            		);
                }
            }

            ACC.productDetail.ordinationListOffer();

            if(detailreturn.deliveryModes.length <= 0 )
            {
                $('.block-desk-tab-delivery').show();
                $("#inputCepView").val('');
                $('#block-not-delivery-cep').modal('show');
                $('.postalCode-error-msg').find('small').text('Não atendemos esta região. Consulte um novo CEP.');
                $('#valueSpan').removeClass('calc-shipping-box__total--sucess');

            }

            function formatDeliveryMinutesToHour (minutes) {
                return Math.ceil(minutes / 60);
            }
        })
        .fail(function (response) {

          $("#btn-calc-delivery").prop('disabled', false);
        	$("#site-loader").hide();

        });
},

    mktpPdpDeliveryErrorMessages: function (deliveryModes) {
        if($('.send-results').hasClass('list-offer-by-box')) {
            ACC.deliveryCost.mktpDeliveryErrorMessagesBuyBox(deliveryModes);
        } else {
            ACC.deliveryCost.mktpDeliveryErrorMessagesSingle(deliveryModes);
        }
    },

    mktpDeliveryErrorMessagesSingle: function(deliveryModes) {
        if (deliveryModes.length == 0) {
            $('#tableProductDelivery').addClass('hidden');
            $('#block-delivery-container-right').addClass('hidden');
            $('.text-not-delivery').removeClass('hidden');
            $('.js-block-txt-msg-get-contact').removeClass('hidden');

            $('#block-view-delivery').show();
            $(".js-add-to-cart").prop('disabled', true);
        } else {
            $('#tableProductDelivery').removeClass('hidden');
            $('#block-delivery-container-right').removeClass('hidden');
            $('.text-not-delivery').addClass('hidden');
            $('.js-block-txt-msg-get-contact').addClass('hidden');

            $(".js-add-to-cart").prop('disabled', false);
        }
    },

    mktpDeliveryErrorMessagesBuyBox: function(deliveryModes) {
        var hasDeliverableOffer = false;

        deliveryModes.forEach(function(deliveryMode) {
            var itemOffer = $(".item-offer[data-id-offers='" + deliveryMode.name + "']");

            if (deliveryMode.price == "") {
                itemOffer.find('.js-msg-not-delivery').removeClass('hidden');
                itemOffer.find('.deadline').hide();
            } else {
                hasDeliverableOffer = true;
                itemOffer.find('.js-msg-not-delivery').addClass('hidden');
                itemOffer.find('.deadline').show();
            }
        });

        $(".js-add-to-cart").prop('disabled', !hasDeliverableOffer);
    },

    bindZipCodeNotFound: function () {
    	$(document).on("click", "#deliveryButton", function(){
        	$('.postalCode-error-msg').find('small').text('Não atendemos esta região. Consulte um novo CEP.').hide();
        	$('.postalCode-error-msg').find('small').text('CEP não encontrado. Confira o número digitado ou clique em "Não sei o CEP".').hide();
        	$('.calc-shipping-box__container .form-group').removeClass('has-error');
        	$('.js-calcular-frete').removeClass('has-error');
        })
        $(document).on("click", ".close-modal", function(){
        	$('#block-not-found-cep').modal('hide');
        	$('#block-not-delivery-cep').modal('hide');
        	$('#block-not-delivery-faq').modal('hide');
        	$('#block-not-delivery-faq-show').modal('hide');
        })
        $(document).on("click", "#block-not-delivery-faq", function(){
        	window.location = '/atendimento';
        })
    },

    getDeliveryCostsCart: function (postalCode, cartCode) {

        var cartContainer = $(".cartCode_" + cartCode);

   	 	$.ajax({
          url: "carrinho/validateZipCode",
          method: "GET",
          data:{
     	   zipCode: postalCode
          }
   	 	})
      	.done(function(result){
    	     if(postalCode.length > 8)
             {
                 $.ajax({
                   url: deliveryCartCalculatorUrl+postalCode+"/"+cartCode,
                     method: "GET",
                 })
                 .done(function (response) {
                	$('.postalCode-error-msg').find('small').text('Não atendemos esta região. Consulte um novo CEP.').hide();
                 	$('.postalCode-error-msg').find('small').text('CEP não encontrado. Confira o número digitado ou clique em "Não sei o CEP".').hide();
                 	$('.calc-shipping-box__container .form-group').removeClass('has-error');
                 	$('.js-calcular-frete').removeClass('has-error')
                    $("#tableDeliveryCost_" + cartCode).empty();
                    $('.js-table-shipping', cartContainer).empty();
                    $('.js-table-shipping', cartContainer).show();
                    var detailSTRINGIFY = JSON.stringify(response);
     	            var detailJSON = JSON.parse(detailSTRINGIFY);
     	            var event = "";
	            		event = event + "Cep:" + postalCode + "|";
	            		var totalEntrega = detailJSON.deliveryOptionsForEstimation.length;
	            		var countDelivery = 1;
	            		var titleTag;
	            		var table = "";
	            		var thead = "";

                    ACC.deliveryCost.mktpCartDeliveryErrorMessages(detailJSON.consignments);

     	            $.each(detailJSON.deliveryOptionsForEstimation, function(i, option) {
     	            	if (detailJSON.deliveryOptionsForEstimation.length > 0) {
     	            		 if(totalEntrega > 1) {
     	            			titleTag = "Entrega " + countDelivery + " de " + totalEntrega;
     	            		 } else {
     	            			titleTag = "Entrega";
     	            		 }
     	            		 if(i > 0) {
     	            			table += "</tbody>"
     	            		 }
     	            		table += "<thead>"
     	            			 + "<tr>"
     	            			 + "<th>"+titleTag+"</th>"
     	            			 + "<th>Prazo</th>"
     	            			 + "<th>Valor</th>"
     	            		 	 + "</tr>"
     	            		 	 + "</thead>"
     	            		 	 + "<tbody>";
     	            	}
     	            	countDelivery++;
     	            	if (detailJSON.deliveryOptionsForEstimation[i].deliveryOptions.length > 0)
     	            	{
     	            		$.each(detailJSON.deliveryOptionsForEstimation[i].deliveryOptions, function(j, delivery) {


     	            	       $('#valueSpan', cartContainer).html("R$ " + detailJSON.totalDeliveryMode.formattedValue);
     	            	       if(delivery.deliveryCost.formattedValue  == "0,00"){
     	            	    	  $('#valueSpan', cartContainer).addClass('calc-shipping-box__total--sucess');
     	            	       }else {
     	            	    	  $('#valueSpan', cartContainer).removeClass('calc-shipping-box__total--sucess');
     	            	       }

     	          	    	   var getValue = detailJSON.totalPrice.formattedValue;
     	          	    	   var firstValue = getValue.substring(0,(getValue.length - 3));
     	          	    	   var value = getValue.slice(-3);

     	          	    	 $('#SpanValueFormatted', cartContainer).html("<span class='smallcaps'>R$</span>" + firstValue + "<span class='smallcaps'>"+value+"</span>" );
                             $('.container-total-mobile-cart', cartContainer).html("R$ " + getValue);

                             $(".calc-shipping-box__label .cal-txt-cart", cartContainer).text("Frete estimado:");

         	            		event = event + "Mode:" + delivery.name + "|";
     	            			event = event + "Days:"	+ delivery.estimatedDeliveryDays + "|";
     	            			event = event + "Cost:" + delivery.deliveryCost.formattedValue + "|";
         	            		table += "<tr>";
         	            		table +="<td>"+delivery.name+"</td>";

         	            		 if(delivery.name == "Agendada")
         	            		 {
         	                    	table += "<td> A agendar </td>";
         	                     } else
         	                     {
         	                    	if(delivery.estimatedDeliveryDays > 1)
         	                    	{
         	     	                	var diasText = ' dias úteis';
         	     	                }
         	                    	else
         	     	                {
         	     	                	var diasText = ' dia útil'
         	     	                }

         	                    	table +="<td>"+delivery.estimatedDeliveryDays+diasText+"</td>";
         	                    }
         	            		 
         	            		

         	            		table +="<td>"+delivery.deliveryCost.formattedValue+"</td>";
         	            		table +="</tr>";

         	                	var tablelonely ;
             	            		if(j === 3){

             	            		    tablelonely ="<tr id='firstTd' class='line-my-account' >";

            	            			tablelonely += "<td style=' background-color: #FFFFFF' >" + "   "  + "</td>";
             	            			tablelonely += "<td style=' background-color: #FFFFFF' >" + "   "  + "</td>";
             	            			tablelonely += "<td style=' background-color: #FFFFFF' >" + "   "  + "</td>";
             	            			tablelonely += "</tr>";

                      	              $(".calc-shipping-info", cartContainer).show().find('#h').append(tablelonely);

             	            		}

           	            		$("#inputCepCart", cartContainer).parent().removeClass('has-error');
           	            		$('.js-calcular-frete').removeClass('has-error');

         	            	});

     	            	}
     	            	else
 	            		{
 	            		    $('.js-table-shipping', cartContainer).hide();
     	            		$('#block-not-delivery-cep').modal('show');
     	            		$('.postalCode-error-msg', cartContainer).find('small').text('Não atendemos esta região. Consulte um novo CEP.').show();
                            $('.calc-shipping-box__cep', cartContainer).click();
                            $('#valueSpan', cartContainer).removeClass('calc-shipping-box__total--sucess');
                            $('.calc-shipping-box__container .form-group', cartContainer).addClass('has-error');
                            $('.js-calcular-frete').addClass('has-error');
                            $('#valueSpan', cartContainer).html("R$ 0,00");
 	            		}

     	            });

     	    		$(".shipping-options-table", cartContainer).find(function(e){
	            			$(this).find('.line-my-account').last().removeClass('line-my-account');
            		});
     	    		console.log(table);
     	    		$(".calc-shipping-info.shipping-to-cart-" + cartCode).show();
                    $('.js-table-shipping', cartContainer).removeClass('hidden').append(table);

                 })

                 .fail(function(){
               		 $('#block-not-found-cep').modal('show');
               		 $('.postalCode-error-msg', cartContainer).find('small').text('CEP não encontrado. Confira o número digitado ou clique em "Não sei o CEP".').show();
                     $('#valueSpan', cartContainer).removeClass('calc-shipping-box__total--sucess');
                     $('#valueSpan', cartContainer).html("R$ 0,00");
                 });
             }
             else
             {

                 $('.postalCode-error-msg', cartContainer).find('small').text('CEP não encontrado').show();
                 cep.focus().parent().addClass('has-error');
                 $('.js-calcular-frete').addClass('has-error');
             }
     	})
   		.fail(function(result){
   		    var cartSummaryContainer = $(this).closest(".cart-summary-container");
 			$('#block-not-delivery-cep').modal('show');
 			$('.postalCode-error-msg').find('small').text('Não atendemos esta região. Consulte um novo CEP.');
 		    $('.js-table-shipping', cartContainer).empty();
 		});
},

    mktpCartDeliveryErrorMessages: function (consignments) {
        if (consignments.length == 0) {
            $('.js-block-msg-zipcode').removeClass('hidden');
            $('.js-qty-selector').addClass('hidden');
            $('.js-qty-selector-unavbl').removeClass('hidden');

        } else {

            consignments.forEach(function (consignment) {

                var hasDeliveryModes = consignment.deliveryModes.deliveryOptions.length > 0;

                consignment.deliveryModes.productList.forEach(function (product) {

                    var itemOffer = $(".cartList__itemProduct[data-id-stock='" + product.code + "']");

                    if (hasDeliveryModes) {
                        itemOffer.find('.js-block-msg-zipcode').addClass('hidden');
                        itemOffer.find('.js-qty-selector').removeClass('hidden');
                        itemOffer.find('.js-qty-selector-unavbl').addClass('hidden');
                    } else {
                        itemOffer.find('.js-block-msg-zipcode').removeClass('hidden');
                        itemOffer.find('.js-qty-selector').addClass('hidden');
                        itemOffer.find('.js-qty-selector-unavbl').removeClass('hidden');
                    }
                });
            });
        }

        ACC.deliveryCost.validateContinueButton();
    },

    toggleCartShippingInfo: function(){

        //Show or hide informations about shipping in Cart's page//
        trigger = $('.js-calcular-frete');

        $(document).on("click", ".js-calcular-frete", function(){
           var cartSummaryContainer = $(this).closest(".cart-summary-container");
           $(".calc-shipping-info", cartSummaryContainer).hide();
           var cartCode = cartSummaryContainer.data("cartCode");
           if($("#inputCepCart_" + cartCode, cartSummaryContainer).length > 0) {

        		$("#site-loader").show();
        		postalCode = $("#inputCepCart_" + cartCode, cartSummaryContainer).val();
                $("#tableProductDelivery tbody", cartSummaryContainer).empty();
                $("#correiosInformation", cartSummaryContainer).empty();

	            $.ajax({
	                url: ACC.url.addressSearchByCepUrl,
	                method: "GET",
	                data: {
	                    zipCode: postalCode
	                }
	            }).done(function (response) {
	            	$("#site-loader").hide();
	            	var info = (response.data.end != null ? (response.data.end + ' - ') : '') + (response.data.bairro != null ? (response.data.bairro + ', ') : '') + response.data.cidade + ' – ' + response.data.uf;
	                $("#correiosInformation", cartSummaryContainer).append(info);
                    $('.calc-shipping-box__seta', cartSummaryContainer).click();
                    ACC.deliveryCost.getDeliveryCostsCart(postalCode, cartCode);

	            })
	            .fail(function () {
	            	$('#block-not-found-cep').modal('show');
                    $('.postalCode-error-msg', cartSummaryContainer).find('small').text('CEP não encontrado. Confira o número digitado ou clique em "Não sei o CEP".').show();
                    $("#site-loader").hide();
                    $('#valueSpan', cartSummaryContainer).removeClass('calc-shipping-box__total--sucess');
                    $('.calc-shipping-box__container .form-group', cartSummaryContainer).addClass('has-error');
                    $('.js-calcular-frete').addClass('has-error');
       		});

            }

        });
    },

    disableDefaultSubmit: function(){
        //If there is necessary to use ajax to submit a form.//
        //This function is to prevent default form submit by pressing "Enter" on input focus.//
        $('.calc-shipping-form').submit(function(e){
            e.preventDefault();
        });
    },

    aboutDeliveryModalTrigger: function(){
        $(document).on("click", ".knowMoreAboutDelivery", function(){

            var aboutDeliveryMsgTrigger = $('.aboutDeliveryBtn');
            var unvaliableAddressModal  = $('#unvaliableDeliveryAddressMsg');

            if(unvaliableAddressModal.hasClass('in'))
            {
                unvaliableAddressModal.find('.close').click();
                aboutDeliveryMsgTrigger.click();
            }
        });
    },

    validateContinueButton: function() {
        $("#btn-checkout-carrinho").prop("disabled", false);

        var errorMessages = $('.js-block-msg-zipcode:visible');
        errorMessages.each(function (errorMessage) {
            var cartCode = $(this).attr('data-cart-code');
            $("button[data-checkout-cart-code=" + cartCode + "]").prop("disabled", true);
        })
    }
};
ACC.installment = {

	initializeCardTabs : function()
	{
		$('#carrefourCardTabLg ul').empty();
		$('#cartCarrefourHoverTabLg').tab('show');
		$('#visaCartTabLg ul').empty();
		$('#masterCardTabLg ul').empty();
		$('#maestroCardTabLg ul').empty();
		$('#americanCardTabLg ul').empty();
		$('#eloCardTabLg ul').empty();
		$('#dinersCardTabLg ul').empty();
		$('#hipercardCardTabLg ul').empty();
	},
		
	displayCreditCardInstallment: function(productPrice, promotionalPrice, productCode, spotPrice){

		if (!promotionalPrice)
		{
			promotionalPrice = productPrice;
		}

		ACC.installment.initializeCardTabs();

		$.ajax({
			url: installmentCreditCardUrl,
			data: {"productPrice": productPrice, "productCode": productCode},
			type: "get",
			success: function (response){

				var tab = '&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;';

				var installmentReturn = response;

				// visa
				if (spotPrice) {
				    $('#visaCartTabLg ul').append('<li> 1 x ' + spotPrice + '</li>');
				} else {
				    $('#visaCartTabLg ul').append('<li> À vista ' + installmentReturn.visaInstallments[0].value + '</li>');
				}

				for(cont = 2 ; cont <= Object.keys(response.visaInstallments).length; cont ++ ) {

					if(installmentReturn.visaInstallments[cont - 1].tax > 0){
						var juros = ' com juros' + tab + 'Total: ' + installmentReturn.visaInstallments[cont - 1].totalWithTaxFormatted;
					}else{
						var juros = ' sem juros';
					}

					$("#visaCartTabLg ul ").append('<li>' + installmentReturn.visaInstallments[cont - 1].index + ' x ' +  installmentReturn.visaInstallments[cont - 1].value + juros + '</li>');

				}

				// master
				if (spotPrice) {
                    $('#masterCardTabLg ul').append('<li> 1 x ' + spotPrice + '</li>');
                } else {
                    $('#masterCardTabLg ul').append('<li> À vista ' + installmentReturn.mastercardInstallments[0].value + '</li>');
                }

				for(cont = 2 ; cont <= Object.keys(response.mastercardInstallments).length; cont ++ ) {

					if(installmentReturn.mastercardInstallments[cont - 1].tax > 0){
						var juros = ' com juros' + tab + 'Total: ' + installmentReturn.mastercardInstallments[cont - 1].totalWithTaxFormatted;
					}else{
						var juros = ' sem juros';
					}

					$("#masterCardTabLg ul").append('<li>' + installmentReturn.mastercardInstallments[cont - 1].index + ' x ' +  installmentReturn.mastercardInstallments[cont - 1].value + juros +'</li>');
				}

				// maestro
				if (spotPrice) {
                    $('#maestroCardTabLg ul').append('<li> 1 x ' + spotPrice + '</li>');
                } else {
                    $('#maestroCardTabLg ul').append('<li> À vista ' + installmentReturn.maestroInstallments[0].value + '</li>');
                }

				for(cont = 2 ; cont <= Object.keys(response.maestroInstallments).length; cont ++ ) {

					if(installmentReturn.maestroInstallments[cont - 1].tax > 0){
						var juros = ' com juros' + tab + 'Total: ' + installmentReturn.maestroInstallments[cont - 1].totalWithTaxFormatted;
					}else{
						var juros = ' sem juros';
					}

					$("#maestroCardTabLg ul").append('<li>' + installmentReturn.maestroInstallments[cont - 1].index + ' x ' +  installmentReturn.maestroInstallments[cont - 1].value + juros +'</li>');
				}

				// amex
				if (spotPrice) {
                    $('#americanCardTabLg ul').append('<li> 1 x ' + spotPrice + '</li>');
                } else {
                    $('#americanCardTabLg ul').append('<li> À vista ' + installmentReturn.amexInstallments[0].value + '</li>');
                }

				for(cont = 2 ; cont <= Object.keys(response.amexInstallments).length; cont ++ ) {

					if(installmentReturn.amexInstallments[cont - 1].tax > 0){
						var juros = ' com juros' + tab + 'Total: ' + installmentReturn.amexInstallments[cont - 1].totalWithTaxFormatted;
					}else{
						var juros = ' sem juros';
					}

					$("#americanCardTabLg ul").append('<li>' + installmentReturn.amexInstallments[cont - 1].index + ' x ' +  installmentReturn.amexInstallments[cont - 1].value + juros +'</li>');
				}

				// elo
				if (spotPrice) {
                    $('#eloCardTabLg ul').append('<li> 1 x ' + spotPrice + '</li>');
                } else {
                    $('#eloCardTabLg ul').append('<li> À vista ' + installmentReturn.eloInstallments[0].value + '</li>');
                }

				for(cont = 2 ; cont <= Object.keys(response.eloInstallments).length; cont ++ ) {

					if(installmentReturn.eloInstallments[cont - 1].tax > 0){
						var juros = ' com juros' + tab + 'Total: ' + installmentReturn.eloInstallments[cont - 1].totalWithTaxFormatted;
					}else{
						var juros = ' sem juros';
					}

					$("#eloCardTabLg ul").append('<li>' + installmentReturn.eloInstallments[cont - 1].index + ' x ' +  installmentReturn.eloInstallments[cont - 1].value + juros +'</li>');
				}

				// dinners
				if (spotPrice) {
                    $('#dinersCardTabLg ul').append('<li> 1 x ' + spotPrice + '</li>');
                } else {
                    $('#dinersCardTabLg ul').append('<li> À vista ' + installmentReturn.dinersInstallments[0].value + '</li>');
                }

				for(cont = 2 ; cont <= Object.keys(response.dinersInstallments).length; cont ++ ) {

					if(installmentReturn.dinersInstallments[cont - 1].tax > 0){
						var juros = ' com juros' + tab + 'Total: ' + installmentReturn.dinersInstallments[cont - 1].totalWithTaxFormatted;
					}else{
						var juros = ' sem juros';
					}

					$("#dinersCardTabLg ul").append('<li>' + installmentReturn.dinersInstallments[cont - 1].index + ' x ' +  installmentReturn.dinersInstallments[cont - 1].value + juros +'</li>');
				}

				// hipercard
				if (spotPrice) {
                    $('#hipercardCardTabLg ul').append('<li> 1 x ' + spotPrice + '</li>');
                } else {
                    $('#hipercardCardTabLg ul').append('<li> À vista ' + installmentReturn.hipercardInstallments[0].value + '</li>');
                }

				for(cont = 2 ; cont <= Object.keys(response.hipercardInstallments).length; cont ++ ) {

					if(installmentReturn.hipercardInstallments[cont - 1].tax > 0){
						var juros = ' com juros' + tab + 'Total: ' + installmentReturn.hipercardInstallments[cont - 1].totalWithTaxFormatted;
					}else{
						var juros = ' sem juros';
					}

					$("#hipercardCardTabLg ul").append('<li>' + installmentReturn.hipercardInstallments[cont - 1].index + ' x ' +  installmentReturn.hipercardInstallments[cont - 1].value + juros +'</li>');
				}


			}
		});
		$.ajax({
			url: installmentCreditCardUrl,
			data: {"productPrice": promotionalPrice, "productCode": productCode},
			type: "get",
			success: function (response){

				var tab = '&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;';

				var installmentReturn = response;

				var am = 0;
				var index = 0;

				//carrefour
				if (spotPrice) {
                    $('#carrefourCardTabLg ul').append('<li> 1 x ' + spotPrice + '</li>');
                } else {
                    $('#carrefourCardTabLg ul').append('<li> À vista ' + installmentReturn.carrefourInstallments[0].value + '</li>');
                }

				for(cont = 2 ; cont <= Object.keys(response.carrefourInstallments).length; cont ++ ) {

					if(installmentReturn.carrefourInstallments[cont - 1].hasTax){
						var juros = ' com juros** '
					}else{
						var juros = ' sem juros';
					}
					
					$("#carrefourCardTabLg ul").append('<li>' + installmentReturn.carrefourInstallments[cont - 1].index + ' x ' +  installmentReturn.carrefourInstallments[cont - 1].value + juros + '</li>');
				
					if(installmentReturn.carrefourInstallments[cont - 1].taxAM > am)
					{
						am = installmentReturn.carrefourInstallments[cont - 1].taxAM;
						index = (cont - 1);
					}
				}
			}
		});
	}
};ACC.cartItemVariant = {

	_autoload: [
		"popoverItemVariant",
		"bindPopoverDismiss",
	],

	popoverItemVariant: function(){
		$('.item-variant-popover-trigger').popover({
			html : true, 
			content: function() {
				return $(this).parent().find('.itemVariantContent').html();
			}
		});

	},

	bindPopoverDismiss: function(){
		$('.item-variant-popover-trigger').click(function(){
			$('.item-variant-popover-dismiss').click(function(){
				$(this).parents('.item-edit-variant').find('.item-variant-popover-trigger').click();
			});
		});
	}
};ACC.voucher = {

	_autoload: [
		"voucherBoxToggle",
		"voucherValidation",
		"addVoucherToCart",
		"addMoreVoucherTrigger",
		"disableBtnAddVoucher",
		"enableBtnAddVoucher",
		"removeFromCart"
	],

	voucherForm 	: $('.voucher-form'),
	voucher 	 	: $('.voucher'),
	target 			: $('.voucher').parents('.voucher-form').find('.glyphicon, .btn'),
	discountList 	: $('.discounts-list ul'),
	voucherError 	: $('.voucher-error'),
	addMoreVouchers	: $('.add-more-vouchers'),
	btnTrigger 		: $('.js-add-voucher-cart'),
	btnTriggerMsg	: {
		'add' : 'Incluir',
		'success' : 'Incluir'
	},


	removeFromCart: function(){

		$('body').on('click', 'a.trashDiscount', function() {
			
	     voucherCode = $('#voucherCode').val();

	     if(voucherCode){
	        $.ajax({
               url: ACC.config.contextPath + "/carrinho/releaseVoucherCode",
               method: 'POST',
               data: {
                   code: voucherCode
               },
               success: function( data ) {
               window.location.reload(true);
               }
           });

	     }


	   });

	},



	voucherBoxToggle: function(){
		function voucherBoxCloser (container){
			var voucherToggleBox =$('.voucher-box__seta', container);
			voucherToggleBox.find('span').toggleClass('crficon-caret-up', container).toggleClass('crficon-caret-down');
			$('.voucher-form', container).slideToggle('fast');
			if ($('.voucher-box__seta', container).find('span').hasClass('crficon-caret-up')){
				$('.voucher-box', container).addClass('voucher-box--selected');
			}else {
				 $('.voucher-box', container).removeClass('voucher-box--selected');
			}
		}


		$(document).on("click", ".voucher-box__content", function(){
			var container = $(this).closest(".cart-summary-container");
			voucherBoxCloser(container);
		});
	},

	voucherValidation: function(){

		this.voucher.focus(function(event) {
			ACC.voucher.defaultAppearance();
		});

		$(".voucher-form__container input").on('input', function() {
            ACC.voucher.enableBtnAddVoucher(this);
        });

		$(document).on("click", ".js-add-voucher-cart", function(){
		    ACC.voucher.disableBtnAddVoucher(this);
			var cartSummaryContainer = $(this).closest(".cart-summary-container");
			$("#site-loader").show();
			var voucher =  $(".voucher-form__container input", cartSummaryContainer).val();
			var cartCode = cartSummaryContainer.context.id.replace('btn-add-voucher_', '');
			var usedVouchers = [];

			if(voucher.length > 0)
			{
				//ACC.global.waitForIt: Ajax is triggered after user stop type for 1s//

					$.ajax({
						url: vouchersUrl +'/'+ voucher + '/' + cartCode,
						cache:false,
		    			type : 'GET',
		    			data :{voucherCode : voucher, cartCode : cartCode},


					}).done(function(data) {
						$('.voucher' , cartSummaryContainer).parents('.voucher-form').find('.glyphicon, .btn').addClass('voucher-checked', cartSummaryContainer);
						$('.voucher-form', cartSummaryContainer).find('.form-group' , cartSummaryContainer).removeClass('has-error');
						$('.voucher-error', cartSummaryContainer).css("display", "none");


						/*get all inserted vouchers on cart here*/
						$('.discounts-list ul', cartSummaryContainer).find('.voucher-used',cartSummaryContainer).each(function(){
						  usedVouchers.push($(this).data().voucherUsed);
						});

						/*verify if voucher is not already used*/
						if(usedVouchers.indexOf(voucher) < 0)
						{
							$.ajax({
								url: vouchersUrl +'/'+ voucher,
								type: 'POST'
							})
							.done(function(data) {
							    ACC.voucher.enableBtnAddVoucher(this);
								if(data && !data.applied)
								{
									console.log(data);
									$('.voucher-form', cartSummaryContainer).find('.form-group', cartSummaryContainer).addClass('has-error');
									$('.voucher-form', cartSummaryContainer).find('.form-group', cartSummaryContainer).addClass('has-error');
									$('.voucher-error', cartSummaryContainer).text("Não reconhecemos esse cupom. Por favor, verifique se digitou corretamente.").slideDown('fast');
									$("#site-loader").hide();
									return;
								}

								console.log(data);
								console.log("success");

								$('.voucher-box__content', cartSummaryContainer).click();

								location.reload();
								$("#site-loader").show();
							})
							.fail(function(data) {
							    ACC.voucher.enableBtnAddVoucher(this);
								var response = JSON.parse(data.responseText);

								$('.voucher-form', cartSummaryContainer).find('.form-group', cartSummaryContainer).addClass('has-error');
								$('.voucher-error', cartSummaryContainer).text(response.message).slideDown('fast');
								$("#site-loader").hide();

							})
							.always(function() {
							    ACC.voucher.enableBtnAddVoucher(this);
								console.log("complete");
     							$("#site-loader").hide();

							});
						}
						else {
							$('.voucher-form', cartSummaryContainer).find('.form-group', cartSummaryContainer).addClass('has-error');
							$('.voucher', cartSummaryContainer).parents('.voucher-form').find('.glyphicon, .btn').removeClass('voucher-checked', cartSummaryContainer);
							$('.voucher-error', cartSummaryContainer).text('Você já utilizou este cupom nesta compra.').slideDown('fast');
							$("#site-loader").hide();
							$('.add-more-vouchers', cartSummaryContainer).slideUp('fast');
							ACC.voucher.btnTriggerDefaultMsg();
						}
					}).fail(function(data) {
                        ACC.voucher.enableBtnAddVoucher(this);
						var response = JSON.stringify(data.responseText);
						$('.voucher-form', cartSummaryContainer).find('.form-group', cartSummaryContainer).addClass('has-error');

						if (typeof response === "undefined") {
							$('.voucher-form', cartSummaryContainer).find('.form-group', cartSummaryContainer).addClass('has-error');
							$('.voucher-error', cartSummaryContainer).text("Não reconhecemos esse cupom. Por favor, verifique se digitou corretamente.").slideDown('fast');
						} else {
							$('.voucher-form', cartSummaryContainer).find('.form-group', cartSummaryContainer).addClass('has-error');
							$('.voucher-error', cartSummaryContainer).text("Não reconhecemos esse cupom. Por favor, verifique se digitou corretamente.").slideDown('fast');
							$("#site-loader").hide();
						}

					})

			} else {
			    ACC.voucher.enableBtnAddVoucher(this);
				$("#site-loader").hide();
				$('.voucher-form', cartSummaryContainer).find('.form-group', cartSummaryContainer).addClass('has-error');
				$('.voucher-error', cartSummaryContainer).text("Não reconhecemos esse cupom. Por favor, verifique se digitou corretamente.").slideDown('fast');
			}


		});
	},

	addVoucherToCart: function(){

		this.btnTrigger.click(function(){

			if($('#voucher').val() == ""){

				 $('.voucher-form', cartSummaryContainer).find('.form-group').addClass('has-error');
				$('.voucher-error', cartSummaryContainer).text("Não reconhecemos esse cupom. Por favor, verifique se digitou corretamente.").slideDown('fast');
			}

		});
	},

	addMoreVoucherTrigger: function(){
		$(document).on("click", '.add-more-vouchers', function(){
            var cartSummaryContainer = $(this).closest(".cart-summary-container");
            $('.voucher', cartSummaryContainer).val('').focus();
            $('.add-more-vouchers', cartSummaryContainer).slideUp('fast');
            $('.voucher' , cartSummaryContainer).parents('.voucher-form').find('.glyphicon, .btn').removeClass('voucher-checked');
            ACC.voucher.btnTriggerDefaultMsg();
		});
	},



	btnTriggerDefaultMsg: function(){
		ACC.voucher.btnTrigger.removeClass('voucher-added').html(
			ACC.voucher.btnTriggerMsg.add
		);
	},

	defaultAppearance: function(){
		this.$('#voucher').parents('.voucher-form', cartSummaryContainer).find('.glyphicon, .btn').removeClass('voucher-checked');
		this.btnTriggerDefaultMsg();
		this.$('.voucher-form', cartSummaryContainer).find('.form-group').removeClass('has-error');
		this.$('.voucher-error', cartSummaryContainer).text('').slideUp('fast');
		this.$('.add-more-vouchers', cartSummaryContainer).slideUp('fast');
	},

	disableBtnAddVoucher: function(self) {
	    var addVoucherBtn = $(self).parents(".voucher-form").find(".js-add-voucher-cart");
		addVoucherBtn.attr("disabled", true);
	},

	enableBtnAddVoucher: function(self) {
	    var addVoucherBtn = $(self).parents(".voucher-form").find(".js-add-voucher-cart");
		addVoucherBtn.removeAttr("disabled");
	}
};ACC.atendimento = {
	_autoload : [
	        ["bindWelcomingPage", $("body.page-atendimentoNE").length > 0],
	        ["customFormValidate", $("#componentForm").length > 0],
     		"storeRequestForm",
     		"bindContinueRegister",
     		"subjectsByReason",
     		"loadStoresUrl",
     		"warrantyOptions",
     		"addressModal",
     		"accordionIconChange",
     		"atendimentoTPage",
     		"cepHidden",
     		"switchView",
     		["requiredValidation", $(".pageLabel-atendimentoEmailSite").length > 0 ],
     		["faq", (!$(".pageLabel-atendimentoEmailSite").length > 0 )],
     		["accordionIconChangeMessage", ($(".pageLabel-atendimentoEmailSite").length > 0 )],
     		"chanceCpfAtendimento",
     		"findCustomer",
     		 ["bindCheckFormMPage", $("body.page-atendimentoM").length > 0],
     		 ["bindSelectOrderValidation", $("body.page-atendimentoM").length > 0],
     		[ "textAreaValidation", $(".pageLabel-atendimentoM4").length > 0]
     	],
     	switchView: function(){
     	    $(document).ready(function(){
                $('#messageCA3').addClass('hidden');
                $("#switchViews").click(function(){
                    $("#messageCA1").addClass('hidden');
                    $('#messageCA3').removeClass('hidden');
                });
            });
        },
     	
    	/**
    	 * 
    	 * Search Period by schedule date and zipCode 
    	 */
    	getSchedulePeriodSlotData : function() {
    		console.log("ACC.atendimento.getSchedulePeriodSlotData()");
    		var zipCode = "04150000";
    		var deliveryDays = "25";
    		 $.ajax({
    		    	method: 'POST',
    		    	url: '/atendimento/checkout-search-schedules-period',
    		    	async: false,
    		    	data: $.param({
    		    		'deliveryDays' : deliveryDays,
    		    		'zipCode' : zipCode,
    		    		'CSRFToken' : ACC.config.CSRFToken
    		    	}),
    		    	headers: {'Content-Type': 'application/x-www-form-urlencoded'}
    		    }).then(function successCallback(result) {
    		    }, function errorCallback(response) {
    			    // called asynchronously if an error occurs
    			    // or server returns response with an error status.
    			  });
    	},
    	

    	textAreaValidation : function() {
    		
    		$('.atendimentoM4Form').on('submit',function(e){
				
    			$('textarea[name="observations"]').each(function(){
    				var textBox = $(this);
    				var spanMessage = $(this).closest('span');   						
    				
    				if ($.trim(textBox.val()) === "" || textBox.val().length < 10) {
    					spanMessage.show();
    					textBox.parent().addClass('has-error');
    					 e.preventDefault();
    		     
    		        }else {
    		        	spanMessage.hide();
    					$(this).parent().removeClass('has-error');
    					textBox.val($(this).val().replace(/,/g, 'ยง'));
    					
    		        }
    			});
    			
			});
			$("#atendimentoM4Form").on('blur', 'textarea[name="observations"]', function() {
				var textBox = $(this);
				if (textBox.val().length > 10) {
						$(this).parent().removeClass('has-error');
	    				$(this).parent().find('.help-block').hide();
	    	     
		        }

			});
			
			$("#atendimentoM4Form").on('keyup', 'textarea[name="observations"]', function() {
			   if($('textarea[name="observations"]').val().length > 10 && $('input[name="selectedDiagnostics"]').is(':checked')) {
			      $('#submitBtn').prop("disabled", false);
			      document.getElementById("submitBtn").className = "btn btn-default btn-block my-account-btn";
			   } else {
			      $('#submitBtn').prop("disabled", true);
			      document.getElementById("submitBtn").className = "btn btn-disable btn-block";
			   }
			});
			
			$("#atendimentoM4Form").on('change', 'input[name="selectedDiagnostics"]', function() {
				if($('textarea[name="observations"]').val().length > 10 && $('input[name="selectedDiagnostics"]').is(':checked')) {
					$('#submitBtn').prop("disabled", false);
				    document.getElementById("submitBtn").className = "btn btn-default btn-block my-account-btn";
				} else {
				    $('#submitBtn').prop("disabled", true);
				    document.getElementById("submitBtn").className = "btn btn-disable btn-block";
				}
			});
			
        },
    	
    	chanceCpfAtendimento: function () {
    		$('input#cpf, input#orderCode, input#phoneNumber').attr('type','tel');
    		$('.cpf-identifier-mode #cpf').addClass('cpf-mask');    		
    	},     	
     	
     	checkDisabledContinueBtnMPage: function(pk){
     		
     		continueBtn = $("#validationFormAttendanceOrder");
     		
     		var allowContinueBtn = false;
     		
     		if($("#orderDropDownName").val() != "" && ((pk != "") && (pk != undefined)) && (($("#reasonDropDownName" + pk).val() != undefined))) {
     			allowContinueBtn = true;
     		}
     		
     		if(allowContinueBtn)
     		{
     			continueBtn.removeAttr("disabled");
     			$('#validationFormAttendanceOrder').removeClass('btn-cancel-default');
     			
     		}
     		else 
     		{
     			
     			continueBtn.attr("disabled", true);
     			$('#validationFormAttendanceOrder').addClass('btn-cancel-default');
     	
     		
     		}
     		
     	},     	
     	
     	bindSelectOrderValidation: function() {
     		
     	if($("#orderDropDownName").val() != "") {
     		$(".validationOrderBlock").show();
     		$(".block-saldo-troca-devolucao").show();
     		changeOrderFromCombo(document.getElementById("orderDropDownName") );
     		var pk = $("#orderDropDownName").data("pk");
 			ACC.atendimento.checkDisabledContinueBtnMPage(pk);
          } 
     	},
     	
     	customFormValidate: function() 
     	{   
     		var checkboxValid = !$('#checkbox-component-form').is(':checked');
            $('.request-form-text').on('input', function() 
            {
	              var empty = false;          
	              $('.request-form-text').each(function()
	              {
		              if($(this).val() == '' || !$('#checkbox-component-form').is(':checked'))
		              {
		            	  empty  = true;
		            	  $('.request-form-text').focusout(function() 
		            	  {
		           			 var valueInput = $(this).val() == '';
		           			 valueInput ? invalidCamp(this) : validCamp(this);
		           			 removeDisabled();
		           		  });
		            	  
		            	  $('.request-form-text').keyup(function() 
		            	  {
		           			 var valueInput = $(this).val() == '';
		           			 valueInput ? invalidCamp(this) : validCamp(this);
		           			 removeDisabled();
		           		 });
		              }
                  });            
              
	             if (empty) 
	             {
	                 $("#requestForm button[type='submit']").attr('disabled', "disabled='disabled'");  
	             } 
	             else {
	                      $("#requestForm button[type='submit']").removeAttr('disabled');               
	                  }       
		        });
	            
	            $('#checkbox-component-form').click(function () 
	            {
	                 checkboxValid = !$('#checkbox-component-form').is(':checked');
	                 checkboxValid ?  invalidCamp(this) : validCamp(this);
	                 removeDisabled();
	            });
	            
	            function invalidCamp (selector)
	            {
		            $(selector).parents('.form-group').addClass('has-error');
		            $(selector).parents('.form-group').find('.hidden').attr('class','help-block');
		            $(selector).removeClass('validCamp');
		            $('#site-loader').hide();
	            }
	            
	            function validCamp(selector) 
	            {
	                $(selector).parents('.form-group').removeClass('has-error');
	                $(selector).parents('.form-group').find('.help-block').attr('class','hidden');
	                $(selector).addClass('validCamp');
	            }
	            
	            function removeDisabled () 
	            {
	                 var totalInput = $('.request-form-text').length + $('.request-form-checkbox').length;
	                 var totalValid = $('.validCamp').length;        
	                 totalInput == totalValid ? $("#requestForm button[type='submit']").removeAttr('disabled') : $("#requestForm button[type='submit']").attr('disabled', "disabled='disabled'");
	            }
         },
     	    	
    	bindContinueRegister: function(){
    		$("#customButonAtendimento").click(function(){
    			$("form#customFormAtendimento").submit();
    		});
    	},
    	
     	bindCheckFormMPage: function() {
     		$(".msg-error").hide();
     		$(".validationOrderBlock").hide();	
     		$(".block-saldo-troca-devolucao").hide();
     		$(document).on("change", "#orderDropDownName, select[id*='reasonDropDownName']", function() {
     			var pk = $(this).data("pk");
     			ACC.atendimento.checkDisabledContinueBtnMPage(pk);
     			$(".validationOrderBlock").show();
     			$(".block-saldo-troca-devolucao").show();
    	    	if($("#orderDropDownName").val() == "") {
    	    		$(".validationOrderBlock").hide();         			
         		}
     		});
     		
     		$(document).on("change", "input[id*='productCode']", function() {
     			if(!($(this).is(":checked")))
 				{
     				var pk = $(this).data('pk');
     				$("#reasonDropDownName" + pk).val("");
     				ACC.atendimento.checkDisabledContinueBtnMPage();
     				$('#validationFormAttendanceOrder').addClass('btn-cancel-default');	
 				}
     			
     		});
     		
     	},

     	setTotalBalance: function(total) {
     		$('#totalBalanceInput').val(total);	
     	},
     	
    	/*validationFormSelectOrderAttendace: function() {
     		$(".msg-error").hide();
     		$(".validationOrderBlock").hide();
     		
     	    	$("#orderDropDownName").change(function() {
     	    	  $("#select-style-validation").removeClass("has-error");
     	    	  $(".msg-error").hide();
     	    	  $(".validationOrderBlock").show();
     	        });

     	    	$(".block-button-validation").click(function() {
     	    		if($("#orderDropDownName").val() == ""){
     	    			$("#select-style-validation").addClass("has-error");
     	    			$(".msg-error").show();	
     	    			$(".validationOrderBlock").hide();
     	    		}
       	        });
     	    	
     	    	$("#formSelectProductAttendance").change(function() {
     	    		
     	    		$("#reasonDropDownName").click(function() {
	     	    		if($("#reasonDropDownName").val() !== ""){ 
	     	    		   $("#validationFormAttendanceOrder").removeAttr("disabled");
	     	    			    $('#validationFormAttendanceOrder').removeClass('btn-cancel-default');
	     	    			   
	     	    		}
        	        });	 	
     	   	
     	    	 });	
     	   	
     	
     	},
     	*/
     	
     	displayBalance: function(total) {
     		
 			 $("#tBalance .text-bold").text(accounting.formatMoney(total, "R$ ", 2, ".", ","));
   		  	 $("#headerBalance .text-bold").text(accounting.formatMoney(total, "R$ ", 2, ".", ","));	   			
   		  	 $("#bottomBalance .text-bold").text(accounting.formatMoney(total, "R$ ", 2, ".", ","));	 		  	 
   		  	 $("#negativeBalance .text-bold").text(accounting.formatMoney(total, "R$ ", 2, ".", ","));	
  		  	 $("#finalNegativeBalance .showB").text(accounting.formatMoney(total, "R$ ", 2, ".", ","));
  		  	$('#totalBalanceInput').val(total);
  		     if(total > 0){
	   		  	 $("#tBalance").show();
	   		  	 $("#negativeBalance").hide();
	   		  	 $("#finalNegativeBalance").hide();
	   		  	 $("#valueExchangeDiv1").show();
	   		  	 $("#refundDiv1").show();
	   			$('#valueExchangeInput').val('false');
				$('#refundInput').val('false');
				document.getElementById("refundDiv1").className = document
				.getElementById("refundDiv1").className.replace(
				/(?:^|\s)opacity(?!\S)/g, '');
				document.getElementById("refundSubmit1").className = document
				.getElementById("refundSubmit1").className.replace(
				/(?:^|\s)not-active(?!\S)/g, '');
				document.getElementById("valueExchangeDiv1").className = document
				.getElementById("refundDiv1").className.replace(
				/(?:^|\s)opacity(?!\S)/g, '');
				document.getElementById("valueExchangeSubmit1").className = document
				.getElementById("refundSubmit1").className.replace(
				/(?:^|\s)not-active(?!\S)/g, '');
	   		  
   		  	 }
   		  	 else{
	   		  	 $("#tBalance").hide();
	   		  	 $("#negativeBalance").show();   		  		 
	   		  	 $("#valueExchangeDiv1").hide();
	   		  	 $("#valueExchangeDiv2").hide();
	   		  	 $("#refundDiv1").hide();
	   		  	 $("#refundDiv2").hide();
   		  	 }
  		  	
  		  	if (total==0){
  		  		$("#negativeBalance").hide();
  		  	}

     	},
     	
     	subjectsByReason: function() {
     		
     		$('#reason').on('change', function() {

     			var urlGetSubjectsByReason = '/atendimento/get-subjects/'+ $(this).val();
     			var subjectField = $('#subject');
     			
     			$.ajax({
    				url : urlGetSubjectsByReason,
    				cache: false,
    				type : 'GET',
    				beforeSend: function(){
    					subjectField.attr('disabled','disabled');
    					subjectField.append('<option selected="selected">Carregando...</option>');
    				},
    				success : function(result) {
    					subjectField.empty();
    					subjectField.removeAttr('disabled','disabled');

    					subjectField.append('<option selected="selected" disabled="disabled">Selecione</option>');
    					$.each(result, function(cod, subject){
    						subjectField.append('<option value="'+ cod +'">'+ subject +'</option>');
    					});
    				},
    				error: function (result) {
    					subjectField.empty();
    					subjectField.append('<option selected="selected">Selecione</option>');
    			    }
        		});
     			
     		});
     		
     	},
     	
    	storeRequestForm: function() {
    		
    		$('#region').on('change', function(){
    			
    			var regionIso = $("option:selected", this);

    			$.ajax({
    				url : loadCitiesUrl,
    				cache:false,
    				type : 'POST',
    				data : {
    					regionIso: regionIso.val()
    				},
    				headers : {
    					Accept : 'application/json'
    				},
    				beforeSend: function(){
    					$('#city').attr('disabled','disabled');
    					$('#city').append('<option selected="selected">Carregando...</option>');
    				},
    				success : function(result) {
    					$('#city').empty();
    					$('#city').removeAttr('disabled','disabled');
    					
    					$('#city').append('<option selected="selected">Cidade</option>');
    					$.each(result, function(i, value){
    						$('#city').append('<option value="'+value.name+'">'+value.name+'</option>');
    					});
    				},
    				error: function (result) {
    					$('#city').empty();
    					$('#city').append('<option selected="selected">Cidade</option>');
    			    }
        		});
    			
    		});
    	},
 
    	loadStoresUrl: function() {
    		
    		$('#storeType').on('change', function(){
    			
    			var storeType = $("option:selected", this);

    			$.ajax({
    				url : loadStoresUrl,
    				cache:false,
    				type : 'POST',
    				data : {
    					storeType: storeType.val()
    				},
    				headers : {
    					Accept : 'application/json'
    				},
    				beforeSend: function(){
    					$('#store').attr('disabled','disabled');
    					$('#store').append('<option selected="selected">Carregando...</option>');
    				},
    				success : function(result) {
    					$('#store').empty();
    					$('#store').removeAttr('disabled','disabled');
    					
    					$('#store').append('<option selected="selected">Loja</option>');
    					$.each(result, function(i, value){
    						$('#store').append('<option value="'+value.name+'">'+value.displayName+'</option>');
    					});
    				},
    				error: function (result) {
    					$('#store').empty();
    					$('#store').append('<option selected="selected">Loja</option>');
    			    }
        		});
    			
    		});
    	},
    	
    	reCalculateDeliveryCostAuto: function() {
           	var postalCode = $('#postalCode').val();
           	
            console.log("POSTAL CODE AUTO:" + postalCode);
            ACC.atendimento.getSupportedDeliveryModes(postalCode,$('#selectedProducts').val());
            
            document.getElementById("calculateNewShippment").setAttribute("style","pointer-events: none; cursor: default;");
            document.getElementById("submitAddressButton").disabled = true;
    	},
    	
    	reCalculateDeliveryCost: function() {
            	console.log("reCalculateDeliveryCost");
            	document.getElementById("calculateNewShippment").setAttribute("style","pointer-events: none; cursor: default;");
            	document.getElementById("submitAddressButton").disabled = true;
            	//var postalCode = $('#zipCodeOriginal').val();
            	
            	var radioIdSelected = $('input[name=orderPrincipalAddress]:checked').val();
            	var postalCode = $('#addressData_'+radioIdSelected).val();
            	
            	if(document.getElementById("ng-change-Cep").disabled == false){
            		postalCode = document.getElementById("ng-change-Cep").getAttribute("placeholder");
            	}
                console.log("POSTAL CODE:" + postalCode);
				//will be used only when the postal code is changed by the user
        		$('#reCalculousZipCodeOriginalTemp').val(postalCode);
				ACC.atendimento.getSupportedDeliveryModes(postalCode,$('#selectedProducts').val());

    	},
    	
    	//Calls on the controller the method that recalculates the deliveryModes
    	getSupportedDeliveryModes: function (postalCode, selectedProductsIn) {
       	 	$.ajax({
              url: "/atendimento/updateDeliveryOptions",
              method: "GET",
              async: false,
              data:{
         	  zipCode: postalCode,
         	  dataType: "json",
         	  selectedProductsUpdated: selectedProductsIn
              }
       	 	})
          	.done(function(result){
          		
          		$("#optionsAgendamento").load(location.href + " #optionsAgendamento>*", "");
          		
          		console.log("getSupportedDeliveryModes Postal code: " + postalCode)
          		//var deliveryModes = $('#deliveryModesString').attr("value");
				console.log("DM: " + result);
        		//var deliveryModesStringTemp = result;//$('#deliveryModesString');
				var deliveryModesParts = result.split(';');//deliveryModesStringTemp.attr("value").split(';');
				var currentMode = $('#deliveredModeCode').attr("value");
				for(j=0; j<deliveryModesParts.length-1;j=j+2){
    				$('#divDelivery_'+deliveryModesParts[j]+'> table > tbody >tr:eq(1) > td:eq(2)').html(deliveryModesParts[j+1])
    				$('#divDelivery_'+deliveryModesParts[j]).attr("onclick",'selectRadio('+"'"+deliveryModesParts[j]+"','"+deliveryModesParts[j+1]+"')")
    			}
    			for(j=0; j<deliveryModesParts.length-1;j++){
    				if(deliveryModesParts[j].localeCompare(currentMode) == 0){
    					$("#deliveryModePriceS").text(deliveryModesParts[j+1]);
    				}
    			}
				
    			//recalculation for new frete values set for the previous selected delivery code
    			if($('#recalculateDone').text()=='true'){
					 var deliveryCodeTemp = $('#deliveryModeCode').text();
					 valDeliveryCost = accounting.unformat($('#divDelivery_'+deliveryCodeTemp+'> table > tbody >tr:eq(1) > td:eq(2)').html(), ",", ".");
					 $("#deliveryModePriceS").text(accounting.formatMoney(valDeliveryCost, "R$ ", 2, ".", ","));
					 $("#deliveryModePrices2").text($("#deliveryModePriceS").text());
					 
					 //original value of total balance
					 var totalOriginal = $('#totalBalanceOriginal').val();
					 var listOfSelectedProductsString = $('#selectedProducts');
					 var listOfSelectedProducts = listOfSelectedProductsString.attr("value").split(';');
					 var noProducts = "true";
					 for(j=0; j<listOfSelectedProducts.length;j++){
	    				if(listOfSelectedProducts[j]=="true"){
	    					var valProduct = accounting.unformat($($(".item-info .warrantyPrice")[j]).text(), ",", ".");
	    					totalOriginal=totalOriginal-valProduct;
	        				noProducts = "false";
	    				}
		    		 }
					 
					 if(noProducts == "true"){
						 ACC.atendimento.displayBalance($('#totalBalanceOriginal').val());
						 $("#deliveryModePriceS").text('R$ 0,00');
						 $("#deliveryModePrices2").text('R$ 0,00');
						 document.getElementById("calculateNewShippment").setAttribute("style","pointer-events: none; cursor: default;");
					 }
					 else{
						 ACC.atendimento.displayBalance(totalOriginal-valDeliveryCost);
						 document.getElementById("calculateNewShippment").setAttribute("style","");
					 }
				 }
    			
    			
    			document.getElementById("submitAddressButton").disabled = false;
    			
          		
         	})
       		.fail(function(result){
     			$('#block-not-delivery-cep').modal('show');
     		});
    	},
    	
    	atendimentoTPage: function() {
    		var firstTime = true;
    		var total = $('#tBalanceOriginal').val();
    		ACC.atendimento.displayBalance(total);
    		$('#valueExchangeSubmit1').on('click', function() {
    			var total = $('#tBalanceOriginal').val();
    			$("#exchangeDisp").show();
    			var totalToShow = accounting.formatMoney(total, "R$ ", 2, ".", ",");
    			$('#valueExchange').text(totalToShow);
    			$('#valueExchange2').text(totalToShow);
    			var totalBalance = total;
    			total = total - total;
    			ACC.atendimento.displayBalance(total);
    			ACC.atendimento.setTotalBalance(totalBalance);

    			$('#valueExchangeInput').val('true');
    			$('#refundInput').val('false');

    			$('#refundDiv1').show();
    			$('#refundDiv1').addClass(" opacity");
    			$('#refundSubmit1').addClass(" not-active");

    			$('#valueExchangeDiv2').show();
    			$('#valueExchangeDiv1').hide();
    		});
    		$('#valueExchangeSubmit2').on('click', function() {
    			var total = $('#tBalanceOriginal').val();
    			$("#exchangeDisp").hide();
    			var totalBalance = 0;
    			ACC.atendimento.displayBalance(total);
    			ACC.atendimento.setTotalBalance(totalBalance);

    			$('#valueExchangeInput').val('false');
    			$('#refundInput').val('false');

    			$('#refundDiv1').removeClass(" opacity");
    			$('#refundSubmit1').removeClass(" not-active");

    			$('#valueExchangeDiv2').hide();
    			$('#valueExchangeDiv1').show();
    		});
    		$('#refundSubmit1').on('click', function() {
    			var total = $('#tBalanceOriginal').val();
    			$("#returnDisp").show();
    			var totalToShow = accounting.formatMoney(total, "R$ ", 2, ".", ",");
    			$('#valueReturn').text(totalToShow);
    			$('#valueReturn2').text(totalToShow);
    			var totalBalance = total;
    			total = total - total;
    			ACC.atendimento.displayBalance(total);
    			ACC.atendimento.setTotalBalance(totalBalance);

    			$('#valueExchangeInput').val('false');
    			$('#refundInput').val('true');

    			$('#valueExchangeDiv1').show();
    			$('#valueExchangeDiv1').addClass(" opacity");
    			$('#valueExchangeSubmit1').addClass(" not-active");

    			$('#refundDiv2').show();
    			$('#refundDiv1').hide();
    		});
    		$('#refundSubmit2').on('click', function() {
    			var total = $('#tBalanceOriginal').val();
    			$("#returnDisp").hide();
    			var totalBalance = 0;
    			ACC.atendimento.displayBalance(total);
    			ACC.atendimento.setTotalBalance(totalBalance);

    			$('#valueExchangeInput').val('false');
    			$('#refundInput').val('false');

    			$('#valueExchangeDiv1').removeClass(" opacity");
    			$('#valueExchangeSubmit1').removeClass(" not-active");

    			$('#refundDiv2').hide();
    			$('#refundDiv1').show();
    		});
    		$('.js-checkProduct').on('click', function() {
    			$(this).attr('disabled', true);

    			if($("#exchangeDisp").is(":visible") == true){
    				$('#valueExchangeSubmit2').click();
    			}if($("#returnDisp").is(":visible") == true){
    				$('#refundSubmit2').click();	
    			}
    			
				var total = accounting.unformat($('#tBalance .text-bold').text(), ",", ".");
				
    			//var valProduct = accounting.unformat($($(".item-info .price .text-color")[$(this).data().index]).text(), ",", ".");
				var valProduct = accounting.unformat($($(".item-info .warrantyPrice")[$(this).data().index]).text(), ",", ".");

				var listOfSelectedProductsString = $('#selectedProducts');
				var listOfSelectedProducts = listOfSelectedProductsString.attr("value").split(';');
				
				 var listOfPricesPerUnit = $('#pricesOfDeliveryPerUnit');
				 
				 var dev =  listOfPricesPerUnit.attr("value").split(',')[$(this).data().index];
				 var valDeliveryCost = ''
				
				 valDeliveryCost = parseFloat(dev.replace(']', '').replace('[', ''));
				 
				 var deliveryModePricesPast = accounting.unformat($('#deliveryModePriceS').text(), ",", ".");
				 
				 //var dev = $('#deliveryModePriceS').text();
                 //var valDeliveryCost = accounting.unformat(dev, ",", ".");
//                 var addDelivery = false;
//                 var removeDelivery = false;
//                 var numCheck = $("input[id^='productList']:checked" ).length;
//                 if( numCheck == 1){
//                	 addDelivery = true;
//                 }
//                 if( numCheck == 0){
//                	 removeDelivery = true;
//                 }
				 
    			if(this.checked){
    				listOfSelectedProducts[$(this).data().index]="true";
    				var prName = "#prName_" + $(this).data().index.toString();
    				var tx = "<div class='no-margin-bottom' id='prod_" + $(this).data().index.toString() +"'>" +$(prName).text()
    				+ "<span class='pull-right text-color text-bold'>" + $($(".item-info .price .text-color")[$(this).data().index]).text() +"</span> </div>";
        			$( "#productDisp" ).append( tx );
        			$( "#productDisp" ).show();
        			$( "#deliveryDisp" ).show();
                    
        			//if(addDelivery == true){
        				total = total - valProduct - valDeliveryCost;	
    					$("#deliveryModePriceS").text(accounting.formatMoney(deliveryModePricesPast+valDeliveryCost, "R$ ", 2, ".", ","));
//        			}else {
//    				total = total - valProduct;
//        			}
        				
    			}
    			else{
    				listOfSelectedProducts[$(this).data().index]="false";
    				var txDel = "#prod_" + $(this).data().index.toString();
    				//if(removeDelivery == true){
    					total = total + valProduct + valDeliveryCost; 
						$("#deliveryModePriceS").text(accounting.formatMoney(deliveryModePricesPast-valDeliveryCost, "R$ ", 2, ".", ","));
//    				}else {
//    					total = total + valProduct; 
//    				}			
        			$(txDel).remove();
    			}
    			listOfSelectedProductsString='';
    			var noProducts = "true";
    			for(j=0; j<listOfSelectedProducts.length;j++){
    				if(j==(listOfSelectedProducts.length-1)){
    					listOfSelectedProductsString=listOfSelectedProductsString + listOfSelectedProducts[j];}
    				else{
    					listOfSelectedProductsString=listOfSelectedProductsString + listOfSelectedProducts[j] + ';';}
    				
    				if(listOfSelectedProducts[j]=="true"){
    					noProducts = "false";
    				}
    			}
    			var postalCode = $('#postalCode').val();
				ACC.atendimento.getSupportedDeliveryModes(postalCode,listOfSelectedProductsString);

    			
    			$('#selectedProducts').val(listOfSelectedProductsString);	
    			$("#deliveryModePrices2").text($("#deliveryModePriceS").text());
    			
    			if(!$('input[name^="productList"]:checked').length > 0){
    				$("#productDisp").hide();
    				$( "#deliveryDisp" ).hide();
    			}
    			ACC.atendimento.displayBalance(total);	
    			
    			//recalculation for new frete values set for the previous selected delivery code
    			if($('#recalculateDone').text()=='true'){
					 ACC.atendimento.reCalculateDeliveryCostAuto();
				 }
    			else{ 
    				if(noProducts == "false"){
    					document.getElementById("calculateNewShippment").setAttribute("style","");}
    				else{
    					document.getElementById("calculateNewShippment").setAttribute("style","pointer-events: none; cursor: default;");}
    			}
    			
    			 if(noProducts == "true"){
					 ACC.atendimento.displayBalance($('#totalBalanceOriginal').val());
					 $("#deliveryModePriceS").text('R$ 0,00');
					 $("#deliveryModePrices2").text('R$ 0,00');
				 }
    			 
    			
    			$(".j_deleteButton")[$(this).data().index].click();
    			
    			if($('#deliveryModeCode').text().trim() == "agendada"){
    				$('#pageAttendaceAddressModal').modal('toggle');
    		}
    			$(this).attr('disabled', false);
    			
   		  });
    	},
    	
    	warrantyOptions : function() {
    		$(document).ready(function(){
    		    $("input[name^='warrantiesSelected']").attr('checked',false);
    		});
    		$('[id="warrantyOptions"]').each(function(){
    			$(this).on('click', function() {
        			var that=this;
        			$(".j_warrantyOptionsList").each(function(){
    					if($(that).data().loop === $(this).data().loop){
    						$(this).show("slow");
    					}
        			});
    			});
    		});
    	
			$(".j_custom-radio").on('click', function() {
				var idx = $(this).parent().data().loop;				
				$(".j_custom-radio").each(function(){
					if($(this).parent().data().loop === idx){
						$(this).hide();						
					}
				});
				$('[id="warrantyOptions"]').each(function(){
					if(idx === $(this).data().loop){
						$(this).hide();
					}
				});
// $(".j_show").show();
// $(".j_hide").hide();
				$(".j_warrantyOptionSelect").each(function(){
					if(idx === $(this).data().loop){
						$(this).show();						
					}
				});					
				$(".j_color").addClass("text-color");
				$(".j_color > .text-color-light").removeClass("text-color-light");
				var checkRadio="input[name='warrantiesSelected[" +  idx.toString() + "]']";
				$(this).find(checkRadio).prop('checked', true);
				$(this).show("slow");
			    var checkBtn = "input:checkbox[id='productList_" +idx.toString() + "']";
			    var txDel = "#war_" + idx.toString();
			    if($(txDel).length > 0){
	    			$(txDel).remove();			    	
			    }

			    var ck = checkBtn + ':checked';
				var total = parseFloat(accounting.unformat($('#tBalance .text-bold').text(), ",", "."));
			    if(!$(ck).length > 0){
								 var prName = "#prName_"
										+ idx.toString();
								var tx = "<div class='no-margin-bottom' id='prod_"
										+ idx.toString()
										+ "'>"
										+ $(prName).text()
										+ "<span class='pull-right text-color text-bold'>"
										+ $(
												$(".item-info .price .text-color")[idx
														.toString()]).text()
										+ "</span> </div>";
								$("#productDisp").append(tx);
								$("#productDisp").show();
//								$( "#deliveryDisp" ).show();
								$(checkBtn).prop("checked", true);	
				    			var valProduct = parseFloat(accounting.unformat($($(".item-info .price .text-color")[idx]).text(), ",", "."));
			    				total = total - valProduct;


			    }
			    // calculate total balance
			    var warrantyprice = $(this).find(checkRadio).data().warrantyprice;
			    var curentPriceSelected = $(this).parent().data().currprice;
			    if(warrantyprice !== undefined){
					total +=  parseFloat(curentPriceSelected);
					total -=  parseFloat(warrantyprice);
			    }
				$(this).parent().data().currprice = warrantyprice;			    	
    			ACC.atendimento.displayBalance(total);
    			var radchecked = "input[name='warrantiesSelected[" + idx.toString() + "]']:checked";
    			if($(radchecked).data().warrantyprice !==undefined && $(radchecked).data().warrantyprice > 0){
								var wrName = "#wrName_" + idx.toString() +"_" +  $(this).find(checkRadio).data().loopWarranty;
								var tx = "<div class='no-margin-bottom' id='war_"
										+ idx.toString() 
										+ "'>"
										+ $(wrName).text()
										+ "<span class='pull-right text-color text-bold'>"
										+ accounting.formatMoney($(radchecked).data().warrantyprice, "R$ ", 2, ".", ",")
										+ "</span> </div>";
			        			$( "#warrantyDisp" ).append( tx );
			        			$( "#warrantyDisp" ).show();
			}
			});
			
			$(".j_choiseButton").on('click', function() {
				var that = this;
				var idx = parseInt(that.id);
				$(".j_custom-radio").each(function(){
					if($(this).parent().data().loop === idx){
						$(this).show("slow");						
					}
				});
			});
			$(".j_deleteButton").on('click', function() {
				var that = this;
				var idx = parseInt(that.id); 
				var uncheckRadio="input[name='warrantiesSelected[" + that.id + "]']";
				$(uncheckRadio).attr('checked',false);
	
				$(".j_custom-radio").each(function(){
					if($(this).parent().data().loop === idx){
						$(this).show();						
					}
				});

				$('[id="warrantyOptions"]').each(function(){
					if(idx === $(this).data().loop){
						$(this).show();
					}
				});
	
				$(".j_warrantyOptionSelect").each(function(){
					if(idx === $(this).data().loop){
						$(this).hide();						
					}
				});					

				$(".j_color").removeClass("text-color");
				$(".j_color > .text-color-light").addClass("text-color-light");
     			$(".j_warrantyOptionsList").each(function(){
					if(idx === $(this).data().loop){
						$(this).hide("slow");
					}
    			});     			
			    var curentPriceSelected = $(this).parent().parent().parent().data().currprice;
			    if(curentPriceSelected !== undefined){
					var total = accounting.unformat($('#tBalance .text-bold').text(), ",", ".");
					total +=  parseFloat(curentPriceSelected);
					$(this).parent().parent().parent().data().currprice = "0.00";
	    			ACC.atendimento.displayBalance(total);				    	
			    }

    			var txDel = "#wrName_" + idx.toString();
    			$(txDel).remove();

    			if(!$('input[name^="warrantiesSelected"]:checked').length > 0){
    				$("#warrantyDisp").hide();
    			}
			});
    		
    	},
    	
    	addressModal : function(){
    		$(document).ready(function(){
    		    $("input[name='address']").attr('checked',false);
    		});
    		
    		$(".j-changeModal").on('click', function(){
    			$(".j_address").hide();
    			$(".j_freight").show();
    			$(".j-changeModal").hide();
    			$(".j-submitModal").show();
    			
    		});
    		
    		$(".j-dismissModal").on('click', function(){
    			$(".j_address").show();
    			$(".j_freight").hide();
    			$(".j-changeModal").show();
    			$(".j-submitModal").hide();
    			
    		});
    		
    		
    	},
    	
    	accordionIconChange :  function(){
			$(".j_icon").on('click', function(){
				$(this).find("span").toggleClass("crficon-plus crficon-minus");
			});
			$(".j_close").on('click', function(){
				$(".j_icon").find("span").removeClass("crficon-minus");
				$(".j_icon").find("span").addClass("crficon-plus");
			});
    	},

    	accordionIconChangeMessage :  function(){
			$('.collapse').on('shown.bs.collapse', function() {
				$(this).parent().find(".crficon-plus").removeClass("crficon-plus")
				.addClass("crficon-minus");
				}).on('hidden.bs.collapse', function() {
				$(this).parent().find(".crficon-minus").removeClass("crficon-minus")
				.addClass("crficon-plus");
				});
    	},
    	
    	findCustomer : function() {
    		
            $('form#requestForm button[type="submit"]').click(function(event){
            	
            		
                 if($('input#cpf').is(':visible')) {
                      event.preventDefault();
                      var inputCpf = $('input#cpf').val();
                      urlColsultCpf = window.location.host;

                       $.ajax({
                           url : "/atendimento/validar-cpf?cpf=" + inputCpf,
	                       cache:false,
	                       type : 'GET',
	                       success : function(data) {
                             if (data == true) {
                                $("#site-loader").show();
                                 $("form#requestForm").not($(".calc-shipping-box #requestForm")).submit();
                             } else {
                                        $('.help-block').remove();
                                        $('input#cpf').parent().addClass('has-error');
                                        $('input#cpf').after('<span class="help-block">CPF não cadastrado</span>');
                                     }

                         },
                         error: function (data) {
                             console.log("Erro");
                         }
                       });
                 } else 
		                 if($('#identifierMode').val()== "ORDER")
			             {
		            		  if(!$('#requestForm')[0].checkValidity())
		            		  {
		            	          return;
		            		  }
		            		  else{
			            		 
			            			 $("#site-loader").show();
			  	                     $("#requestForm").submit(); 
		            		      }
			             } else {
			            	 if ($('#identifierMode').val()== null) 
			            	 {
			            	 $("#site-loader").show();
	  	                     $("#requestForm").submit(); 
			            	 }
			             }
                
            });
    	},
		           
       

    	
    	bindWelcomingPage: function(){
    		var form = $(".attendance form");
    		var submitButton = $(".attendance form button[type='submit']");
    		
    		$(".what-to-do select").val("");
    		$(".where-product-was-buyed select").val("");
    		
    		$(".what-to-do select").change(function(event){
		 			
	 			var selectedOption = GetURLParameter('selectedOption');
	 			if (selectedOption != undefined) {
	 				$('#selectedOption').val(selectedOption);
	 			}
	    				
	   			if($(this).val() == 'CANCEL_ORDER') {
	   				$(".where-product-was-buyed").hide();
	   				form.attr('action', cancelOrderUrl);
	   				submitButton.prop('disabled', false);
	    				
	   			} else if($(this).val() == 'EXCHANGE') {
	   				$(".where-product-was-buyed").show();
	   		 			
		 			var question2 = GetURLParameter('question2');
		 			
		 			if (question2 != undefined) {
		 				$('#question2').val(question2);
		 			} else {
	   	    			$(".where-product-was-buyed select").val("");
	   	    			form.attr('action', "");
	   	    			submitButton.prop('disabled', true);
	   		 		}
	    		} else if($(this).val() == 'CANCEL_WARRANTY') {
	        		$(".where-product-was-buyed").hide();
	       			$(".where-product-was-buyed select").val("");
	       			form.attr('action', cancelOrderUrl);
	       			submitButton.prop('disabled', true);
	        				
	   			} else if($(this).val() == 'GARANTIA') {
                    $(".where-product-was-buyed").hide();
                    $(".where-product-was-buyed select").val("");
                    form.attr('action', " ");
                    $(".attendance form button#continue").click(function(event) {
                        window.location.href = "/atendimento/envie-uma-mensagem?garantia=true";
                    });
                    submitButton.prop('disabled', true);
                } else {
	   				$(".where-product-was-buyed").hide();
	   				$(".where-product-was-buyed select").val("");
	   				form.attr('action', "");
	   				submitButton.prop('disabled', true);
	   			}
    		});

    		$(".where-product-was-buyed select").change(function(){
    			if($(this).val() == 'SITE') {
    				
    				form.attr('action', exchangeProductUrl);
    				submitButton.prop('disabled', false);
    				
    			} else if($(this).val() == 'STORE') {
    				
    				form.attr('action', exchangeStoreUrl);
    				submitButton.prop('disabled', false);
    				
    			} else if($(this).val() == 'TELESALE') {
    				
    				form.attr('action', exchangeProductUrl);
    				submitButton.prop('disabled', false);
    				
    			} else if($(this).val() == 'GIFT') {
    				
    				form.attr('action', exchangeGiftUrl);
    				submitButton.prop('disabled', false);
    				
    			} else {
    				form.attr('action', "");
    				submitButton.prop('disabled', true);
    			}
    			
    		});
    		
 			function GetURLParameter(sParam) {
 				var sPageURL = window.location.search.substring(1);
 				var sURLVariables = sPageURL.split('&');

 				for (var i = 0;i< sURLVariables.length; i++){
 					var sParameterName = sURLVariables[i].split('=');
 				
 					if (sParameterName[0] == sParam) {
 						return sParameterName[1];
 					}
 				}
 			}
    	},
    	
    	cepHidden : function(){
    		var cep = $("input[name=addressCep]");
    		var adress = $("input[name=addressLine1]");
    		cep.blur(function(){
    			
				if(adress.val() != ""){
					$("#CepDiv").removeClass("hidden");
				}else{
					$("#CepDiv").addClass("hidden");
				}
    		});

    	},
    	
    	faq : function(){
    		$('.collapse').collapse();
    	},
    	
    	
    	 requiredValidation: function(){
    		 var $orderCode =   $("input#orderCode");
              var $cpf =$("input#cpf");
                $cpf.removeAttr("required");
                $orderCode.removeAttr("required");
      
    		  $('#identifierMode').on('change',function(){
  
        		  if ($(this).val() == 'ORDER'){
        			  $cpf.removeAttr("required");
        			  $orderCode.attr("required", "required");
        		    } else {
        		    	$orderCode.removeAttr("required");
        		    	$cpf.attr("required", "required");
        		    }
        	
    			});
    		 
    	}
};ACC.priceRange = {
	_autoload: [
		/*"bindPriceRange",*/
		"bindPriceSlider"
	],
	
	/*bindPriceRange: function()
	{
		var min = $("#slider-range").data('min');
		var max = $("#slider-range").data('max');
		var initMin = $("#slider-range").data('initmin');
		var initMax = $("#slider-range").data('initmax');

		$("#slider-range").slider({
			range: true,
			min: min,
			max: max,
			values: [initMin, initMax],
			slide: function(event, ui) {
				$("#amount").html('<span class="pull-left">R$ ' + ui.values[0] + '</span> <span class="pull-right">R$ ' + ui.values[1] + '</span><span class="clearfix"></span>'
				);
			}
		});

		$("#amount").html('<span class="pull-left">R$ ' + $('#slider-range').slider('values', 0) + '</span>  <span class="pull-right">R$ ' + $('#slider-range').slider('values', 1) +'</span><span class="clearfix"></span>');
	},*/

	/* Slider used at search facet, take care removing that from bind */
	bindPriceSlider: function ()
	{
		$('.applyPriceSlider').on('click', function( event, ui ) {
			
			var min = $('.sliderMin').val();
			var max = $('.sliderMax').val();
	
			ACC.priceRange.submitPriceSliderForm(min, max);
			
		});

        $('.applyPriceSliderMobile').on('click', function( event, ui ) {

            var min = $('#sliderMin').val();
            var max = $('#sliderMax').val();

            ACC.priceRange.submitPriceSliderForm(min, max);

        });
		
		$('#slider-range').on( "slidechange", function( event, ui ) {
			
			var min = $('#slider-range').slider( "values", 0 )
			var max = $('#slider-range').slider( "values", 1 )
	
			ACC.priceRange.submitPriceSliderForm(min, max);
			
		} );
	},
	
	submitPriceSliderForm: function (min, max)
	{
		var form = $('#slider-range').closest('form');
		
		var facetValue = '[' + min + ' TO ' + max + ']';
		var facetUrl = $('input[name="termo"]', form).val();
		
		$('input[name="termo"]', form).val(facetUrl + ":" + facetValue);

		form.submit();
	}
	
};ACC.rangeDelivery = {

    _autoload: [
        "bindLooping"
    ],

    bindLooping: function() {
    	/* maxLooping = $(".consignments").val();

    	for (i=0; i < maxLooping; i++) {
    		ACC.rangeDelivery.bindDeliveryRangePedido(i);
    		ACC.rangeDelivery.bindDeliveryRangePagamento(i);
    		ACC.rangeDelivery.bindDeliveryRangePreparacaoPedido(i);
    		ACC.rangeDelivery.bindDeliveryRangeTransporte(i);
    		ACC.rangeDelivery.bindDeliveryRangeEntrega(i);
      } */

      ACC.rangeDelivery.bindDeliveryStatus(".block-delivery-status#pedido-efetuado");
      ACC.rangeDelivery.bindDeliveryStatus(".block-delivery-status#pagamento-pedido");
      ACC.rangeDelivery.bindDeliveryStatus(".block-delivery-status#preparacao-pedido");
      ACC.rangeDelivery.bindDeliveryStatus(".block-delivery-status#transport-tracking");
      ACC.rangeDelivery.bindDeliveryStatus(".block-delivery-status#available-to-pick-up-in-store-tracking");
      ACC.rangeDelivery.bindDeliveryStatus(".block-delivery-status#delivery-tracking");

    },
    bindDeliveryStatus: function(selector){
      var holder = $(selector),
      slider = holder.children(".delivery-status-progress"),
      percent = slider.data("percentage"),
      bar = slider.children(".bar");

      bar.width(percent+'%');
    },
    bindDeliveryRangePedido: function(count) {
        $("." + count + "slider-range-max").slider({
            range: "max",
            min: 0,
            max: 100,
            value: $("#"+count+"rangePedido").val(),
            disabled: true,
            slide: function(event, ui) {
                $("."+count+"amount").val(ui.value);
            }
        });

        $("#orderStepDiv").css("width",  $("."+count+"amount").val());
        if( $("#"+count+"rangePedido").val() != 100){
        	$("."+count+"amount").val($("."+count+"slider-range-max").slider("value") + '%');
        	$("."+count+"amount").css("width",  $("#"+count+"rangePedido").val()+ '%');
        	$("#pedido-efetuado span.ui-corner-all").hide();
    	}
    },

    bindDeliveryRangePagamento: function(count) {
        $("." + count + "slider-range-max-pagamento").slider({
            range: "max",
            min: 0,
            max: 100,
            value: $("#"+count+"rangePagamento").val(),
            disabled: true,
            slide: function(event, ui) {
                $(".amountPagamento").val(ui.value);
            }
        });

        $("#paymentStepDiv").css("width", $("."+count+"amountPagamento").val());
        if( $(""+count+"#rangePagamento").val() != 100){
        	$("."+count+"amountPagamento").val($("."+count+"slider-range-max-pagamento").slider("value") + '%');
        	$("."+count+"amountPagamento").css("width",  $("#"+count+"rangePagamento").val()+ '%');

            if( $("#"+count+"rangePedido").val() != 100){
            	$("#pagamento-pedido span.ui-corner-all").hide();
            }
    	}
    },

    bindDeliveryRangePreparacaoPedido: function(count) {
        $("." + count + "slider-range-max-preparacao-pedido").slider({
            range: "max",
            min: 0,
            max: 100,
            value: $("#"+count+"rangePreparacaoPedido").val(),
            disabled: true,
            slide: function(event, ui) {
                $("."+count+"amountPreparacaoPedido").val(ui.value);
            }
        });

        $("#orderPreparationStepDiv").css("width",  $("."+count+"amountPreparacaoPedido").val());
        if( $("#"+count+"rangePreparacaoPedido").val() != 100){
        	$("."+count+"amountPreparacaoPedido").val($("."+count+"slider-range-max-preparacao-pedido").slider("value") + '%');
        	$("."+count+"amountPreparacaoPedido").css("width",  $("#"+count+"rangePreparacaoPedido").val()+ '%');

            if( $("#"+count+"rangePagamento").val() != 100){
            	$("#preparacao-pedido span.ui-corner-all").hide();
            }
    	}
    },

    bindDeliveryRangeTransporte: function(count) {
        $("." + count + "slider-range-max-transporte").slider({
            range: "max",
            min: 0,
            max: 100,
            value: $("#"+count+"rangeTransporte").val(),
            disabled: true,
            slide: function(event, ui) {
                $(".amountTransporte").val(ui.value);
            }
        });

        $("#transportStepDiv").css("width",  $("."+count+"amountTransporte").val());
        if( $("#"+count+"rangeTransporte").val() != 100){
        	$("."+count+"amountTransporte").val($("."+count+"slider-range-max-transporte").slider("value") + '%');
        	$("."+count+"amountTransporte").css("width",  $("#"+count+"rangeTransporte").val()+ '%');

            if( $("#"+count+"rangePreparacaoPedido").val() != 100){
            	$("#transport-tracking span.ui-corner-all").hide();
            }
    	}
    },

    bindDeliveryRangeEntrega: function(count) {
        $("." + count + "slider-range-max-entrega").slider({
            range: "max",
            min: 0,
            max: 100,
            value: $("#"+count+"rangeEntrega").val(),
            disabled: true,
            slide: function(event, ui) {
                $(".amountEntrega").val(ui.value);
            }
        });

        $("#deliveryStepDiv").css("width",  $("."+count+"amountEntrega").val());
        if( $("#"+count+"rangeEntrega").val() != 100){
        	$("."+count+"amountEntrega").val($("."+count+"slider-range-max-entrega").slider("value") + '%');
        	$("."+count+"amountEntrega").css("width",  $("#"+count+"rangeEntrega").val()+ '%');

        	if( $("#"+count+"rangeTransporte").val() != 100){
        		$("#delivery-tracking span.ui-corner-all").hide();
        	}
    	}
    }
};
function finishMergeSocialConnect() {
   FB.api('me', {
      fields: 'gender, first_name, last_name, email,name'
   }, function(response) {
      var responsEmail = response.email;
      var responseIDUser = response.id;
      var responseEncodePassword = $("#passwordMerge").val();
      FB.getLoginStatus(function(response) {
         $.ajax({
            url: "login/social-merge-facebook",
            type: "post",
            data: {
               email: responsEmail,
               id: responseIDUser,
               pwd: responseEncodePassword
            },
            success: function(result) {
            	window.location = "/";
            	},
            error: function() {
               $("#removeSpan").remove();
               $("#erroDivSenha").append('<span  id="removeSpan" class="help-block">Senha Inválida</span>');
            }
         });
      });
   });
}

function verfiedRegisterFacebookUser() {
   FB.api('me', {
      fields: 'gender, first_name, last_name, email,name'
   }, function(response) {
      var responsEmail = response.email;
      var responseIdUser = response.id;
      FB.getLoginStatus(function(response) {
         $.ajax({
            url: "login/check-register-facebook",
            type: "get",
            data: {
               tokenFacebook: response.authResponse.accessToken,
               email: responsEmail,
               id: responseIdUser
            },
            success: function(result) {
               if (result == 'USER_NOT_FOUND') {
                  UserConnect();
               }
               else {
                  redirectUserSocialConnect(responsEmail, responseIdUser);
               }
            },
            error: function(xhr, status, err) {
               UserConnect();
            }
         });
      });
   });
}

function redirectUserSocialConnect(responsEmail, responseIdUser) {
   $.ajax({
      url: "login/redirect-user-social-connect",
      type: "post",
      data: {
         email: responsEmail,
         idSocial: responseIdUser
      }
   }).done(function(data) {
      if (data.isflowTrue === "true") {
         window.location = "/";
      } else {
         $("#verifiedSocialEmailnet").val(responsEmail);
         $("#idSubmitSocial").submit();
      }
   });
}

function verfiedSocialmergeConnect() {
   FB.api('me', {
      fields: 'gender, first_name, last_name, email,name'
   }, function(response) {
      var responsEmail = response.email;
      var responseIdUser = response.id;
      FB.getLoginStatus(function(response) {
         $.ajax({
            url: "./check-register-facebook",
            type: "get",
            data: {
               tokenFacebook: response.authResponse.accessToken,
               email: responsEmail,
               id: responseIdUser
            },
            success: function(result) {
               window.location = '/';
            },
            error: function(xhr, status, err) {
               UserConnectMergesocial();
            }
         });
      });
   });
}

function checkLoginState(response) {
   FB.login(function(response) {
      console.log(response);
      if (response.status === 'connected') {
         FB.getLoginStatus(function(response) {
            FB.api('me', {
               fields: 'gender, first_name, last_name, email,name'
            }, function(response) {
               $.ajax({
                  url: "login/alertFacebookEmailExist",
                  type: "get",
                  data: {
                     id: response.id,
                     email: response.email
                  },
                  success: function() {
                     verfiedRegisterFacebookUser();
                  },
                  error: function(result) {
                     if (result.status === 500) {
                        $('#modalFacebookFailToLogin').modal('show');
                        return;
                     }
                     $('#modalMergeAccountHybrisSocialMedia').modal('show');
                     $('.open-form-merge-login-social-hybris').click(function() {
                        $('#modalMergeAccountHybrisSocialMedia').modal('hide');
                     });
                     $("#inputEmailSocialMerge").val(response.email);
                     FB.api("/" + response.id + "/picture/", function(response) {
                        if (response && !response.error) {
                           var imgUrl = response.data.url;
                           $("#face-remove-img").remove();
                           $("#fotoUserFacebook").append('<img id="face-remove-img" src="' + imgUrl + '"/>');
                        }
                     });
                  }
               });
            });
         });
      } else if (response.status === 'not_authorized') {
         $("#modalFacebookFailToLogin").modal("show");
      } else {
         //Nothing
      }
   }, {
      scope: "email,user_birthday"
   });
}
/**
 *
 * @param response
 * CheckouFlow
 */
function checkLoginStateCheckout(response) {
   FB.login(function(response) {
      console.log(response);
      if (response.status === 'connected') {
         FB.getLoginStatus(function(response) {
            FB.api('me', {
               fields: 'gender, first_name, last_name, email,name'
            }, function(response) {
               $.ajax({
                  url: "./finalizar-compra/alertFacebookEmailExist",
                  type: "get",
                  data: {
                     id: response.id,
                     email: response.email
                  },
                  success: function() {
                     verfiedRegisterFacebookUserCheckout();
                  },
                  error: function(result) {
                     if (result.status === 500) {
                        $('#modalFacebookFailToLogin').modal('show');
                        return;
                     }
                     $('#modalMergeAccountHybrisSocialMedia').modal('show');
                     $('.open-form-merge-login-social-hybris').click(function() {
                        $('#modalMergeAccountHybrisSocialMedia').modal('hide');
                     });
                     $("#inputEmailSocialMerge").val(response.email);
                     FB.api("/" + response.id + "/picture/", function(response) {
                        if (response && !response.error) {
                           var imgUrl = response.data.url;
                           $("#face-remove-img").remove();
                           $("#fotoUserFacebook").append('<img id="face-remove-img" src="' + imgUrl + '"/>');
                        }
                     });
                  }
               });
            });
         });
      } else if (response.status === 'not_authorized') {
         $("#modalFacebookFailToLogin").modal("show");
      } else {
         //Nothing
      }
   }, {
      scope: "email,user_birthday"
   });
}

function verfiedRegisterFacebookUserCheckout() {
   FB.api('me', {
      fields: 'gender, first_name, last_name, email,name'
   }, function(response) {
      var responsEmail = response.email;
      var responseIdUser = response.id;
      FB.getLoginStatus(function(response) {
         $.ajax({
            url: "./finalizar-compra/check-register-facebook",
            type: "get",
            data: {
               tokenFacebook: response.authResponse.accessToken,
               email: responsEmail,
               id: responseIdUser
            },
            success: function(result) {
               if (result == 'USER_NOT_FOUND') {
                  UserConnectCheckout();
               }
               else {
                  redirectUserSocialConnectCheckout(responsEmail, responseIdUser);
               }
            },
            error: function(xhr, status, err) {
               UserConnectCheckout();
            }
         });
      });
   });
}

function redirectUserSocialConnectCheckout(responsEmail, responseIdUser) {
   $.ajax({
      url: "./finalizar-compra/redirect-user-social-connect",
      type: "post",
      data: {
         email: responsEmail,
         idSocial: responseIdUser
      },
      success: function(data) {
         if (data.isflowTrue === "true") {
            window.location = "/finalizar-compra";
         } else {
            $("#verifiedEmailCheckout").val(responsEmail);
            $("#socialCheckoutSubmit").submit();
         }
      },
      error: function(data) {
         //Nothing
      }
   });
}

function UserConnectCheckout() {
   FB.api('me', {
      fields: 'gender, first_name, last_name, email,name'
   }, function(response) {
      $.ajax({
         url: "./finalizar-compra/faceconnect",
         type: "post",
         data: {
            name: response.name,
            email: response.email,
            gender: response.gender,
            id: response.id
         }
      }).done(function(result) {
         $("#verifiedEmailCheckout").val(response.email);
         $("#socialCheckoutSubmit").submit();
      });
   })
}

function finishMergeSocialConnectCheckout() {
   FB.api('me', {
      fields: 'gender, first_name, last_name, email,name'
   }, function(response) {
      var responsEmail = response.email;
      var responseIDUser = response.id;
      var responseEncodePassword = $("#passwordMerge").val();
      FB.getLoginStatus(function(response) {
         $.ajax({
            url: "./finalizar-compra/social-merge-facebook",
            type: "post",
            data: {
               email: responsEmail,
               id: responseIDUser,
               pwd: responseEncodePassword
            },
            success: function(result) {
               window.location = "/finalizar-compra";
            },
            error: function() {
               $("#removeSpan").remove();
               $("#erroDivSenha").append('<span  id="removeSpan" class="help-block">Senha Inválida</span>');
            }
         });
      });
   });
}
/**
 *
 * @param response
 * CheckouFlow
 */
function checkLongStateMergesocial(response) {
   FB.login(function(response) {
      console.log(response);
      if (response.status === 'connected') {
         FB.getLoginStatus(function(response) {
            FB.api('me', {
               fields: 'gender, first_name, last_name, email,name'
            }, function(response) {
               $.ajax({
                  url: "./alertFacebookEmailExist",
                  type: "get",
                  data: {
                     id: response.id,
                     email: response.email
                  },
                  success: function() {
                     verfiedSocialmergeConnect();
                  },
                  error: function(result) {
                     $('#modalMergeAccountHybrisSocialMedia').modal('show');
                     $('.open-form-merge-login-social-hybris').click(function() {
                        $('#modalMergeAccountHybrisSocialMedia').modal('hide');
                     });
                     $("#inputEmailSocialMerge").val(response.email);
                     FB.api("/" + response.id + "/picture/", function(response) {
                        if (response && !response.error) {
                           var imgUrl = response.data.url;
                           $("#fotoUserFacebook").append('<img  src="' + imgUrl + '"/>');
                        }
                     });
                  }
               });
            });
         });
      } else if (response.status === 'not_authorized') {
         //Nothing
      } else {
         //Nothing
      }
   }, {
      scope: "email,user_birthday"
   });
}
window.fbAsyncInit = function() {
   if (ACC.config.isAsmUser == 'false' || ACC.config.isAsmUser == false || ACC.config.isAsmUser == null) {
     FB.init({
        appId: ACC.config.facebookAppId,
        cookie: true,
        xfbml: true,
        version: ACC.config.facebookApiVersion

     });
   }
};
// Carregamento Assincrono do SDK
if (ACC.config.isAsmUser != 'true') {
  (function(d, s, id) {
     var js, fjs = d.getElementsByTagName(s)[0];
     if (d.getElementById(id)) return;
     js = d.createElement(s);
     js.id = id;
     js.src = "//connect.facebook.net/en_US/sdk.js";
     fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));
};

function UserConnect() {
   FB.api('me', {
      fields: 'gender, first_name, last_name, email,name'
   }, function(response) {
      $.ajax({
         url: "login/faceconnect",
         type: "post",
         data: {
            name: response.name,
            email: response.email,
            gender: response.gender,
            id: response.id
         }
      }).done(function(result) {
         $("#verifiedSocialEmailnet").val(response.email);
         $("#idSubmitSocial").submit();
      });
   })
}

function UserConnectMergesocial() {
   FB.api('me', {
      fields: 'gender, first_name, last_name, email,name'
   }, function(response) {
      $.ajax({
         url: "./faceconnect",
         type: "post",
         data: {
            name: response.name,
            email: response.email,
            gender: response.gender,
            id: response.id
         }
      }).done(function(result) {
         window.location = "/";
      });
   })
}
ACC.postalCode = {

	_autoload: [
		"editPostalCode"
	],

	code: 		 	$('.postal-code-mask'),
	trigger: 	 	$('.btn-postal-code'),
	editCodeBtn: 	$('#edit-shipping-cep'),
	cepInfo: 		$('.cep-info'),
	addressInfo: 	$('.address-info'),

	consult: function(postalCode, isPaymentAddress){
		var postalCode = (postalCode != undefined ? postalCode : this.code.val());
		var isPaymentAddress = (isPaymentAddress == undefined ? false : isPaymentAddress);
		var consultUrl = '/cep/address?zipCode='+ postalCode + '&isPaymentAddress=' + isPaymentAddress;

		return $.ajax({
			url: consultUrl,
			async: false
		}).responseText;
	},

	setPostalCodeInfo: function(infos){
		this.cepInfo.text(infos.cep);
		
		var address = infos.end+', '+infos.bairro+', '+infos.cidade+' - '+infos.uf;
		this.addressInfo.text(address);
	},

	editPostalCode: function(){
		this.editCodeBtn.click(function(event) {
			$('.calc-shipping-form, .calc-shipping-info').toggle();
		});
	}
};ACC.warranty = {

	_autoload : [ "redirectToExtendedWarrantyPage", "handleSelectedWarranty", "handleDynamicTable" ],

	redirectToExtendedWarrantyPage : function() {
		$('.warrantyCheckBox').click(
				function() {

					//if ($('.warrantyCheckBox').is(':checked')) {
						var productCode = $(this).data().productCode;
						var productQuantity = $(this).data().productQuantity;
						window.location = warrantyExtendedUrl + '?productCode='
								+ productCode + '&productQuantity='
								+ productQuantity;
					//}

				});
	},

	handleSelectedWarranty : function() {

		$('#continue').click(function() {

			$("input[id*='warrantyRow']:checked").each(function(){
				$("input[id*='" + $(this).data('loop') + "warrantyPKs" + $(this).data('pk') + "']").val($(this).data('pk'));
			})
			
			$('#formServicesSelected').submit();
			
		});
	},
	
	handleDynamicTable : function() {
		
		$('input[id*="warrantyRow"]').click(function() {
			var totalFinal = 0;
			var totalSumWarranty = 0;
			var warrantyPrice;
			var totalSumPrice = 0;
			var productIndex = ($(this).data('loop'));
			
			

			$('input[id*="warrantyRow"]:checked').each(function(){
				warrantyPrice = $(this).data('warrantyprice');	
				totalSumWarranty += parseFloat(warrantyPrice);
			});
			
			var isOrderCodeEmpty = $("#orderCode").val();
			
			if(!isOrderCodeEmpty){
				$('.product-default-price').each(function(){
					totalSumPrice += parseFloat($(this).data('productPrice'));
					console.log($(this).data('productPrice'));
				});
			}
		
			
			
			totalFinal = totalSumWarranty + totalSumPrice;
			totalFinal = totalFinal.toFixed(2).replace('.' , ',');
			
			$('#dynamicTotalPrice').text('R$ '+totalFinal);
				
			$('#dynamicWarrantyPrice'+productIndex).text($(this).data('warrantyprice'));
			
			
			var years = $(this).data('warrantyMonths') / 12;
			
			if(years > 1){
				$('#dynamicWarrantyMonths'+productIndex).text(years + " anos");
			}else{
				$('#dynamicWarrantyMonths'+productIndex).text(years + " ano");
			}
			
			var dynamicInstallmentsPrice = parseFloat(totalFinal) / 10;
			
			$('#dynamicInstallmentsPrice').text(dynamicInstallmentsPrice.toFixed(2).replace('.' , ','));
			
			
			var warrantyIndex = $(this).data('loopWarranty');
	
			if(warrantyIndex != null)
			{
				$('.warranty'+productIndex).removeClass('hidden');
			}
			else
			{
				$('.warranty'+productIndex).addClass('hidden');
			}
		});
	}
}
/*
 * Tab Active
*/

ACC.tabActive = {

	_autoload: [
		"bindTabActive"
	],

bindTabActive: function ()
	{
	$('a[data-toggle="tab"]').on('shown.bs.tab', function (e) {
		  var target = $(e.target).attr("href") // activated tab		  
		   $('.tabs-product-details li[role="presentation"]').removeClass("active ball-product-bundle-active");
		   $('a[href="'+ target +'"]').closest("li").addClass("active ball-product-bundle-active");
		
		});
	}
};/*
* menu my account
*/

ACC.menuaccount = {

	_autoload: [
		"bindMyAccountToggle"
	],

	bindMyAccountToggle: function ()
	{
		$("#info-account-menu").click(function() {
			  $( ".item-menu-account-info" ).toggle( "slow" );
		});
		
		$("#form-payment-account").click(function() {
			  $( ".item-menu-account-payment-form" ).toggle( "slow" );
		});
		
		$("#credit-my-account").click(function() {
			  $(".item-menu-account-credit").toggle( "slow" );
		});
		
		$(".close-menu").click(function ()
	    {
			$(".hide-menu").toggle( "slow" );
	    })
    }
}

var isAsmUser = ACC.config.isAsmUser;

if (isAsmUser != "true") {

var gapi=window.gapi=window.gapi||{};gapi._bs=new Date().getTime();(function(){var f=window,h=document,m=f.location,n=function(){},u=/\[native code\]/,w=function(a,b,c){return a[b]=a[b]||c},A=function(a){for(var b=0;b<this.length;b++)if(this[b]===a)return b;return-1},B=function(a){a=a.sort();for(var b=[],c=void 0,d=0;d<a.length;d++){var e=a[d];e!=c&&b.push(e);c=e}return b},C=function(){var a;if((a=Object.create)&&u.test(a))a=a(null);else{a={};for(var b in a)a[b]=void 0}return a},D=w(f,"gapi",{});var E;E=w(f,"___jsl",C());w(E,"I",0);w(E,"hel",10);var F=function(){var a=m.href,b;if(E.dpo)b=E.h;else{b=E.h;var c=RegExp("([#].*&|[#])jsh=([^&#]*)","g"),d=RegExp("([?#].*&|[?#])jsh=([^&#]*)","g");if(a=a&&(c.exec(a)||d.exec(a)))try{b=decodeURIComponent(a[2])}catch(e){}}return b},G=function(a){var b=w(E,"PQ",[]);E.PQ=[];var c=b.length;if(0===c)a();else for(var d=0,e=function(){++d===c&&a()},g=0;g<c;g++)b[g](e)},H=function(a){return w(w(E,"H",C()),a,C())};var J=w(E,"perf",C()),K=w(J,"g",C()),aa=w(J,"i",C());w(J,"r",[]);C();C();var L=function(a,b,c){var d=J.r;"function"===typeof d?d(a,b,c):d.push([a,b,c])},N=function(a,b,c){b&&0<b.length&&(b=M(b),c&&0<c.length&&(b+="___"+M(c)),28<b.length&&(b=b.substr(0,28)+(b.length-28)),c=b,b=w(aa,"_p",C()),w(b,c,C())[a]=(new Date).getTime(),L(a,"_p",c))},M=function(a){return a.join("__").replace(/\./g,"_").replace(/\-/g,"_").replace(/\,/g,"_")};var O=C(),P=[],Q=function(a){throw Error("Bad hint"+(a?": "+a:""));};P.push(["jsl",function(a){for(var b in a)if(Object.prototype.hasOwnProperty.call(a,b)){var c=a[b];"object"==typeof c?E[b]=w(E,b,[]).concat(c):w(E,b,c)}if(b=a.u)a=w(E,"us",[]),a.push(b),(b=/^https:(.*)$/.exec(b))&&a.push("http:"+b[1])}]);var ba=/^(\/[a-zA-Z0-9_\-]+)+$/,ca=/^[a-zA-Z0-9\-_\.,!]+$/,da=/^gapi\.loaded_[0-9]+$/,ea=/^[a-zA-Z0-9,._-]+$/,ia=function(a,b,c,d){var e=a.split(";"),g=e.shift(),l=O[g],k=null;l?k=l(e,b,c,d):Q("no hint processor for: "+g);k||Q("failed to generate load url");b=k;c=b.match(fa);(d=b.match(ga))&&1===d.length&&ha.test(b)&&c&&1===c.length||Q("failed sanity: "+a);return k},ka=function(a,b,c,d){a=ja(a);da.test(c)||Q("invalid_callback");b=R(b);d=d&&d.length?R(d):null;var e=function(a){return encodeURIComponent(a).replace(/%2C/g,
",")};return[encodeURIComponent(a.g).replace(/%2C/g,",").replace(/%2F/g,"/"),"/k=",e(a.version),"/m=",e(b),d?"/exm="+e(d):"","/rt=j/sv=1/d=1/ed=1",a.a?"/am="+e(a.a):"",a.c?"/rs="+e(a.c):"",a.f?"/t="+e(a.f):"","/cb=",e(c)].join("")},ja=function(a){"/"!==a.charAt(0)&&Q("relative path");for(var b=a.substring(1).split("/"),c=[];b.length;){a=b.shift();if(!a.length||0==a.indexOf("."))Q("empty/relative directory");else if(0<a.indexOf("=")){b.unshift(a);break}c.push(a)}a={};for(var d=0,e=b.length;d<e;++d){var g=
b[d].split("="),l=decodeURIComponent(g[0]),k=decodeURIComponent(g[1]);2==g.length&&l&&k&&(a[l]=a[l]||k)}b="/"+c.join("/");ba.test(b)||Q("invalid_prefix");c=S(a,"k",!0);d=S(a,"am");e=S(a,"rs");a=S(a,"t");return{g:b,version:c,a:d,c:e,f:a}},R=function(a){for(var b=[],c=0,d=a.length;c<d;++c){var e=a[c].replace(/\./g,"_").replace(/-/g,"_");ea.test(e)&&b.push(e)}return b.join(",")},S=function(a,b,c){a=a[b];!a&&c&&Q("missing: "+b);if(a){if(ca.test(a))return a;Q("invalid: "+b)}return null},ha=/^https?:\/\/[a-z0-9_.-]+\.google\.com(:\d+)?\/[a-zA-Z0-9_.,!=\-\/]+$/,
ga=/\/cb=/g,fa=/\/\//g,la=function(){var a=F();if(!a)throw Error("Bad hint");return a};O.m=function(a,b,c,d){(a=a[0])||Q("missing_hint");return"https://apis.google.com"+ka(a,b,c,d)};var U=decodeURI("%73cript"),V=function(a,b){for(var c=[],d=0;d<a.length;++d){var e=a[d];e&&0>A.call(b,e)&&c.push(e)}return c},ma=function(a){"loading"!=h.readyState?W(a):h.write("<"+U+' src="'+encodeURI(a)+'"></'+U+">")},W=function(a){var b=h.createElement(U);b.setAttribute("src",a);b.async="true";(a=h.getElementsByTagName(U)[0])?a.parentNode.insertBefore(b,a):(h.head||h.body||h.documentElement).appendChild(b)},na=function(a,b){var c=b&&b._c;if(c)for(var d=0;d<P.length;d++){var e=P[d][0],g=P[d][1];
g&&Object.prototype.hasOwnProperty.call(c,e)&&g(c[e],a,b)}},oa=function(a,b,c){X(function(){var c;c=b===F()?w(D,"_",C()):C();c=w(H(b),"_",c);a(c)},c)},Z=function(a,b){var c=b||{};"function"==typeof b&&(c={},c.callback=b);na(a,c);var d=a?a.split(":"):[],e=c.h||la(),g=w(E,"ah",C());if(g["::"]&&d.length){for(var l=[],k=null;k=d.shift();){var q=k.split("."),q=g[k]||g[q[1]&&"ns:"+q[0]||""]||e,x=l.length&&l[l.length-1]||null,y=x;x&&x.hint==q||(y={hint:q,b:[]},l.push(y));y.b.push(k)}var z=l.length;if(1<
z){var v=c.callback;v&&(c.callback=function(){0==--z&&v()})}for(;d=l.shift();)Y(d.b,c,d.hint)}else Y(d||[],c,e)},Y=function(a,b,c){a=B(a)||[];var d=b.callback,e=b.config,g=b.timeout,l=b.ontimeout,k=b.onerror,q=void 0;"function"==typeof k&&(q=k);var x=null,y=!1;if(g&&!l||!g&&l)throw"Timeout requires both the timeout parameter and ontimeout parameter to be set";var k=w(H(c),"r",[]).sort(),z=w(H(c),"L",[]).sort(),v=[].concat(k),T=function(a,b){if(y)return 0;f.clearTimeout(x);z.push.apply(z,p);var d=
((D||{}).config||{}).update;d?d(e):e&&w(E,"cu",[]).push(e);if(b){N("me0",a,v);try{oa(b,c,q)}finally{N("me1",a,v)}}return 1};0<g&&(x=f.setTimeout(function(){y=!0;l()},g));var p=V(a,z);if(p.length){var p=V(a,k),r=w(E,"CP",[]),t=r.length;r[t]=function(a){if(!a)return 0;N("ml1",p,v);var b=function(b){r[t]=null;T(p,a)&&G(function(){d&&d();b()})},c=function(){var a=r[t+1];a&&a()};0<t&&r[t-1]?r[t]=function(){b(c)}:b(c)};if(p.length){var I="loaded_"+E.I++;D[I]=function(a){r[t](a);D[I]=null};a=ia(c,p,"gapi."+
I,k);k.push.apply(k,p);N("ml0",p,v);b.sync||f.___gapisync?ma(a):W(a)}else r[t](n)}else T(p)&&d&&d()};var X=function(a,b){if(E.hee&&0<E.hel)try{return a()}catch(c){b&&b(c),E.hel--,Z("debug_error",function(){try{window.___jsl.hefn(c)}catch(d){throw c;}})}else try{return a()}catch(c){throw b&&b(c),c;}};D.load=function(a,b){return X(function(){return Z(a,b)})};K.bs0=window.gapi._bs||(new Date).getTime();L("bs0");K.bs1=(new Date).getTime();L("bs1");delete window.gapi._bs;})();
gapi.load("client",{callback:window["gapi_onload"],_c:{"jsl":{"ci":{"deviceType":"desktop","oauth-flow":{"authUrl":"https://accounts.google.com/o/oauth2/auth","proxyUrl":"https://accounts.google.com/o/oauth2/postmessageRelay","disableOpt":true,"idpIframeUrl":"https://accounts.google.com/o/oauth2/iframe","usegapi":false},"debug":{"reportExceptionRate":0.05,"forceIm":false,"rethrowException":false,"host":"https://apis.google.com"},"lexps":[81,97,99,122,123,30,79,127],"enableMultilogin":true,"googleapis.config":{"auth":{"useFirstPartyAuthV2":true}},"isPlusUser":true,"inline":{"css":1},"disableRealtimeCallback":false,"drive_share":{"skipInitCommand":true},"csi":{"rate":0.01},"report":{"apiRate":{"gapi\\.signin\\..*":0.05,"gapi\\.signin2\\..*":0.05},"apis":["iframes\\..*","gadgets\\..*","gapi\\.appcirclepicker\\..*","gapi\\.auth\\..*","gapi\\.client\\..*"],"rate":0.001,"host":"https://apis.google.com"},"client":{"headers":{"request":["Accept","Accept-Language","Authorization","Cache-Control","Content-Disposition","Content-Encoding","Content-Language","Content-Length","Content-MD5","Content-Range","Content-Type","Date","GData-Version","Host","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","Origin","OriginToken","Pragma","Range","Slug","Transfer-Encoding","Want-Digest","X-ClientDetails","X-GData-Client","X-GData-Key","X-Goog-AuthUser","X-Goog-PageId","X-Goog-Encode-Response-If-Executable","X-Goog-Correlation-Id","X-Goog-Request-Info","X-Goog-Experiments","x-goog-iam-authority-selector","x-goog-iam-authorization-token","X-Goog-Spatula","X-Goog-Upload-Command","X-Goog-Upload-Content-Disposition","X-Goog-Upload-Content-Length","X-Goog-Upload-Content-Type","X-Goog-Upload-File-Name","X-Goog-Upload-Offset","X-Goog-Upload-Protocol","X-Goog-Visitor-Id","X-HTTP-Method-Override","X-JavaScript-User-Agent","X-Pan-Versionid","X-Origin","X-Referer","X-Upload-Content-Length","X-Upload-Content-Type","X-Use-HTTP-Status-Code-Override","X-Ios-Bundle-Identifier","X-Android-Package","X-YouTube-VVT","X-YouTube-Page-CL","X-YouTube-Page-Timestamp"],"response":["Digest","Cache-Control","Content-Disposition","Content-Encoding","Content-Language","Content-Length","Content-MD5","Content-Range","Content-Type","Date","ETag","Expires","Last-Modified","Location","Pragma","Range","Server","Transfer-Encoding","WWW-Authenticate","Vary","Unzipped-Content-MD5","X-Goog-Generation","X-Goog-Metageneration","X-Goog-Safety-Content-Type","X-Goog-Safety-Encoding","X-Google-Trace","X-Goog-Upload-Chunk-Granularity","X-Goog-Upload-Control-URL","X-Goog-Upload-Size-Received","X-Goog-Upload-Status","X-Goog-Upload-URL","X-Goog-Diff-Download-Range","X-Goog-Hash","X-Goog-Updated-Authorization","X-Server-Object-Version","X-Guploader-Customer","X-Guploader-Upload-Result","X-Guploader-Uploadid","X-Google-Gfe-Backend-Request-Cost"]},"rms":"migrated","cors":false},"isLoggedIn":true,"signInDeprecation":{"rate":0.0},"include_granted_scopes":true,"llang":"pt","iframes":{"youtube":{"params":{"location":["search","hash"]},"url":":socialhost:/:session_prefix:_/widget/render/youtube?usegapi\u003d1","methods":["scroll","openwindow"]},"ytsubscribe":{"url":"https://www.youtube.com/subscribe_embed?usegapi\u003d1"},"plus_circle":{"params":{"url":""},"url":":socialhost:/:session_prefix::se:_/widget/plus/circle?usegapi\u003d1"},"plus_share":{"params":{"url":""},"url":":socialhost:/:session_prefix::se:_/+1/sharebutton?plusShare\u003dtrue\u0026usegapi\u003d1"},"rbr_s":{"params":{"url":""},"url":":socialhost:/:session_prefix::se:_/widget/render/recobarsimplescroller"},"udc_webconsentflow":{"params":{"url":""},"url":"https://www.google.com/settings/webconsent?usegapi\u003d1"},":source:":"3p","playemm":{"url":"https://play.google.com/work?usegapi\u003d1\u0026usegapi\u003d1"},"blogger":{"params":{"location":["search","hash"]},"url":":socialhost:/:session_prefix:_/widget/render/blogger?usegapi\u003d1","methods":["scroll","openwindow"]},"evwidget":{"params":{"url":""},"url":":socialhost:/:session_prefix:_/events/widget?usegapi\u003d1"},"partnersbadge":{"url":"https://www.gstatic.com/partners/badge/templates/badge.html?usegapi\u003d1"},":socialhost:":"https://apis.google.com","shortlists":{"url":""},"hangout":{"url":"https://talkgadget.google.com/:session_prefix:talkgadget/_/widget"},"plus_followers":{"params":{"url":""},"url":":socialhost:/_/im/_/widget/render/plus/followers?usegapi\u003d1"},"post":{"params":{"url":""},"url":":socialhost:/:session_prefix::im_prefix:_/widget/render/post?usegapi\u003d1"},":gplus_url:":"https://plus.google.com","signin":{"params":{"url":""},"url":":socialhost:/:session_prefix:_/widget/render/signin?usegapi\u003d1","methods":["onauth"]},"rbr_i":{"params":{"url":""},"url":":socialhost:/:session_prefix::se:_/widget/render/recobarinvitation"},"donation":{"url":"https://onetoday.google.com/home/donationWidget?usegapi\u003d1"},"share":{"url":":socialhost:/:session_prefix::im_prefix:_/widget/render/share?usegapi\u003d1"},"plusone":{"params":{"count":"","size":"","url":""},"url":":socialhost:/:session_prefix::se:_/+1/fastbutton?usegapi\u003d1"},"comments":{"params":{"location":["search","hash"]},"url":":socialhost:/:session_prefix:_/widget/render/comments?usegapi\u003d1","methods":["scroll","openwindow"]},":im_socialhost:":"https://plus.googleapis.com","backdrop":{"url":"https://clients3.google.com/cast/chromecast/home/widget/backdrop?usegapi\u003d1"},"visibility":{"params":{"url":""},"url":":socialhost:/:session_prefix:_/widget/render/visibility?usegapi\u003d1"},"autocomplete":{"params":{"url":""},"url":":socialhost:/:session_prefix:_/widget/render/autocomplete"},"additnow":{"url":"https://apis.google.com/additnow/additnow.html?usegapi\u003d1","methods":["launchurl"]},":signuphost:":"https://plus.google.com","appcirclepicker":{"url":":socialhost:/:session_prefix:_/widget/render/appcirclepicker"},"follow":{"url":":socialhost:/:session_prefix:_/widget/render/follow?usegapi\u003d1"},"community":{"url":":ctx_socialhost:/:session_prefix::im_prefix:_/widget/render/community?usegapi\u003d1"},"sharetoclassroom":{"url":"https://www.gstatic.com/classroom/sharewidget/widget_stable.html?usegapi\u003d1"},"ytshare":{"params":{"url":""},"url":":socialhost:/:session_prefix:_/widget/render/ytshare?usegapi\u003d1"},"plus":{"url":":socialhost:/:session_prefix:_/widget/render/badge?usegapi\u003d1"},"family_creation":{"params":{"url":""},"url":"https://families.google.com/webcreation?usegapi\u003d1\u0026usegapi\u003d1"},"commentcount":{"url":":socialhost:/:session_prefix:_/widget/render/commentcount?usegapi\u003d1"},"configurator":{"url":":socialhost:/:session_prefix:_/plusbuttonconfigurator?usegapi\u003d1"},"zoomableimage":{"url":"https://ssl.gstatic.com/microscope/embed/"},"savetowallet":{"url":"https://clients5.google.com/s2w/o/savetowallet"},"person":{"url":":socialhost:/:session_prefix:_/widget/render/person?usegapi\u003d1"},"savetodrive":{"url":"https://drive.google.com/savetodrivebutton?usegapi\u003d1","methods":["save"]},"page":{"url":":socialhost:/:session_prefix:_/widget/render/page?usegapi\u003d1"},"card":{"url":":socialhost:/:session_prefix:_/hovercard/card"}}},"h":"m;/_/scs/apps-static/_/js/k\u003doz.gapi.pt_BR.y4ctwJ1dxn4.O/m\u003d__features__/am\u003dAQ/rt\u003dj/d\u003d1/rs\u003dAGLTcCOfMEO9U16NGtV1TeiYBEcQluh_wA","u":"https://apis.google.com/js/api:client.js","hee":true,"fp":"8e93d657eacdccd49a48df518caca05fc0f47051","dpo":false},"fp":"8e93d657eacdccd49a48df518caca05fc0f47051","annotation":["interactivepost","recobar","signin2","autocomplete","profile"],"bimodal":["signin","share"]}});


}var googleUser = {};
var request = {};
var startApp = function() {
  if (ACC.config.isAsmUser == 'false' || ACC.config.isAsmUser == false || ACC.config.isAsmUser == null) {
     gapi.load('auth2', function() {
        auth2 = gapi.auth2.init({
           client_id: ACC.config.googleClientId,
           fetch_basic_profile: true,
           scope: 'profile',
           cookiepolicy: 'single_host_origin'
        });
        googleUser = auth2.currentUser.get();
        var isCheckoutFlow = $("#isCheckoutFlow").val();
        if (isCheckoutFlow) {
           if (document.getElementById('customBtn') != null) {
              attachSigninCheckout(document.getElementById('customBtn'));
           }
           if (document.getElementById('customBtn1') != null) {
              attachSigninMergesocialCheckout(document.getElementById('customBtn1'));
           }
        } else {
           if (document.getElementById('customBtn') != null) {
              attachSignin(document.getElementById('customBtn'));
           }
           if (document.getElementById('customBtn1') != null) {
              attachSigninMergesocial(document.getElementById('customBtn1'));
           }
        }
     });
  }
}
startApp();

function verfiedRegisterGoogleUser() {
   $.ajax({
      url: "login/googleregisterform",
      type: "get",
      data: {
         tokenGoogle: googleUser.Zi.id_token,
         id: googleUser.getBasicProfile().getId(),
         email: googleUser.getBasicProfile().getEmail()
      },
      success: function(result) {
         var responsEmail = googleUser.getBasicProfile().getEmail();
         var responseIdUser = googleUser.getBasicProfile().getId();
         redirectUserSocialConnect(responsEmail, responseIdUser);
      },
      error: function() {
         onSignInFailure();
      }
   });
}

function redirectUserSocialConnect(responsEmail, responseIdUser) {
   $.ajax({
      url: "login/redirect-user-social-connect",
      type: "post",
      data: {
         email: responsEmail,
         idSocial: responseIdUser
      }
   }).done(function(data) {
      if (data.isflowTrue === "true") {
         window.location = "/";
      } else {
         $("#verifiedSocialEmailnet").val(responsEmail);
         $("#idSubmitSocial").submit();
      }
   });
}

function verfiedRegisterGoogleUserMergeSocial() {
   $.ajax({
      url: "./googleregisterform",
      type: "get",
      data: {
         tokenGoogle: googleUser.Zi.id_token,
         id: googleUser.getBasicProfile().getId(),
         email: googleUser.getBasicProfile().getEmail()
      },
      success: function(result) {
         window.location = '/';
      },
      error: function() {
         onSignInFailureSocialMerge();
      }
   });
}

function finiShSocialMergeGoogle() {
   var responsEmail = googleUser.getBasicProfile().getEmail();
   var responseIDUser = googleUser.getBasicProfile().getId();
   var responseEncodePassword = $("#passwordMergeGoogle").val();

   $.ajax({
         url: "login/social-merge-google",
         type: "post",
         data:
         {
            email: responsEmail,
            id: responseIDUser,
            pwd: responseEncodePassword
         },
         success: function(result)
         {
           window.location = "/";
         },
         error: function()
         {
            $("#removeSpanGoogle").remove();
            $("#erroDivSenhaGoogle").append('<span id="removeSpanGoogle" class="help-block">Senha Inválida</span>');
         }
      });

}

function attachSignin(element) {
   if (element != null) {
      console.log(element.id);
   }
   auth2.attachClickHandler(element, {}, function(googleUser) {
      $.ajax({
         url: "login/alertGoogleEmailExist",
         type: "get",
         data: {
            tokenGoogle: googleUser.Zi.id_token,
            id: googleUser.getBasicProfile().getId(),
            email: googleUser.getBasicProfile().getEmail()
         },
         success: function(result) {
            verfiedRegisterGoogleUser();
         },
         error: function() {
            $("#SocialMergeGoogle").val(googleUser.getBasicProfile().getEmail());
            $('#modalMergeAccountHybrisSocialMediaGoogle').modal('show');
            $('#openModalSocialMergeGoogle').click(function() {
               $('#modalMergeAccountHybrisSocialMediaGoogle').modal('hide');
            });
            // var imgUrl = googleUser.wc.Ph;
            var imgUrl = googleUser.w3.Paa;
            $("#remove-img").remove();
            $("#fotoUserGoogle").append('<img id="remove-img" src="' + imgUrl + '"/>');
         }
      });
   }, function(error) {
      $("#modalFacebookFailToLogin").modal("show");
   });
}

function attachSigninMergesocial(element) {
   if (element != null) {
      console.log(element.id);
   }
   auth2.attachClickHandler(element, {}, function(googleUser) {
      $.ajax({
         url: "./alertGoogleEmailExist",
         type: "get",
         data: {
            tokenGoogle: googleUser.Zi.id_token,
            id: googleUser.getBasicProfile().getId(),
            email: googleUser.getBasicProfile().getEmail()
         },
         success: function(result) {
            verfiedRegisterGoogleUserMergeSocial();
         },
         error: function() {
            $("#SocialMergeGoogle").val(googleUser.getBasicProfile().getEmail());
            $('#modalMergeAccountHybrisSocialMediaGoogle').modal('show');
            $('#openModalSocialMergeGoogle').click(function() {
               $('#modalMergeAccountHybrisSocialMediaGoogle').modal('hide');
            });
            var imgUrl = googleUser.wc.Ph;
            $("#fotoUserGoogle").append('<img src="' + imgUrl + '"/>');
         }
      });
   }, function(error) {
      //Nothing
   });
}

function onSignInFailure() {
   gapi.client.load('plus', 'v1').then(function() {
      request = gapi.client.plus.people.get({
         'userId': 'me'
      });
      request.then(function(resp) {
         $.ajax({
            url: "login/googleConnect",
            type: "post",
            data: {
               email: googleUser.getBasicProfile().getEmail(),
               name: googleUser.getBasicProfile().getName(),
               id: googleUser.getBasicProfile().getId(),
               gender: resp.result.gender
            }
         }).done(function() {
            $("#verifiedSocialEmailnet").val(googleUser.getBasicProfile().getEmail());
            $("#idSubmitSocial").submit();
         });
      });
   });
}

function onSignInFailureSocialMerge() {
   gapi.client.load('plus', 'v1').then(function() {
      request = gapi.client.plus.people.get({
         'userId': 'me'
      });
      request.then(function(resp) {
         $.ajax({
            url: "./googleConnect",
            type: "post",
            data: {
               email: googleUser.getBasicProfile().getEmail(),
               name: googleUser.getBasicProfile().getName(),
               id: googleUser.getBasicProfile().getId(),
               gender: resp.result.gender
            }
         }).done(function() {
            window.location = "/";
         });
      });
   });
}
/**
 *
 * Flow Checkout Google
 *
 *
 */
function attachSigninCheckout(element) {
   if (element != null) {
      console.log(element.id);
   }
   auth2.attachClickHandler(element, {}, function(googleUser) {
      $.ajax({
         url: "./finalizar-compra/alertGoogleEmailExist",
         type: "get",
         data: {
            tokenGoogle: googleUser.Zi.id_token,
            id: googleUser.getBasicProfile().getId(),
            email: googleUser.getBasicProfile().getEmail()
         },
         success: function(result) {
            verfiedRegisterGoogleUserCheckout();
         },
         error: function() {
            $("#SocialMergeGoogle").val(
               googleUser.getBasicProfile().getEmail());
            $('#modalMergeAccountHybrisSocialMediaGoogle').modal('show');
            $('#openModalSocialMergeGoogle').click(
               function() {
                  $('#modalMergeAccountHybrisSocialMediaGoogle')
                     .modal('hide');
               });
            var imgUrl = googleUser.wc.Ph;
            $("#remove-img").remove();
            $("#fotoUserGoogle").append(
               '<img id="remove-img" src="' + imgUrl + '"/>');
         }
      });
   }, function(error) {
      $("#modalFacebookFailToLogin").modal("show");
   });
}

function verfiedRegisterGoogleUserCheckout() {
   $.ajax({
      url: "./finalizar-compra/googleregisterform",
      type: "get",
      data: {
         tokenGoogle: googleUser.Zi.id_token,
         id: googleUser.getBasicProfile().getId(),
         email: googleUser.getBasicProfile().getEmail()
      },
      success: function(result) {
         var responsEmail = googleUser.getBasicProfile().getEmail();
         var responseIdUser = googleUser.getBasicProfile().getId();
         redirectUserSocialConnectCheckout(responsEmail, responseIdUser);
      },
      error: function() {
         onSignInFailureCheckout();
      }
   });
}

function redirectUserSocialConnectCheckout(responsEmail, responseIdUser) {
   $.ajax({
      url: "./finalizar-compra/redirect-user-social-connect",
      type: "post",
      data: {
         email: responsEmail,
         idSocial: responseIdUser
      },
      success: function(data) {
         if (data.isflowTrue === "true") {
            window.location = "/finalizar-compra";
         } else {
            $("#verifiedEmailCheckout").val(responsEmail);
            $("#socialCheckoutSubmit").submit();
         }
      },
      error: function(data) {
         //Nothing
      }
   });
}

function onSignInFailureCheckout() {
   gapi.client.load('plus', 'v1').then(function() {
      request = gapi.client.plus.people.get({
         'userId': 'me'
      });
      request.then(function(resp) {
         $.ajax({
            url: "./finalizar-compra/googleConnect",
            type: "post",
            data: {
               email: googleUser.getBasicProfile().getEmail(),
               name: googleUser.getBasicProfile().getName(),
               id: googleUser.getBasicProfile().getId(),
               gender: resp.result.gender
            }
         }).done(function() {
            $("#verifiedEmailCheckout").val(googleUser.getBasicProfile().getEmail());
            $("#socialCheckoutSubmit").submit();
         });
      });
   });
}

function finiShSocialMergeGoogleCheckout()
{
   var responsEmail = googleUser.getBasicProfile().getEmail();
   var responseIDUser = googleUser.getBasicProfile().getId();
   var responseEncodePassword = $("#passwordMergeGoogle").val();

   $.ajax({
         url: "./finalizar-compra/social-merge-google",
         type: "post",
         data:
         {
            email: responsEmail,
            id: responseIDUser,
            pwd: responseEncodePassword
         },
         success: function(result)
         {
        	 window.location  = "/finalizar-compra";
         },
         error: function()
         {
            $("#removeSpanGoogle").remove();
            $("#erroDivSenhaGoogle").append('<span id="removeSpanGoogle" class="help-block">Senha Inválida</span>');
         }
      });

}
/*
 * validationYearRegister
 */

ACC.validationYearRegister = {
	
	_autoload : [ "bindvalidationYearRegister" ],

	bindvalidationYearRegister : function() {
		$('#birthYear, #birthMonth, #birthDay').change(function() {
			ACC.validationYearRegister.showLess18yearsPopover();
		});
	},

	showLess18yearsPopover : function() {
		
		$('#birthYear').change(function(){
			var day = $("#birthDay").val();
			var month = $("#birthMonth").val();
			var year = $("#birthYear").val();
			
			var isNotNumeric = !ACC.validationYearRegister.isNumeric(day) || !ACC.validationYearRegister.isNumeric(month) || !ACC.validationYearRegister.isNumeric(year); 
	
			if (isNotNumeric) {
				//return undefined;
			}
			
			var age = 18;
			var mydate = new Date();
			mydate.setFullYear(year, month - 1, day);
	
			var currdate = new Date();
			var setDate = new Date();
			setDate.setFullYear(mydate.getFullYear() + age, month - 1, day);
			
			if ((currdate - setDate) > 0 && year != "") {
				$('#birthYear-invalid').modal('hide');
				$('#submitProfileForm').prop('disabled', false);
				$('#btn-submit-register').prop('disabled', false);
				$('#continue-full-register').prop('disabled', false);
			} else {
				$('#birthYear-invalid').modal('show');
				$('#submitProfileForm').prop('disabled', true);
				$('#btn-submit-register').prop('disabled', true);
				$('#continue-full-register').prop('disabled', true);
			}
		});
	},
	
	isNumeric: function (input) {
	    var regexNumber = /^-{0,1}\d*\.{0,1}\d+$/;
	    return (regexNumber.test(input));
	}

};
ACC.cancellation = {
	_autoload : [
     		"selectOrderCode",
     		"radioBtnBehavior",
     		["cancelBackCancellation", $('body.page-atendimentoCAR').length > 0],
     		
     	],
     	
     	cancelBackCancellation: function() {
     		    		

			  if (window.history && window.history.pushState) {
		
			    window.history.pushState('forward', null);
		
			    $(window).on('popstate', function() {
			    	location.href='/minha-conta';
			    });
		
			  }
     		
     	},
     	
     	selectOrderCode: function() {
     		var orderSelected = $('#orderSelect').val();
     		
     		if(orderSelected == undefined || orderSelected == '')
 			{
 				return;
 			}
     		else
     		{
     			loadDataConsignments(orderSelected);
     		}
     		
     		$('#orderSelect').change(function() {
     			
     			
     			var orderSelected = $(this).val();
     			
     			if(orderSelected == undefined || orderSelected == '')
     			{
     				return;
     			}
     			$('#orderId').val(orderSelected);
     			$('#selectedOrder').val(orderSelected);
     			
     			console.log(orderSelected);
     			
     			if(orderSelected != ''){
     				$('.order').removeClass('hidden');
     			}else{
     				$('.order').addClass('hidden');
     			}
     			
     			loadDataConsignments(orderSelected);

     		});
     		
     		function loadDataConsignments(orderSelected)
     		{
     			console.log(orderSelected);
     			
     			if(orderSelected != ''){
     				$('.order').removeClass('hidden');
     			}else{
     				$('.order').addClass('hidden');
     			}
     			
     			$.ajax({
                    url: "SELECTEDORDER",
                    method: "GET",
                    data: {
                    	orderCode: orderSelected
                    },
                    beforeSend: function() {
                    	$('.delivery').empty();
                    }
                    
                }).done(function (result) {
                	//console.log('result: ',result);
                	if(result != undefined) {
                		$('#orderDate').text('Data: ' + result.createdFormatted);
                        if (result.paymentInfo.cardCarrefour) {
                		    $('#orderTotalValue').text('Valor: ' + result.paymentInfo.totalPrice.formattedValue);
                		} else {
                		    $('#orderTotalValue').text('Valor: ' + result.totalPrice.formattedValue);
                		}
                		//$('#orderEntries').text(result.entries);
                	}
                	
                	var html = '';
                	
                	var isSpareWarrantyEntry = true; //default
                	
                	$(result.entries).each(function(j, entry){
                		
                		if(entry.type == 'PRODUCT'){
                			isSpareWarrantyEntry = false;
                		}
                		
                	})
                	
                	if(result.consignments.length < 1){
                		$("#cancelDivAtendimento").hide();
                		$("#btnContinue").prop("disabled", true);
                	}
                	
                	//COMPORTAMENTO PARA QUANDO ESTÁ SENDO TRATADO DE GARANTIA/TROCA AVULSA(S)
                	if(isSpareWarrantyEntry){
                		
                		console.log(result.entries);
                		
                		$(result.entries).each(function(j, entry){
                				
	                			var serviceText = '';
	                			var serviceYearsText = '';
	                			
	                			if(entry.oldOrderData.years ==  1){
	                				
	                				serviceYearsText = 'ano';
	                			}else{
	                				serviceYearsText = 'anos';
	                			}
	                			
	                			if(entry.type == 'WARRANTY'){
	                				serviceText = 'Garantia Estendida +' + entry.oldOrderData.years + serviceYearsText;
	                				
	                			}else{
	                				serviceText = 'Troca Certa +' + entry.oldOrderData.years + serviceYearsText;
	                			}
                    		
                    		
	                			//quando tem mais de uma garantia/troca avulsa
	                    		if(result.entries.length > 1) {
	                    			
	                    			var entryCode = entry.serviceIdentifier;

	                    			html = html +
	        						'<div class="form-group custom-radio no-margin-top">'+
	        							'<div class="radio text-color-bold">'+
	        								'<input id="orderId'+j+'" value="' + entryCode + '" name="parcial-consignment" class="radioBtnCancelConsignment" type="radio" />'+
	        								'<span class="lbl text-center">'+
	        									'<span class="input text-color-bold">'+
	        										'Cancelar somente esta garantia'+
	        									'</span>'+
	        								'</span>'+
	        							'</div>'+
	        						'</div>';
	                    			
	                    			
	                    			$("#cancelaOrdemDiv").hide();
	                    			
	                    		}else{
	                    			
	                    			$("#cancelaOrdemDiv").show();
	                    			
	                    		}
	                    		console.log(entry);
								html = html +
								'<div class="item">'+
									'<div class="col-xs-2 col-sm-2 col-md-2 item-thumb">'+
									
									'<div class="col-xs-2 col-md-3">'+
										'<div class="thumb">'+
											'<span class="crficon-calendar"></span>'+
										'</div>'+
									'</div>'+
									
									'</div>'+
									'<div class="col-sx-10 col-sm-10 col-md-10 item-info">'+
										'<p>'+ serviceText +'</p>'+
										'<p>'+
										'<span">'+
											'<span>' + entry.oldOrderData.productReferenceName + '</span>'+
										'</span>'+
									     '</p>'+
											'<p>'+
												'<span class="text-bold">'+
												'Valor: '+
													'<spring:theme code="text.cancel.ca.product.price" />'+ 
													'<span class="text-color">' + entry.totalPrice.formattedValue + '</span>' +
												'</span>'+
											'</p>'+
		            					'</p>'+
									'</div>'+
								'</div>';
							
                		});
                		
                		$('.delivery').append(html);
                		
                	//COMPORTAMENTO PADRÃO PARA PRODUTO	
                	}else{ 
                		
                		$(result.consignments).each(function(i, order){
                    		
                    		console.log('order' + i, order);
                    		
                    		if(result.consignments.length > 1)
                    		{
                    		
                    			html = 
                        			'<p class="margin-top">'+
            							'<span class="text-color-bold">'+
            								'<spring:theme code="text.cancel.ca.delivery" />'+
            								(i+1) + ' ' +
            								'</span>'+
            								'de '+ result.consignments.length +
            						'</p>';
                    		}
                    		
                    		
                    		
//                    		if(result.consignments.length > 1) {
                    		if(false) { // FIXME quando for necessário cancelamentos parciais.
                    			var consignmentCode = order.code;// + '_consignment_' + i;
                    			html = html +
        						'<div class="form-group custom-radio no-margin-top">'+
        							'<div class="radio text-color-bold">'+
        								'<input id="orderId'+i+'" value="' + consignmentCode + '" name="consignment-code" class="radioBtnCancelConsignment" type="radio" />'+
        								'<span class="lbl text-center">'+
        									'<span class="input text-color-bold">'+
        										'Cancelar somente esta entrega'+
        									'</span>'+
        								'</span>'+
        							'</div>'+
        						'</div>';
                    		}
    						
    						$(order.entries).each(function(j, entry){
    							
    							console.log('entry'+j, entry);
    							var img = entry.orderEntry.product.url;
    							if(entry.orderEntry.product.images != undefined && entry.orderEntry.product.images.length != 0) {
    								img = entry.orderEntry.product.images[0];
    							}
    							var variant = " | ";
    							if(entry.orderEntry.product.variantInformation != undefined && entry.orderEntry.product.variantInformation.length != 0) {
    								$(entry.orderEntry.product.variantInformation).each(function(k,variantInfo) {
    									variant = variant + variantInfo + ' | '; 
    								});
    							}
    							html = html +
    							'<div class="item">'+
    								'<div class="col-xs-2 col-sm-2 col-md-2 item-thumb">'+
    									'<img class="img-responsive" src="'+ 
    										img.url
    									+'" alt="Owl Image">'+
    								'</div>'+
    								'<div class="col-sx-10 col-sm-10 col-md-10 item-info">'+
    									'<p>'+ entry.orderEntry.product.name +'</p>'+
    									'<p>'+
    									'<span class="text-bold">'+
    										'Quant.: '+
    										'<span class="text-color">' + entry.quantity + '</span>'+
    									'</span>'+
    								     '</p>'+
    										'<p>'+
    											'<span class="text-bold">'+
    												'<spring:theme code="text.cancel.ca.product.price" />'+
    												'<span class="text-color">' + entry.orderEntry.totalPrice.formattedValue + '</span>' +
    											'</span>'+
    										'</p>'+
    	            					'</p>'+
    								'</div>'+
    							'</div>';
                    		});
    						
                    		$('.delivery').append(html);
                    		
                    	});
                		
                	}
                	
                	ACC.cancellation.radioBtnBehavior();
                	
                });
     		
     		}
     	},
     	
     	radioBtnBehavior: function(){
     		var btnContinue = $('#btnContinue');
     		btnContinue.prop("disabled", true);
     		
     		if($('.radioBtnCancelOrder:checked').length > 0 || $('.radioBtnCancelConsignment:checked').length > 0 ){
     			btnContinue.addClass('btn-default');
     			btnContinue.prop("disabled", false);
     		}
     		
     		$('.radioBtnCancelConsignment').click(function(){
     			consignment = $(this).val();
     			$('#consignment').attr('value',consignment);

     			$('.radioBtnCancelOrder').removeAttr('checked', 'checked');
     			$('#cancelationFlow').attr('value','consignment');
     			btnContinue.addClass('btn-default');
     			btnContinue.prop("disabled", false);
     		});
     		
     		$('.radioBtnCancelOrder').click(function(){
     			order = $(this).val();
     			$('#order').attr(order);
     			$('#consignment').attr('value','');
     			$('.radioBtnCancelConsignment').removeAttr('checked', 'checked');
     			$('#cancelationFlow').attr('value','order');
     			btnContinue.addClass('btn-default');	
     			btnContinue.prop("disabled", false);
     		});
   			
  }
};
ACC.register = {

	_autoload: [	    		
	    		"bindPhoneRegister",
	    		 ["bindContinueRegister", $("body.page-crmHome").length <= 0],
	    		 ["registerCrm", $("body.page-crmHome").length > 0],
	    		 "registerCrmComplete"
	    	],

	bindContinueRegister: function(){
		$("#continue-full-register").click(function(){
			$("form#registerFormOnSubmit").submit();
		})
	},

	registerCrm: function(){
	//modal
        $('#newsletter').click(function(){
           $(this).toggleClass('notChecked');

           if($(this).hasClass('notChecked'))
               $("#noAgreeCrm").modal();
        });
       $('#crmNo').click(function(){
           $('#newsletter').attr('checked','checked');
              $('#newsletter').click();
            });
            $('#crmYes').click(function(){
                $("#noAgreeCrm").modal('hide');
            });

    	},

	bindPhoneRegister: function(){
		
		var html = $('#phoneTemplate').html();
		var div = $('.phone-block');
		
		$('.js-add-phone').on('click', function(){
			$(html).appendTo(div);
		});
	},
    	
    	registerCrmComplete:function(){
    		   
    		    var interests = {1:"Bebe", 2:"Kids", 3:"Pet", 4:"Gourmet", 5:"Cervejas e Vinhos", 6:"Saúde e bem estar", 7:"Beleza", 8:"Decoração da casa"};
    			$('.js-tamb-interests').click(function () {
    				$(this).toggleClass('interests-active');
    				var countInterest = $('.interests-active').length;
    				if (countInterest <= 3) {
    					var valueInterest = $(this).attr('data-interests');
    				}
				    else {
    					$(this).removeClass('interests-active');
			        }
    			});
    			    			
    			$('.js-send-interests').click(function () {
    				
    				var interestsOne = '';
    				var interestsTwo = '';
    				var interestsThree = '';
    				
    				$('.interests-active').each(function (index) {
    					if(index == 0) {
    						interestsOne = $(this).attr('data-interests');
    					} else if (index == 1) {
    						interestsTwo = $(this).attr('data-interests');
    					} else if (index == 2) {
    						interestsThree = $(this).attr('data-interests');
    					}
    					
    				});
    				
    				var interestCodes = [];
    				interestCodes.push(interestsOne);
    				interestCodes.push(interestsTwo);
    				interestCodes.push(interestsThree); 
    				$("#interestCodes").val(interestCodes);    				
    				
    			});

    			 $('.js-send-email').click(function () {
                      $.ajax({
                          method : "POST",
                          url : "/cadastro-completo/envia-email",
                       }).success(function(response) {
                          window.location.href = response;
                       }).fail(function() {
                           console.log("There was an error to redirect");
                       });
                  });
						
    }
};ACC.registration = {

	_autoload : [
		"cpfValidator",
		"firstNameValidator",
		"lastNameValidator",
		"telephoneValidator",
		"typePhoneValidator",
		"genderValidator",
		"daysValidator",
		"monthsValidator",
		"yearsValidator",
		"termsOfUseAgreementValidator",
		"setSocialHash"
	],
	
	onlyLetters: function (event){

		var key = event.key;
		
		if(!(key.match(/^[a-zA-Z 0-9]*$/)))
		{
			event.preventDefault();
		}
		
	},
	
	cpfValidator: function(){
		
		$('.letters-mask').mask('L', {translation:  {'L': {pattern: /[a-zA-Z\u00C0-\u00FF ]/, recursive: true}}});
		
		$('.letters-numbers').mask('L', {translation:  {'L': {pattern: /[a-zA-Z0-9]/, recursive: true}}});
		$('.letters-numbers-characters').mask('L', {translation:  {'L': {pattern: /[a-zA-Z0-9!@#<>$%^*?_~&.,;]/, recursive: true}}});
		
		$("#cpfError").hide();
		
		$('input[name="cpf"]').keyup(function(event) {
			$("#cpfError").hide();

			var strCPF = $(this).val();

			$(this).parent().find('.help-block').remove();
			$(this).parent().removeClass('has-error');
	

			if(strCPF.length == 14){
				strCPF = strCPF.replace('.', '').replace('.', '').replace('-', '');
				var result = ACC.global.cpfValidator(strCPF);
				if(!result){
					
					$(this).parent().addClass('has-error');
					$(this).parent().append('<span class="help-block">CPF inválido.</span>');

				}
			}
		});
		
	
		$('input[name="cpf"]').blur(function() {
			var cpfValid = $(this).val();

			$(this).parent().find('.help-block').remove();
			$(this).parent().removeClass('has-error');	

			if(cpfValid.length < 14){
				$(this).parent().addClass('has-error');
				$(this).parent().append('<span class="help-block">CPF inválido.</span>');
				
			}
		})
	},

   	firstNameValidator: function(){
   		$('input[name="firstName"]').blur(function() {
	        $(this).parent().find('.help-block').remove();
	        $(this).parent().removeClass('has-error');

   		    if ($(this).val() === '') {
		        $(this).parent().addClass('has-error');
  		        $(this).parent().append('<span class="help-block">Nome inválido</span>');
   		    }
   		})

   	},

    lastNameValidator: function(){
   		$('input[name="lastName"]').blur(function() {
	        $(this).parent().find('.help-block').remove();
	        $(this).parent().removeClass('has-error');

  		    if ($(this).val() === '') {
       			    $(this).parent().addClass('has-error');
	    		    $(this).parent().append('<span class="help-block">Sobrenome inválido</span>');
   		    }
   		})
   	},

    genderValidator: function(){
   		$('select[name="gender"]').change(function() {
	        $(this).parent().parent().find('.help-block').remove();
	        $(this).parent().parent().removeClass('has-error');
   		})
    },

    telephoneValidator: function(){
		$('.js-blur-phone').on('blur', function(){

	        $(this).parent().find('.help-block').remove();
	        $(this).parent().removeClass('has-error');

  		    if ($(this).val() === '') {
       			    $(this).parent().addClass('has-error');
	    		    $(this).parent().append('<span class="help-block">Telefone inválido</span>');
   		    }
   		})
    },

    typePhoneValidator: function(){
   		$('.js-change-typePhone').on('change', function(){
    	    $(this).parent().parent().find('.help-block').remove();
   	        $(this).parent().parent().removeClass('has-error');
   	    })
    },

    daysValidator: function(){
      $('select[name="days"]').parent().parent().find('.help-block').each(function (){
            if($(this).find(".has-error").length <= 0){
   	            $('select[name="days"]').parent().parent().removeClass('has-error');
            }
        });

   		$('select[name="days"]').change(function() {
    	    $(this).parent().parent().find('.help-block').remove();
   	        $(this).parent().parent().removeClass('has-error');
   		})
    },

    monthsValidator: function(){
      $('select[name="months"]').parent().parent().find('.help-block').each(function (){
            if($(this).find(".has-error").length <= 0){
   	            $('select[name="months"]').parent().parent().removeClass('has-error');
            }
        });

   		$('select[name="months"]').change(function()  {
    	    $(this).parent().parent().find('.help-block').remove();
   	        $(this).parent().parent().removeClass('has-error');
   		})
    },

    yearsValidator: function(){
      $('select[name="years"]').parent().parent().find('.help-block').each(function (){
            if($(this).find(".has-error").length <= 0){
   	            $('select[name="years"]').parent().parent().removeClass('has-error');
            }
        });

   		$('select[name="years"]').change(function() {
    	    $(this).parent().parent().find('.help-block').remove();
   	        $(this).parent().parent().removeClass('has-error');
   		})
    },

    termsOfUseAgreementValidator: function(){
   		$('select[name="termsOfUseAgreement"]').on('click', function() {
    	    $(this).parent().parent().find('.help-block').remove();
   		})
    },

	setSocialHash : function() {
		
		/*var socialHash  =	ACC.global.urlParameter('&');	
		$("#facebookId").val(socialHash);
		*/
		
	}
	
/*	removeRegisterFast : function() {
		cartItemCount = Number($('.cart-item-count').html());
		
		if(cartItemCount > 0){
			$('#btn-submit-register').hide();
		}
	}*/




};ACC.verdictsValidation = {

	_autoload : [ "setVerdictValue" ],
	
	setVerdictValue: function(){
		$('.password-strength').keyup(function(){
			var verdictsValue = $('.progress-bar').attr('aria-valuenow');
		
			$('#verdictsValue').val(verdictsValue);
			
			var pwdBar = $('.progress-bar').attr('aria-valuenow');
			
			if( pwdBar < 60){
				
				$(this).parent().addClass('has-error');
				//$(this).parent().append('<span class="help-block"></span>');
			
			}
					
			else {
				$(this).parent().removeClass('has-error');
				//$(this).parent().remove('<span class="help-block"></span>');
				
			}
			
			if(pwdBar <=  20){
			$(this).parent().removeClass('has-error');
	        $('#password_bar').hide();
			}
			
		});
		
		$('.password-strength').focus(function(){
			$(this).attr({
				'data-container' : 'body',
				'data-toggle' 	 : 'popover',
				'data-placement' : 'top',
				//'data-content' 	 : 'Use apenas letras e números'
			});
			
			ACC.global.bootstrapComponentStarter();
		});
		
	}

};ACC.facets = {

	_autoload: [
		"removeSelectedFacet",
		"toogleFacetBoxContent",
		"markSelectFacet",
		"markMultiSelectFacet",
		"markColorsFacet",
		"searchFacetFormSubmit",
		"clearFacets",
		"mobileToggleFacets"
	],

	removeSelectedFacet: function(){
		//Remove Selected Facet one by one
		$('.selected-facet .crficon-times-circle').click(function(){
			$(this).parent().fadeOut('fast', function(){
				$(this).remove();
			});
		});

		//Remove all Selected Facets
		$('#btnClearSelectedFactes').click(function(){
			$('.selected-facet ul').fadeOut('fast', function(){
				$(this).empty();
				setTimeout(function(){
					$('.selected-facet').slideUp('fast');
				}, 650);
			});
		});
	},

	toogleFacetBoxContent: function(){
		$('.facet .title').click(function(){
			var that = this;
			$(this).parent().find('.content').slideToggle('fast', function(){
				$(that).find('.js-crficon').toggleClass('crficon-minus crficon-plus');
				$(this).parent().toggleClass('closed');
			});
		});
	},

	markSelectFacet: function(){
		$('.single-selection li').click(function(){
			$(this).parent().find('.selected').removeClass('selected');
			$(this).addClass('selected');
		});
	},

	markMultiSelectFacet: function(){
		$('.multiple-selection li').click(function(){
			var checkbox = $(this);
			var isChecked = $(this).find('input[type="checkbox"]').is(':checked');

			if(isChecked){
				checkbox.addClass('checked');
			}else{
				checkbox.removeClass('checked');
			}
		});
	},

	markColorsFacet: function(){
		$('.colors-facet li img').click(function(){
			var color = $(this);
			var isSelected = $(this).hasClass('selected');

			if(!isSelected){
				color.addClass('selected');
			}else{
				color.removeClass('selected');
			}
		});
	},

	searchFacetFormSubmit: function(){
		$('.submit-form').click(function(){
			$(this).parents('form').submit();
		});
	},

	clearFacets: function(){
		$('.btn-clear-facets').click(function() {
			$(this).parents('.facet').find('.selected').removeClass('selected');
			$(this).parents('.facet').find('.checked').removeClass('checked').find('input[type="checkbox"]').prop('checked', false);
		});
	},

	mobileToggleFacets: function(){
		$('.edit-filter-control button, .set-filter-control button').click(function(event) {
			$('.facets').slideToggle();
			$('.result, .sort-navigation, footer').toggle();

			if($(".result-count").hasClass("hidden")){
				$(".result-count").removeClass("hidden");
			}else{
				$(".result-count").addClass("hidden");
			}
		});
	}
};
ACC.verificationfacebookemail = {
	_autoload : [ "verifiedFaceookEmail", "verifiedFaceookEmailCheckout" ],
	verifiedFaceookEmail : function(email) {
		$("#j_username").on('blur', function(email) {

			var isCheckoutFlow = $("#isCheckoutFlow").val();
			var campoDigitado = $(this).val();

			if (isCheckoutFlow) {
				ACC.verificationfacebookemail.verifiedFaceookEmailCheckout();
			}

			FB.api('me', {
				fields : 'gender, first_name, last_name, email,name'
			}, function(response) {

				if (campoDigitado != "") {

					$.ajax({
						url : "login/cadastro-social",
						type : "post",
						data : {
							email : campoDigitado,
							id : response.id,
							gender : response.gender,
							firstName : response.first_name,
							lastName : response.last_name,
						},

						success : function(result) {
							$("#verifiedSocialEmailnet").val(campoDigitado);
							$("#idSubmitSocial").submit();


						},

						error : function(result) {
						}

					});
				}
			});
		});

		$("#btnregisterLogin").on('click', function(e) {
			if ($('#register-email').val() == '') {
				$('#formRegisteLogin .form-group').addClass('has-error');
				$('.alert-email-empty').removeClass('hide');
			} else {
				ACC.verificationfacebookemail.FB();
			}

		});

		$('#register-email').keypress(function(e) {

			if (e.which == 13) {

				e.preventDefault();
				ACC.verificationfacebookemail.FB();
			}
		});

	},

	FB : function() {
		var campoCadastro = $("#register-email").val();
		try {
			FB.api('me', {
				fields : 'gender, first_name, last_name, email,name'
			}, function(response) {
				if (campoCadastro != "") {
					$.ajax({
						url : "login/cadastro-social",
						type : "post",
						data : {
							email : campoCadastro,
						},
						success : function(result) {

							$("#verifiedSocialEmailnet").val(campoCadastro);
							$("#idSubmitSocial").submit();

							var emailSocialConnect = $("#verifiedSocialEmailnet")
							.val();
							if (response.email != emailSocialConnect) {

								ACC.verificationemailgoogle.GP();
							}
						},
						error : function() {
							$('#formRegisteLogin').submit();
						}
					});
				}
			});
		} catch (e) {
			console.warn("FB", e);
			if (campoCadastro != "") {
				$('#formRegisteLogin').submit();
			}
		}
	},

	/**
	 * CheckouFlow
	 */

	verifiedFaceookEmailCheckout : function(email) {
		$("#Checkout_j_username").on('blur', function(email) {

			var campoDigitado = $(this).val();
			FB.api('me', {
				fields : 'gender, first_name, last_name, email,name'
			}, function(response) {
				if (campoDigitado != "") {

					$.ajax({
						url : "./finalizar-compra/cadastro-social",
						type : "post",
						data : {
							email : campoDigitado,
							id : response.id,
							gender : response.gender,
							firstName : response.first_name,
							lastName : response.last_name,
						},

						success : function(result) {
							$("#verifiedEmailCheckout").val(campoDigitado);
							$("#socialCheckoutSubmit").submit();
						},

						error : function(result) {
						}

					});
				}
			});
		});

		$("#btnCheckoutRegister").on('click', function(e) {
			if ($('#register-checkout-email').val() == '') {
				$('#formRegisteLogin .form-group').addClass('has-error');
				$('.alert-email-empty').removeClass('hide');
			} else {
				ACC.verificationfacebookemail.FBCheckout();
			}

		});

		$('#register-checkout-email').keypress(function(e) {

			if (e.which == 13) {
				e.preventDefault();
				ACC.verificationfacebookemail.FBCheckout();
			}
		});

	},
	FBCheckout : function() {

		var campoCadastro = $("#register-checkout-email").val();

		try {
			FB.api('me', {
				fields : 'gender, first_name, last_name, email,name'
			}, function(response) {
				if (campoCadastro != "") {
					$.ajax({
					    url : "./finalizar-compra/cadastro-social",
						type : "post",
						data : {
							email : campoCadastro,
						},
						success : function(result) {

							$("#verifiedEmailCheckout").val(campoCadastro);
							$("#socialCheckoutSubmit").submit();

							var emailSocialConnect = $("#verifiedEmailCheckout")
							.val();
							if (response.email != emailSocialConnect) {

							  ACC.verificationemailgoogle.GPCheckout();
							}
						},
						error : function() {
							$('#carrefourRegisterForm').submit();
						}
					});
				}
			});
		} catch (e) {
			console.warn("FBCheckout", e);
			if (campoCadastro != "") {
				$('#carrefourRegisterForm').submit();
			}
		}
	}

/**
 * CheckouFlow
 */

};
/*ACC.verificationemailgoogle  = {
		_autoload :	["verifiedGoogleEmail","verifiedGoogleEmailCheckout"],
		
   verifiedGoogleEmail : function  (){
	
	 $("#j_username").on('blur', function(email) {
			var googlDigite = $(this).val();
			if (googlDigite != "") {
				$.ajax({
					url: "login/cadastro-social",
					type: "post",
					data: {
						email: googlDigite,
					},
					success: function(result) {
				$("#verifiedSocialEmailnet").val(googlDigite);
				$("#idSubmitSocial").submit();					
					
				},
					error: function() {
					}
				});
			}
			
			$("#btnregisterLogin").on('click', function(e) {
				  ACC.verificationemailgoogle.GP();
			});

		});
	
},

GP : function (){
	var campoCadastro = $("#register-email").val();
	if (campoCadastro != "") {
		$.ajax({
			url: "login/cadastro-social",
			type: "post",
			data: {
				email: campoCadastro,
			},
			success: function(result) {
				$("#verifiedSocialEmailnet").val(campoCadastro);
				$("#idSubmitSocial").submit();	
				
			},
			error: function() {
				$('#formRegisteLogin').submit();	
			}
		});
	}

},

verifiedGoogleEmailCheckout : function  (){
	
	$("#Checkout_j_username").on('blur', function(email) {
			var googlDigite = $(this).val();
			if (googlDigite != "") {
				$.ajax({
					url: "./finalizar-compra/cadastro-social",
					type: "post",
					data: {
						email: googlDigite,
					},
					success: function(result) {
				$("#verifiedEmailCheckout").val(googlDigite);
				$("#socialCheckoutSubmit").submit();					
					
				},
					error: function() {
					}
				});
			}
			
			$("#btnCheckoutRegister").on('click', function(e) {
				  ACC.verificationemailgoogle.GPCheckout();
			});


		});
	
},

GPCheckout : function (){
	var campoCadastro = $("#register-checkout-email").val();
	if (campoCadastro != "") {
		$.ajax({
			url: "./finalizar-compra/cadastro-social",
			type: "post",
			data: {
				email: campoCadastro,
			},
			success: function(result) {
				$("#verifiedEmailCheckout").val(campoCadastro);
				$("#socialCheckoutSubmit").submit();	
				
			},
			error: function() {
				$('#formRegisteLoginCheckout').submit();	
			}
		});
	}

}


}
		

*/ACC.ratingStarBar = {

		_autoload: [
			"bindratingStarBar",
		],

		/*bindratingStarBar: function ()
		{
			//value must be calculated by totals
			var rating1Star = $(".jsProgressbarRatingStar").data('star');	
			var rating2Star = $(".jsProgressbarRating2Star").data('star');	
			var rating3Star = $(".jsProgressbarRating3Star").data('star');	
			var rating4Star = $(".jsProgressbarRating4Star").data('star');	
			var rating5Star = $(".jsProgressbarRating5Star").data('star');	
			
			var array = [rating1Star, rating2Star, rating3Star, rating4Star, rating5Star];
			
			var maxRatings = Math.max.apply(Math, array);
			
			//1 star
			$( ".jsProgressbarRatingStar" ).progressbar({
			      value: rating1Star,
			      max: maxRatings
			 });
			
			//2 stars
			$( ".jsProgressbarRating2Star" ).progressbar({
			      value: rating2Star,
			      max: maxRatings
			 });
			
			//3 stars
			$( ".jsProgressbarRating3Star" ).progressbar({
			      value: rating3Star,
			      max: maxRatings
			 });
			
			//4 stars
			$( ".jsProgressbarRating4Star" ).progressbar({
			      value: rating4Star,
			      max: maxRatings
			 });
			
			//5 stars
			$( ".jsProgressbarRating5Star" ).progressbar({
			      value: rating5Star,
			      max: maxRatings
			 });
			
		}*/
};ACC.datalayer = {
	_autoload : [
     		"setImageClick",
     		["loadOrderConfirmationPage", $("body.page-orderConfirmationPage").length > 0],
			["deliveryPage", $("body.page-multiStepCheckoutSummaryPage").length > 0],
            ["loadCartPage", $("body.page-cartPage").length > 0],
            ["installmentWithInterests", $(".installment-with-interest").length > 0]
     		],
     		setImageClick: function() {
     			$('.image-gallery').click(function(){
                    ACC.datalayer.recoverDataLayer();
     			});
     		},

     		recoverDataLayer: function() {
     			$.ajax({
                    url: "recoverDataLayer",
                    method: "POST",
                    data: {
                    	dataLayer: JSON.stringify(dataLayer[0]),
                    },
                    beforeSend: function(){
                    	console.log('Datalayer: ', dataLayer);
                    }
                })
     		},

            loadOrderConfirmationPage: function() {
                $(document).ready(function() {
                    window.dataLayer.push({event: 'gtm_orderconfirmation'})
                });
            },

			deliveryPage: function () {
				$(document).ready(function () {
					window.dataLayer.push( {event: 'gtm_delivery'} )
				});
			},

            loadCartPage: function () {
                $(document).ready(function () {
                    window.dataLayer.push( {event: 'gtm_cart'} )
                });
            },

            installmentWithInterests: function (){
             $(document).ready(function () {
                window.dataLayer.push( {event: 'parcelamentoJuros'} );
             });
            }
}
ACC.atendimentoNEPage = {
	_autoload : [ "hideWhereProductAquiredDiv", "continueButton" ],

	hideWhereProductAquiredDiv : function() {

		$('#selectedOption').change(function() {
			$(this).find("option:selected").each(function() {
				
				if ($(this).attr("value") == "CANCEL_WARRANTY") {
					$("#question2").hide();
				}else if($(this).attr("value") == "GARANTIA") {
					$("#question2").hide();
				}else {
					$("#question2").show();
				}
				
			});
		}).change();
	},

	continueButton : function() {

		$('#continue').click(function() {
			

			$('#selectedOption').find("option:selected").each(function() {
				
				if ($('#selectedOption').attr("value") == "CANCEL_WARRANTY") {
					
						$('input[name="selectedOption"]').val('CANCEL_WARRANTY');
				}
			});

			if($('#selectedOption').find("option:selected") != "GARANTIA") {
				$('#atendimentoNEPageForm').submit();
			}

		});
	}

};ACC.atendimentoForm = {
	_autoload : [
	        ["bindIdentifier", $("body.page-atendimentoEmailSite").length > 0],
	        ["warrant", window.location.search == "?garantia=true"]
     	],

     	bindIdentifier: function() {
 			$("#identifierMode").change(function(){
 				if($(this).val() == "CPF") {
 					$(".cpf-identifier-mode").removeClass("hidden");
 					$(".order-identifier-mode").addClass("hidden");
 				} else {
 					$(".order-identifier-mode").removeClass("hidden");
 					$(".cpf-identifier-mode").addClass("hidden");
 				}
 			})
    	},
    	warrant: function() {
    		$("#reason").val('Solicitação').trigger('change');
    		setTimeout(function(){ 
    			$("#subject").val('GARANTIA').trigger('change');
    		}, 1000);
    	}
};ACC.productNavFixed = {

	_autoload : [[ "visibleNav" , $("body.page-productDetails").length != 0] ],

	visibleNav : function() {

		var menuid = $('.menu-fixed li');
		var menuit = menuid.find('a');

		var navit = menuit.map(function() {
			return $(this).attr('href');
    });

		$(".js-link a").click(function(event) {
			event.preventDefault();
			$('html,body').animate({
				scrollTop : $(this.hash).offset().top
			}, 500);
		});
	}
}
ACC.searchMobileShow = {

		_autoload: [
			"bindSearchMobile"
		],

		bindSearchMobile: function()
		{


			$(".js-site-search-input").click(function() {
				if($('.mobile-nav').hasClass('expand')){
					$('.navigation-nav .nav-pills').addClass('hidden');
				}

				$(".header").addClass("header-mobile");
				$(".site-search").addClass("block-search-mobile-add");
				$(".site-search").addClass("focused");


				if ($('.toogle-sub-mobile ul.nav.nav-pills').is(':visible')) {
					$('div#block-search-mobile-add:eq(1)').hide();
				}
				$('div#block-search-mobile-add:eq(2)').addClass('search-top-mobile');
				$(".js-site-search-input").focus();
				$('body').scrollTop(0);
			});

			$(".close-search-icon").click(function(e) {
				e.preventDefault();
				if($('.mobile-nav').hasClass('expand')){
					$('.navigation-nav .nav-pills').removeClass('hidden');

					if($('.mobile-nav span:nth-child(1)').hasClass('crficon-hamburguer')){
						$('.mobile-nav span:nth-child(1)').removeClass('crficon-hamburguer');
						$('.mobile-nav span:nth-child(1)').addClass('crficon-times');
					}else{
						$('.mobile-nav span:nth-child(1)').removeClass('crficon-times');
						$('.mobile-nav span:nth-child(1)').addClass('crficon-hamburguer');
					}

					$('.mobile-nav').removeClass('expand');
					$('.toogle-sub-mobile .nav-pills').fadeToggle(100);
					if($('.scroll-menu-fade').is(':visible')){
						$('ul.nav.nav-pills').hide();
					}
				}

			  $(".header").removeClass("header-mobile");
			  $(".site-search").removeClass("block-search-mobile-add");
			  $(".site-search").removeClass("focused");
			  $(".btn-link.close-search-icon").addClass("hidden");
			  $(".submit-search-icon").removeClass("hidden");
			  if (!$('.toogle-sub-mobile ul.nav.nav-pills').is(':visible')) {
				  $('div#block-search-mobile-add:eq(1)').show();
			  }
			  $('div#block-search-mobile-add:eq(2)').removeClass('search-top-mobile');
			});

			/*.blur(function(){
				  $(".header").removeClass("header-mobile");
				  $(".site-search").removeClass("block-search-mobile-add");
				  $(".crficon-search").removeClass("close-search-mobile-icon");
				  $(".close-search-mobile-icon").addClass("crficon-search").removeClass("close-search-mobile-icon");
				  $('div#block-search-mobile-add:eq(2)').removeClass('search-top-mobile');
	         });*/


					 $("#searchForm .submit-search-icon.hidden-md.hidden-lg").on("click", function(){
						 var inputVal = $(this).parents("form").find(".js-site-search-input").val();
						 if($.trim(inputVal).length > 0){
							 $(this).parents("form")[0].submit();
						 }
					 } );
		}
	};

$(function () {
    var $inputs = $("input, textarea, select", "#searchForm"),
        $button = $(".submit-search-icon");

    var limpos = 0;

    $inputs.each(function () {
        var $this = $(this);
        var val = $this.val();
        val || limpos++;
        $this.data("val-antigo", val);
    });



    $inputs.on("change keyup mouseup", function () {
        var $this = $(this);
        var val = $this.val();
        limpos += (val ? 0 : 1) - ($this.data("val-antigo") ? 0 : 1);
        $this.data("val-antigo", val);

    });
});ACC.cmsComponents = {

	_autoload: [
		["bindVideo100Component", $(".carrefour-subhome-video-100").length != 0],
	],


	bindVideo100Component: function(){
		
		var windowHeight = $(window).height();
		$(".carrefour-subhome-video-100 iframe").height(windowHeight);
		$(".carrefour-subhome-video-100 iframe").width($(".carrefour-subhome-video-100").width());

	}
};
ACC.checkoutWishlist = {
    _autoload : ["addToList", "myList", "validateListName", "validateCharacters"],

    addToList: function() {
        $('body').on('click', '#addToShoppingListButton, #shoppingListRetryButton', function(e){

            var newListName = $("input[name=newListName]").val();
            var selectedLists = $("input.existentWishlistCheck:checked");

            if ((!newListName || newListName.length === 0) && selectedLists.length === 0) {
                ACC.checkoutWishlist.showMandatoryError();
                e.preventDefault();
                return false;
            }

            var selectedProducts = $("input.checkbox-select-item:checked");
            if (!selectedProducts || selectedProducts.length === 0) {
                ACC.checkoutWishlist.showNoProductSelectedError();
                e.preventDefault();
                return false;
            }

            ACC.checkoutWishlist.hideErrors();

            var productCodes = [];
            selectedProducts.each(function() {
                productCodes.push($(this).val());
            });

            var wishlistCodes = [];
            selectedLists.each(function() {
                wishlistCodes.push($(this).val());
            });

            var requestBody = {
                "productCodes": productCodes,
                "wishlistCodes": wishlistCodes,
                "newWishlist": newListName
            };

            var url = ACC.config.contextPath + "/checkout-wishlist/set-products/?CSRFToken=" + ACC.config.CSRFToken;

            ACC.checkoutWishlist.showLoader();
            $.ajax({
                type: "POST",
                contentType: "application/json",
                url: url,
                data: JSON.stringify(requestBody),
                success: function( data ) {
                    ACC.checkoutWishlist.hideErrorModal();
                    ACC.checkoutWishlist.hideLoader();
                    ACC.checkoutWishlist.showSuccessModal();
                    $("span.addedShoppingLists").text(data.addedLists);
                },
                error: function( data ) {
                    ACC.checkoutWishlist.hideLoader();
                    ACC.checkoutWishlist.showErrorModal();
                }
            });
        });
    },

    myList: function() {
        $("#seeShoppingListButton").click(function() {
            var url = ACC.config.contextPath + "/minha-conta/minhas-listas";
            window.location.href = url;
        });
    },

    validateListName: function() {
        $( "#newListName" ).blur(function() {
            var newListName = $("input[name=newListName]").val();
            var listNames = $("input.existentWishlistCheck")

            var wishlistCodes = [];
            listNames.each(function() {
                wishlistCodes.push($(this).attr('listname'));
            });

            if (wishlistCodes.indexOf(newListName) >= 0) {
                $('#addToShoppingListButton').prop("disabled",true);
                ACC.checkoutWishlist.showDuplicatedNameError();
            } else {
                $('#addToShoppingListButton').prop("disabled",false);
                ACC.checkoutWishlist.hideErrors();
            }
        });
    },

    validateCharacters: function() {
        $( "#newListName" ).on('keypress', function (event) {
            var regex = new RegExp("^[\\#]+$");
            var key = String.fromCharCode(!event.charCode ? event.which : event.charCode);
            if (regex.test(key)) {
                event.preventDefault();
                return false;
            }
        });
    },

    showMandatoryError: function() {
        $("#addToShoppingListErrorMandatory").show();
        $("#addToShoppingListErrorNoProductSelected").hide();
        $("#addToShoppingListErrorDuplicatedName").hide();
        $("div.shoppingListInput").addClass("has-error");
    },

    showNoProductSelectedError: function() {
        $("#addToShoppingListErrorMandatory").hide();
        $("#addToShoppingListErrorNoProductSelected").show();
        $("#addToShoppingListErrorDuplicatedName").hide();
        $("div.shoppingListInput").addClass("has-error");
    },

    showDuplicatedNameError: function() {
        $("#addToShoppingListErrorMandatory").hide();
        $("#addToShoppingListErrorNoProductSelected").hide();
        $("#addToShoppingListErrorDuplicatedName").show();
        $("div.shoppingListInput").addClass("has-error");
    },

    hideErrors: function() {
        $("#addToShoppingListErrorMandatory").hide();
        $("#addToShoppingListErrorNoProductSelected").hide();
        $("#addToShoppingListErrorDuplicatedName").hide();
        $("div.shoppingListInput").removeClass("has-error");
    },

    showLoader: function() {
        $("#site-loader").show();
    },

    hideLoader: function() {
        $("#site-loader").hide();
    },

    showSuccessModal: function() {
        $("#shoppingSuccessListModal").modal();
    },

    showErrorModal: function() {
        $("#shoppingErrorListModal").modal();
    },

    hideErrorModal: function() {
        $("#shoppingErrorListModal").modal('hide');
    }
}//################################################################
//#### Autoload
//################################################################
// 
// ACC.sample={
// 	_autoload: [
// 		"samplefunction",
// 		["somefunction", "some expression to test"]
// 		["somefunction","some expression to test","elsefunction"]
// 	],

// 	samplefunction:function(){
// 		//... do some suff here, executed every time ...
// 	},

// 	somefunction:function(){
// 		//... do some suff here. if expression match ...
// 	},

// 	elsefunction:function(){
// 		//... do some suff here. if expression NOT match ...
// 	}

// }

//  // sample expression: $(".js-storefinder-map").length != 0


function _autoload(){
	$.each(ACC,function(section,obj){
		if($.isArray(obj._autoload)){
			$.each(obj._autoload,function(key,value){
			try {
				if($.isArray(value)){
					if(value[1]){
						ACC[section][value[0]]();
					}else{
						if(value[2]){
							ACC[section][value[2]]()
						}
					}
				}else{
					ACC[section][value]();
				}
			}catch(err) {
				console.log("Error _autoload: " + section + " | " + value +" : " + err);
			}
			})
		}
	})
}

$(function(){
	_autoload();
});
/**
 * Used to change dynimac values in cached pages
 * @class ACC
 * @method dynamicInfo
*/


ACC.dynamicInfo = (function() {

  // Polyfill to fix CustomEvent on IE11
  (function () {

    if ( typeof window.CustomEvent === "function" ) return false;

    function CustomEvent ( event, params ) {
      params = params || { bubbles: false, cancelable: false, detail: undefined };
      var evt = document.createEvent( 'CustomEvent' );
      evt.initCustomEvent( event, params.bubbles, params.cancelable, params.detail );
      return evt;
     }

    CustomEvent.prototype = window.Event.prototype;

    window.CustomEvent = CustomEvent;
  })();

  /**
	 * Get info and change
	 * @method getData
   * @example
   * $("#adobeAnalytics").on('dynamicInfoLoaded', function(){
   *  // Your code here
   * });
	*/
  function getData() {
    var url        = "/token" + location.search,
        csrfInput  = $("[name=CSRFToken]"),
        nameHeader = $(".name-header"),
        cartCount  = $(".cart-item-count"),
        inputName  = $("#inputAvisameNameLogged"),
        inputMail  = $("#inputAvisameEmailLogged"),
        event       = new CustomEvent('dynamicInfoLoaded'),
        userLogged  = "false";

    var dispatch = function(){
          try{
            // Create a Data Element and use its value to configure timeout
            var delayed = 2000;
            if(typeof _satellite.getVar == "function") {
              var delayed = Number(_satellite.getVar("Delayed_page")) || delayed;
            }

            setTimeout(function(){
                document.getElementById("adobeAnalytics").dispatchEvent(event);
            }, delayed);

          } catch (e) {
            console.log("dispatchEvent", e);
          }
        };

    $.ajax({
      url: url,
      type: 'GET',
      timeout: 60000,
      success: function(data) {

        if(data.cache === true){

          csrfInput.val(data.token);
          cartCount.text(data.cartQuantity);
          ACC.config.CSRFToken = data.token;
          ACC.isUserLoggedIn = data.userLogged;
          if(data.userLogged) {
            $("body").removeClass("not-logged-in").addClass("logged-in");
            nameHeader.text(data.dataLayer.userName);
            inputName.val(data.dataLayer.userName);
            inputMail.val(data.dataLayer.email);

            userLogged = "true";
            populateDatalayer(data.dataLayer);
          } else {
              $("body").removeClass("logged-in").addClass("not-logged-in");
          }

          dispatch();
        } else {
          $(".btn-header-dropdown").removeClass("hidden");
          $("body").removeClass("not-logged-in logged-in");
          dispatch();
        }

      },
      error: dispatch,
      complete: function(){
        $(".btn-header-dropdown").removeClass("hidden");

        if(typeof isUserLogged !== "undefined") {
          isUserLogged = userLogged; // Global Variable
        }
        $(".js-review-write-toggle.btn-review-tab").attr("isuserlogged", userLogged); //behavior on rate page
        ACC.product.checkWishListToShow();
      }
    });
  }

  /**
   * Add new user infos to dataLayer loaded as a service
   * @method populateDatalayer
   * @param dl {object} - Object datalayer
  */
  function populateDatalayer(dl){
    var whiteList = Array(
      "visitorAge",
      "visitorGender",
      "dataFirstPurchase",
      "registrationData",
      "userId",
      "statusLogin",
      "customerType",
      "userName",
      "userEmail"
    );

    window.dataLayer = (window.dataLayer) ? ( (window.dataLayer[0]) ? window.dataLayer : [{}] ) : [{}];

    // add itens to position 0 of the datalayer array
    for(var idx in whiteList){
      var prop = whiteList[idx];
      window.dataLayer[0][prop] = dl[prop];
    }
  }

  function init() {
    getData();
  }

   return {
    init:init
  }
})();

ACC.dynamicInfo.init();
ACC.listPagination = ( {

	_autoload: [
				'listPagination'
	],

	listPagination: function () {
		var DEFAULT_INDEX_START = 1, theUL = $(".category-result-list"),
		page = parseInt(theUL.data("page")) || DEFAULT_INDEX_START, oldPage = page,
		pageDataset = $("span.categoryResultsUrlSearch:last"),
		categoryResultsUrl = pageDataset.attr("data-categoryresultsurl"),
		termo = pageDataset.attr("data-termo") || ":",
		sort = pageDataset.attr("data-sort"),
		hasNextPage = pageDataset.attr("data-hasnextpage"),
		isGrid = pageDataset.attr("data-isgrid"),
		prevBtn = $("#loadPrevPage"),
		nextBtn = $("#loadNextPage"),
		nextBtnAsm = $("#loadAsmNextPage"),
		pageHistory = [page];

	if(hasNextPage === 'true'){
		nextBtn.removeClass('hidden');
		nextBtnAsm.removeClass('hidden');
	}else{
		nextBtn.addClass('hidden');
	  nextBtnAsm.addClass('hidden');
	}

	/*
		E V E N T S
	*/

	window.onpopstate = function(){
		page = getPageByURL(document.location.toString());
		getContentByPage(page > oldPage, true);
		//console.log('pop state', page)
	}


	$("#loadPrevPage, #loadNextPage, #loadAsmNextPage").click(function(){
		var id = $(this).attr("id"), isAppend = id != "loadPrevPage";

		page = updatePageIndexAfterClick((isAppend) ? 1 : -1);
		getContentByPage(isAppend);
		//console.log("get content for page",page)

		return false;
	});

	/*
		A C T I O N S
	*/

	function updatePageHistory(){
		pageHistory.push(page);
		pageHistory.sort(function(a,b){ return a-b;});
	}

	function updateState(p){
		history.pushState({}, $("title").text(), getURL(p, 0));
	}

	function updatePageIndexAfterClick(n){
		var prevLink, nextLink, p = (page + n >= DEFAULT_INDEX_START) ? page+n : DEFAULT_INDEX_START;

		// on button click, check if the page has alredy been loaded, and look for the next/prev page and so on
		p = checkForPagesNotYetLoaded(p, p > page);

		updatePrevLink(p);
		updateNextLink(p);
		updateCanonicalLink(p);
		updateState(p);

		return p;
	}

	function updateCanonicalLink(p){
        var link = $("link[rel=canonical]"), url = getURL(p, 0);
        if(p == DEFAULT_INDEX_START){
            prevBtn.remove();
            link.length && link.remove();
        }else{
            link.attr("href", window.location.href);
        }
    }

	function updatePrevLink(p){
		var link = $("link[rel=prev]"), url = getURL(p, -1);
		if(p == DEFAULT_INDEX_START){
			prevBtn.remove();
			link.length && link.remove();
		}else{
			link.attr("href", url);
			prevBtn.attr("href", url);
		}
	}

	function updateNextLink(p){
		var link = $("link[rel=next]"), url = getURL(p, 1);

		if(!hasNextPageChecker()){
			nextBtn.remove();
			link.length && link.remove();
		}else{
			link.attr("href", url);
			nextBtn.attr("href", url);
		}
	}

	/*
		U T I L S
	*/

	function getAJAXURL(pg, inc){

		// Food zip zone parameter applied to pagination (see [CACHE-57]):
		var foodzipzoneParam = ACC.global.getFoodZipZoneParameter();
        var selectedPointOfServices = window.unescape(ACC.functionCookie.getCookie("selectedPointOfServices"));
		var selectedPOSParam = selectedPointOfServices !== "undefined" ? "&pos=" + selectedPointOfServices : "";

		return categoryResultsUrl+"?termo="+termo+"&isGrid="+isGrid+"&sort="+sort+"&page="+(pg+inc)
			+"&"+foodzipzoneParam + selectedPOSParam;
	}

	function getURL(pg, inc){
		return getAJAXURL(pg, inc).replace("/results", "").replace("/c","");
	}

	function getContentByPage(isAppend, viaPushState){
		oldPage = page;

		if(pageHistory.filter(function(x){return x == page}).length){
			//console.log("PÁGINA JÁ CARREGADA");
			return;
		}


		updatePageHistory();

		$.get(getAJAXURL(page, 0), function(res){

			if(isAppend){
				theUL.append(res);
            	updateNextLink(page);
			}else{
				theUL.prepend(res);
			}

            if(typeof enableCategorySearchApiStock !== 'undefined' && enableCategorySearchApiStock) {
                ACC.product.populatePageWithApiInfo();
            }

	  $(window).trigger('scroll');
		});
	}

	function getPageByURL(url){
		var matchResult = url.match(/page=(\d+)\&?/), p;
		if(matchResult != null && matchResult.length){
			return parseInt(matchResult[0].replace("page=", ""));
		}
		return DEFAULT_INDEX_START;
	}

	function checkForPagesNotYetLoaded(p, isAppend){
		var alreadyLoaded = pageHistory.filter(function(x){return x == p;});
		//console.log('checkForPagesNotYetLoaded', p, alreadyLoaded.length, isAppend);

		if(alreadyLoaded.length){
			if(isAppend)
				return checkForPagesNotYetLoaded(p + 1, isAppend);
			else
				return checkForPagesNotYetLoaded(p - 1, isAppend);
		}else{
			return p;
		}
	}

	function hasNextPageChecker(){
		return $('span.categoryResultsUrlSearch:last').attr("data-hasnextpage") == "true";
	}


	}


});
ACC.modals = {
    _autoload: [],

    showModal: function(id){
        return this.callModalService(id, this.getModalInstance())
        .then(function(res, modalInstance){
            console.log("THEN", res, modalInstance)
            $(this.setModalDom(res)).find(".modal").modal()
            .on("shown.bs.modal", function () {
                modalInstance.cbShown && modalInstance.cbShown.call();
            })
            .on("hidden.bs.modal", function () {
                $(this).parent().remove();
                modalInstance.cbHidden && modalInstance.cbHidden.call();
            });
        }.bind(this));        
    },
    callModalService: function(id, modalInstance){  
        var cb = function(){};
        $.get("/modal/" + id, function (res) {
            cb.apply(this, [res, modalInstance]);
        }.bind(this));
        return {
            then: function(fn){
                cb = fn;
                return modalInstance;
            }
        };
    },
    getModalInstance: function(){
        var ModalBody = function () { };
        ModalBody.prototype = {
            cbShown: null,
            cbHidden: null,
            onShown: function (cbShown) { this.cbShown = cbShown; return this; },
            onHidden: function (cbHidden) { this.cbHidden = cbHidden; return this; }
        }
        return new ModalBody();
    },
    setModalDom: function(str){
        var modal = document.createElement("div");
        modal.innerHTML = str;
        document.body.appendChild(modal);
        return modal;
    }
};/**
 * Used to change dynimac values in cached pages
 * @class ACC
 * @method trackCmkt
*/

ACC.trackCmkt = (function() {

  var userCookie        = "AMCV_47C26A9C570385957F000101%40AdobeOrg",
      cookieStatusLogin = "carrefourStatusLogin";


  // Get UserId from Cookie or from Hybris.
  function getUserId(){
    var setUserId =  dataLayer[0].userId || getCookie(userCookie).substr(39, 38);
    return setUserId+"";
  }

	// Get Cookie value By Name
  function getCookie(cookieName){
		return(document.cookie.match('(^|; )'+cookieName+'=([^;]*)')||0)[2];
	}

  function createCookie(name, value) {
    var d = new Date();
    d.setTime(d.getTime() + (1000*24*60*60*1000)); // 1000 days
    var expires = "expires="+ d.toUTCString();
    document.cookie = name+"="+value+"; " + expires + " path=/";
  }


  // Validate if Is LoggedIn or not
	function isLogged() {
      return dataLayer[0]["statusLogin"] === "logged" ? true : false;
  }

  /** Send piwik info
  * @method: sendTrackLogin()
  * @exemple:
  * e_a: cookieUserId"
  * e_c: "userLogin"
  * e_n: ""
  * e_v: "53800890780116039810145429795898421622%7CMCAAMLH-1486061220%7C4%7CMCAAMB-1486"
  *
  **/
  function sendTrackLogin() {
    //_paq.push(['trackEvent', 'userLogin', 'cookieUserId', '' , getCookie(userCookie).substr(39, 77)+""]);
    createCookie(cookieStatusLogin, 1);
    return getCookie(userCookie).substr(39, 38)+"";
  }

	function trackLogin() {
    var cStatusLogin = getCookie(cookieStatusLogin),
        cookieValue = "",
        concat = "|";

		if(cStatusLogin === undefined){
			createCookie(cookieStatusLogin, 0);
			if(isLogged()) {
        cookieValue = concat + sendTrackLogin();
      }
		} else {
      if(cStatusLogin === "0" && isLogged() ) {
        cookieValue = concat + sendTrackLogin();
      } else if(cStatusLogin === "1" && !isLogged() ) {
        createCookie(cookieStatusLogin, 0);
      }
    }
    return cookieValue;
	}


  /* To get information

  e_a:"product"
  e_c:"addWishlist"
  e_n:""
  e_v:"5004"
  */
  function trackWishlist(){
    var elem = document.getElementById("adobeAnalytics");
    elem.addEventListener("itemAddedToWishList", function(data) {
    _paq.push(['trackEvent', 'addWishlist', 'product', '' , data.detail.productCode+""]);
    }, false);

  }

  /**
  * Track from productReview
  * Script productDetail
  **/
  function trackReview() {
    var elem = document.getElementById("adobeAnalytics");
    elem.addEventListener("productReview", function(data) {
    _paq.push(['trackEvent', 'productReview', 'product', '' , data.detail.rating+""]);
    }, false);
  }


  function getUserStatus() {

    //return  isLogged() ? {"useridorigin" :"SAP_HYBRIS_CONSUMER"} : {"useridorigin" :"COOKIE_ID"} ;
    return  isLogged() ? "SAP_HYBRIS_CONSUMER" : "COOKIE_ID" ;
  }

 	return {
    getUserId     : getUserId,
    getUserStatus : getUserStatus,
    trackLogin    : trackLogin,
    trackReview   : trackReview,
    trackWishlist : trackWishlist
	}
})();
ACC.ecommerceExtendedWarranty = {
    _autoload: [
        "initCart"
    ],

    screenWidth: 1024,

    modalOptions: {
        keyboard: true
    },

    getSelectedWarranties: function(forceWithoutWarranty) {
        var products = [];
        var warranties = {};
        var containers = $('.extended-warranty-product-infos');
        for (var i = 0, length = containers.length; i < length; i++) {
            products.push({
                code: $(containers[i]).data('code'),
                quantity: $(containers[i]).data('quantity')
            });
        }

        for (i = 0, length = products.length; i < length; i++) {
            if (!warranties[products[i].code]) {
                warranties[products[i].code] = [];
            }

            for (var position = 1, quantity = products[i].quantity; position <= quantity; position++) {
                var input;
                var inputQuery = "input[name='product-" + products[i].code + "-" + position + "']";
                if (forceWithoutWarranty) {
                    input = $(inputQuery).first();
                } else {
                    input = $(inputQuery + ":checked");
                }
                warranties[products[i].code].push({
                    code: input.val(),
                    price: input.data('price'),
                    validity: input.data('validity'),
                    identifier: input.data('identifier'),
                    noExtendedWarranty: input.data('no-extended-warranty')
                });
            }

        }
        return warranties;
    },

    changeWarranty: function() {
        var data = {
            warranties: ACC.ecommerceExtendedWarranty.getSelectedWarranties()
        };

        $.ajax({
            url: '/ecommerce/extended-warranty/calculate',
            type: 'POST',
            data: JSON.stringify(data),
            beforeSend: function(request) {
                request.setRequestHeader('CSRFToken', ACC.config.CSRFToken);
            },
            contentType: "application/json",
            dataType: "json",
            addCsrf: false,
            success: function(result) {
                $(".temp-calculation-type").remove();
                var results = result.results;

                $('#extended-warranty-total-value .value').html(result.formattedTotal);

                for (var code in results) {
                    var calculations = results[code];
                    for (var i in calculations) {
                        var calculation = calculations[i];
                        var quantity = $('#modal-message-quantity').val();

                        if (calculation.validity) {
                            var message = calculation.identifier + ' - ' + quantity + ' ' +  calculation.quantity;
                            $('#warranty-description-' + code)
                                .after('<li class="temp-calculation-type">' + message + '</li>');
                            $('#warranty-value-' + code).after('<li class="temp-calculation-type">'+ calculation.formattedPrice +'</li>');
                        }
                    }
                }
            }
        });
    },

    selectWarranties: function(modal, forceWithoutWarranty) {
        var data = {
            warranties: ACC.ecommerceExtendedWarranty.getSelectedWarranties(forceWithoutWarranty)
        };
        $.ajax({
            url: '/ecommerce/extended-warranty',
            method: 'POST',
            data: JSON.stringify(data),
            beforeSend: function(request) {
                request.setRequestHeader('CSRFToken', ACC.config.CSRFToken);
            },
            contentType: "application/json",
            dataType: "json",
            addCsrf: false,
            success: function() {
                modal.modal('hide');
                ACC.ecommerceExtendedWarranty.reload();
            },
            error: function() {
                modal.modal('hide');
                ACC.ecommerceExtendedWarranty.showError();
            }
        });
    },

    setWithoutWarranty: function() {
        ACC.ecommerceExtendedWarranty.selectWarranties(ACC.ecommerceExtendedWarranty.extendedWarrantyModal(), true);
    },

    reload: function() {
        window.location.reload();
    },

    showError: function() {
        $('.heading-title').append($("<div class='alert alert-danger'>" + $("#modal-message-error-on-save").val() + "</div>"));
    },

    openModal: function() {
        var modal = ACC.ecommerceExtendedWarranty.extendedWarrantyModal();
        if (window.screen.availWidth >= ACC.ecommerceExtendedWarranty.screenWidth && modal.data('opened') == 'open') {
            ACC.ecommerceExtendedWarranty.forceWithoutWarranty = true;
            modal.modal(ACC.ecommerceExtendedWarranty.modalOptions);
            ACC.ecommerceExtendedWarranty.changeWarranty();
        }
    },

    openModalForProduct: function(code) {
        $.ajax({
            url: '/ecommerce/extended-warranty/' + code,
            method: 'GET',
            success: function(html) {
                var wrapper = $(html);
                var modal = ACC.ecommerceExtendedWarranty.extendedWarrantyModal();
                if (wrapper.data('opened') == 'open') {
                    modal.data('opened', 'open');
                    modal.html(wrapper.html());
                    ACC.ecommerceExtendedWarranty.openModal();
                    ACC.ecommerceExtendedWarranty.forceWithoutWarranty = false;
                }
            }
        });
    },

    openModalForInsuranceConditions: function() {
      $.ajax({
          url: '/ecommerce/extended-warranty/insurance-conditions/',
          method: 'GET',
          success: function(html) {
              var wrapper = $(html);
              $( "#conditions" ).html(wrapper);
              ACC.ecommerceExtendedWarranty.extendedWarrantyModal().modal('hide');
              $('#extended-warranty-conditions-modal').modal(ACC.ecommerceExtendedWarranty.modalOptions);
          }
      });
    },


    extendedWarrantyModal: function() {
        return $('#extended-warranty-modal');
    },

    initCart: function() {
        $(document).on('click', '.open-extended-warranty-modal', function(event) {
            event.preventDefault();
            window.location = '/escolhaosseusservicos/' + $(this).data('code');
        });
        $(document).on('click', '#extended-warranty-continue', function(event) {
            event.preventDefault();
            ACC.ecommerceExtendedWarranty.forceWithoutWarranty = false;
            ACC.ecommerceExtendedWarranty.selectWarranties(ACC.ecommerceExtendedWarranty.extendedWarrantyModal());
        });
        $(document).on('click', '.extended-warranty-conditions-link', function(event) {
            event.preventDefault();
            ACC.ecommerceExtendedWarranty.forceWithoutWarranty = false;
            ACC.ecommerceExtendedWarranty.openModalForInsuranceConditions();
        });
        $(document).on('click', '.extended-warranty-payment-link', function(event) {
            event.preventDefault();
            ACC.ecommerceExtendedWarranty.forceWithoutWarranty = false;
            ACC.ecommerceExtendedWarranty.extendedWarrantyModal().modal('hide');
            $('#extended-warranty-payment-modal').modal(ACC.ecommerceExtendedWarranty.modalOptions);
        });
        $(document).on('change', '.extended-warranty-radio-select', function() {
            ACC.ecommerceExtendedWarranty.changeWarranty();
        });
        $('#extended-warranty-conditions-modal').on('hidden.bs.modal', function () {
            ACC.ecommerceExtendedWarranty.openModal();
        });
        $('#extended-warranty-payment-modal').on('hidden.bs.modal', function () {
            ACC.ecommerceExtendedWarranty.openModal();
        });

        $('#extended-warranty-modal').on('hidden.bs.modal', function () {
            if (ACC.ecommerceExtendedWarranty.forceWithoutWarranty) {
                ACC.ecommerceExtendedWarranty.setWithoutWarranty();
            }
        });

        ACC.ecommerceExtendedWarranty.openModal();
    }
};
ACC.orderConfirmation = {

    printContract: function(url) {
        myWindow = window.open(url, 'window');
        myWindow.print();
        myWindow.onload = function(){
        setTimeout(function(){myWindow.close()},0);
        }
     }
};
ACC.paginationSeller = {

    _autoload: [
        'initEvaluations',
        'listPaginationSeller',
        'filterRefinementsSeller',
        'mobileBtnFacetsSeller',
        'fillEvaluationGradeBars',
        'formatEvaluationCount'
    ],

    loadsellersBtn: $('.load-sellers a'),
    currrenseller: 0,
    currentpage: 1,
    evaluationPage: 0,
    gradeValueFilter: 0,

    initEvaluations: function () {
        $('.load-evaluations').click(function () {
            $.ajax({
                url: window.location.pathname + "/evaluations",
                type: "get",
                async: false,
                dataType: 'html',
                data: {
                    page: ACC.paginationSeller.evaluationPage,
                    gradeValueFilter: ACC.paginationSeller.gradeValueFilter
                },
            })
            .done(function (result) {
                $("#sellerpageevaluationfragment").append(result);

                var qty_comments = $('.partnerSeller__evaluationName').length;
                var totalEvaluations = $('.tEvaluations').val()==undefined?0:$('.tEvaluations').val();
                var comments_block = "<div class='qty_comments'>" + qty_comments + " de " + totalEvaluations + "</div>";

                $("#js-comments").html(comments_block);
                ACC.paginationSeller.evaluationPage++;
            })
        });

        $('.grade-filter').click(function () {
            ACC.paginationSeller.gradeValueFilter = $(this).attr("data-grade");
            ACC.paginationSeller.evaluationPage = 0;
            $("#sellerpageevaluationfragment").empty();

            $.ajax({
                url: window.location.pathname + "/evaluations",
                type: "get",
                async: false,
                dataType: 'html',
                data: {
                    page: ACC.paginationSeller.evaluationPage,
                    gradeValueFilter: ACC.paginationSeller.gradeValueFilter
                },
            })
            .done(function (result) {
                $("#sellerpageevaluationfragment").append(result);

                var qty_comments = $('.partnerSeller__evaluationName').length;
                var totalEvaluations = $('.tEvaluations').val()==undefined?0:$('.tEvaluations').val();
                var comments_block = "<div class='qty_comments'>" + qty_comments + " de " + totalEvaluations + "</div>";

                $("#js-comments").html(comments_block);
                ACC.paginationSeller.evaluationPage++;
            })
        });
    },

    listPaginationSeller: function () {
        var that = this;
        var mysellerurl = window.location.pathname;
        this.loadsellersBtn.click(function () {

            var pageData = $(this).data("page");
            var searchQuery = $(this).data("termo");

            $.ajax
            ({
                url: mysellerurl + "/results",
                type: "get",
                async: false,
                dataType: 'html',
                data: {
                    page: ACC.paginationSeller.currentpage,
                    termo: searchQuery
                }
            })
            .done(function (result) {
                $("#sellerpagefragment").append(result);
                ACC.paginationSeller.currentpage++;
                ACC.ratingstars.bindRatingStars();

                $('.lz-img').addClass('loaded');
                $('.lz-img').each(function() {
                   var $t = $(this);
                   $t.attr({
                       src: $t.attr('data-src'),
                     })
                     .removeAttr('data-src');
                 });

                setTimeout(function(){
                    var lastOffers = $("#qtdViewOfferTotal").val();
                    if(!(lastOffers === null || lastOffers === undefined) ){
                        var left = parseInt($("#leftOffers").val());
                        var total = parseInt($('.product').length);

                        if(total <= left){
                            $("#qtdViewOfferTotal").val(total);
                            var results_block = total + " de " + left;
                            $(".seller-plp-offers").html(results_block);
                        }
                    }
                }, 100);
            })
        });
    },


    filterRefinementsSeller: function () {
        if ($('#filterRefinements').length) {
            $('.js-product-facet').addClass('js-adjust-filter');
            $(".js-adjust-filter").removeClass('col-lg-2 col-md-3');
        }
    },

    mobileBtnFacetsSeller: function () {

        var filter_here = true;

        $('.js-filter-div-seller button').click(function () {

            if (filter_here) {
                $('.js-filter-btn-seller').text('Fechar Filtros');
                $('.facets').addClass('js-adjust-facets');
                $('.set-filter-control').hide();
                filter_here = false;
            } else {
                $('.js-filter-btn-seller').text('Filtre Aqui');
                $('.facets').removeClass('js-adjust-facets');
                filter_here = true;
            }
        });
    },

    fillEvaluationGradeBars: function () {
        $('.progress-fill').each(function () {
            var barWidth = $(this).attr('bar-width') + '%';
            $(this).css('width', barWidth);
        })
    },

    formatEvaluationCount: function () {
        var evaluationCount = $('#qtdCommentTotal').val();
        if (evaluationCount <= 999999) {
            $('.js-evaluation-count').text(Number(evaluationCount).toLocaleString('pt'));
        } else {
            $('.js-evaluation-count').text('+999.999');
        }
    }
};ACC.sellerQuestions =  {

	_autoload: [
        'listQuestionSeller',
        'gettingDataSeller',
        'sendQuestionSeller'
	],

    selectedStarValue: 0,

    listQuestionSeller : function() {

        $(".js-btn-consignment-details").click(function(){

            $('#js-results').empty();
            $('#js-results-answer').empty();
            $("#js-sendEvaluation")[0].reset();
            $('#js-number_rating').removeClass('evaluateSeller__title').css("color", "#FFF");
            $('#js-number_rating').empty();
            $('.js-msg-error-comment').hide();
            $('#js-rating').find('span').removeClass('js-clickStars');
            $('#js-rating').removeClass('js-flagError');
            $('#js-comment').removeClass('js-flagError');
            $('#js-comment')[0].disabled = false;
            $(".evaluateSeller__jsBtnForm")[0].disabled = false;
            ACC.sellerQuestions.setupStarsClickEvents();

            var miraklOrderId = $(this).attr("data-js-mirakl-order-code");

            $.ajax({
                url: ACC.config.getEvaluation,
                type: "get",
                async: false,
                dataType: "json",
                data: {
                    miraklOrderId: miraklOrderId,
                },
                success: function(evaluation) {
                    ACC.sellerQuestions.fillForm(evaluation);
                },
                error: function() {
                    ACC.sellerQuestions.loadQuestions();
                }
            });
        });
    },

    fillForm : function(evaluation) {

        $(".js-ratingStars").each(function(index) {

            if ($(this)[0].id <= evaluation.grade) {
                $(this).addClass('js-clickStars');
            }

            $(this).off('click');
            $(this).unbind('mouseenter').unbind('mouseleave')
        });

        var gradeDescription = $(".js-clickStars").last().attr("data-rating");
        $('#js-number_rating').html(gradeDescription).addClass('evaluateSeller__title');

        evaluation.assessments.forEach(function(assessment) {

            var answer = assessment.response;
            if (answer == "true")
                answer = "Sim";
            else if (answer == "false")
                answer = "Não";


            $('#js-results-answer').append('<div class="questions">' + '<p class="questionTxt">' +assessment.label+ '</p>' + '<select class="form-control js-answers-seller questionSelect" id="' + assessment.code + '">' + '</>');
            $('#' + assessment.code).append('<option ' +'>' + answer + '</option>');
            $('#js-results-answer').append('</select>');
        });

        $(".js-answers-seller").each(function(index) {
            $(this)[0].disabled = true;
        });

        $(".evaluateSeller__jsBtnForm")[0].disabled = true;

        $('#js-comment')[0].value = evaluation.comment;
        $('#js-comment')[0].disabled = true;
    },

    loadQuestions : function(questions) {

        $.ajax({
            url: ACC.config.availableUrl,
            type: "get",
            async: false,
            dataType: "json",
            success: function(questions) {

                for (i = 0; i < questions.length; ++i){
                    var answers = questions[i].availableAnswers;
                    $('#js-results-answer').append('<div class="questions">' + '<p class="questionTxt">' +questions[i].label+ '</p>' + '<select class="form-control js-answers-seller questionSelect" id="' + questions[i].code + '">' + '</>');
                    $('#'+questions[i].code).append('<option ' +'>' + 'Selecione' + '</option>');

                    for (var j = 0; j < answers.length; ++j){
                        $('#'+questions[i].code).append('<option value="' + answers[j].value + '" data-question-code ="' + questions[i].code + '">' + answers[j].label + '</option>');
                    }

                    $('#js-results-answer').append('</select>');
                }
            }
        });
    },

    setupStarsClickEvents : function() {
        var stars = $('#js-rating .js-ratingStars');

        stars.hover(
            function(){
            var $this = $(this);
            $this.prevAll().addBack().addClass('js-hoverStars');
        },
        function(){
            var $this = $(this);
            $this.prevAll().addBack().removeClass('js-hoverStars');
        });

        stars.on('click', function(){
            var $this = $(this);
            $this.siblings().removeClass('js-clickStars')
            $this.prevAll().addBack().addClass('js-clickStars');
        });

        $(".js-ratingStars").click(function() {
            var valueRating = $(this).last().attr("data-rating");
            $('#js-number_rating').html(valueRating).addClass('evaluateSeller__title');
            $('#js-rating').removeClass('js-flagError');
        });

        $(".js-ratingStars").click(function(){
            ACC.sellerQuestions.selectedStarValue = $(this).prop("id").replace(/\s/g, '');
        });

    },

    sendQuestionSeller : function() {

        var closeModal = $('.evaluateSeller .close');

        closeModal.on('click', function(){
            ACC.sellerQuestions.selectedStarValue = "";
            $('.js-msg-max-character').hide();
        });

        $('body').on('click', function(e) {
            if($(e.target).closest('#js-myModalEvaluateSeller').length == 0) {
                ACC.sellerQuestions.selectedStarValue = "";
            }
        });

        $('.js-msg-error-comment').hide();
        $('.js-msg-max-character').hide();

        $('#js-comment').keyup(function () {
            var maxLength = 400;
            var msgTextArea = $(this).val();

            if (msgTextArea.length >= maxLength) {
                $('.js-msg-max-character').show();
                $(this).val(msgTextArea.substring(0, maxLength));
            } else {
                $('.js-msg-max-character').hide();
            }
        });

        $('.evaluateSeller__jsBtnForm').click (function(event) {

            event.preventDefault();

            if($("#js-comment").val().length < 1){

                $('.js-msg-max-character').hide();
                $('.js-msg-error-comment').show();
                $('#js-comment').addClass('js-flagError');
                commentApproved = false;
            }else{
                $('.js-msg-error-comment').hide();
                $('#js-comment').removeClass('js-flagError');
                commentApproved = true;
            }

            $('#js-results-answer').children('select').each(function(){
                if ($("option:contains('selecione')")){
                    $('.js-answers-seller').addClass('js-flagError');
                    selectApproved = false;
                }
            });

            var getIdAnswers;

            $(".js-answers-seller").change(function() {
                getIdAnswers = this.id;
                getIdAnswers = $(this);
                $(this).removeClass('js-flagError');
                selectApproved = true;
            });

            var getIdAnswersSelect;

            $(".js-answers-seller").each(function() {
                if (($(this)).val() == "Selecione"){
                    getIdAnswersSelect = this.id;
                    getIdAnswersSelect = $(this);
                    $(this).addClass('js-flagError');
                    selectApproved = false;
                    $('.js-msg-error-comment').show();
                }else{
                    $(this).removeClass('js-flagError');
                    selectApproved = true;
                }
            });

            if (ACC.sellerQuestions.selectedStarValue >= 1){
                $('#js-rating').removeClass('js-flagError');
                starApproved = true;
            }

            else{
                $('#js-rating').addClass('js-flagError');
                $('.js-msg-error-comment').show();
                starApproved = false;
            }

            if (starApproved && selectApproved && commentApproved ){
                }else{
                return false;
            }

            var sellerEvalution = {};
            sellerEvalution.orderId = $('#evaluateMiraklOrderCode').text();
            sellerEvalution.grade = ACC.sellerQuestions.selectedStarValue;
            sellerEvalution.comment = $('textarea#js-comment').val();
            sellerEvalution.answers = [];

            $(".js-answers-seller").each(function (index) {
                var answer = {};
                answer.questionCode =  $(this).prop("id");
                answer.answerValue = $(this).val();
                sellerEvalution.answers[index] = answer;
            });

            var sellerEvalutionJson = JSON.stringify(sellerEvalution);

            var formEvaluation = $("#js-sendEvaluation");

            var pathname = "/minha-conta/evaluate/?CSRFToken=" + ACC.config.CSRFToken;

            $.ajax({
                  url: pathname,
                  type: "post",
                  contentType: "application/json; charset=utf-8",
                  dataType: "json",
                  data: sellerEvalutionJson
            })
            .done(function(response){

                $('#js-myModalEvaluateSeller').modal('hide');

                $("#js-messageStatus").modal('show');

                $("#js-getMessageStatus").html(response.message);

                setInterval(function () {
                    $('#js-messageStatus').modal('hide');
                }, 20000);

                var miraklCode = $('#evaluateMiraklOrderCode').text();
                var evaluateButton = $(".js-btn-consignment-details[data-js-mirakl-order-code='" + miraklCode + "']")
                evaluateButton.html("Avaliação concluída");
            })
            .fail(function(jqXHR, status, msg){

                $("#js-messageStatus").modal('show');

                $("#js-getMessageStatus").html(response.msg);

                setInterval(function () {
                    $('#js-messageStatus').modal('hide');
                }, 4000);
            });
        });
    },

    gettingDataSeller : function() {

        $('.js-btn-consignment-details').click(function() {

            sellerName = $(this).data("js-seller-name");
            orderDate = $(this).data("js-order-date");
            hybrisOrderCode = $(this).data("js-hybris-order-code");
            miraklOrderCode = $(this).data("js-mirakl-order-code");
            pageSellerUrl = $(this).data("js-page-seller-url");

            $('.jsEvaluateSellerName').html(sellerName);
            $('.evaluateOrderDate').html(orderDate);
            $('.jsEvaluateHybrisOrderCode').html(hybrisOrderCode);
            $('.jsEvaluateMiraklOrderCode').html(miraklOrderCode);
            $('.jsEvaluatePageSellerUrl a').attr("href", ACC.config.contextPath + '/parceiro/' + pageSellerUrl);

        });
    },
};
ACC.chatoffline = {

	_autoload: [
	"sendMessage"
	],

    appendMessage: function(sendOrder, sendDate, senderName, messageBody, sendTime){
        $('.messagingChat__received').append("<div class='messagingChat__date'> <h1><span>" + sendDate + " - " + sendTime + "</span></h1></div><div class='messagingChat__senderName'>" + senderName + "</div><div class='messagingChat__messageBody'>" + messageBody + "</div> ");
    },

	sendMessage: function() {

		/* verifica se a mensagem está vazia ou não.*/
		function ckeckedSend(msgChat, sendOrder) {

        var msgChatError = 'Favor preencher o campo em vermelho';

		if ($.trim(msgChat) == ""){
            $(".js-chat-offline__msgChatError").html(msgChatError);
            $(".js-chat-offline__textarea").addClass("js-chat-offline__brdRed");

        } else{
            sendageAjax(msgChat, sendOrder);
        	}
		}

		/* 	@msgChat: Pega a mensagem que está no elemento textarea com class: js-chat-offline__textarea.
			@sendOrder: Pega o código do miraklOrderId	*/
		$(".js-chat-offline__btn-send").click(function (e) {
			var msgChat = $(".js-chat-offline__textarea").val();
			var sendOrder = $(".js-chat-offline__textarea").data("js-mirakl-order-code");

			e.preventDefault();
			ckeckedSend(msgChat, sendOrder);
		});

		/*	Evento keyup do textarea do chat */
		$(".js-chat-offline__textarea").keyup(function (e) {
			var msgChat				= $(this).val();
			var msgChatLength		= (parseInt(msgChat.length));
			var msgChatLengthMax	= 20000;
			var msgChatCount		= msgChatLengthMax - msgChatLength;
			var sendOrder			= $(this).data("js-mirakl-order-code");

            $(".js-chat-offline__msgChatError").hide();
            $(".js-chat-offline__textarea").removeClass("js-chat-offline__brdRed");

			/* Se o enter for apertado, a mensagem é enviada */
			if (e.keyCode == 13) {
				msgChatReplace = msgChat;
				msgChatReplace = msgChatReplace.replace(/\n/g, "");
				$(this).val(msgChatReplace);
				ckeckedSend(msgChatReplace, sendOrder);
			}

			/*	Verifica o tamanho da mensagem digitada e se acaso for maior do que o permitido, cairá no else
				que irá excluir os últimos caracteres até ter o tamanho igual ao máximo permitido, definido em msgChatLengthMax	*/
			if (msgChatLength <= msgChatLengthMax) {
				$(".js-chat-offline__max-characters").html(msgChatCount);
				$(".js-chat-offline__max-characters--text").show();

			} else {
				$(".js-chat-offline__max-characters").html(0);
				$(this).val(msgChat.substring(0,msgChatLengthMax));
			}
		});

		function sendageAjax (msgChat, sendOrder) {
			var newMessage = {
				miraklOrderId: sendOrder,
				messageBody: msgChat
			};

			var pathMessages = ACC.config.chatMessage + "?CSRFToken=" + ACC.config.CSRFToken

			$.ajax({
				url: pathMessages,
				data: JSON.stringify(newMessage),
				type: "post",
				dataType: "json",
				contentType: "application/json; charset=utf-8"
			}).success(function(response) {

				ACC.chatoffline.appendMessage(sendOrder, response.sendDate, response.senderName, response.messageBody, response.sendTime);

				setTimeout(function (){
				$(".js-chat-offline__textarea").val("");
                $(".js-chat-offline__max-characters--text").hide();
				$(".messagingChat__received").scrollTop($(".messagingChat__received")[0].scrollHeight);
    			},1000)
			}).fail(function(response) {
                $(".js-chat-offline__messageDanger").css({"display":"block"});
				$(".js-chat-offline__textarea").attr('disabled', false);
			})
		};
	}
};/*
 * chart
*/

ACC.chart = {

	_autoload: [
		"chartjs"
	],

	chartjs: function ()
    {
        var priceHistorylimit = $("#codprod").attr("limit");
        var priceHistoryenabled = $("#codprod").attr("enabled");
        var priceHistoryurl = $("#codprod").attr("url");

        if(priceHistoryenabled && priceHistoryenabled === "false" ) {
          return;
        }

        $(".chart-discount").each(function () {
        let priceHistorycode = $(this).attr("data-id-offers");
        let priceHistorylastPrice = $(this).attr("lastPrice");
        let that = this;
          $.ajax({
              url: priceHistoryurl + "/" + priceHistorycode +"?lastPrice="+priceHistorylastPrice+"&limit="+ priceHistorylimit,
            type:"get",
            dataType:"json"
          }).done(function (resp) {
            $(".stamp-blackFriday-offers").removeClass("hidden");
            $('.chart-discount').removeClass('hidden');
            let resps = resp.prices,
            date = [],
            codprod = [],
            value = [],
            i = 0;

            $(".chart-discount").removeClass("chart--h0");

            function dataAtualFormatada(a) {
                var data = new Date(a);
                var dia = data.getDate();
                if (dia.toString().length == 1)
                    dia = "0" + dia;
                var mes = data.getMonth() + 1;
                if (mes.toString().length == 1)
                    mes = "0" + mes;
                var ano = data.getFullYear();
                return dia + "/" + mes;
            }

            $.each(resps, function(){

                date[i] = dataAtualFormatada($(this)[0].date);
                codprod[i] = $(this)[0].sku;
                value[i] = $(this)[0].value;
                i++;
            })
            
            var ctx = that;

            if (!$(ctx).hasClass("chart--bgblack")) {
                let vendedor = $(that).attr("vendedor") ? $(that).attr("vendedor") : "Carrefour.com";

                
                var myChart = new Chart(ctx, {
                    type: 'line',
                    backgroundColor: "red",
                    data: {
                        labels: date,
                        datasets: [{

                            data: value,
                            fill: false,
                            borderColor: "rgb(30,86,201)",
                            borderWidth: 1,
                            lineTension: 0,
                        }]
                    },
                    options: {
                        reponsive: false,
                        legend: {
                            display: false,
                        },
                        tooltips: {
                            position: 'nearest',
                            mode: 'index',
                            intersect: false,
                            yPadding: 10,
                            xPadding: 10,
                            caretSize: 8,
                            backgroundColor: 'white',
                            titleFontColor: "black",
                            bodyFontColor: "black",
                            displayColors: false,
                            borderColor: 'blue',
                            borderWidth: 4,


                            callbacks: {
                                label: function (tooltipItem, data) {
                                    var label = data.datasets[tooltipItem.datasetIndex].label || '';

                                    if (label) {
                                        label += '= ';
                                    }
                                    label += "R$ " + Math.round(tooltipItem.yLabel * 100) / 100;
                                    label = label.replace(".", ",");
                                    return label;
                                },

                                labelColor: function (tooltipItem, chart) {
                                    return {
                                        borderColor: 'rgb(255, 0, 0)',
                                        backgroundColor: 'rgb(255, 0, 0)'
                                    }
                                },
                                afterLabel: function (tooltipItem, data) {
                                    return vendedor
                                }
                            }

                        },
                        scales: {
                            yAxes: [{
                                ticks: {
                                    beginAtZero:true,
                                    // Include a dollar sign in the ticks
                                    callback: function (value, index, values) {
                                        return 'R$ ' + value;
                                    }
                                }
                            }],
                            xAxes: [{
                                unit: 'month',
                                time: {
                                }
                            }]
                        },
                        title: {
                            display: true,
                            text: 'Evolução do valor do produto no ' + vendedor,
                            position: "top"
                        }
                    }
                })
            } else {

                var myChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: date,
                        datasets: [{
                            data: value,
                            fill: false,
                            borderColor: '#00dfff',
                            borderWidth: 1,
                            lineTension: 0,
                        }]
                    },
                    options: {
                        reponsive: false,
                        legend: {
                            display: false,
                        },
                        tooltips: {
                            position: 'nearest',
                            mode: 'index',
                            intersect: false,
                            yPadding: 10,
                            xPadding: 10,
                            caretSize: 8,
                            backgroundColor: 'white',
                            titleFontColor: "black",
                            bodyFontColor: "black",
                            displayColors: false,
                            borderColor: 'blue',
                            borderWidth: 4,


                            callbacks: {
                                label: function (tooltipItem, data) {
                                    var label = data.datasets[tooltipItem.datasetIndex].label || '';

                                    if (label) {
                                        label += '= ';
                                    }
                                    label += "R$ " + Math.round(tooltipItem.yLabel * 100) / 100;
                                    label = label.replace(".", ",");
                                    return label;
                                },

                                labelColor: function (tooltipItem, chart) {
                                    return {
                                        borderColor: 'rgb(255, 0, 0)',
                                        backgroundColor: 'rgb(255, 0, 0)'
                                    }
                                },
                                afterLabel: function (tooltipItem, data) {
                                    return "Carrefour.com"
                                }
                            }

                        },
                        scales: {
                            yAxes: [{
                                ticks: {
                                    beginAtZero: true,
                                    fontColor: "#fff",
                                    // Include a dollar sign in the ticks
                                    callback: function (value, index, values) {
                                        return 'R$ ' + value;
                                    }
                                },
                                gridLines: {
                                    color: "#d6d600",
                                    borderDash: [2, 3]
                                }
                            }],
                            xAxes: [{
                                ticks: {
                                    fontColor: "#fff"
                                },
                                unit: 'month',
                                time: {
                                },
                                gridLines: {
                                    color: "#d6d600",
                                    borderDash: [2, 3]
                                }
                            }]
                        },
                        title: {
                            display: true,
                            text: 'Evolução do valor do produto no Carrefour.com',
                            position: "top",
                            fontColor: "#fff"
                        }
                    }
                })
            }
        }).fail(function (error) {
            $(".chart-discount").hide();
        })

        })
	}
};/*!
 * Chart.js
 * http://chartjs.org/
 * Version: 2.4.0
 *
 * Copyright 2016 Nick Downie
 * Released under the MIT license
 * https://github.com/chartjs/Chart.js/blob/master/LICENSE.md
 */
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.Chart=t()}}(function(){return function t(e,a,i){function n(r,l){if(!a[r]){if(!e[r]){var s="function"==typeof require&&require;if(!l&&s)return s(r,!0);if(o)return o(r,!0);var d=new Error("Cannot find module '"+r+"'");throw d.code="MODULE_NOT_FOUND",d}var u=a[r]={exports:{}};e[r][0].call(u.exports,function(t){var a=e[r][1][t];return n(a?a:t)},u,u.exports,t,e,a,i)}return a[r].exports}for(var o="function"==typeof require&&require,r=0;r<i.length;r++)n(i[r]);return n}({1:[function(t,e,a){},{}],2:[function(t,e,a){function i(t){if(t){var e=/^#([a-fA-F0-9]{3})$/,a=/^#([a-fA-F0-9]{6})$/,i=/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/,n=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/,o=/(\w+)/,r=[0,0,0],l=1,s=t.match(e);if(s){s=s[1];for(var d=0;d<r.length;d++)r[d]=parseInt(s[d]+s[d],16)}else if(s=t.match(a)){s=s[1];for(var d=0;d<r.length;d++)r[d]=parseInt(s.slice(2*d,2*d+2),16)}else if(s=t.match(i)){for(var d=0;d<r.length;d++)r[d]=parseInt(s[d+1]);l=parseFloat(s[4])}else if(s=t.match(n)){for(var d=0;d<r.length;d++)r[d]=Math.round(2.55*parseFloat(s[d+1]));l=parseFloat(s[4])}else if(s=t.match(o)){if("transparent"==s[1])return[0,0,0,0];if(r=y[s[1]],!r)return}for(var d=0;d<r.length;d++)r[d]=v(r[d],0,255);return l=l||0==l?v(l,0,1):1,r[3]=l,r}}function n(t){if(t){var e=/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/,a=t.match(e);if(a){var i=parseFloat(a[4]),n=v(parseInt(a[1]),0,360),o=v(parseFloat(a[2]),0,100),r=v(parseFloat(a[3]),0,100),l=v(isNaN(i)?1:i,0,1);return[n,o,r,l]}}}function o(t){if(t){var e=/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/,a=t.match(e);if(a){var i=parseFloat(a[4]),n=v(parseInt(a[1]),0,360),o=v(parseFloat(a[2]),0,100),r=v(parseFloat(a[3]),0,100),l=v(isNaN(i)?1:i,0,1);return[n,o,r,l]}}}function r(t){var e=i(t);return e&&e.slice(0,3)}function l(t){var e=n(t);return e&&e.slice(0,3)}function s(t){var e=i(t);return e?e[3]:(e=n(t))?e[3]:(e=o(t))?e[3]:void 0}function d(t){return"#"+x(t[0])+x(t[1])+x(t[2])}function u(t,e){return 1>e||t[3]&&t[3]<1?c(t,e):"rgb("+t[0]+", "+t[1]+", "+t[2]+")"}function c(t,e){return void 0===e&&(e=void 0!==t[3]?t[3]:1),"rgba("+t[0]+", "+t[1]+", "+t[2]+", "+e+")"}function h(t,e){if(1>e||t[3]&&t[3]<1)return f(t,e);var a=Math.round(t[0]/255*100),i=Math.round(t[1]/255*100),n=Math.round(t[2]/255*100);return"rgb("+a+"%, "+i+"%, "+n+"%)"}function f(t,e){var a=Math.round(t[0]/255*100),i=Math.round(t[1]/255*100),n=Math.round(t[2]/255*100);return"rgba("+a+"%, "+i+"%, "+n+"%, "+(e||t[3]||1)+")"}function g(t,e){return 1>e||t[3]&&t[3]<1?p(t,e):"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)"}function p(t,e){return void 0===e&&(e=void 0!==t[3]?t[3]:1),"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+e+")"}function m(t,e){return void 0===e&&(e=void 0!==t[3]?t[3]:1),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+(void 0!==e&&1!==e?", "+e:"")+")"}function b(t){return k[t.slice(0,3)]}function v(t,e,a){return Math.min(Math.max(e,t),a)}function x(t){var e=t.toString(16).toUpperCase();return e.length<2?"0"+e:e}var y=t(6);e.exports={getRgba:i,getHsla:n,getRgb:r,getHsl:l,getHwb:o,getAlpha:s,hexString:d,rgbString:u,rgbaString:c,percentString:h,percentaString:f,hslString:g,hslaString:p,hwbString:m,keyword:b};var k={};for(var S in y)k[y[S]]=S},{6:6}],3:[function(t,e,a){var i=t(5),n=t(2),o=function(t){if(t instanceof o)return t;if(!(this instanceof o))return new o(t);this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1};var e;if("string"==typeof t)if(e=n.getRgba(t))this.setValues("rgb",e);else if(e=n.getHsla(t))this.setValues("hsl",e);else{if(!(e=n.getHwb(t)))throw new Error('Unable to parse color from string "'+t+'"');this.setValues("hwb",e)}else if("object"==typeof t)if(e=t,void 0!==e.r||void 0!==e.red)this.setValues("rgb",e);else if(void 0!==e.l||void 0!==e.lightness)this.setValues("hsl",e);else if(void 0!==e.v||void 0!==e.value)this.setValues("hsv",e);else if(void 0!==e.w||void 0!==e.whiteness)this.setValues("hwb",e);else{if(void 0===e.c&&void 0===e.cyan)throw new Error("Unable to parse color from object "+JSON.stringify(t));this.setValues("cmyk",e)}};o.prototype={rgb:function(){return this.setSpace("rgb",arguments)},hsl:function(){return this.setSpace("hsl",arguments)},hsv:function(){return this.setSpace("hsv",arguments)},hwb:function(){return this.setSpace("hwb",arguments)},cmyk:function(){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){var t=this.values;return 1!==t.alpha?t.hwb.concat([t.alpha]):t.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){var t=this.values;return t.rgb.concat([t.alpha])},hslaArray:function(){var t=this.values;return t.hsl.concat([t.alpha])},alpha:function(t){return void 0===t?this.values.alpha:(this.setValues("alpha",t),this)},red:function(t){return this.setChannel("rgb",0,t)},green:function(t){return this.setChannel("rgb",1,t)},blue:function(t){return this.setChannel("rgb",2,t)},hue:function(t){return t&&(t%=360,t=0>t?360+t:t),this.setChannel("hsl",0,t)},saturation:function(t){return this.setChannel("hsl",1,t)},lightness:function(t){return this.setChannel("hsl",2,t)},saturationv:function(t){return this.setChannel("hsv",1,t)},whiteness:function(t){return this.setChannel("hwb",1,t)},blackness:function(t){return this.setChannel("hwb",2,t)},value:function(t){return this.setChannel("hsv",2,t)},cyan:function(t){return this.setChannel("cmyk",0,t)},magenta:function(t){return this.setChannel("cmyk",1,t)},yellow:function(t){return this.setChannel("cmyk",2,t)},black:function(t){return this.setChannel("cmyk",3,t)},hexString:function(){return n.hexString(this.values.rgb)},rgbString:function(){return n.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return n.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return n.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return n.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return n.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return n.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return n.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){var t=this.values.rgb;return t[0]<<16|t[1]<<8|t[2]},luminosity:function(){for(var t=this.values.rgb,e=[],a=0;a<t.length;a++){var i=t[a]/255;e[a]=.03928>=i?i/12.92:Math.pow((i+.055)/1.055,2.4)}return.2126*e[0]+.7152*e[1]+.0722*e[2]},contrast:function(t){var e=this.luminosity(),a=t.luminosity();return e>a?(e+.05)/(a+.05):(a+.05)/(e+.05)},level:function(t){var e=this.contrast(t);return e>=7.1?"AAA":e>=4.5?"AA":""},dark:function(){var t=this.values.rgb,e=(299*t[0]+587*t[1]+114*t[2])/1e3;return 128>e},light:function(){return!this.dark()},negate:function(){for(var t=[],e=0;3>e;e++)t[e]=255-this.values.rgb[e];return this.setValues("rgb",t),this},lighten:function(t){var e=this.values.hsl;return e[2]+=e[2]*t,this.setValues("hsl",e),this},darken:function(t){var e=this.values.hsl;return e[2]-=e[2]*t,this.setValues("hsl",e),this},saturate:function(t){var e=this.values.hsl;return e[1]+=e[1]*t,this.setValues("hsl",e),this},desaturate:function(t){var e=this.values.hsl;return e[1]-=e[1]*t,this.setValues("hsl",e),this},whiten:function(t){var e=this.values.hwb;return e[1]+=e[1]*t,this.setValues("hwb",e),this},blacken:function(t){var e=this.values.hwb;return e[2]+=e[2]*t,this.setValues("hwb",e),this},greyscale:function(){var t=this.values.rgb,e=.3*t[0]+.59*t[1]+.11*t[2];return this.setValues("rgb",[e,e,e]),this},clearer:function(t){var e=this.values.alpha;return this.setValues("alpha",e-e*t),this},opaquer:function(t){var e=this.values.alpha;return this.setValues("alpha",e+e*t),this},rotate:function(t){var e=this.values.hsl,a=(e[0]+t)%360;return e[0]=0>a?360+a:a,this.setValues("hsl",e),this},mix:function(t,e){var a=this,i=t,n=void 0===e?.5:e,o=2*n-1,r=a.alpha()-i.alpha(),l=((o*r===-1?o:(o+r)/(1+o*r))+1)/2,s=1-l;return this.rgb(l*a.red()+s*i.red(),l*a.green()+s*i.green(),l*a.blue()+s*i.blue()).alpha(a.alpha()*n+i.alpha()*(1-n))},toJSON:function(){return this.rgb()},clone:function(){var t,e,a=new o,i=this.values,n=a.values;for(var r in i)i.hasOwnProperty(r)&&(t=i[r],e={}.toString.call(t),"[object Array]"===e?n[r]=t.slice(0):"[object Number]"===e?n[r]=t:console.error("unexpected color value:",t));return a}},o.prototype.spaces={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]},o.prototype.maxes={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]},o.prototype.getValues=function(t){for(var e=this.values,a={},i=0;i<t.length;i++)a[t.charAt(i)]=e[t][i];return 1!==e.alpha&&(a.a=e.alpha),a},o.prototype.setValues=function(t,e){var a,n=this.values,o=this.spaces,r=this.maxes,l=1;if("alpha"===t)l=e;else if(e.length)n[t]=e.slice(0,t.length),l=e[t.length];else if(void 0!==e[t.charAt(0)]){for(a=0;a<t.length;a++)n[t][a]=e[t.charAt(a)];l=e.a}else if(void 0!==e[o[t][0]]){var s=o[t];for(a=0;a<t.length;a++)n[t][a]=e[s[a]];l=e.alpha}if(n.alpha=Math.max(0,Math.min(1,void 0===l?n.alpha:l)),"alpha"===t)return!1;var d;for(a=0;a<t.length;a++)d=Math.max(0,Math.min(r[t][a],n[t][a])),n[t][a]=Math.round(d);for(var u in o)u!==t&&(n[u]=i[t][u](n[t]));return!0},o.prototype.setSpace=function(t,e){var a=e[0];return void 0===a?this.getValues(t):("number"==typeof a&&(a=Array.prototype.slice.call(e)),this.setValues(t,a),this)},o.prototype.setChannel=function(t,e,a){var i=this.values[t];return void 0===a?i[e]:a===i[e]?this:(i[e]=a,this.setValues(t,i),this)},"undefined"!=typeof window&&(window.Color=o),e.exports=o},{2:2,5:5}],4:[function(t,e,a){function i(t){var e,a,i,n=t[0]/255,o=t[1]/255,r=t[2]/255,l=Math.min(n,o,r),s=Math.max(n,o,r),d=s-l;return s==l?e=0:n==s?e=(o-r)/d:o==s?e=2+(r-n)/d:r==s&&(e=4+(n-o)/d),e=Math.min(60*e,360),0>e&&(e+=360),i=(l+s)/2,a=s==l?0:.5>=i?d/(s+l):d/(2-s-l),[e,100*a,100*i]}function n(t){var e,a,i,n=t[0],o=t[1],r=t[2],l=Math.min(n,o,r),s=Math.max(n,o,r),d=s-l;return a=0==s?0:d/s*1e3/10,s==l?e=0:n==s?e=(o-r)/d:o==s?e=2+(r-n)/d:r==s&&(e=4+(n-o)/d),e=Math.min(60*e,360),0>e&&(e+=360),i=s/255*1e3/10,[e,a,i]}function o(t){var e=t[0],a=t[1],n=t[2],o=i(t)[0],r=1/255*Math.min(e,Math.min(a,n)),n=1-1/255*Math.max(e,Math.max(a,n));return[o,100*r,100*n]}function l(t){var e,a,i,n,o=t[0]/255,r=t[1]/255,l=t[2]/255;return n=Math.min(1-o,1-r,1-l),e=(1-o-n)/(1-n)||0,a=(1-r-n)/(1-n)||0,i=(1-l-n)/(1-n)||0,[100*e,100*a,100*i,100*n]}function s(t){return G[JSON.stringify(t)]}function d(t){var e=t[0]/255,a=t[1]/255,i=t[2]/255;e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92,a=a>.04045?Math.pow((a+.055)/1.055,2.4):a/12.92,i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92;var n=.4124*e+.3576*a+.1805*i,o=.2126*e+.7152*a+.0722*i,r=.0193*e+.1192*a+.9505*i;return[100*n,100*o,100*r]}function u(t){var e,a,i,n=d(t),o=n[0],r=n[1],l=n[2];return o/=95.047,r/=100,l/=108.883,o=o>.008856?Math.pow(o,1/3):7.787*o+16/116,r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,l=l>.008856?Math.pow(l,1/3):7.787*l+16/116,e=116*r-16,a=500*(o-r),i=200*(r-l),[e,a,i]}function c(t){return W(u(t))}function h(t){var e,a,i,n,o,r=t[0]/360,l=t[1]/100,s=t[2]/100;if(0==l)return o=255*s,[o,o,o];a=.5>s?s*(1+l):s+l-s*l,e=2*s-a,n=[0,0,0];for(var d=0;3>d;d++)i=r+1/3*-(d-1),0>i&&i++,i>1&&i--,o=1>6*i?e+6*(a-e)*i:1>2*i?a:2>3*i?e+(a-e)*(2/3-i)*6:e,n[d]=255*o;return n}function f(t){var e,a,i=t[0],n=t[1]/100,o=t[2]/100;return 0===o?[0,0,0]:(o*=2,n*=1>=o?o:2-o,a=(o+n)/2,e=2*n/(o+n),[i,100*e,100*a])}function p(t){return o(h(t))}function m(t){return l(h(t))}function v(t){return s(h(t))}function x(t){var e=t[0]/60,a=t[1]/100,i=t[2]/100,n=Math.floor(e)%6,o=e-Math.floor(e),r=255*i*(1-a),l=255*i*(1-a*o),s=255*i*(1-a*(1-o)),i=255*i;switch(n){case 0:return[i,s,r];case 1:return[l,i,r];case 2:return[r,i,s];case 3:return[r,l,i];case 4:return[s,r,i];case 5:return[i,r,l]}}function y(t){var e,a,i=t[0],n=t[1]/100,o=t[2]/100;return a=(2-n)*o,e=n*o,e/=1>=a?a:2-a,e=e||0,a/=2,[i,100*e,100*a]}function k(t){return o(x(t))}function S(t){return l(x(t))}function w(t){return s(x(t))}function M(t){var e,a,i,n,o=t[0]/360,l=t[1]/100,s=t[2]/100,d=l+s;switch(d>1&&(l/=d,s/=d),e=Math.floor(6*o),a=1-s,i=6*o-e,0!=(1&e)&&(i=1-i),n=l+i*(a-l),e){default:case 6:case 0:r=a,g=n,b=l;break;case 1:r=n,g=a,b=l;break;case 2:r=l,g=a,b=n;break;case 3:r=l,g=n,b=a;break;case 4:r=n,g=l,b=a;break;case 5:r=a,g=l,b=n}return[255*r,255*g,255*b]}function C(t){return i(M(t))}function D(t){return n(M(t))}function I(t){return l(M(t))}function A(t){return s(M(t))}function T(t){var e,a,i,n=t[0]/100,o=t[1]/100,r=t[2]/100,l=t[3]/100;return e=1-Math.min(1,n*(1-l)+l),a=1-Math.min(1,o*(1-l)+l),i=1-Math.min(1,r*(1-l)+l),[255*e,255*a,255*i]}function P(t){return i(T(t))}function F(t){return n(T(t))}function _(t){return o(T(t))}function R(t){return s(T(t))}function V(t){var e,a,i,n=t[0]/100,o=t[1]/100,r=t[2]/100;return e=3.2406*n+-1.5372*o+r*-.4986,a=n*-.9689+1.8758*o+.0415*r,i=.0557*n+o*-.204+1.057*r,e=e>.0031308?1.055*Math.pow(e,1/2.4)-.055:e=12.92*e,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a=12.92*a,i=i>.0031308?1.055*Math.pow(i,1/2.4)-.055:i=12.92*i,e=Math.min(Math.max(0,e),1),a=Math.min(Math.max(0,a),1),i=Math.min(Math.max(0,i),1),[255*e,255*a,255*i]}function L(t){var e,a,i,n=t[0],o=t[1],r=t[2];return n/=95.047,o/=100,r/=108.883,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,o=o>.008856?Math.pow(o,1/3):7.787*o+16/116,r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,e=116*o-16,a=500*(n-o),i=200*(o-r),[e,a,i]}function O(t){return W(L(t))}function B(t){var e,a,i,n,o=t[0],r=t[1],l=t[2];return 8>=o?(a=100*o/903.3,n=7.787*(a/100)+16/116):(a=100*Math.pow((o+16)/116,3),n=Math.pow(a/100,1/3)),e=.008856>=e/95.047?e=95.047*(r/500+n-16/116)/7.787:95.047*Math.pow(r/500+n,3),i=.008859>=i/108.883?i=108.883*(n-l/200-16/116)/7.787:108.883*Math.pow(n-l/200,3),[e,a,i]}function W(t){var e,a,i,n=t[0],o=t[1],r=t[2];return e=Math.atan2(r,o),a=360*e/2/Math.PI,0>a&&(a+=360),i=Math.sqrt(o*o+r*r),[n,i,a]}function z(t){return V(B(t))}function N(t){var e,a,i,n=t[0],o=t[1],r=t[2];return i=r/360*2*Math.PI,e=o*Math.cos(i),a=o*Math.sin(i),[n,e,a]}function E(t){return B(N(t))}function H(t){return z(N(t))}function U(t){return Z[t]}function j(t){return i(U(t))}function q(t){return n(U(t))}function Y(t){return o(U(t))}function X(t){return l(U(t))}function K(t){return u(U(t))}function J(t){return d(U(t))}e.exports={rgb2hsl:i,rgb2hsv:n,rgb2hwb:o,rgb2cmyk:l,rgb2keyword:s,rgb2xyz:d,rgb2lab:u,rgb2lch:c,hsl2rgb:h,hsl2hsv:f,hsl2hwb:p,hsl2cmyk:m,hsl2keyword:v,hsv2rgb:x,hsv2hsl:y,hsv2hwb:k,hsv2cmyk:S,hsv2keyword:w,hwb2rgb:M,hwb2hsl:C,hwb2hsv:D,hwb2cmyk:I,hwb2keyword:A,cmyk2rgb:T,cmyk2hsl:P,cmyk2hsv:F,cmyk2hwb:_,cmyk2keyword:R,keyword2rgb:U,keyword2hsl:j,keyword2hsv:q,keyword2hwb:Y,keyword2cmyk:X,keyword2lab:K,keyword2xyz:J,xyz2rgb:V,xyz2lab:L,xyz2lch:O,lab2xyz:B,lab2rgb:z,lab2lch:W,lch2lab:N,lch2xyz:E,lch2rgb:H};var Z={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},G={};for(var Q in Z)G[JSON.stringify(Z[Q])]=Q},{}],5:[function(t,e,a){var i=t(4),n=function(){return new d};for(var o in i){n[o+"Raw"]=function(t){return function(e){return"number"==typeof e&&(e=Array.prototype.slice.call(arguments)),i[t](e)}}(o);var r=/(\w+)2(\w+)/.exec(o),l=r[1],s=r[2];n[l]=n[l]||{},n[l][s]=n[o]=function(t){return function(e){"number"==typeof e&&(e=Array.prototype.slice.call(arguments));var a=i[t](e);if("string"==typeof a||void 0===a)return a;for(var n=0;n<a.length;n++)a[n]=Math.round(a[n]);return a}}(o)}var d=function(){this.convs={}};d.prototype.routeSpace=function(t,e){var a=e[0];return void 0===a?this.getValues(t):("number"==typeof a&&(a=Array.prototype.slice.call(e)),this.setValues(t,a))},d.prototype.setValues=function(t,e){return this.space=t,this.convs={},this.convs[t]=e,this},d.prototype.getValues=function(t){var e=this.convs[t];if(!e){var a=this.space,i=this.convs[a];e=n[a][t](i),this.convs[t]=e}return e},["rgb","hsl","hsv","cmyk","keyword"].forEach(function(t){d.prototype[t]=function(e){return this.routeSpace(t,arguments)}}),e.exports=n},{4:4}],6:[function(t,e,a){e.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],7:[function(t,e,a){var i=t(28)();t(26)(i),t(22)(i),t(25)(i),t(21)(i),t(23)(i),t(24)(i),t(29)(i),t(33)(i),t(31)(i),t(34)(i),t(32)(i),t(35)(i),t(30)(i),t(27)(i),t(36)(i),t(37)(i),t(38)(i),t(39)(i),t(40)(i),t(43)(i),t(41)(i),t(42)(i),t(44)(i),t(45)(i),t(46)(i),t(15)(i),t(16)(i),t(17)(i),t(18)(i),t(19)(i),t(20)(i),t(8)(i),t(9)(i),t(10)(i),t(11)(i),t(12)(i),t(13)(i),t(14)(i),window.Chart=e.exports=i},{10:10,11:11,12:12,13:13,14:14,15:15,16:16,17:17,18:18,19:19,20:20,21:21,22:22,23:23,24:24,25:25,26:26,27:27,28:28,29:29,30:30,31:31,32:32,33:33,34:34,35:35,36:36,37:37,38:38,39:39,40:40,41:41,42:42,43:43,44:44,45:45,46:46,8:8,9:9}],8:[function(t,e,a){"use strict";e.exports=function(t){t.Bar=function(e,a){return a.type="bar",new t(e,a)}}},{}],9:[function(t,e,a){"use strict";e.exports=function(t){t.Bubble=function(e,a){return a.type="bubble",new t(e,a)}}},{}],10:[function(t,e,a){"use strict";e.exports=function(t){t.Doughnut=function(e,a){return a.type="doughnut",new t(e,a)}}},{}],11:[function(t,e,a){"use strict";e.exports=function(t){t.Line=function(e,a){return a.type="line",new t(e,a)}}},{}],12:[function(t,e,a){"use strict";e.exports=function(t){t.PolarArea=function(e,a){return a.type="polarArea",new t(e,a)}}},{}],13:[function(t,e,a){"use strict";e.exports=function(t){t.Radar=function(e,a){return a.type="radar",new t(e,a)}}},{}],14:[function(t,e,a){"use strict";e.exports=function(t){var e={hover:{mode:"single"},scales:{xAxes:[{type:"linear",position:"bottom",id:"x-axis-1"}],yAxes:[{type:"linear",position:"left",id:"y-axis-1"}]},tooltips:{callbacks:{title:function(){return""},label:function(t){return"("+t.xLabel+", "+t.yLabel+")"}}}};t.defaults.scatter=e,t.controllers.scatter=t.controllers.line,t.Scatter=function(e,a){return a.type="scatter",new t(e,a)}}},{}],15:[function(t,e,a){"use strict";e.exports=function(t){var e=t.helpers;t.defaults.bar={hover:{mode:"label"},scales:{xAxes:[{type:"category",categoryPercentage:.8,barPercentage:.9,gridLines:{offsetGridLines:!0}}],yAxes:[{type:"linear"}]}},t.controllers.bar=t.DatasetController.extend({dataElementType:t.elements.Rectangle,initialize:function(e,a){t.DatasetController.prototype.initialize.call(this,e,a),this.getMeta().bar=!0},getBarCount:function(){var t=this,a=0;return e.each(t.chart.data.datasets,function(e,i){var n=t.chart.getDatasetMeta(i);n.bar&&t.chart.isDatasetVisible(i)&&++a},t),a},update:function(t){var a=this;e.each(a.getMeta().data,function(e,i){a.updateElement(e,i,t)},a)},updateElement:function(t,a,i){var n=this,o=n.getMeta(),r=n.getScaleForId(o.xAxisID),l=n.getScaleForId(o.yAxisID),s=l.getBasePixel(),d=n.chart.options.elements.rectangle,u=t.custom||{},c=n.getDataset();t._xScale=r,t._yScale=l,t._datasetIndex=n.index,t._index=a;var h=n.getRuler(a);t._model={x:n.calculateBarX(a,n.index,h),y:i?s:n.calculateBarY(a,n.index),label:n.chart.data.labels[a],datasetLabel:c.label,base:i?s:n.calculateBarBase(n.index,a),width:n.calculateBarWidth(h),backgroundColor:u.backgroundColor?u.backgroundColor:e.getValueAtIndexOrDefault(c.backgroundColor,a,d.backgroundColor),borderSkipped:u.borderSkipped?u.borderSkipped:d.borderSkipped,borderColor:u.borderColor?u.borderColor:e.getValueAtIndexOrDefault(c.borderColor,a,d.borderColor),borderWidth:u.borderWidth?u.borderWidth:e.getValueAtIndexOrDefault(c.borderWidth,a,d.borderWidth)},t.pivot()},calculateBarBase:function(t,e){var a=this,i=a.getMeta(),n=a.getScaleForId(i.yAxisID),o=0;if(n.options.stacked){for(var r=a.chart,l=r.data.datasets,s=Number(l[t].data[e]),d=0;t>d;d++){var u=l[d],c=r.getDatasetMeta(d);if(c.bar&&c.yAxisID===n.id&&r.isDatasetVisible(d)){var h=Number(u.data[e]);o+=0>s?Math.min(h,0):Math.max(h,0)}}return n.getPixelForValue(o)}return n.getBasePixel()},getRuler:function(t){var e,a=this,i=a.getMeta(),n=a.getScaleForId(i.xAxisID),o=a.getBarCount();e="category"===n.options.type?n.getPixelForTick(t+1)-n.getPixelForTick(t):n.width/n.ticks.length;var r=e*n.options.categoryPercentage,l=(e-e*n.options.categoryPercentage)/2,s=r/o;if(n.ticks.length!==a.chart.data.labels.length){var d=n.ticks.length/a.chart.data.labels.length;s*=d}var u=s*n.options.barPercentage,c=s-s*n.options.barPercentage;return{datasetCount:o,tickWidth:e,categoryWidth:r,categorySpacing:l,fullBarWidth:s,barWidth:u,barSpacing:c}},calculateBarWidth:function(t){var e=this.getScaleForId(this.getMeta().xAxisID);return e.options.barThickness?e.options.barThickness:e.options.stacked?t.categoryWidth:t.barWidth},getBarIndex:function(t){var e,a,i=0;for(a=0;t>a;++a)e=this.chart.getDatasetMeta(a),e.bar&&this.chart.isDatasetVisible(a)&&++i;return i},calculateBarX:function(t,e,a){var i=this,n=i.getMeta(),o=i.getScaleForId(n.xAxisID),r=i.getBarIndex(e),l=o.getPixelForValue(null,t,e,i.chart.isCombo);return l-=i.chart.isCombo?a.tickWidth/2:0,o.options.stacked?l+a.categoryWidth/2+a.categorySpacing:l+a.barWidth/2+a.categorySpacing+a.barWidth*r+a.barSpacing/2+a.barSpacing*r},calculateBarY:function(t,e){var a=this,i=a.getMeta(),n=a.getScaleForId(i.yAxisID),o=Number(a.getDataset().data[t]);if(n.options.stacked){for(var r=0,l=0,s=0;e>s;s++){var d=a.chart.data.datasets[s],u=a.chart.getDatasetMeta(s);if(u.bar&&u.yAxisID===n.id&&a.chart.isDatasetVisible(s)){var c=Number(d.data[t]);0>c?l+=c||0:r+=c||0}}return 0>o?n.getPixelForValue(l+o):n.getPixelForValue(r+o)}return n.getPixelForValue(o)},draw:function(t){var e,a,i=this,n=t||1,o=i.getMeta().data,r=i.getDataset();for(e=0,a=o.length;a>e;++e){var l=r.data[e];null===l||void 0===l||isNaN(l)||o[e].transition(n).draw()}},setHoverStyle:function(t){var a=this.chart.data.datasets[t._datasetIndex],i=t._index,n=t.custom||{},o=t._model;o.backgroundColor=n.hoverBackgroundColor?n.hoverBackgroundColor:e.getValueAtIndexOrDefault(a.hoverBackgroundColor,i,e.getHoverColor(o.backgroundColor)),o.borderColor=n.hoverBorderColor?n.hoverBorderColor:e.getValueAtIndexOrDefault(a.hoverBorderColor,i,e.getHoverColor(o.borderColor)),o.borderWidth=n.hoverBorderWidth?n.hoverBorderWidth:e.getValueAtIndexOrDefault(a.hoverBorderWidth,i,o.borderWidth)},removeHoverStyle:function(t){var a=this.chart.data.datasets[t._datasetIndex],i=t._index,n=t.custom||{},o=t._model,r=this.chart.options.elements.rectangle;o.backgroundColor=n.backgroundColor?n.backgroundColor:e.getValueAtIndexOrDefault(a.backgroundColor,i,r.backgroundColor),o.borderColor=n.borderColor?n.borderColor:e.getValueAtIndexOrDefault(a.borderColor,i,r.borderColor),o.borderWidth=n.borderWidth?n.borderWidth:e.getValueAtIndexOrDefault(a.borderWidth,i,r.borderWidth)}}),t.defaults.horizontalBar={hover:{mode:"label"},scales:{xAxes:[{type:"linear",position:"bottom"}],yAxes:[{position:"left",type:"category",categoryPercentage:.8,barPercentage:.9,gridLines:{offsetGridLines:!0}}]},elements:{rectangle:{borderSkipped:"left"}},tooltips:{callbacks:{title:function(t,e){var a="";return t.length>0&&(t[0].yLabel?a=t[0].yLabel:e.labels.length>0&&t[0].index<e.labels.length&&(a=e.labels[t[0].index])),a},label:function(t,e){var a=e.datasets[t.datasetIndex].label||"";return a+": "+t.xLabel}}}},t.controllers.horizontalBar=t.controllers.bar.extend({updateElement:function(t,a,i){var n=this,o=n.getMeta(),r=n.getScaleForId(o.xAxisID),l=n.getScaleForId(o.yAxisID),s=r.getBasePixel(),d=t.custom||{},u=n.getDataset(),c=n.chart.options.elements.rectangle;t._xScale=r,t._yScale=l,t._datasetIndex=n.index,t._index=a;var h=n.getRuler(a);t._model={x:i?s:n.calculateBarX(a,n.index),y:n.calculateBarY(a,n.index,h),label:n.chart.data.labels[a],datasetLabel:u.label,base:i?s:n.calculateBarBase(n.index,a),height:n.calculateBarHeight(h),backgroundColor:d.backgroundColor?d.backgroundColor:e.getValueAtIndexOrDefault(u.backgroundColor,a,c.backgroundColor),borderSkipped:d.borderSkipped?d.borderSkipped:c.borderSkipped,borderColor:d.borderColor?d.borderColor:e.getValueAtIndexOrDefault(u.borderColor,a,c.borderColor),borderWidth:d.borderWidth?d.borderWidth:e.getValueAtIndexOrDefault(u.borderWidth,a,c.borderWidth)},t.draw=function(){function t(t){return s[(u+t)%4]}var e=this._chart.ctx,a=this._view,i=a.height/2,n=a.y-i,o=a.y+i,r=a.base-(a.base-a.x),l=a.borderWidth/2;a.borderWidth&&(n+=l,o-=l,r+=l),e.beginPath(),e.fillStyle=a.backgroundColor,e.strokeStyle=a.borderColor,e.lineWidth=a.borderWidth;var s=[[a.base,o],[a.base,n],[r,n],[r,o]],d=["bottom","left","top","right"],u=d.indexOf(a.borderSkipped,0);-1===u&&(u=0),e.moveTo.apply(e,t(0));for(var c=1;4>c;c++)e.lineTo.apply(e,t(c));e.fill(),a.borderWidth&&e.stroke()},t.pivot()},calculateBarBase:function(t,e){var a=this,i=a.getMeta(),n=a.getScaleForId(i.xAxisID),o=0;if(n.options.stacked){for(var r=a.chart,l=r.data.datasets,s=Number(l[t].data[e]),d=0;t>d;d++){var u=l[d],c=r.getDatasetMeta(d);if(c.bar&&c.xAxisID===n.id&&r.isDatasetVisible(d)){
var h=Number(u.data[e]);o+=0>s?Math.min(h,0):Math.max(h,0)}}return n.getPixelForValue(o)}return n.getBasePixel()},getRuler:function(t){var e,a=this,i=a.getMeta(),n=a.getScaleForId(i.yAxisID),o=a.getBarCount();e="category"===n.options.type?n.getPixelForTick(t+1)-n.getPixelForTick(t):n.width/n.ticks.length;var r=e*n.options.categoryPercentage,l=(e-e*n.options.categoryPercentage)/2,s=r/o;if(n.ticks.length!==a.chart.data.labels.length){var d=n.ticks.length/a.chart.data.labels.length;s*=d}var u=s*n.options.barPercentage,c=s-s*n.options.barPercentage;return{datasetCount:o,tickHeight:e,categoryHeight:r,categorySpacing:l,fullBarHeight:s,barHeight:u,barSpacing:c}},calculateBarHeight:function(t){var e=this,a=e.getScaleForId(e.getMeta().yAxisID);return a.options.barThickness?a.options.barThickness:a.options.stacked?t.categoryHeight:t.barHeight},calculateBarX:function(t,e){var a=this,i=a.getMeta(),n=a.getScaleForId(i.xAxisID),o=Number(a.getDataset().data[t]);if(n.options.stacked){for(var r=0,l=0,s=0;e>s;s++){var d=a.chart.data.datasets[s],u=a.chart.getDatasetMeta(s);if(u.bar&&u.xAxisID===n.id&&a.chart.isDatasetVisible(s)){var c=Number(d.data[t]);0>c?l+=c||0:r+=c||0}}return 0>o?n.getPixelForValue(l+o):n.getPixelForValue(r+o)}return n.getPixelForValue(o)},calculateBarY:function(t,e,a){var i=this,n=i.getMeta(),o=i.getScaleForId(n.yAxisID),r=i.getBarIndex(e),l=o.getPixelForValue(null,t,e,i.chart.isCombo);return l-=i.chart.isCombo?a.tickHeight/2:0,o.options.stacked?l+a.categoryHeight/2+a.categorySpacing:l+a.barHeight/2+a.categorySpacing+a.barHeight*r+a.barSpacing/2+a.barSpacing*r}})}},{}],16:[function(t,e,a){"use strict";e.exports=function(t){var e=t.helpers;t.defaults.bubble={hover:{mode:"single"},scales:{xAxes:[{type:"linear",position:"bottom",id:"x-axis-0"}],yAxes:[{type:"linear",position:"left",id:"y-axis-0"}]},tooltips:{callbacks:{title:function(){return""},label:function(t,e){var a=e.datasets[t.datasetIndex].label||"",i=e.datasets[t.datasetIndex].data[t.index];return a+": ("+t.xLabel+", "+t.yLabel+", "+i.r+")"}}}},t.controllers.bubble=t.DatasetController.extend({dataElementType:t.elements.Point,update:function(t){var a=this,i=a.getMeta(),n=i.data;e.each(n,function(e,i){a.updateElement(e,i,t)})},updateElement:function(a,i,n){var o=this,r=o.getMeta(),l=o.getScaleForId(r.xAxisID),s=o.getScaleForId(r.yAxisID),d=a.custom||{},u=o.getDataset(),c=u.data[i],h=o.chart.options.elements.point,f=o.index;e.extend(a,{_xScale:l,_yScale:s,_datasetIndex:f,_index:i,_model:{x:n?l.getPixelForDecimal(.5):l.getPixelForValue("object"==typeof c?c:NaN,i,f,o.chart.isCombo),y:n?s.getBasePixel():s.getPixelForValue(c,i,f),radius:n?0:d.radius?d.radius:o.getRadius(c),hitRadius:d.hitRadius?d.hitRadius:e.getValueAtIndexOrDefault(u.hitRadius,i,h.hitRadius)}}),t.DatasetController.prototype.removeHoverStyle.call(o,a,h);var g=a._model;g.skip=d.skip?d.skip:isNaN(g.x)||isNaN(g.y),a.pivot()},getRadius:function(t){return t.r||this.chart.options.elements.point.radius},setHoverStyle:function(a){var i=this;t.DatasetController.prototype.setHoverStyle.call(i,a);var n=i.chart.data.datasets[a._datasetIndex],o=a._index,r=a.custom||{},l=a._model;l.radius=r.hoverRadius?r.hoverRadius:e.getValueAtIndexOrDefault(n.hoverRadius,o,i.chart.options.elements.point.hoverRadius)+i.getRadius(n.data[o])},removeHoverStyle:function(e){var a=this;t.DatasetController.prototype.removeHoverStyle.call(a,e,a.chart.options.elements.point);var i=a.chart.data.datasets[e._datasetIndex].data[e._index],n=e.custom||{},o=e._model;o.radius=n.radius?n.radius:a.getRadius(i)}})}},{}],17:[function(t,e,a){"use strict";e.exports=function(t){var e=t.helpers,a=t.defaults;a.doughnut={animation:{animateRotate:!0,animateScale:!1},aspectRatio:1,hover:{mode:"single"},legendCallback:function(t){var e=[];e.push('<ul class="'+t.id+'-legend">');var a=t.data,i=a.datasets,n=a.labels;if(i.length)for(var o=0;o<i[0].data.length;++o)e.push('<li><span style="background-color:'+i[0].backgroundColor[o]+'"></span>'),n[o]&&e.push(n[o]),e.push("</li>");return e.push("</ul>"),e.join("")},legend:{labels:{generateLabels:function(t){var a=t.data;return a.labels.length&&a.datasets.length?a.labels.map(function(i,n){var o=t.getDatasetMeta(0),r=a.datasets[0],l=o.data[n],s=l&&l.custom||{},d=e.getValueAtIndexOrDefault,u=t.options.elements.arc,c=s.backgroundColor?s.backgroundColor:d(r.backgroundColor,n,u.backgroundColor),h=s.borderColor?s.borderColor:d(r.borderColor,n,u.borderColor),f=s.borderWidth?s.borderWidth:d(r.borderWidth,n,u.borderWidth);return{text:i,fillStyle:c,strokeStyle:h,lineWidth:f,hidden:isNaN(r.data[n])||o.data[n].hidden,index:n}}):[]}},onClick:function(t,e){var a,i,n,o=e.index,r=this.chart;for(a=0,i=(r.data.datasets||[]).length;i>a;++a)n=r.getDatasetMeta(a),n.data[o]&&(n.data[o].hidden=!n.data[o].hidden);r.update()}},cutoutPercentage:50,rotation:Math.PI*-.5,circumference:2*Math.PI,tooltips:{callbacks:{title:function(){return""},label:function(t,a){var i=a.labels[t.index],n=": "+a.datasets[t.datasetIndex].data[t.index];return e.isArray(i)?(i=i.slice(),i[0]+=n):i+=n,i}}}},a.pie=e.clone(a.doughnut),e.extend(a.pie,{cutoutPercentage:0}),t.controllers.doughnut=t.controllers.pie=t.DatasetController.extend({dataElementType:t.elements.Arc,linkScales:e.noop,getRingIndex:function(t){for(var e=0,a=0;t>a;++a)this.chart.isDatasetVisible(a)&&++e;return e},update:function(t){var a=this,i=a.chart,n=i.chartArea,o=i.options,r=o.elements.arc,l=n.right-n.left-r.borderWidth,s=n.bottom-n.top-r.borderWidth,d=Math.min(l,s),u={x:0,y:0},c=a.getMeta(),h=o.cutoutPercentage,f=o.circumference;if(f<2*Math.PI){var g=o.rotation%(2*Math.PI);g+=2*Math.PI*(g>=Math.PI?-1:g<-Math.PI?1:0);var p=g+f,m={x:Math.cos(g),y:Math.sin(g)},b={x:Math.cos(p),y:Math.sin(p)},v=0>=g&&p>=0||g<=2*Math.PI&&2*Math.PI<=p,x=g<=.5*Math.PI&&.5*Math.PI<=p||g<=2.5*Math.PI&&2.5*Math.PI<=p,y=g<=-Math.PI&&-Math.PI<=p||g<=Math.PI&&Math.PI<=p,k=g<=.5*-Math.PI&&.5*-Math.PI<=p||g<=1.5*Math.PI&&1.5*Math.PI<=p,S=h/100,w={x:y?-1:Math.min(m.x*(m.x<0?1:S),b.x*(b.x<0?1:S)),y:k?-1:Math.min(m.y*(m.y<0?1:S),b.y*(b.y<0?1:S))},M={x:v?1:Math.max(m.x*(m.x>0?1:S),b.x*(b.x>0?1:S)),y:x?1:Math.max(m.y*(m.y>0?1:S),b.y*(b.y>0?1:S))},C={width:.5*(M.x-w.x),height:.5*(M.y-w.y)};d=Math.min(l/C.width,s/C.height),u={x:(M.x+w.x)*-.5,y:(M.y+w.y)*-.5}}i.borderWidth=a.getMaxBorderWidth(c.data),i.outerRadius=Math.max((d-i.borderWidth)/2,0),i.innerRadius=Math.max(h?i.outerRadius/100*h:1,0),i.radiusLength=(i.outerRadius-i.innerRadius)/i.getVisibleDatasetCount(),i.offsetX=u.x*i.outerRadius,i.offsetY=u.y*i.outerRadius,c.total=a.calculateTotal(),a.outerRadius=i.outerRadius-i.radiusLength*a.getRingIndex(a.index),a.innerRadius=a.outerRadius-i.radiusLength,e.each(c.data,function(e,i){a.updateElement(e,i,t)})},updateElement:function(t,a,i){var n=this,o=n.chart,r=o.chartArea,l=o.options,s=l.animation,d=(r.left+r.right)/2,u=(r.top+r.bottom)/2,c=l.rotation,h=l.rotation,f=n.getDataset(),g=i&&s.animateRotate?0:t.hidden?0:n.calculateCircumference(f.data[a])*(l.circumference/(2*Math.PI)),p=i&&s.animateScale?0:n.innerRadius,m=i&&s.animateScale?0:n.outerRadius,b=e.getValueAtIndexOrDefault;e.extend(t,{_datasetIndex:n.index,_index:a,_model:{x:d+o.offsetX,y:u+o.offsetY,startAngle:c,endAngle:h,circumference:g,outerRadius:m,innerRadius:p,label:b(f.label,a,o.data.labels[a])}});var v=t._model;this.removeHoverStyle(t),i&&s.animateRotate||(0===a?v.startAngle=l.rotation:v.startAngle=n.getMeta().data[a-1]._model.endAngle,v.endAngle=v.startAngle+v.circumference),t.pivot()},removeHoverStyle:function(e){t.DatasetController.prototype.removeHoverStyle.call(this,e,this.chart.options.elements.arc)},calculateTotal:function(){var t,a=this.getDataset(),i=this.getMeta(),n=0;return e.each(i.data,function(e,i){t=a.data[i],isNaN(t)||e.hidden||(n+=Math.abs(t))}),n},calculateCircumference:function(t){var e=this.getMeta().total;return e>0&&!isNaN(t)?2*Math.PI*(t/e):0},getMaxBorderWidth:function(t){for(var e,a,i=0,n=this.index,o=t.length,r=0;o>r;r++)e=t[r]._model?t[r]._model.borderWidth:0,a=t[r]._chart?t[r]._chart.config.data.datasets[n].hoverBorderWidth:0,i=e>i?e:i,i=a>i?a:i;return i}})}},{}],18:[function(t,e,a){"use strict";e.exports=function(t){function e(t,e){return a.getValueOrDefault(t.showLine,e.showLines)}var a=t.helpers;t.defaults.line={showLines:!0,spanGaps:!1,hover:{mode:"label"},scales:{xAxes:[{type:"category",id:"x-axis-0"}],yAxes:[{type:"linear",id:"y-axis-0"}]}},t.controllers.line=t.DatasetController.extend({datasetElementType:t.elements.Line,dataElementType:t.elements.Point,update:function(t){var i,n,o,r=this,l=r.getMeta(),s=l.dataset,d=l.data||[],u=r.chart.options,c=u.elements.line,h=r.getScaleForId(l.yAxisID),f=r.getDataset(),g=e(f,u);for(g&&(o=s.custom||{},void 0!==f.tension&&void 0===f.lineTension&&(f.lineTension=f.tension),s._scale=h,s._datasetIndex=r.index,s._children=d,s._model={spanGaps:f.spanGaps?f.spanGaps:u.spanGaps,tension:o.tension?o.tension:a.getValueOrDefault(f.lineTension,c.tension),backgroundColor:o.backgroundColor?o.backgroundColor:f.backgroundColor||c.backgroundColor,borderWidth:o.borderWidth?o.borderWidth:f.borderWidth||c.borderWidth,borderColor:o.borderColor?o.borderColor:f.borderColor||c.borderColor,borderCapStyle:o.borderCapStyle?o.borderCapStyle:f.borderCapStyle||c.borderCapStyle,borderDash:o.borderDash?o.borderDash:f.borderDash||c.borderDash,borderDashOffset:o.borderDashOffset?o.borderDashOffset:f.borderDashOffset||c.borderDashOffset,borderJoinStyle:o.borderJoinStyle?o.borderJoinStyle:f.borderJoinStyle||c.borderJoinStyle,fill:o.fill?o.fill:void 0!==f.fill?f.fill:c.fill,steppedLine:o.steppedLine?o.steppedLine:a.getValueOrDefault(f.steppedLine,c.stepped),cubicInterpolationMode:o.cubicInterpolationMode?o.cubicInterpolationMode:a.getValueOrDefault(f.cubicInterpolationMode,c.cubicInterpolationMode),scaleTop:h.top,scaleBottom:h.bottom,scaleZero:h.getBasePixel()},s.pivot()),i=0,n=d.length;n>i;++i)r.updateElement(d[i],i,t);for(g&&0!==s._model.tension&&r.updateBezierControlPoints(),i=0,n=d.length;n>i;++i)d[i].pivot()},getPointBackgroundColor:function(t,e){var i=this.chart.options.elements.point.backgroundColor,n=this.getDataset(),o=t.custom||{};return o.backgroundColor?i=o.backgroundColor:n.pointBackgroundColor?i=a.getValueAtIndexOrDefault(n.pointBackgroundColor,e,i):n.backgroundColor&&(i=n.backgroundColor),i},getPointBorderColor:function(t,e){var i=this.chart.options.elements.point.borderColor,n=this.getDataset(),o=t.custom||{};return o.borderColor?i=o.borderColor:n.pointBorderColor?i=a.getValueAtIndexOrDefault(n.pointBorderColor,e,i):n.borderColor&&(i=n.borderColor),i},getPointBorderWidth:function(t,e){var i=this.chart.options.elements.point.borderWidth,n=this.getDataset(),o=t.custom||{};return o.borderWidth?i=o.borderWidth:n.pointBorderWidth?i=a.getValueAtIndexOrDefault(n.pointBorderWidth,e,i):n.borderWidth&&(i=n.borderWidth),i},updateElement:function(t,e,i){var n,o,r=this,l=r.getMeta(),s=t.custom||{},d=r.getDataset(),u=r.index,c=d.data[e],h=r.getScaleForId(l.yAxisID),f=r.getScaleForId(l.xAxisID),g=r.chart.options.elements.point,p=r.chart.data.labels||[],m=1===p.length||1===d.data.length||r.chart.isCombo;void 0!==d.radius&&void 0===d.pointRadius&&(d.pointRadius=d.radius),void 0!==d.hitRadius&&void 0===d.pointHitRadius&&(d.pointHitRadius=d.hitRadius),n=f.getPixelForValue("object"==typeof c?c:NaN,e,u,m),o=i?h.getBasePixel():r.calculatePointY(c,e,u),t._xScale=f,t._yScale=h,t._datasetIndex=u,t._index=e,t._model={x:n,y:o,skip:s.skip||isNaN(n)||isNaN(o),radius:s.radius||a.getValueAtIndexOrDefault(d.pointRadius,e,g.radius),pointStyle:s.pointStyle||a.getValueAtIndexOrDefault(d.pointStyle,e,g.pointStyle),backgroundColor:r.getPointBackgroundColor(t,e),borderColor:r.getPointBorderColor(t,e),borderWidth:r.getPointBorderWidth(t,e),tension:l.dataset._model?l.dataset._model.tension:0,steppedLine:l.dataset._model?l.dataset._model.steppedLine:!1,hitRadius:s.hitRadius||a.getValueAtIndexOrDefault(d.pointHitRadius,e,g.hitRadius)}},calculatePointY:function(t,e,a){var i,n,o,r=this,l=r.chart,s=r.getMeta(),d=r.getScaleForId(s.yAxisID),u=0,c=0;if(d.options.stacked){for(i=0;a>i;i++)if(n=l.data.datasets[i],o=l.getDatasetMeta(i),"line"===o.type&&o.yAxisID===d.id&&l.isDatasetVisible(i)){var h=Number(d.getRightValue(n.data[e]));0>h?c+=h||0:u+=h||0}var f=Number(d.getRightValue(t));return 0>f?d.getPixelForValue(c+f):d.getPixelForValue(u+f)}return d.getPixelForValue(t)},updateBezierControlPoints:function(){function t(t,e,a){return Math.max(Math.min(t,a),e)}var e,i,n,o,r,l=this,s=l.getMeta(),d=l.chart.chartArea,u=s.data||[];if(s.dataset._model.spanGaps&&(u=u.filter(function(t){return!t._model.skip})),"monotone"===s.dataset._model.cubicInterpolationMode)a.splineCurveMonotone(u);else for(e=0,i=u.length;i>e;++e)n=u[e],o=n._model,r=a.splineCurve(a.previousItem(u,e)._model,o,a.nextItem(u,e)._model,s.dataset._model.tension),o.controlPointPreviousX=r.previous.x,o.controlPointPreviousY=r.previous.y,o.controlPointNextX=r.next.x,o.controlPointNextY=r.next.y;if(l.chart.options.elements.line.capBezierPoints)for(e=0,i=u.length;i>e;++e)o=u[e]._model,o.controlPointPreviousX=t(o.controlPointPreviousX,d.left,d.right),o.controlPointPreviousY=t(o.controlPointPreviousY,d.top,d.bottom),o.controlPointNextX=t(o.controlPointNextX,d.left,d.right),o.controlPointNextY=t(o.controlPointNextY,d.top,d.bottom)},draw:function(t){var a,i,n=this,o=n.getMeta(),r=o.data||[],l=t||1;for(a=0,i=r.length;i>a;++a)r[a].transition(l);for(e(n.getDataset(),n.chart.options)&&o.dataset.transition(l).draw(),a=0,i=r.length;i>a;++a)r[a].draw()},setHoverStyle:function(t){var e=this.chart.data.datasets[t._datasetIndex],i=t._index,n=t.custom||{},o=t._model;o.radius=n.hoverRadius||a.getValueAtIndexOrDefault(e.pointHoverRadius,i,this.chart.options.elements.point.hoverRadius),o.backgroundColor=n.hoverBackgroundColor||a.getValueAtIndexOrDefault(e.pointHoverBackgroundColor,i,a.getHoverColor(o.backgroundColor)),o.borderColor=n.hoverBorderColor||a.getValueAtIndexOrDefault(e.pointHoverBorderColor,i,a.getHoverColor(o.borderColor)),o.borderWidth=n.hoverBorderWidth||a.getValueAtIndexOrDefault(e.pointHoverBorderWidth,i,o.borderWidth)},removeHoverStyle:function(t){var e=this,i=e.chart.data.datasets[t._datasetIndex],n=t._index,o=t.custom||{},r=t._model;void 0!==i.radius&&void 0===i.pointRadius&&(i.pointRadius=i.radius),r.radius=o.radius||a.getValueAtIndexOrDefault(i.pointRadius,n,e.chart.options.elements.point.radius),r.backgroundColor=e.getPointBackgroundColor(t,n),r.borderColor=e.getPointBorderColor(t,n),r.borderWidth=e.getPointBorderWidth(t,n)}})}},{}],19:[function(t,e,a){"use strict";e.exports=function(t){var e=t.helpers;t.defaults.polarArea={scale:{type:"radialLinear",lineArc:!0,ticks:{beginAtZero:!0}},animation:{animateRotate:!0,animateScale:!0},startAngle:-.5*Math.PI,aspectRatio:1,legendCallback:function(t){var e=[];e.push('<ul class="'+t.id+'-legend">');var a=t.data,i=a.datasets,n=a.labels;if(i.length)for(var o=0;o<i[0].data.length;++o)e.push('<li><span style="background-color:'+i[0].backgroundColor[o]+'"></span>'),n[o]&&e.push(n[o]),e.push("</li>");return e.push("</ul>"),e.join("")},legend:{labels:{generateLabels:function(t){var a=t.data;return a.labels.length&&a.datasets.length?a.labels.map(function(i,n){var o=t.getDatasetMeta(0),r=a.datasets[0],l=o.data[n],s=l.custom||{},d=e.getValueAtIndexOrDefault,u=t.options.elements.arc,c=s.backgroundColor?s.backgroundColor:d(r.backgroundColor,n,u.backgroundColor),h=s.borderColor?s.borderColor:d(r.borderColor,n,u.borderColor),f=s.borderWidth?s.borderWidth:d(r.borderWidth,n,u.borderWidth);return{text:i,fillStyle:c,strokeStyle:h,lineWidth:f,hidden:isNaN(r.data[n])||o.data[n].hidden,index:n}}):[]}},onClick:function(t,e){var a,i,n,o=e.index,r=this.chart;for(a=0,i=(r.data.datasets||[]).length;i>a;++a)n=r.getDatasetMeta(a),n.data[o].hidden=!n.data[o].hidden;r.update()}},tooltips:{callbacks:{title:function(){return""},label:function(t,e){return e.labels[t.index]+": "+t.yLabel}}}},t.controllers.polarArea=t.DatasetController.extend({dataElementType:t.elements.Arc,linkScales:e.noop,update:function(t){var a=this,i=a.chart,n=i.chartArea,o=a.getMeta(),r=i.options,l=r.elements.arc,s=Math.min(n.right-n.left,n.bottom-n.top);i.outerRadius=Math.max((s-l.borderWidth/2)/2,0),i.innerRadius=Math.max(r.cutoutPercentage?i.outerRadius/100*r.cutoutPercentage:1,0),i.radiusLength=(i.outerRadius-i.innerRadius)/i.getVisibleDatasetCount(),a.outerRadius=i.outerRadius-i.radiusLength*a.index,a.innerRadius=a.outerRadius-i.radiusLength,o.count=a.countVisibleElements(),e.each(o.data,function(e,i){a.updateElement(e,i,t)})},updateElement:function(t,a,i){for(var n=this,o=n.chart,r=n.getDataset(),l=o.options,s=l.animation,d=o.scale,u=e.getValueAtIndexOrDefault,c=o.data.labels,h=n.calculateCircumference(r.data[a]),f=d.xCenter,g=d.yCenter,p=0,m=n.getMeta(),b=0;a>b;++b)isNaN(r.data[b])||m.data[b].hidden||++p;var v=l.startAngle,x=t.hidden?0:d.getDistanceFromCenterForValue(r.data[a]),y=v+h*p,k=y+(t.hidden?0:h),S=s.animateScale?0:d.getDistanceFromCenterForValue(r.data[a]);e.extend(t,{_datasetIndex:n.index,_index:a,_scale:d,_model:{x:f,y:g,innerRadius:0,outerRadius:i?S:x,startAngle:i&&s.animateRotate?v:y,endAngle:i&&s.animateRotate?v:k,label:u(c,a,c[a])}}),n.removeHoverStyle(t),t.pivot()},removeHoverStyle:function(e){t.DatasetController.prototype.removeHoverStyle.call(this,e,this.chart.options.elements.arc)},countVisibleElements:function(){var t=this.getDataset(),a=this.getMeta(),i=0;return e.each(a.data,function(e,a){isNaN(t.data[a])||e.hidden||i++}),i},calculateCircumference:function(t){var e=this.getMeta().count;return e>0&&!isNaN(t)?2*Math.PI/e:0}})}},{}],20:[function(t,e,a){"use strict";e.exports=function(t){var e=t.helpers;t.defaults.radar={aspectRatio:1,scale:{type:"radialLinear"},elements:{line:{tension:0}}},t.controllers.radar=t.DatasetController.extend({datasetElementType:t.elements.Line,dataElementType:t.elements.Point,linkScales:e.noop,update:function(t){var a=this,i=a.getMeta(),n=i.dataset,o=i.data,r=n.custom||{},l=a.getDataset(),s=a.chart.options.elements.line,d=a.chart.scale;void 0!==l.tension&&void 0===l.lineTension&&(l.lineTension=l.tension),e.extend(i.dataset,{_datasetIndex:a.index,_children:o,_loop:!0,_model:{tension:r.tension?r.tension:e.getValueOrDefault(l.lineTension,s.tension),backgroundColor:r.backgroundColor?r.backgroundColor:l.backgroundColor||s.backgroundColor,borderWidth:r.borderWidth?r.borderWidth:l.borderWidth||s.borderWidth,borderColor:r.borderColor?r.borderColor:l.borderColor||s.borderColor,fill:r.fill?r.fill:void 0!==l.fill?l.fill:s.fill,borderCapStyle:r.borderCapStyle?r.borderCapStyle:l.borderCapStyle||s.borderCapStyle,borderDash:r.borderDash?r.borderDash:l.borderDash||s.borderDash,borderDashOffset:r.borderDashOffset?r.borderDashOffset:l.borderDashOffset||s.borderDashOffset,borderJoinStyle:r.borderJoinStyle?r.borderJoinStyle:l.borderJoinStyle||s.borderJoinStyle,scaleTop:d.top,scaleBottom:d.bottom,scaleZero:d.getBasePosition()}}),i.dataset.pivot(),e.each(o,function(e,i){a.updateElement(e,i,t)},a),a.updateBezierControlPoints()},updateElement:function(t,a,i){var n=this,o=t.custom||{},r=n.getDataset(),l=n.chart.scale,s=n.chart.options.elements.point,d=l.getPointPositionForValue(a,r.data[a]);e.extend(t,{_datasetIndex:n.index,_index:a,_scale:l,_model:{x:i?l.xCenter:d.x,y:i?l.yCenter:d.y,tension:o.tension?o.tension:e.getValueOrDefault(r.tension,n.chart.options.elements.line.tension),radius:o.radius?o.radius:e.getValueAtIndexOrDefault(r.pointRadius,a,s.radius),backgroundColor:o.backgroundColor?o.backgroundColor:e.getValueAtIndexOrDefault(r.pointBackgroundColor,a,s.backgroundColor),borderColor:o.borderColor?o.borderColor:e.getValueAtIndexOrDefault(r.pointBorderColor,a,s.borderColor),borderWidth:o.borderWidth?o.borderWidth:e.getValueAtIndexOrDefault(r.pointBorderWidth,a,s.borderWidth),pointStyle:o.pointStyle?o.pointStyle:e.getValueAtIndexOrDefault(r.pointStyle,a,s.pointStyle),hitRadius:o.hitRadius?o.hitRadius:e.getValueAtIndexOrDefault(r.hitRadius,a,s.hitRadius)}}),t._model.skip=o.skip?o.skip:isNaN(t._model.x)||isNaN(t._model.y)},updateBezierControlPoints:function(){var t=this.chart.chartArea,a=this.getMeta();e.each(a.data,function(i,n){var o=i._model,r=e.splineCurve(e.previousItem(a.data,n,!0)._model,o,e.nextItem(a.data,n,!0)._model,o.tension);o.controlPointPreviousX=Math.max(Math.min(r.previous.x,t.right),t.left),o.controlPointPreviousY=Math.max(Math.min(r.previous.y,t.bottom),t.top),o.controlPointNextX=Math.max(Math.min(r.next.x,t.right),t.left),o.controlPointNextY=Math.max(Math.min(r.next.y,t.bottom),t.top),i.pivot()})},draw:function(t){var a=this.getMeta(),i=t||1;e.each(a.data,function(t){t.transition(i)}),a.dataset.transition(i).draw(),e.each(a.data,function(t){t.draw()})},setHoverStyle:function(t){var a=this.chart.data.datasets[t._datasetIndex],i=t.custom||{},n=t._index,o=t._model;o.radius=i.hoverRadius?i.hoverRadius:e.getValueAtIndexOrDefault(a.pointHoverRadius,n,this.chart.options.elements.point.hoverRadius),o.backgroundColor=i.hoverBackgroundColor?i.hoverBackgroundColor:e.getValueAtIndexOrDefault(a.pointHoverBackgroundColor,n,e.getHoverColor(o.backgroundColor)),o.borderColor=i.hoverBorderColor?i.hoverBorderColor:e.getValueAtIndexOrDefault(a.pointHoverBorderColor,n,e.getHoverColor(o.borderColor)),o.borderWidth=i.hoverBorderWidth?i.hoverBorderWidth:e.getValueAtIndexOrDefault(a.pointHoverBorderWidth,n,o.borderWidth)},removeHoverStyle:function(t){var a=this.chart.data.datasets[t._datasetIndex],i=t.custom||{},n=t._index,o=t._model,r=this.chart.options.elements.point;o.radius=i.radius?i.radius:e.getValueAtIndexOrDefault(a.radius,n,r.radius),o.backgroundColor=i.backgroundColor?i.backgroundColor:e.getValueAtIndexOrDefault(a.pointBackgroundColor,n,r.backgroundColor),o.borderColor=i.borderColor?i.borderColor:e.getValueAtIndexOrDefault(a.pointBorderColor,n,r.borderColor),o.borderWidth=i.borderWidth?i.borderWidth:e.getValueAtIndexOrDefault(a.pointBorderWidth,n,r.borderWidth)}})}},{}],21:[function(t,e,a){"use strict";e.exports=function(t){var e=t.helpers;t.defaults.global.animation={duration:1e3,easing:"easeOutQuart",onProgress:e.noop,onComplete:e.noop},t.Animation=t.Element.extend({currentStep:null,numSteps:60,easing:"",render:null,onAnimationProgress:null,onAnimationComplete:null}),t.animationService={frameDuration:17,animations:[],dropFrames:0,request:null,addAnimation:function(t,e,a,i){var n=this;i||(t.animating=!0);for(var o=0;o<n.animations.length;++o)if(n.animations[o].chartInstance===t)return void(n.animations[o].animationObject=e);n.animations.push({chartInstance:t,animationObject:e}),1===n.animations.length&&n.requestAnimationFrame()},cancelAnimation:function(t){var a=e.findIndex(this.animations,function(e){return e.chartInstance===t});-1!==a&&(this.animations.splice(a,1),t.animating=!1)},requestAnimationFrame:function(){var t=this;null===t.request&&(t.request=e.requestAnimFrame.call(window,function(){t.request=null,t.startDigest()}))},startDigest:function(){var t=this,e=Date.now(),a=0;t.dropFrames>1&&(a=Math.floor(t.dropFrames),t.dropFrames=t.dropFrames%1);for(var i=0;i<t.animations.length;)null===t.animations[i].animationObject.currentStep&&(t.animations[i].animationObject.currentStep=0),t.animations[i].animationObject.currentStep+=1+a,t.animations[i].animationObject.currentStep>t.animations[i].animationObject.numSteps&&(t.animations[i].animationObject.currentStep=t.animations[i].animationObject.numSteps),t.animations[i].animationObject.render(t.animations[i].chartInstance,t.animations[i].animationObject),t.animations[i].animationObject.onAnimationProgress&&t.animations[i].animationObject.onAnimationProgress.call&&t.animations[i].animationObject.onAnimationProgress.call(t.animations[i].chartInstance,t.animations[i]),t.animations[i].animationObject.currentStep===t.animations[i].animationObject.numSteps?(t.animations[i].animationObject.onAnimationComplete&&t.animations[i].animationObject.onAnimationComplete.call&&t.animations[i].animationObject.onAnimationComplete.call(t.animations[i].chartInstance,t.animations[i]),t.animations[i].chartInstance.animating=!1,t.animations.splice(i,1)):++i;var n=Date.now(),o=(n-e)/t.frameDuration;t.dropFrames+=o,t.animations.length>0&&t.requestAnimationFrame()}}}},{}],22:[function(t,e,a){"use strict";e.exports=function(t){var e=t.canvasHelpers={};e.drawPoint=function(t,e,a,i,n){var o,r,l,s,d,u;if("object"==typeof e&&(o=e.toString(),"[object HTMLImageElement]"===o||"[object HTMLCanvasElement]"===o))return void t.drawImage(e,i-e.width/2,n-e.height/2);if(!(isNaN(a)||0>=a)){switch(e){default:t.beginPath(),t.arc(i,n,a,0,2*Math.PI),t.closePath(),t.fill();break;case"triangle":t.beginPath(),r=3*a/Math.sqrt(3),d=r*Math.sqrt(3)/2,t.moveTo(i-r/2,n+d/3),t.lineTo(i+r/2,n+d/3),t.lineTo(i,n-2*d/3),t.closePath(),t.fill();break;case"rect":u=1/Math.SQRT2*a,t.beginPath(),t.fillRect(i-u,n-u,2*u,2*u),t.strokeRect(i-u,n-u,2*u,2*u);break;case"rectRot":u=1/Math.SQRT2*a,t.beginPath(),t.moveTo(i-u,n),t.lineTo(i,n+u),t.lineTo(i+u,n),t.lineTo(i,n-u),t.closePath(),t.fill();break;case"cross":t.beginPath(),t.moveTo(i,n+a),t.lineTo(i,n-a),t.moveTo(i-a,n),t.lineTo(i+a,n),t.closePath();break;case"crossRot":t.beginPath(),l=Math.cos(Math.PI/4)*a,s=Math.sin(Math.PI/4)*a,t.moveTo(i-l,n-s),t.lineTo(i+l,n+s),t.moveTo(i-l,n+s),t.lineTo(i+l,n-s),t.closePath();break;case"star":t.beginPath(),t.moveTo(i,n+a),t.lineTo(i,n-a),t.moveTo(i-a,n),t.lineTo(i+a,n),l=Math.cos(Math.PI/4)*a,s=Math.sin(Math.PI/4)*a,t.moveTo(i-l,n-s),t.lineTo(i+l,n+s),t.moveTo(i-l,n+s),t.lineTo(i+l,n-s),t.closePath();break;case"line":t.beginPath(),t.moveTo(i-a,n),t.lineTo(i+a,n),t.closePath();break;case"dash":t.beginPath(),t.moveTo(i,n),t.lineTo(i+a,n),t.closePath()}t.stroke()}}}},{}],23:[function(t,e,a){"use strict";e.exports=function(t){function e(t,e){var a=r.getStyle(t,e),i=a&&a.match(/(\d+)px/);return i?Number(i[1]):void 0}function a(t,a){var i=t.style,n=t.getAttribute("height"),o=t.getAttribute("width");if(t._chartjs={initial:{height:n,width:o,style:{display:i.display,height:i.height,width:i.width}}},i.display=i.display||"block",null===o||""===o){var r=e(t,"width");void 0!==r&&(t.width=r)}if(null===n||""===n)if(""===t.style.height)t.height=t.width/(a.options.aspectRatio||2);else{var l=e(t,"height");void 0!==r&&(t.height=l)}return t}function i(t){if(t._chartjs){var e=t._chartjs.initial;["height","width"].forEach(function(a){var i=e[a];void 0===i||null===i?t.removeAttribute(a):t.setAttribute(a,i)}),r.each(e.style||{},function(e,a){t.style[a]=e}),t.width=t.width,delete t._chartjs}}function n(t,e){if("string"==typeof t?t=document.getElementById(t):t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t instanceof HTMLCanvasElement){var i=t.getContext&&t.getContext("2d");if(i instanceof CanvasRenderingContext2D)return a(t,e),i}return null}function o(e){e=e||{};var a=e.data=e.data||{};return a.datasets=a.datasets||[],a.labels=a.labels||[],e.options=r.configMerge(t.defaults.global,t.defaults[e.type],e.options||{}),e}var r=t.helpers;t.types={},t.instances={},t.controllers={},t.Controller=function(e,a,i){var l=this;a=o(a);var s=n(e,a),d=s&&s.canvas,u=d&&d.height,c=d&&d.width;return i.ctx=s,i.canvas=d,i.config=a,i.width=c,i.height=u,i.aspectRatio=u?c/u:null,l.id=r.uid(),l.chart=i,l.config=a,l.options=a.options,l._bufferedRender=!1,t.instances[l.id]=l,Object.defineProperty(l,"data",{get:function(){return l.config.data}}),s&&d?(r.retinaScale(i),l.options.responsive&&(r.addResizeListener(d.parentNode,function(){l.resize()}),l.resize(!0)),l.initialize(),l):(console.error("Failed to create chart: can't acquire context from the given item"),l)},r.extend(t.Controller.prototype,{initialize:function(){var e=this;return t.plugins.notify("beforeInit",[e]),e.bindEvents(),e.ensureScalesHaveIDs(),e.buildOrUpdateControllers(),e.buildScales(),e.updateLayout(),e.resetElements(),e.initToolTip(),e.update(),t.plugins.notify("afterInit",[e]),e},clear:function(){return r.clear(this.chart),this},stop:function(){return t.animationService.cancelAnimation(this),this},resize:function(e){var a=this,i=a.chart,n=a.options,o=i.canvas,l=n.maintainAspectRatio&&i.aspectRatio||null,s=Math.floor(r.getMaximumWidth(o)),d=Math.floor(l?s/l:r.getMaximumHeight(o));if(i.width!==s||i.height!==d){o.width=i.width=s,o.height=i.height=d,o.style.width=s+"px",o.style.height=d+"px",r.retinaScale(i);var u={width:s,height:d};t.plugins.notify("resize",[a,u]),a.options.onResize&&a.options.onResize(a,u),e||(a.stop(),a.update(a.options.responsiveAnimationDuration))}},ensureScalesHaveIDs:function(){var t=this.options,e=t.scales||{},a=t.scale;r.each(e.xAxes,function(t,e){t.id=t.id||"x-axis-"+e}),r.each(e.yAxes,function(t,e){t.id=t.id||"y-axis-"+e}),a&&(a.id=a.id||"scale")},buildScales:function(){var e=this,a=e.options,i=e.scales={},n=[];a.scales&&(n=n.concat((a.scales.xAxes||[]).map(function(t){return{options:t,dtype:"category"}}),(a.scales.yAxes||[]).map(function(t){return{options:t,dtype:"linear"}}))),a.scale&&n.push({options:a.scale,dtype:"radialLinear",isDefault:!0}),r.each(n,function(a){var n=a.options,o=r.getValueOrDefault(n.type,a.dtype),l=t.scaleService.getScaleConstructor(o);if(l){var s=new l({id:n.id,options:n,ctx:e.chart.ctx,chart:e});i[s.id]=s,a.isDefault&&(e.scale=s)}}),t.scaleService.addScalesToLayout(this)},updateLayout:function(){t.layoutService.update(this,this.chart.width,this.chart.height)},buildOrUpdateControllers:function(){var e=this,a=[],i=[];if(r.each(e.data.datasets,function(n,o){var r=e.getDatasetMeta(o);r.type||(r.type=n.type||e.config.type),a.push(r.type),r.controller?r.controller.updateIndex(o):(r.controller=new t.controllers[r.type](e,o),i.push(r.controller))},e),a.length>1)for(var n=1;n<a.length;n++)if(a[n]!==a[n-1]){e.isCombo=!0;break}return i},resetElements:function(){var t=this;r.each(t.data.datasets,function(e,a){t.getDatasetMeta(a).controller.reset()},t)},reset:function(){this.resetElements(),this.tooltip.initialize()},update:function(e,a){var i=this;t.plugins.notify("beforeUpdate",[i]),i.tooltip._data=i.data;var n=i.buildOrUpdateControllers();r.each(i.data.datasets,function(t,e){i.getDatasetMeta(e).controller.buildOrUpdateElements()},i),t.layoutService.update(i,i.chart.width,i.chart.height),t.plugins.notify("afterScaleUpdate",[i]),r.each(n,function(t){t.reset()}),i.updateDatasets(),t.plugins.notify("afterUpdate",[i]),i._bufferedRender?i._bufferedRequest={lazy:a,duration:e}:i.render(e,a)},updateDatasets:function(){var e,a,i=this;if(t.plugins.notify("beforeDatasetsUpdate",[i])){for(e=0,a=i.data.datasets.length;a>e;++e)i.getDatasetMeta(e).controller.update();t.plugins.notify("afterDatasetsUpdate",[i])}},render:function(e,a){var i=this;t.plugins.notify("beforeRender",[i]);var n=i.options.animation;if(n&&("undefined"!=typeof e&&0!==e||"undefined"==typeof e&&0!==n.duration)){var o=new t.Animation;o.numSteps=(e||n.duration)/16.66,o.easing=n.easing,o.render=function(t,e){var a=r.easingEffects[e.easing],i=e.currentStep/e.numSteps,n=a(i);t.draw(n,i,e.currentStep)},o.onAnimationProgress=n.onProgress,o.onAnimationComplete=n.onComplete,t.animationService.addAnimation(i,o,e,a)}else i.draw(),n&&n.onComplete&&n.onComplete.call&&n.onComplete.call(i);return i},draw:function(e){var a=this,i=e||1;a.clear(),t.plugins.notify("beforeDraw",[a,i]),r.each(a.boxes,function(t){t.draw(a.chartArea)},a),a.scale&&a.scale.draw(),t.plugins.notify("beforeDatasetsDraw",[a,i]),r.each(a.data.datasets,function(t,i){a.isDatasetVisible(i)&&a.getDatasetMeta(i).controller.draw(e)},a,!0),t.plugins.notify("afterDatasetsDraw",[a,i]),a.tooltip.transition(i).draw(),t.plugins.notify("afterDraw",[a,i])},getElementAtEvent:function(e){return t.Interaction.modes.single(this,e)},getElementsAtEvent:function(e){return t.Interaction.modes.label(this,e,{intersect:!0})},getElementsAtXAxis:function(e){return t.Interaction.modes["x-axis"](this,e,{intersect:!0})},getElementsAtEventForMode:function(e,a,i){var n=t.Interaction.modes[a];return"function"==typeof n?n(this,e,i):[]},getDatasetAtEvent:function(e){return t.Interaction.modes.dataset(this,e)},getDatasetMeta:function(t){var e=this,a=e.data.datasets[t];a._meta||(a._meta={});
var i=a._meta[e.id];return i||(i=a._meta[e.id]={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null}),i},getVisibleDatasetCount:function(){for(var t=0,e=0,a=this.data.datasets.length;a>e;++e)this.isDatasetVisible(e)&&t++;return t},isDatasetVisible:function(t){var e=this.getDatasetMeta(t);return"boolean"==typeof e.hidden?!e.hidden:!this.data.datasets[t].hidden},generateLegend:function(){return this.options.legendCallback(this)},destroy:function(){var e,a,n,o=this,l=o.chart.canvas;for(o.stop(),a=0,n=o.data.datasets.length;n>a;++a)e=o.getDatasetMeta(a),e.controller&&(e.controller.destroy(),e.controller=null);l&&(r.unbindEvents(o,o.events),r.removeResizeListener(l.parentNode),r.clear(o.chart),i(l),o.chart.canvas=null,o.chart.ctx=null),t.plugins.notify("destroy",[o]),delete t.instances[o.id]},toBase64Image:function(){return this.chart.canvas.toDataURL.apply(this.chart.canvas,arguments)},initToolTip:function(){var e=this;e.tooltip=new t.Tooltip({_chart:e.chart,_chartInstance:e,_data:e.data,_options:e.options.tooltips},e),e.tooltip.initialize()},bindEvents:function(){var t=this;r.bindEvents(t,t.options.events,function(e){t.eventHandler(e)})},updateHoverStyle:function(t,e,a){var i,n,o,r=a?"setHoverStyle":"removeHoverStyle";for(n=0,o=t.length;o>n;++n)i=t[n],i&&this.getDatasetMeta(i._datasetIndex).controller[r](i)},eventHandler:function(t){var e=this,a=e.legend,i=e.tooltip,n=e.options.hover;e._bufferedRender=!0,e._bufferedRequest=null;var o=e.handleEvent(t);o|=a&&a.handleEvent(t),o|=i&&i.handleEvent(t);var r=e._bufferedRequest;return r?e.render(r.duration,r.lazy):o&&!e.animating&&(e.stop(),e.render(n.animationDuration,!0)),e._bufferedRender=!1,e._bufferedRequest=null,e},handleEvent:function(t){var e=this,a=e.options||{},i=a.hover,n=!1;return e.lastActive=e.lastActive||[],"mouseout"===t.type?e.active=[]:e.active=e.getElementsAtEventForMode(t,i.mode,i),i.onHover&&i.onHover.call(e,e.active),("mouseup"===t.type||"click"===t.type)&&a.onClick&&a.onClick.call(e,t,e.active),e.lastActive.length&&e.updateHoverStyle(e.lastActive,i.mode,!1),e.active.length&&i.mode&&e.updateHoverStyle(e.active,i.mode,!0),n=!r.arrayEquals(e.active,e.lastActive),e.lastActive=e.active,n}})}},{}],24:[function(t,e,a){"use strict";e.exports=function(t){function e(t,e){return t._chartjs?void t._chartjs.listeners.push(e):(Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),void n.forEach(function(e){var a="onData"+e.charAt(0).toUpperCase()+e.slice(1),n=t[e];Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:function(){var e=Array.prototype.slice.call(arguments),o=n.apply(this,e);return i.each(t._chartjs.listeners,function(t){"function"==typeof t[a]&&t[a].apply(t,e)}),o}})}))}function a(t,e){var a=t._chartjs;if(a){var i=a.listeners,o=i.indexOf(e);-1!==o&&i.splice(o,1),i.length>0||(n.forEach(function(e){delete t[e]}),delete t._chartjs)}}var i=t.helpers,n=["push","pop","shift","splice","unshift"];t.DatasetController=function(t,e){this.initialize(t,e)},i.extend(t.DatasetController.prototype,{datasetElementType:null,dataElementType:null,initialize:function(t,e){var a=this;a.chart=t,a.index=e,a.linkScales(),a.addElements()},updateIndex:function(t){this.index=t},linkScales:function(){var t=this,e=t.getMeta(),a=t.getDataset();null===e.xAxisID&&(e.xAxisID=a.xAxisID||t.chart.options.scales.xAxes[0].id),null===e.yAxisID&&(e.yAxisID=a.yAxisID||t.chart.options.scales.yAxes[0].id)},getDataset:function(){return this.chart.data.datasets[this.index]},getMeta:function(){return this.chart.getDatasetMeta(this.index)},getScaleForId:function(t){return this.chart.scales[t]},reset:function(){this.update(!0)},destroy:function(){this._data&&a(this._data,this)},createMetaDataset:function(){var t=this,e=t.datasetElementType;return e&&new e({_chart:t.chart.chart,_datasetIndex:t.index})},createMetaData:function(t){var e=this,a=e.dataElementType;return a&&new a({_chart:e.chart.chart,_datasetIndex:e.index,_index:t})},addElements:function(){var t,e,a=this,i=a.getMeta(),n=a.getDataset().data||[],o=i.data;for(t=0,e=n.length;e>t;++t)o[t]=o[t]||a.createMetaData(t);i.dataset=i.dataset||a.createMetaDataset()},addElementAndReset:function(t){var e=this.createMetaData(t);this.getMeta().data.splice(t,0,e),this.updateElement(e,t,!0)},buildOrUpdateElements:function(){var t=this,i=t.getDataset(),n=i.data||(i.data=[]);t._data!==n&&(t._data&&a(t._data,t),e(n,t),t._data=n),t.resyncElements()},update:i.noop,draw:function(t){var e,a,i=t||1,n=this.getMeta().data;for(e=0,a=n.length;a>e;++e)n[e].transition(i).draw()},removeHoverStyle:function(t,e){var a=this.chart.data.datasets[t._datasetIndex],n=t._index,o=t.custom||{},r=i.getValueAtIndexOrDefault,l=t._model;l.backgroundColor=o.backgroundColor?o.backgroundColor:r(a.backgroundColor,n,e.backgroundColor),l.borderColor=o.borderColor?o.borderColor:r(a.borderColor,n,e.borderColor),l.borderWidth=o.borderWidth?o.borderWidth:r(a.borderWidth,n,e.borderWidth)},setHoverStyle:function(t){var e=this.chart.data.datasets[t._datasetIndex],a=t._index,n=t.custom||{},o=i.getValueAtIndexOrDefault,r=i.getHoverColor,l=t._model;l.backgroundColor=n.hoverBackgroundColor?n.hoverBackgroundColor:o(e.hoverBackgroundColor,a,r(l.backgroundColor)),l.borderColor=n.hoverBorderColor?n.hoverBorderColor:o(e.hoverBorderColor,a,r(l.borderColor)),l.borderWidth=n.hoverBorderWidth?n.hoverBorderWidth:o(e.hoverBorderWidth,a,l.borderWidth)},resyncElements:function(){var t=this,e=t.getMeta(),a=t.getDataset().data,i=e.data.length,n=a.length;i>n?e.data.splice(n,i-n):n>i&&t.insertElements(i,n-i)},insertElements:function(t,e){for(var a=0;e>a;++a)this.addElementAndReset(t+a)},onDataPush:function(){this.insertElements(this.getDataset().data.length-1,arguments.length)},onDataPop:function(){this.getMeta().data.pop()},onDataShift:function(){this.getMeta().data.shift()},onDataSplice:function(t,e){this.getMeta().data.splice(t,e),this.insertElements(t,arguments.length-2)},onDataUnshift:function(){this.insertElements(0,arguments.length)}}),t.DatasetController.extend=i.inherits}},{}],25:[function(t,e,a){"use strict";e.exports=function(t){var e=t.helpers;t.elements={},t.Element=function(t){e.extend(this,t),this.initialize.apply(this,arguments)},e.extend(t.Element.prototype,{initialize:function(){this.hidden=!1},pivot:function(){var t=this;return t._view||(t._view=e.clone(t._model)),t._start=e.clone(t._view),t},transition:function(t){var a=this;return a._view||(a._view=e.clone(a._model)),1===t?(a._view=a._model,a._start=null,a):(a._start||a.pivot(),e.each(a._model,function(i,n){if("_"===n[0]);else if(a._view.hasOwnProperty(n))if(i===a._view[n]);else if("string"==typeof i)try{var o=e.color(a._model[n]).mix(e.color(a._start[n]),t);a._view[n]=o.rgbString()}catch(r){a._view[n]=i}else if("number"==typeof i){var l=void 0!==a._start[n]&&isNaN(a._start[n])===!1?a._start[n]:0;a._view[n]=(a._model[n]-l)*t+l}else a._view[n]=i;else"number"!=typeof i||isNaN(a._view[n])?a._view[n]=i:a._view[n]=i*t},a),a)},tooltipPosition:function(){return{x:this._model.x,y:this._model.y}},hasValue:function(){return e.isNumber(this._model.x)&&e.isNumber(this._model.y)}}),t.Element.extend=e.inherits}},{}],26:[function(t,e,a){"use strict";var i=t(3);e.exports=function(t){function e(t,e,a){var i;return"string"==typeof t?(i=parseInt(t,10),-1!==t.indexOf("%")&&(i=i/100*e.parentNode[a])):i=t,i}function a(t){return void 0!==t&&null!==t&&"none"!==t}function n(t,i,n){var o=document.defaultView,r=t.parentNode,l=o.getComputedStyle(t)[i],s=o.getComputedStyle(r)[i],d=a(l),u=a(s),c=Number.POSITIVE_INFINITY;return d||u?Math.min(d?e(l,t,n):c,u?e(s,r,n):c):"none"}var o=t.helpers={};o.each=function(t,e,a,i){var n,r;if(o.isArray(t))if(r=t.length,i)for(n=r-1;n>=0;n--)e.call(a,t[n],n);else for(n=0;r>n;n++)e.call(a,t[n],n);else if("object"==typeof t){var l=Object.keys(t);for(r=l.length,n=0;r>n;n++)e.call(a,t[l[n]],l[n])}},o.clone=function(t){var e={};return o.each(t,function(t,a){o.isArray(t)?e[a]=t.slice(0):"object"==typeof t&&null!==t?e[a]=o.clone(t):e[a]=t}),e},o.extend=function(t){for(var e=function(e,a){t[a]=e},a=1,i=arguments.length;i>a;a++)o.each(arguments[a],e);return t},o.configMerge=function(e){var a=o.clone(e);return o.each(Array.prototype.slice.call(arguments,1),function(e){o.each(e,function(e,i){var n=a.hasOwnProperty(i),r=n?a[i]:{};"scales"===i?a[i]=o.scaleMerge(r,e):"scale"===i?a[i]=o.configMerge(r,t.scaleService.getScaleDefaults(e.type),e):!n||"object"!=typeof r||o.isArray(r)||null===r||"object"!=typeof e||o.isArray(e)?a[i]=e:a[i]=o.configMerge(r,e)})}),a},o.scaleMerge=function(e,a){var i=o.clone(e);return o.each(a,function(e,a){"xAxes"===a||"yAxes"===a?i.hasOwnProperty(a)?o.each(e,function(e,n){var r=o.getValueOrDefault(e.type,"xAxes"===a?"category":"linear"),l=t.scaleService.getScaleDefaults(r);n>=i[a].length||!i[a][n].type?i[a].push(o.configMerge(l,e)):e.type&&e.type!==i[a][n].type?i[a][n]=o.configMerge(i[a][n],l,e):i[a][n]=o.configMerge(i[a][n],e)}):(i[a]=[],o.each(e,function(e){var n=o.getValueOrDefault(e.type,"xAxes"===a?"category":"linear");i[a].push(o.configMerge(t.scaleService.getScaleDefaults(n),e))})):i.hasOwnProperty(a)&&"object"==typeof i[a]&&null!==i[a]&&"object"==typeof e?i[a]=o.configMerge(i[a],e):i[a]=e}),i},o.getValueAtIndexOrDefault=function(t,e,a){return void 0===t||null===t?a:o.isArray(t)?e<t.length?t[e]:a:t},o.getValueOrDefault=function(t,e){return void 0===t?e:t},o.indexOf=Array.prototype.indexOf?function(t,e){return t.indexOf(e)}:function(t,e){for(var a=0,i=t.length;i>a;++a)if(t[a]===e)return a;return-1},o.where=function(t,e){if(o.isArray(t)&&Array.prototype.filter)return t.filter(e);var a=[];return o.each(t,function(t){e(t)&&a.push(t)}),a},o.findIndex=Array.prototype.findIndex?function(t,e,a){return t.findIndex(e,a)}:function(t,e,a){a=void 0===a?t:a;for(var i=0,n=t.length;n>i;++i)if(e.call(a,t[i],i,t))return i;return-1},o.findNextWhere=function(t,e,a){(void 0===a||null===a)&&(a=-1);for(var i=a+1;i<t.length;i++){var n=t[i];if(e(n))return n}},o.findPreviousWhere=function(t,e,a){(void 0===a||null===a)&&(a=t.length);for(var i=a-1;i>=0;i--){var n=t[i];if(e(n))return n}},o.inherits=function(t){var e=this,a=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return e.apply(this,arguments)},i=function(){this.constructor=a};return i.prototype=e.prototype,a.prototype=new i,a.extend=o.inherits,t&&o.extend(a.prototype,t),a.__super__=e.prototype,a},o.noop=function(){},o.uid=function(){var t=0;return function(){return t++}}(),o.isNumber=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},o.almostEquals=function(t,e,a){return Math.abs(t-e)<a},o.max=function(t){return t.reduce(function(t,e){return isNaN(e)?t:Math.max(t,e)},Number.NEGATIVE_INFINITY)},o.min=function(t){return t.reduce(function(t,e){return isNaN(e)?t:Math.min(t,e)},Number.POSITIVE_INFINITY)},o.sign=Math.sign?function(t){return Math.sign(t)}:function(t){return t=+t,0===t||isNaN(t)?t:t>0?1:-1},o.log10=Math.log10?function(t){return Math.log10(t)}:function(t){return Math.log(t)/Math.LN10},o.toRadians=function(t){return t*(Math.PI/180)},o.toDegrees=function(t){return t*(180/Math.PI)},o.getAngleFromPoint=function(t,e){var a=e.x-t.x,i=e.y-t.y,n=Math.sqrt(a*a+i*i),o=Math.atan2(i,a);return o<-.5*Math.PI&&(o+=2*Math.PI),{angle:o,distance:n}},o.distanceBetweenPoints=function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},o.aliasPixel=function(t){return t%2===0?0:.5},o.splineCurve=function(t,e,a,i){var n=t.skip?e:t,o=e,r=a.skip?e:a,l=Math.sqrt(Math.pow(o.x-n.x,2)+Math.pow(o.y-n.y,2)),s=Math.sqrt(Math.pow(r.x-o.x,2)+Math.pow(r.y-o.y,2)),d=l/(l+s),u=s/(l+s);d=isNaN(d)?0:d,u=isNaN(u)?0:u;var c=i*d,h=i*u;return{previous:{x:o.x-c*(r.x-n.x),y:o.y-c*(r.y-n.y)},next:{x:o.x+h*(r.x-n.x),y:o.y+h*(r.y-n.y)}}},o.EPSILON=Number.EPSILON||1e-14,o.splineCurveMonotone=function(t){var e,a,i,n,r=(t||[]).map(function(t){return{model:t._model,deltaK:0,mK:0}}),l=r.length;for(e=0;l>e;++e)i=r[e],i.model.skip||(a=e>0?r[e-1]:null,n=l-1>e?r[e+1]:null,n&&!n.model.skip&&(i.deltaK=(n.model.y-i.model.y)/(n.model.x-i.model.x)),!a||a.model.skip?i.mK=i.deltaK:!n||n.model.skip?i.mK=a.deltaK:this.sign(a.deltaK)!==this.sign(i.deltaK)?i.mK=0:i.mK=(a.deltaK+i.deltaK)/2);var s,d,u,c;for(e=0;l-1>e;++e)i=r[e],n=r[e+1],i.model.skip||n.model.skip||(o.almostEquals(i.deltaK,0,this.EPSILON)?i.mK=n.mK=0:(s=i.mK/i.deltaK,d=n.mK/i.deltaK,c=Math.pow(s,2)+Math.pow(d,2),9>=c||(u=3/Math.sqrt(c),i.mK=s*u*i.deltaK,n.mK=d*u*i.deltaK)));var h;for(e=0;l>e;++e)i=r[e],i.model.skip||(a=e>0?r[e-1]:null,n=l-1>e?r[e+1]:null,a&&!a.model.skip&&(h=(i.model.x-a.model.x)/3,i.model.controlPointPreviousX=i.model.x-h,i.model.controlPointPreviousY=i.model.y-h*i.mK),n&&!n.model.skip&&(h=(n.model.x-i.model.x)/3,i.model.controlPointNextX=i.model.x+h,i.model.controlPointNextY=i.model.y+h*i.mK))},o.nextItem=function(t,e,a){return a?e>=t.length-1?t[0]:t[e+1]:e>=t.length-1?t[t.length-1]:t[e+1]},o.previousItem=function(t,e,a){return a?0>=e?t[t.length-1]:t[e-1]:0>=e?t[0]:t[e-1]},o.niceNum=function(t,e){var a,i=Math.floor(o.log10(t)),n=t/Math.pow(10,i);return a=e?1.5>n?1:3>n?2:7>n?5:10:1>=n?1:2>=n?2:5>=n?5:10,a*Math.pow(10,i)};var r=o.easingEffects={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return-1*t*(t-2)},easeInOutQuad:function(t){return(t/=.5)<1?.5*t*t:-0.5*(--t*(t-2)-1)},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return 1*((t=t/1-1)*t*t+1)},easeInOutCubic:function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return-1*((t=t/1-1)*t*t*t-1)},easeInOutQuart:function(t){return(t/=.5)<1?.5*t*t*t*t:-0.5*((t-=2)*t*t*t-2)},easeInQuint:function(t){return 1*(t/=1)*t*t*t*t},easeOutQuint:function(t){return 1*((t=t/1-1)*t*t*t*t+1)},easeInOutQuint:function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},easeInSine:function(t){return-1*Math.cos(t/1*(Math.PI/2))+1},easeOutSine:function(t){return 1*Math.sin(t/1*(Math.PI/2))},easeInOutSine:function(t){return-0.5*(Math.cos(Math.PI*t/1)-1)},easeInExpo:function(t){return 0===t?1:1*Math.pow(2,10*(t/1-1))},easeOutExpo:function(t){return 1===t?1:1*(-Math.pow(2,-10*t/1)+1)},easeInOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(-Math.pow(2,-10*--t)+2)},easeInCirc:function(t){return t>=1?t:-1*(Math.sqrt(1-(t/=1)*t)-1)},easeOutCirc:function(t){return 1*Math.sqrt(1-(t=t/1-1)*t)},easeInOutCirc:function(t){return(t/=.5)<1?-0.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easeInElastic:function(t){var e=1.70158,a=0,i=1;return 0===t?0:1===(t/=1)?1:(a||(a=.3),i<Math.abs(1)?(i=1,e=a/4):e=a/(2*Math.PI)*Math.asin(1/i),-(i*Math.pow(2,10*(t-=1))*Math.sin((1*t-e)*(2*Math.PI)/a)))},easeOutElastic:function(t){var e=1.70158,a=0,i=1;return 0===t?0:1===(t/=1)?1:(a||(a=.3),i<Math.abs(1)?(i=1,e=a/4):e=a/(2*Math.PI)*Math.asin(1/i),i*Math.pow(2,-10*t)*Math.sin((1*t-e)*(2*Math.PI)/a)+1)},easeInOutElastic:function(t){var e=1.70158,a=0,i=1;return 0===t?0:2===(t/=.5)?1:(a||(a=1*(.3*1.5)),i<Math.abs(1)?(i=1,e=a/4):e=a/(2*Math.PI)*Math.asin(1/i),1>t?-.5*(i*Math.pow(2,10*(t-=1))*Math.sin((1*t-e)*(2*Math.PI)/a)):i*Math.pow(2,-10*(t-=1))*Math.sin((1*t-e)*(2*Math.PI)/a)*.5+1)},easeInBack:function(t){var e=1.70158;return 1*(t/=1)*t*((e+1)*t-e)},easeOutBack:function(t){var e=1.70158;return 1*((t=t/1-1)*t*((e+1)*t+e)+1)},easeInOutBack:function(t){var e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:function(t){return 1-r.easeOutBounce(1-t)},easeOutBounce:function(t){return(t/=1)<1/2.75?1*(7.5625*t*t):2/2.75>t?1*(7.5625*(t-=1.5/2.75)*t+.75):2.5/2.75>t?1*(7.5625*(t-=2.25/2.75)*t+.9375):1*(7.5625*(t-=2.625/2.75)*t+.984375)},easeInOutBounce:function(t){return.5>t?.5*r.easeInBounce(2*t):.5*r.easeOutBounce(2*t-1)+.5}};o.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)}}(),o.cancelAnimFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(t){return window.clearTimeout(t,1e3/60)}}(),o.getRelativePosition=function(t,e){var a,i,n=t.originalEvent||t,r=t.currentTarget||t.srcElement,l=r.getBoundingClientRect(),s=n.touches;s&&s.length>0?(a=s[0].clientX,i=s[0].clientY):(a=n.clientX,i=n.clientY);var d=parseFloat(o.getStyle(r,"padding-left")),u=parseFloat(o.getStyle(r,"padding-top")),c=parseFloat(o.getStyle(r,"padding-right")),h=parseFloat(o.getStyle(r,"padding-bottom")),f=l.right-l.left-d-c,g=l.bottom-l.top-u-h;return a=Math.round((a-l.left-d)/f*r.width/e.currentDevicePixelRatio),i=Math.round((i-l.top-u)/g*r.height/e.currentDevicePixelRatio),{x:a,y:i}},o.addEvent=function(t,e,a){t.addEventListener?t.addEventListener(e,a):t.attachEvent?t.attachEvent("on"+e,a):t["on"+e]=a},o.removeEvent=function(t,e,a){t.removeEventListener?t.removeEventListener(e,a,!1):t.detachEvent?t.detachEvent("on"+e,a):t["on"+e]=o.noop},o.bindEvents=function(t,e,a){var i=t.events=t.events||{};o.each(e,function(e){i[e]=function(){a.apply(t,arguments)},o.addEvent(t.chart.canvas,e,i[e])})},o.unbindEvents=function(t,e){var a=t.chart.canvas;o.each(e,function(t,e){o.removeEvent(a,e,t)})},o.getConstraintWidth=function(t){return n(t,"max-width","clientWidth")},o.getConstraintHeight=function(t){return n(t,"max-height","clientHeight")},o.getMaximumWidth=function(t){var e=t.parentNode,a=parseInt(o.getStyle(e,"padding-left"),10),i=parseInt(o.getStyle(e,"padding-right"),10),n=e.clientWidth-a-i,r=o.getConstraintWidth(t);return isNaN(r)?n:Math.min(n,r)},o.getMaximumHeight=function(t){var e=t.parentNode,a=parseInt(o.getStyle(e,"padding-top"),10),i=parseInt(o.getStyle(e,"padding-bottom"),10),n=e.clientHeight-a-i,r=o.getConstraintHeight(t);return isNaN(r)?n:Math.min(n,r)},o.getStyle=function(t,e){return t.currentStyle?t.currentStyle[e]:document.defaultView.getComputedStyle(t,null).getPropertyValue(e)},o.retinaScale=function(t){var e=t.currentDevicePixelRatio=window.devicePixelRatio||1;if(1!==e){var a=t.canvas,i=t.height,n=t.width;a.height=i*e,a.width=n*e,t.ctx.scale(e,e),a.style.height=i+"px",a.style.width=n+"px"}},o.clear=function(t){t.ctx.clearRect(0,0,t.width,t.height)},o.fontString=function(t,e,a){return e+" "+t+"px "+a},o.longestText=function(t,e,a,i){i=i||{};var n=i.data=i.data||{},r=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(n=i.data={},r=i.garbageCollect=[],i.font=e),t.font=e;var l=0;o.each(a,function(e){void 0!==e&&null!==e&&o.isArray(e)!==!0?l=o.measureText(t,n,r,l,e):o.isArray(e)&&o.each(e,function(e){void 0===e||null===e||o.isArray(e)||(l=o.measureText(t,n,r,l,e))})});var s=r.length/2;if(s>a.length){for(var d=0;s>d;d++)delete n[r[d]];r.splice(0,s)}return l},o.measureText=function(t,e,a,i,n){var o=e[n];return o||(o=e[n]=t.measureText(n).width,a.push(n)),o>i&&(i=o),i},o.numberOfLabelLines=function(t){var e=1;return o.each(t,function(t){o.isArray(t)&&t.length>e&&(e=t.length)}),e},o.drawRoundedRectangle=function(t,e,a,i,n,o){t.beginPath(),t.moveTo(e+o,a),t.lineTo(e+i-o,a),t.quadraticCurveTo(e+i,a,e+i,a+o),t.lineTo(e+i,a+n-o),t.quadraticCurveTo(e+i,a+n,e+i-o,a+n),t.lineTo(e+o,a+n),t.quadraticCurveTo(e,a+n,e,a+n-o),t.lineTo(e,a+o),t.quadraticCurveTo(e,a,e+o,a),t.closePath()},o.color=function(e){return i?i(e instanceof CanvasGradient?t.defaults.global.defaultColor:e):(console.error("Color.js not found!"),e)},o.addResizeListener=function(t,e){var a=document.createElement("iframe");a.className="chartjs-hidden-iframe",a.style.cssText="display:block;overflow:hidden;border:0;margin:0;top:0;left:0;bottom:0;right:0;height:100%;width:100%;position:absolute;pointer-events:none;z-index:-1;",a.tabIndex=-1;var i=t._chartjs={resizer:a,ticking:!1},n=function(){i.ticking||(i.ticking=!0,o.requestAnimFrame.call(window,function(){return i.resizer?(i.ticking=!1,e()):void 0}))};o.addEvent(a,"load",function(){o.addEvent(a.contentWindow||a,"resize",n),n()}),t.insertBefore(a,t.firstChild)},o.removeResizeListener=function(t){if(t&&t._chartjs){var e=t._chartjs.resizer;e&&(e.parentNode.removeChild(e),t._chartjs.resizer=null),delete t._chartjs}},o.isArray=Array.isArray?function(t){return Array.isArray(t)}:function(t){return"[object Array]"===Object.prototype.toString.call(t)},o.arrayEquals=function(t,e){var a,i,n,r;if(!t||!e||t.length!==e.length)return!1;for(a=0,i=t.length;i>a;++a)if(n=t[a],r=e[a],n instanceof Array&&r instanceof Array){if(!o.arrayEquals(n,r))return!1}else if(n!==r)return!1;return!0},o.callCallback=function(t,e,a){t&&"function"==typeof t.call&&t.apply(a,e)},o.getHoverColor=function(t){return t instanceof CanvasPattern?t:o.color(t).saturate(.5).darken(.1).rgbString()}}},{3:3}],27:[function(t,e,a){"use strict";e.exports=function(t){function e(t,e){var a,i,n,o,r,l=t.data.datasets;for(i=0,o=l.length;o>i;++i)if(t.isDatasetVisible(i))for(a=t.getDatasetMeta(i),n=0,r=a.data.length;r>n;++n){var s=a.data[n];s._view.skip||e(s)}}function a(t,a){var i=[];return e(t,function(t){t.inRange(a.x,a.y)&&i.push(t)}),i}function i(t,a,i,n){var r=Number.POSITIVE_INFINITY,l=[];return n||(n=o.distanceBetweenPoints),e(t,function(t){if(!i||t.inRange(a.x,a.y)){var e=t.getCenterPoint(),o=n(a,e);r>o?(l=[t],r=o):o===r&&l.push(t)}}),l}function n(t,e,n){var r=o.getRelativePosition(e,t.chart),l=function(t,e){return Math.abs(t.x-e.x)},s=n.intersect?a(t,r):i(t,r,!1,l),d=[];return s.length?(t.data.datasets.forEach(function(e,a){if(t.isDatasetVisible(a)){var i=t.getDatasetMeta(a),n=i.data[s[0]._index];n&&!n._view.skip&&d.push(n)}}),d):[]}var o=t.helpers;t.Interaction={modes:{single:function(t,a){var i=o.getRelativePosition(a,t.chart),n=[];return e(t,function(t){return t.inRange(i.x,i.y)?(n.push(t),n):void 0}),n.slice(0,1)},label:n,index:n,dataset:function(t,e,n){var r=o.getRelativePosition(e,t.chart),l=n.intersect?a(t,r):i(t,r,!1);return l.length>0&&(l=t.getDatasetMeta(l[0]._datasetIndex).data),l},"x-axis":function(t,e){return n(t,e,!0)},point:function(t,e){var i=o.getRelativePosition(e,t.chart);return a(t,i)},nearest:function(t,e,a){var n=o.getRelativePosition(e,t.chart),r=i(t,n,a.intersect);return r.length>1&&r.sort(function(t,e){var a=t.getArea(),i=e.getArea(),n=a-i;return 0===n&&(n=t._datasetIndex-e._datasetIndex),n}),r.slice(0,1)},x:function(t,a,i){var n=o.getRelativePosition(a,t.chart),r=[],l=!1;return e(t,function(t){t.inXRange(n.x)&&r.push(t),t.inRange(n.x,n.y)&&(l=!0)}),i.intersect&&!l&&(r=[]),r},y:function(t,a,i){var n=o.getRelativePosition(a,t.chart),r=[],l=!1;return e(t,function(t){t.inYRange(n.y)&&r.push(t),t.inRange(n.x,n.y)&&(l=!0)}),i.intersect&&!l&&(r=[]),r}}}}},{}],28:[function(t,e,a){"use strict";e.exports=function(){var t=function(e,a){return this.controller=new t.Controller(e,a,this),this.controller};return t.defaults={global:{responsive:!0,responsiveAnimationDuration:0,maintainAspectRatio:!0,events:["mousemove","mouseout","click","touchstart","touchmove"],hover:{onHover:null,mode:"nearest",intersect:!0,animationDuration:400},onClick:null,defaultColor:"rgba(0,0,0,0.1)",defaultFontColor:"#666",defaultFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",defaultFontSize:12,defaultFontStyle:"normal",showLines:!0,elements:{},legendCallback:function(t){var e=[];e.push('<ul class="'+t.id+'-legend">');for(var a=0;a<t.data.datasets.length;a++)e.push('<li><span style="background-color:'+t.data.datasets[a].backgroundColor+'"></span>'),t.data.datasets[a].label&&e.push(t.data.datasets[a].label),e.push("</li>");return e.push("</ul>"),e.join("")}}},t.Chart=t,t}},{}],29:[function(t,e,a){"use strict";e.exports=function(t){var e=t.helpers;t.layoutService={defaults:{},addBox:function(t,e){t.boxes||(t.boxes=[]),t.boxes.push(e)},removeBox:function(t,e){t.boxes&&t.boxes.splice(t.boxes.indexOf(e),1)},update:function(t,a,i){function n(t){var e,a=t.isHorizontal();a?(e=t.update(t.options.fullWidth?x:C,M),D-=e.height):(e=t.update(w,S),C-=e.width),I.push({horizontal:a,minSize:e,box:t})}function o(t){var a=e.findNextWhere(I,function(e){return e.box===t});if(a)if(t.isHorizontal()){var i={left:A,right:T,top:0,bottom:0};t.update(t.options.fullWidth?x:C,y/2,i)}else t.update(a.minSize.width,D)}function r(t){var a=e.findNextWhere(I,function(e){return e.box===t}),i={left:0,right:0,top:P,bottom:F};a&&t.update(a.minSize.width,D,i)}function l(t){t.isHorizontal()?(t.left=t.options.fullWidth?u:A,t.right=t.options.fullWidth?a-c:A+C,t.top=L,t.bottom=L+t.height,L=t.bottom):(t.left=V,t.right=V+t.width,t.top=P,t.bottom=P+D,V=t.right)}if(t){var s=t.options.layout,d=s?s.padding:null,u=0,c=0,h=0,f=0;isNaN(d)?(u=d.left||0,c=d.right||0,h=d.top||0,f=d.bottom||0):(u=d,c=d,h=d,f=d);var g=e.where(t.boxes,function(t){return"left"===t.options.position}),p=e.where(t.boxes,function(t){return"right"===t.options.position}),m=e.where(t.boxes,function(t){return"top"===t.options.position}),b=e.where(t.boxes,function(t){return"bottom"===t.options.position}),v=e.where(t.boxes,function(t){return"chartArea"===t.options.position});m.sort(function(t,e){return(e.options.fullWidth?1:0)-(t.options.fullWidth?1:0)}),b.sort(function(t,e){return(t.options.fullWidth?1:0)-(e.options.fullWidth?1:0)});var x=a-u-c,y=i-h-f,k=x/2,S=y/2,w=(a-k)/(g.length+p.length),M=(i-S)/(m.length+b.length),C=x,D=y,I=[];e.each(g.concat(p,m,b),n);var A=u,T=c,P=h,F=f;e.each(g.concat(p),o),e.each(g,function(t){A+=t.width}),e.each(p,function(t){T+=t.width}),e.each(m.concat(b),o),e.each(m,function(t){P+=t.height}),e.each(b,function(t){F+=t.height}),e.each(g.concat(p),r),A=u,T=c,P=h,F=f,e.each(g,function(t){A+=t.width}),e.each(p,function(t){T+=t.width}),e.each(m,function(t){P+=t.height}),e.each(b,function(t){F+=t.height});var _=i-P-F,R=a-A-T;(R!==C||_!==D)&&(e.each(g,function(t){t.height=_}),e.each(p,function(t){t.height=_}),e.each(m,function(t){t.options.fullWidth||(t.width=R)}),e.each(b,function(t){t.options.fullWidth||(t.width=R)}),D=_,C=R);var V=u,L=h;e.each(g.concat(m),l),V+=C,L+=D,e.each(p,l),e.each(b,l),t.chartArea={left:A,top:P,right:A+C,bottom:P+D},e.each(v,function(e){e.left=t.chartArea.left,e.top=t.chartArea.top,e.right=t.chartArea.right,e.bottom=t.chartArea.bottom,e.update(C,D)})}}}}},{}],30:[function(t,e,a){"use strict";e.exports=function(t){function e(t,e){return t.usePointStyle?e*Math.SQRT2:t.boxWidth}var a=t.helpers,i=a.noop;t.defaults.global.legend={display:!0,position:"top",fullWidth:!0,reverse:!1,onClick:function(t,e){var a=e.datasetIndex,i=this.chart,n=i.getDatasetMeta(a);n.hidden=null===n.hidden?!i.data.datasets[a].hidden:null,i.update()},onHover:null,labels:{boxWidth:40,padding:10,generateLabels:function(t){var e=t.data;return a.isArray(e.datasets)?e.datasets.map(function(e,i){return{text:e.label,fillStyle:a.isArray(e.backgroundColor)?e.backgroundColor[0]:e.backgroundColor,hidden:!t.isDatasetVisible(i),lineCap:e.borderCapStyle,lineDash:e.borderDash,lineDashOffset:e.borderDashOffset,lineJoin:e.borderJoinStyle,lineWidth:e.borderWidth,strokeStyle:e.borderColor,pointStyle:e.pointStyle,datasetIndex:i}},this):[]}}},t.Legend=t.Element.extend({initialize:function(t){a.extend(this,t),this.legendHitBoxes=[],this.doughnutMode=!1},beforeUpdate:i,update:function(t,e,a){var i=this;return i.beforeUpdate(),i.maxWidth=t,i.maxHeight=e,i.margins=a,i.beforeSetDimensions(),i.setDimensions(),i.afterSetDimensions(),i.beforeBuildLabels(),i.buildLabels(),i.afterBuildLabels(),i.beforeFit(),i.fit(),i.afterFit(),i.afterUpdate(),i.minSize},afterUpdate:i,beforeSetDimensions:i,setDimensions:function(){var t=this;t.isHorizontal()?(t.width=t.maxWidth,t.left=0,t.right=t.width):(t.height=t.maxHeight,t.top=0,t.bottom=t.height),t.paddingLeft=0,t.paddingTop=0,t.paddingRight=0,t.paddingBottom=0,t.minSize={width:0,height:0}},afterSetDimensions:i,beforeBuildLabels:i,buildLabels:function(){var t=this;t.legendItems=t.options.labels.generateLabels.call(t,t.chart),t.options.reverse&&t.legendItems.reverse()},afterBuildLabels:i,beforeFit:i,fit:function(){var i=this,n=i.options,o=n.labels,r=n.display,l=i.ctx,s=t.defaults.global,d=a.getValueOrDefault,u=d(o.fontSize,s.defaultFontSize),c=d(o.fontStyle,s.defaultFontStyle),h=d(o.fontFamily,s.defaultFontFamily),f=a.fontString(u,c,h),g=i.legendHitBoxes=[],p=i.minSize,m=i.isHorizontal();if(m?(p.width=i.maxWidth,p.height=r?10:0):(p.width=r?10:0,p.height=i.maxHeight),r)if(l.font=f,m){var b=i.lineWidths=[0],v=i.legendItems.length?u+o.padding:0;l.textAlign="left",l.textBaseline="top",a.each(i.legendItems,function(t,a){var n=e(o,u),r=n+u/2+l.measureText(t.text).width;b[b.length-1]+r+o.padding>=i.width&&(v+=u+o.padding,b[b.length]=i.left),g[a]={left:0,top:0,width:r,height:u},b[b.length-1]+=r+o.padding}),p.height+=v}else{var x=o.padding,y=i.columnWidths=[],k=o.padding,S=0,w=0,M=u+x;a.each(i.legendItems,function(t,a){var i=e(o,u),n=i+u/2+l.measureText(t.text).width;w+M>p.height&&(k+=S+o.padding,y.push(S),S=0,w=0),S=Math.max(S,n),w+=M,g[a]={left:0,top:0,width:n,height:u}}),k+=S,y.push(S),p.width+=k}i.width=p.width,i.height=p.height},afterFit:i,isHorizontal:function(){return"top"===this.options.position||"bottom"===this.options.position},draw:function(){var i=this,n=i.options,o=n.labels,r=t.defaults.global,l=r.elements.line,s=i.width,d=i.lineWidths;if(n.display){var u,c=i.ctx,h=a.getValueOrDefault,f=h(o.fontColor,r.defaultFontColor),g=h(o.fontSize,r.defaultFontSize),p=h(o.fontStyle,r.defaultFontStyle),m=h(o.fontFamily,r.defaultFontFamily),b=a.fontString(g,p,m);c.textAlign="left",c.textBaseline="top",c.lineWidth=.5,c.strokeStyle=f,c.fillStyle=f,c.font=b;var v=e(o,g),x=i.legendHitBoxes,y=function(e,a,i){if(!(isNaN(v)||0>=v)){c.save(),c.fillStyle=h(i.fillStyle,r.defaultColor),c.lineCap=h(i.lineCap,l.borderCapStyle),c.lineDashOffset=h(i.lineDashOffset,l.borderDashOffset),c.lineJoin=h(i.lineJoin,l.borderJoinStyle),c.lineWidth=h(i.lineWidth,l.borderWidth),c.strokeStyle=h(i.strokeStyle,r.defaultColor);var o=0===h(i.lineWidth,l.borderWidth);if(c.setLineDash&&c.setLineDash(h(i.lineDash,l.borderDash)),n.labels&&n.labels.usePointStyle){var s=g*Math.SQRT2/2,d=s/Math.SQRT2,u=e+d,f=a+d;t.canvasHelpers.drawPoint(c,i.pointStyle,s,u,f)}else o||c.strokeRect(e,a,v,g),c.fillRect(e,a,v,g);c.restore()}},k=function(t,e,a,i){c.fillText(a.text,v+g/2+t,e),a.hidden&&(c.beginPath(),c.lineWidth=2,c.moveTo(v+g/2+t,e+g/2),c.lineTo(v+g/2+t+i,e+g/2),c.stroke())},S=i.isHorizontal();u=S?{x:i.left+(s-d[0])/2,y:i.top+o.padding,line:0}:{x:i.left+o.padding,y:i.top+o.padding,line:0};var w=g+o.padding;a.each(i.legendItems,function(t,e){var a=c.measureText(t.text).width,n=v+g/2+a,r=u.x,l=u.y;S?r+n>=s&&(l=u.y+=w,u.line++,r=u.x=i.left+(s-d[u.line])/2):l+w>i.bottom&&(r=u.x=r+i.columnWidths[u.line]+o.padding,l=u.y=i.top,u.line++),y(r,l,t),x[e].left=r,x[e].top=l,k(r,l,t,a),S?u.x+=n+o.padding:u.y+=w})}},handleEvent:function(t){var e=this,i=e.options,n="mouseup"===t.type?"click":t.type,o=!1;if("mousemove"===n){if(!i.onHover)return}else{if("click"!==n)return;if(!i.onClick)return}var r=a.getRelativePosition(t,e.chart.chart),l=r.x,s=r.y;if(l>=e.left&&l<=e.right&&s>=e.top&&s<=e.bottom)for(var d=e.legendHitBoxes,u=0;u<d.length;++u){var c=d[u];if(l>=c.left&&l<=c.left+c.width&&s>=c.top&&s<=c.top+c.height){if("click"===n){i.onClick.call(e,t,e.legendItems[u]),o=!0;break}if("mousemove"===n){i.onHover.call(e,t,e.legendItems[u]),o=!0;break}}}return o}}),t.plugins.register({beforeInit:function(e){var a=e.options,i=a.legend;i&&(e.legend=new t.Legend({ctx:e.chart.ctx,options:i,chart:e}),t.layoutService.addBox(e,e.legend))}})}},{}],31:[function(t,e,a){"use strict";e.exports=function(t){var e=t.helpers.noop;t.plugins={_plugins:[],register:function(t){var e=this._plugins;[].concat(t).forEach(function(t){-1===e.indexOf(t)&&e.push(t)})},unregister:function(t){var e=this._plugins;[].concat(t).forEach(function(t){var a=e.indexOf(t);-1!==a&&e.splice(a,1)})},clear:function(){this._plugins=[]},count:function(){return this._plugins.length},getAll:function(){return this._plugins},notify:function(t,e){var a,i,n=this._plugins,o=n.length;
for(a=0;o>a;++a)if(i=n[a],"function"==typeof i[t]&&i[t].apply(i,e||[])===!1)return!1;return!0}},t.PluginBase=t.Element.extend({beforeInit:e,afterInit:e,beforeUpdate:e,afterUpdate:e,beforeDraw:e,afterDraw:e,destroy:e}),t.pluginService=t.plugins}},{}],32:[function(t,e,a){"use strict";e.exports=function(t){var e=t.helpers;t.defaults.scale={display:!0,position:"left",gridLines:{display:!0,color:"rgba(0, 0, 0, 0.1)",lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickMarkLength:10,zeroLineWidth:1,zeroLineColor:"rgba(0,0,0,0.25)",offsetGridLines:!1,borderDash:[],borderDashOffset:0},scaleLabel:{labelString:"",display:!1},ticks:{beginAtZero:!1,minRotation:0,maxRotation:50,mirror:!1,padding:10,reverse:!1,display:!0,autoSkip:!0,autoSkipPadding:0,labelOffset:0,callback:t.Ticks.formatters.values}},t.Scale=t.Element.extend({beforeUpdate:function(){e.callCallback(this.options.beforeUpdate,[this])},update:function(t,a,i){var n=this;return n.beforeUpdate(),n.maxWidth=t,n.maxHeight=a,n.margins=e.extend({left:0,right:0,top:0,bottom:0},i),n.beforeSetDimensions(),n.setDimensions(),n.afterSetDimensions(),n.beforeDataLimits(),n.determineDataLimits(),n.afterDataLimits(),n.beforeBuildTicks(),n.buildTicks(),n.afterBuildTicks(),n.beforeTickToLabelConversion(),n.convertTicksToLabels(),n.afterTickToLabelConversion(),n.beforeCalculateTickRotation(),n.calculateTickRotation(),n.afterCalculateTickRotation(),n.beforeFit(),n.fit(),n.afterFit(),n.afterUpdate(),n.minSize},afterUpdate:function(){e.callCallback(this.options.afterUpdate,[this])},beforeSetDimensions:function(){e.callCallback(this.options.beforeSetDimensions,[this])},setDimensions:function(){var t=this;t.isHorizontal()?(t.width=t.maxWidth,t.left=0,t.right=t.width):(t.height=t.maxHeight,t.top=0,t.bottom=t.height),t.paddingLeft=0,t.paddingTop=0,t.paddingRight=0,t.paddingBottom=0},afterSetDimensions:function(){e.callCallback(this.options.afterSetDimensions,[this])},beforeDataLimits:function(){e.callCallback(this.options.beforeDataLimits,[this])},determineDataLimits:e.noop,afterDataLimits:function(){e.callCallback(this.options.afterDataLimits,[this])},beforeBuildTicks:function(){e.callCallback(this.options.beforeBuildTicks,[this])},buildTicks:e.noop,afterBuildTicks:function(){e.callCallback(this.options.afterBuildTicks,[this])},beforeTickToLabelConversion:function(){e.callCallback(this.options.beforeTickToLabelConversion,[this])},convertTicksToLabels:function(){var t=this,e=t.options.ticks;t.ticks=t.ticks.map(e.userCallback||e.callback)},afterTickToLabelConversion:function(){e.callCallback(this.options.afterTickToLabelConversion,[this])},beforeCalculateTickRotation:function(){e.callCallback(this.options.beforeCalculateTickRotation,[this])},calculateTickRotation:function(){var a=this,i=a.ctx,n=t.defaults.global,o=a.options.ticks,r=e.getValueOrDefault(o.fontSize,n.defaultFontSize),l=e.getValueOrDefault(o.fontStyle,n.defaultFontStyle),s=e.getValueOrDefault(o.fontFamily,n.defaultFontFamily),d=e.fontString(r,l,s);i.font=d;var u,c=i.measureText(a.ticks[0]).width,h=i.measureText(a.ticks[a.ticks.length-1]).width;if(a.labelRotation=o.minRotation||0,a.paddingRight=0,a.paddingLeft=0,a.options.display&&a.isHorizontal()){a.paddingRight=h/2+3,a.paddingLeft=c/2+3,a.longestTextCache||(a.longestTextCache={});for(var f,g,p=e.longestText(i,d,a.ticks,a.longestTextCache),m=p,b=a.getPixelForTick(1)-a.getPixelForTick(0)-6;m>b&&a.labelRotation<o.maxRotation;){if(f=Math.cos(e.toRadians(a.labelRotation)),g=Math.sin(e.toRadians(a.labelRotation)),u=f*c,u+r/2>a.yLabelWidth&&(a.paddingLeft=u+r/2),a.paddingRight=r/2,g*p>a.maxHeight){a.labelRotation--;break}a.labelRotation++,m=f*p}}a.margins&&(a.paddingLeft=Math.max(a.paddingLeft-a.margins.left,0),a.paddingRight=Math.max(a.paddingRight-a.margins.right,0))},afterCalculateTickRotation:function(){e.callCallback(this.options.afterCalculateTickRotation,[this])},beforeFit:function(){e.callCallback(this.options.beforeFit,[this])},fit:function(){var a=this,i=a.minSize={width:0,height:0},n=a.options,o=t.defaults.global,r=n.ticks,l=n.scaleLabel,s=n.gridLines,d=n.display,u=a.isHorizontal(),c=e.getValueOrDefault(r.fontSize,o.defaultFontSize),h=e.getValueOrDefault(r.fontStyle,o.defaultFontStyle),f=e.getValueOrDefault(r.fontFamily,o.defaultFontFamily),g=e.fontString(c,h,f),p=e.getValueOrDefault(l.fontSize,o.defaultFontSize),m=n.gridLines.tickMarkLength;if(u?i.width=a.isFullWidth()?a.maxWidth-a.margins.left-a.margins.right:a.maxWidth:i.width=d&&s.drawTicks?m:0,u?i.height=d&&s.drawTicks?m:0:i.height=a.maxHeight,l.display&&d&&(u?i.height+=1.5*p:i.width+=1.5*p),r.display&&d){a.longestTextCache||(a.longestTextCache={});var b=e.longestText(a.ctx,g,a.ticks,a.longestTextCache),v=e.numberOfLabelLines(a.ticks),x=.5*c;if(u){a.longestLabelWidth=b;var y=Math.sin(e.toRadians(a.labelRotation))*a.longestLabelWidth+c*v+x*v;i.height=Math.min(a.maxHeight,i.height+y),a.ctx.font=g;var k=a.ctx.measureText(a.ticks[0]).width,S=a.ctx.measureText(a.ticks[a.ticks.length-1]).width,w=Math.cos(e.toRadians(a.labelRotation)),M=Math.sin(e.toRadians(a.labelRotation));a.paddingLeft=0!==a.labelRotation?w*k+3:k/2+3,a.paddingRight=0!==a.labelRotation?M*(c/2)+3:S/2+3}else{var C=a.maxWidth-i.width,D=r.mirror;D?b=0:b+=a.options.ticks.padding,C>b?i.width+=b:i.width=a.maxWidth,a.paddingTop=c/2,a.paddingBottom=c/2}}a.margins&&(a.paddingLeft=Math.max(a.paddingLeft-a.margins.left,0),a.paddingTop=Math.max(a.paddingTop-a.margins.top,0),a.paddingRight=Math.max(a.paddingRight-a.margins.right,0),a.paddingBottom=Math.max(a.paddingBottom-a.margins.bottom,0)),a.width=i.width,a.height=i.height},afterFit:function(){e.callCallback(this.options.afterFit,[this])},isHorizontal:function(){return"top"===this.options.position||"bottom"===this.options.position},isFullWidth:function(){return this.options.fullWidth},getRightValue:function(t){return null===t||"undefined"==typeof t?NaN:"number"!=typeof t||isFinite(t)?"object"==typeof t?t instanceof Date||t.isValid?t:this.getRightValue(this.isHorizontal()?t.x:t.y):t:NaN},getLabelForIndex:e.noop,getPixelForValue:e.noop,getValueForPixel:e.noop,getPixelForTick:function(t,e){var a=this;if(a.isHorizontal()){var i=a.width-(a.paddingLeft+a.paddingRight),n=i/Math.max(a.ticks.length-(a.options.gridLines.offsetGridLines?0:1),1),o=n*t+a.paddingLeft;e&&(o+=n/2);var r=a.left+Math.round(o);return r+=a.isFullWidth()?a.margins.left:0}var l=a.height-(a.paddingTop+a.paddingBottom);return a.top+t*(l/(a.ticks.length-1))},getPixelForDecimal:function(t){var e=this;if(e.isHorizontal()){var a=e.width-(e.paddingLeft+e.paddingRight),i=a*t+e.paddingLeft,n=e.left+Math.round(i);return n+=e.isFullWidth()?e.margins.left:0}return e.top+t*e.height},getBasePixel:function(){var t=this,e=t.min,a=t.max;return t.getPixelForValue(t.beginAtZero?0:0>e&&0>a?a:e>0&&a>0?e:0)},draw:function(a){var i=this,n=i.options;if(n.display){var o,r,l=i.ctx,s=t.defaults.global,d=n.ticks,u=n.gridLines,c=n.scaleLabel,h=0!==i.labelRotation,f=d.autoSkip,g=i.isHorizontal();d.maxTicksLimit&&(r=d.maxTicksLimit);var p=e.getValueOrDefault(d.fontColor,s.defaultFontColor),m=e.getValueOrDefault(d.fontSize,s.defaultFontSize),b=e.getValueOrDefault(d.fontStyle,s.defaultFontStyle),v=e.getValueOrDefault(d.fontFamily,s.defaultFontFamily),x=e.fontString(m,b,v),y=u.tickMarkLength,k=e.getValueOrDefault(u.borderDash,s.borderDash),S=e.getValueOrDefault(u.borderDashOffset,s.borderDashOffset),w=e.getValueOrDefault(c.fontColor,s.defaultFontColor),M=e.getValueOrDefault(c.fontSize,s.defaultFontSize),C=e.getValueOrDefault(c.fontStyle,s.defaultFontStyle),D=e.getValueOrDefault(c.fontFamily,s.defaultFontFamily),I=e.fontString(M,C,D),A=e.toRadians(i.labelRotation),T=Math.cos(A),P=i.longestLabelWidth*T;l.fillStyle=p;var F=[];if(g){if(o=!1,h&&(P/=2),(P+d.autoSkipPadding)*i.ticks.length>i.width-(i.paddingLeft+i.paddingRight)&&(o=1+Math.floor((P+d.autoSkipPadding)*i.ticks.length/(i.width-(i.paddingLeft+i.paddingRight)))),r&&i.ticks.length>r)for(;!o||i.ticks.length/(o||1)>r;)o||(o=1),o+=1;f||(o=!1)}var _="right"===n.position?i.left:i.right-y,R="right"===n.position?i.left+y:i.right,V="bottom"===n.position?i.top:i.bottom-y,L="bottom"===n.position?i.top+y:i.bottom;if(e.each(i.ticks,function(t,r){if(void 0!==t&&null!==t){var l=i.ticks.length===r+1,s=o>1&&r%o>0||r%o===0&&r+o>=i.ticks.length;if((!s||l)&&void 0!==t&&null!==t){var c,f;r===("undefined"!=typeof i.zeroLineIndex?i.zeroLineIndex:0)?(c=u.zeroLineWidth,f=u.zeroLineColor):(c=e.getValueAtIndexOrDefault(u.lineWidth,r),f=e.getValueAtIndexOrDefault(u.color,r));var p,m,b,v,x,w,M,C,D,I,T="middle",P="middle";if(g){h||(P="top"===n.position?"bottom":"top"),T=h?"right":"center";var O=i.getPixelForTick(r)+e.aliasPixel(c);D=i.getPixelForTick(r,u.offsetGridLines)+d.labelOffset,I=h?i.top+12:"top"===n.position?i.bottom-y:i.top+y,p=b=x=M=O,m=V,v=L,w=a.top,C=a.bottom}else{"left"===n.position?d.mirror?(D=i.right+d.padding,T="left"):(D=i.right-d.padding,T="right"):d.mirror?(D=i.left-d.padding,T="right"):(D=i.left+d.padding,T="left");var B=i.getPixelForTick(r);B+=e.aliasPixel(c),I=i.getPixelForTick(r,u.offsetGridLines),p=_,b=R,x=a.left,M=a.right,m=v=w=C=B}F.push({tx1:p,ty1:m,tx2:b,ty2:v,x1:x,y1:w,x2:M,y2:C,labelX:D,labelY:I,glWidth:c,glColor:f,glBorderDash:k,glBorderDashOffset:S,rotation:-1*A,label:t,textBaseline:P,textAlign:T})}}}),e.each(F,function(t){if(u.display&&(l.save(),l.lineWidth=t.glWidth,l.strokeStyle=t.glColor,l.setLineDash&&(l.setLineDash(t.glBorderDash),l.lineDashOffset=t.glBorderDashOffset),l.beginPath(),u.drawTicks&&(l.moveTo(t.tx1,t.ty1),l.lineTo(t.tx2,t.ty2)),u.drawOnChartArea&&(l.moveTo(t.x1,t.y1),l.lineTo(t.x2,t.y2)),l.stroke(),l.restore()),d.display){l.save(),l.translate(t.labelX,t.labelY),l.rotate(t.rotation),l.font=x,l.textBaseline=t.textBaseline,l.textAlign=t.textAlign;var a=t.label;if(e.isArray(a))for(var i=0,n=-(a.length-1)*m*.75;i<a.length;++i)l.fillText(""+a[i],0,n),n+=1.5*m;else l.fillText(a,0,0);l.restore()}}),c.display){var O,B,W=0;if(g)O=i.left+(i.right-i.left)/2,B="bottom"===n.position?i.bottom-M/2:i.top+M/2;else{var z="left"===n.position;O=z?i.left+M/2:i.right-M/2,B=i.top+(i.bottom-i.top)/2,W=z?-.5*Math.PI:.5*Math.PI}l.save(),l.translate(O,B),l.rotate(W),l.textAlign="center",l.textBaseline="middle",l.fillStyle=w,l.font=I,l.fillText(c.labelString,0,0),l.restore()}if(u.drawBorder){l.lineWidth=e.getValueAtIndexOrDefault(u.lineWidth,0),l.strokeStyle=e.getValueAtIndexOrDefault(u.color,0);var N=i.left,E=i.right,H=i.top,U=i.bottom,j=e.aliasPixel(l.lineWidth);g?(H=U="top"===n.position?i.bottom:i.top,H+=j,U+=j):(N=E="left"===n.position?i.right:i.left,N+=j,E+=j),l.beginPath(),l.moveTo(N,H),l.lineTo(E,U),l.stroke()}}}})}},{}],33:[function(t,e,a){"use strict";e.exports=function(t){var e=t.helpers;t.scaleService={constructors:{},defaults:{},registerScaleType:function(t,a,i){this.constructors[t]=a,this.defaults[t]=e.clone(i)},getScaleConstructor:function(t){return this.constructors.hasOwnProperty(t)?this.constructors[t]:void 0},getScaleDefaults:function(a){return this.defaults.hasOwnProperty(a)?e.scaleMerge(t.defaults.scale,this.defaults[a]):{}},updateScaleDefaults:function(t,a){var i=this.defaults;i.hasOwnProperty(t)&&(i[t]=e.extend(i[t],a))},addScalesToLayout:function(a){e.each(a.scales,function(e){t.layoutService.addBox(a,e)})}}}},{}],34:[function(t,e,a){"use strict";e.exports=function(t){var e=t.helpers;t.Ticks={generators:{linear:function(t,a){var i,n=[];if(t.stepSize&&t.stepSize>0)i=t.stepSize;else{var o=e.niceNum(a.max-a.min,!1);i=e.niceNum(o/(t.maxTicks-1),!0)}var r=Math.floor(a.min/i)*i,l=Math.ceil(a.max/i)*i;if(t.min&&t.max&&t.stepSize){var s=(t.max-t.min)%t.stepSize===0;s&&(r=t.min,l=t.max)}var d=(l-r)/i;d=e.almostEquals(d,Math.round(d),i/1e3)?Math.round(d):Math.ceil(d),n.push(void 0!==t.min?t.min:r);for(var u=1;d>u;++u)n.push(r+u*i);return n.push(void 0!==t.max?t.max:l),n},logarithmic:function(t,a){for(var i=[],n=e.getValueOrDefault,o=n(t.min,Math.pow(10,Math.floor(e.log10(a.min))));o<a.max;){i.push(o);var r,l;0===o?(r=Math.floor(e.log10(a.minNotZero)),l=Math.round(a.minNotZero/Math.pow(10,r))):(r=Math.floor(e.log10(o)),l=Math.floor(o/Math.pow(10,r))+1),10===l&&(l=1,++r),o=l*Math.pow(10,r)}var s=n(t.max,o);return i.push(s),i}},formatters:{values:function(t){return e.isArray(t)?t:""+t},linear:function(t,a,i){var n=i.length>3?i[2]-i[1]:i[1]-i[0];Math.abs(n)>1&&t!==Math.floor(t)&&(n=t-Math.floor(t));var o=e.log10(Math.abs(n)),r="";if(0!==t){var l=-1*Math.floor(o);l=Math.max(Math.min(l,20),0),r=t.toFixed(l)}else r="0";return r},logarithmic:function(t,a,i){var n=t/Math.pow(10,Math.floor(e.log10(t)));return 0===t?"0":1===n||2===n||5===n||0===a||a===i.length-1?t.toExponential():""}}}}},{}],35:[function(t,e,a){"use strict";e.exports=function(t){var e=t.helpers;t.defaults.global.title={display:!1,position:"top",fullWidth:!0,fontStyle:"bold",padding:10,text:""};var a=e.noop;t.Title=t.Element.extend({initialize:function(a){var i=this;e.extend(i,a),i.options=e.configMerge(t.defaults.global.title,a.options),i.legendHitBoxes=[]},beforeUpdate:function(){var a=this.chart.options;a&&a.title&&(this.options=e.configMerge(t.defaults.global.title,a.title))},update:function(t,e,a){var i=this;return i.beforeUpdate(),i.maxWidth=t,i.maxHeight=e,i.margins=a,i.beforeSetDimensions(),i.setDimensions(),i.afterSetDimensions(),i.beforeBuildLabels(),i.buildLabels(),i.afterBuildLabels(),i.beforeFit(),i.fit(),i.afterFit(),i.afterUpdate(),i.minSize},afterUpdate:a,beforeSetDimensions:a,setDimensions:function(){var t=this;t.isHorizontal()?(t.width=t.maxWidth,t.left=0,t.right=t.width):(t.height=t.maxHeight,t.top=0,t.bottom=t.height),t.paddingLeft=0,t.paddingTop=0,t.paddingRight=0,t.paddingBottom=0,t.minSize={width:0,height:0}},afterSetDimensions:a,beforeBuildLabels:a,buildLabels:a,afterBuildLabels:a,beforeFit:a,fit:function(){var a=this,i=e.getValueOrDefault,n=a.options,o=t.defaults.global,r=n.display,l=i(n.fontSize,o.defaultFontSize),s=a.minSize;a.isHorizontal()?(s.width=a.maxWidth,s.height=r?l+2*n.padding:0):(s.width=r?l+2*n.padding:0,s.height=a.maxHeight),a.width=s.width,a.height=s.height},afterFit:a,isHorizontal:function(){var t=this.options.position;return"top"===t||"bottom"===t},draw:function(){var a=this,i=a.ctx,n=e.getValueOrDefault,o=a.options,r=t.defaults.global;if(o.display){var l,s,d,u=n(o.fontSize,r.defaultFontSize),c=n(o.fontStyle,r.defaultFontStyle),h=n(o.fontFamily,r.defaultFontFamily),f=e.fontString(u,c,h),g=0,p=a.top,m=a.left,b=a.bottom,v=a.right;i.fillStyle=n(o.fontColor,r.defaultFontColor),i.font=f,a.isHorizontal()?(l=m+(v-m)/2,s=p+(b-p)/2,d=v-m):(l="left"===o.position?m+u/2:v-u/2,s=p+(b-p)/2,d=b-p,g=Math.PI*("left"===o.position?-.5:.5)),i.save(),i.translate(l,s),i.rotate(g),i.textAlign="center",i.textBaseline="middle",i.fillText(o.text,0,0,d),i.restore()}}}),t.plugins.register({beforeInit:function(e){var a=e.options,i=a.title;i&&(e.titleBlock=new t.Title({ctx:e.chart.ctx,options:i,chart:e}),t.layoutService.addBox(e,e.titleBlock))}})}},{}],36:[function(t,e,a){"use strict";e.exports=function(t){function e(t,e){var a=s.color(t);return a.alpha(e*a.alpha()).rgbaString()}function a(t,e){return e&&(s.isArray(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function i(t){var e=t._xScale,a=t._yScale||t._scale,i=t._index,n=t._datasetIndex;return{xLabel:e?e.getLabelForIndex(i,n):"",yLabel:a?a.getLabelForIndex(i,n):"",index:i,datasetIndex:n,x:t._model.x,y:t._model.y}}function n(e){var a=t.defaults.global,i=s.getValueOrDefault;return{xPadding:e.xPadding,yPadding:e.yPadding,xAlign:e.xAlign,yAlign:e.yAlign,bodyFontColor:e.bodyFontColor,_bodyFontFamily:i(e.bodyFontFamily,a.defaultFontFamily),_bodyFontStyle:i(e.bodyFontStyle,a.defaultFontStyle),_bodyAlign:e.bodyAlign,bodyFontSize:i(e.bodyFontSize,a.defaultFontSize),bodySpacing:e.bodySpacing,titleFontColor:e.titleFontColor,_titleFontFamily:i(e.titleFontFamily,a.defaultFontFamily),_titleFontStyle:i(e.titleFontStyle,a.defaultFontStyle),titleFontSize:i(e.titleFontSize,a.defaultFontSize),_titleAlign:e.titleAlign,titleSpacing:e.titleSpacing,titleMarginBottom:e.titleMarginBottom,footerFontColor:e.footerFontColor,_footerFontFamily:i(e.footerFontFamily,a.defaultFontFamily),_footerFontStyle:i(e.footerFontStyle,a.defaultFontStyle),footerFontSize:i(e.footerFontSize,a.defaultFontSize),_footerAlign:e.footerAlign,footerSpacing:e.footerSpacing,footerMarginTop:e.footerMarginTop,caretSize:e.caretSize,cornerRadius:e.cornerRadius,backgroundColor:e.backgroundColor,opacity:0,legendColorBackground:e.multiKeyBackground,displayColors:e.displayColors}}function o(t,e){var a=t._chart.ctx,i=2*e.yPadding,n=0,o=e.body,r=o.reduce(function(t,e){return t+e.before.length+e.lines.length+e.after.length},0);r+=e.beforeBody.length+e.afterBody.length;var l=e.title.length,d=e.footer.length,u=e.titleFontSize,c=e.bodyFontSize,h=e.footerFontSize;i+=l*u,i+=l?(l-1)*e.titleSpacing:0,i+=l?e.titleMarginBottom:0,i+=r*c,i+=r?(r-1)*e.bodySpacing:0,i+=d?e.footerMarginTop:0,i+=d*h,i+=d?(d-1)*e.footerSpacing:0;var f=0,g=function(t){n=Math.max(n,a.measureText(t).width+f)};return a.font=s.fontString(u,e._titleFontStyle,e._titleFontFamily),s.each(e.title,g),a.font=s.fontString(c,e._bodyFontStyle,e._bodyFontFamily),s.each(e.beforeBody.concat(e.afterBody),g),f=e.displayColors?c+2:0,s.each(o,function(t){s.each(t.before,g),s.each(t.lines,g),s.each(t.after,g)}),f=0,a.font=s.fontString(h,e._footerFontStyle,e._footerFontFamily),s.each(e.footer,g),n+=2*e.xPadding,{width:n,height:i}}function r(t,e){var a=t._model,i=t._chart,n=t._chartInstance.chartArea,o="center",r="center";a.y<e.height?r="top":a.y>i.height-e.height&&(r="bottom");var l,s,d,u,c,h=(n.left+n.right)/2,f=(n.top+n.bottom)/2;"center"===r?(l=function(t){return h>=t},s=function(t){return t>h}):(l=function(t){return t<=e.width/2},s=function(t){return t>=i.width-e.width/2}),d=function(t){return t+e.width>i.width},u=function(t){return t-e.width<0},c=function(t){return f>=t?"top":"bottom"},l(a.x)?(o="left",d(a.x)&&(o="center",r=c(a.y))):s(a.x)&&(o="right",u(a.x)&&(o="center",r=c(a.y)));var g=t._options;return{xAlign:g.xAlign?g.xAlign:o,yAlign:g.yAlign?g.yAlign:r}}function l(t,e,a){var i=t.x,n=t.y,o=t.caretSize,r=t.caretPadding,l=t.cornerRadius,s=a.xAlign,d=a.yAlign,u=o+r,c=l+r;return"right"===s?i-=e.width:"center"===s&&(i-=e.width/2),"top"===d?n+=u:n-="bottom"===d?e.height+u:e.height/2,"center"===d?"left"===s?i+=u:"right"===s&&(i-=u):"left"===s?i-=c:"right"===s&&(i+=c),{x:i,y:n}}var s=t.helpers;t.defaults.global.tooltips={enabled:!0,custom:null,mode:"nearest",position:"average",intersect:!0,backgroundColor:"rgba(0,0,0,0.8)",titleFontStyle:"bold",titleSpacing:2,titleMarginBottom:6,titleFontColor:"#fff",titleAlign:"left",bodySpacing:2,bodyFontColor:"#fff",bodyAlign:"left",footerFontStyle:"bold",footerSpacing:2,footerMarginTop:6,footerFontColor:"#fff",footerAlign:"left",yPadding:6,xPadding:6,caretSize:5,cornerRadius:6,multiKeyBackground:"#fff",displayColors:!0,callbacks:{beforeTitle:s.noop,title:function(t,e){var a="",i=e.labels,n=i?i.length:0;if(t.length>0){var o=t[0];o.xLabel?a=o.xLabel:n>0&&o.index<n&&(a=i[o.index])}return a},afterTitle:s.noop,beforeBody:s.noop,beforeLabel:s.noop,label:function(t,e){var a=e.datasets[t.datasetIndex].label||"";return a+": "+t.yLabel},labelColor:function(t,e){var a=e.getDatasetMeta(t.datasetIndex),i=a.data[t.index],n=i._view;return{borderColor:n.borderColor,backgroundColor:n.backgroundColor}},afterLabel:s.noop,afterBody:s.noop,beforeFooter:s.noop,footer:s.noop,afterFooter:s.noop}},t.Tooltip=t.Element.extend({initialize:function(){this._model=n(this._options)},getTitle:function(){var t=this,e=t._options,i=e.callbacks,n=i.beforeTitle.apply(t,arguments),o=i.title.apply(t,arguments),r=i.afterTitle.apply(t,arguments),l=[];return l=a(l,n),l=a(l,o),l=a(l,r)},getBeforeBody:function(){var t=this._options.callbacks.beforeBody.apply(this,arguments);return s.isArray(t)?t:void 0!==t?[t]:[]},getBody:function(t,e){var i=this,n=i._options.callbacks,o=[];return s.each(t,function(t){var r={before:[],lines:[],after:[]};a(r.before,n.beforeLabel.call(i,t,e)),a(r.lines,n.label.call(i,t,e)),a(r.after,n.afterLabel.call(i,t,e)),o.push(r)}),o},getAfterBody:function(){var t=this._options.callbacks.afterBody.apply(this,arguments);return s.isArray(t)?t:void 0!==t?[t]:[]},getFooter:function(){var t=this,e=t._options.callbacks,i=e.beforeFooter.apply(t,arguments),n=e.footer.apply(t,arguments),o=e.afterFooter.apply(t,arguments),r=[];return r=a(r,i),r=a(r,n),r=a(r,o)},update:function(e){var a,d,u=this,c=u._options,h=u._model,f=u._model=n(c),g=u._active,p=u._data,m=u._chartInstance,b={xAlign:h.xAlign,yAlign:h.yAlign},v={x:h.x,y:h.y},x={width:h.width,height:h.height},y={x:h.caretX,y:h.caretY};if(g.length){f.opacity=1;var k=[];y=t.Tooltip.positioners[c.position](g,u._eventPosition);var S=[];for(a=0,d=g.length;d>a;++a)S.push(i(g[a]));c.filter&&(S=S.filter(function(t){return c.filter(t,p)})),c.itemSort&&(S=S.sort(function(t,e){return c.itemSort(t,e,p)})),s.each(S,function(t){k.push(c.callbacks.labelColor.call(u,t,m))}),f.title=u.getTitle(S,p),f.beforeBody=u.getBeforeBody(S,p),f.body=u.getBody(S,p),f.afterBody=u.getAfterBody(S,p),f.footer=u.getFooter(S,p),f.x=Math.round(y.x),f.y=Math.round(y.y),f.caretPadding=s.getValueOrDefault(y.padding,2),f.labelColors=k,f.dataPoints=S,x=o(this,f),b=r(this,x),v=l(f,x,b)}else f.opacity=0;return f.xAlign=b.xAlign,f.yAlign=b.yAlign,f.x=v.x,f.y=v.y,f.width=x.width,f.height=x.height,f.caretX=y.x,f.caretY=y.y,u._model=f,e&&c.custom&&c.custom.call(u,f),u},drawCaret:function(t,a,i){var n,o,r,l,s,d,u=this._view,c=this._chart.ctx,h=u.caretSize,f=u.cornerRadius,g=u.xAlign,p=u.yAlign,m=t.x,b=t.y,v=a.width,x=a.height;"center"===p?("left"===g?(n=m,o=n-h,r=n):(n=m+v,o=n+h,r=n),s=b+x/2,l=s-h,d=s+h):("left"===g?(n=m+f,o=n+h,r=o+h):"right"===g?(n=m+v-f,o=n-h,r=o-h):(o=m+v/2,n=o-h,r=o+h),"top"===p?(l=b,s=l-h,d=l):(l=b+x,s=l+h,d=l)),c.fillStyle=e(u.backgroundColor,i),c.beginPath(),c.moveTo(n,l),c.lineTo(o,s),c.lineTo(r,d),c.closePath(),c.fill()},drawTitle:function(t,a,i,n){var o=a.title;if(o.length){i.textAlign=a._titleAlign,i.textBaseline="top";var r=a.titleFontSize,l=a.titleSpacing;i.fillStyle=e(a.titleFontColor,n),i.font=s.fontString(r,a._titleFontStyle,a._titleFontFamily);var d,u;for(d=0,u=o.length;u>d;++d)i.fillText(o[d],t.x,t.y),t.y+=r+l,d+1===o.length&&(t.y+=a.titleMarginBottom-l)}},drawBody:function(t,a,i,n){var o=a.bodyFontSize,r=a.bodySpacing,l=a.body;i.textAlign=a._bodyAlign,i.textBaseline="top";var d=e(a.bodyFontColor,n);i.fillStyle=d,i.font=s.fontString(o,a._bodyFontStyle,a._bodyFontFamily);var u=0,c=function(e){i.fillText(e,t.x+u,t.y),t.y+=o+r};s.each(a.beforeBody,c);var h=a.displayColors;u=h?o+2:0,s.each(l,function(r,l){s.each(r.before,c),s.each(r.lines,function(r){h&&(i.fillStyle=e(a.legendColorBackground,n),i.fillRect(t.x,t.y,o,o),i.strokeStyle=e(a.labelColors[l].borderColor,n),i.strokeRect(t.x,t.y,o,o),i.fillStyle=e(a.labelColors[l].backgroundColor,n),i.fillRect(t.x+1,t.y+1,o-2,o-2),i.fillStyle=d),c(r)}),s.each(r.after,c)}),u=0,s.each(a.afterBody,c),t.y-=r},drawFooter:function(t,a,i,n){var o=a.footer;o.length&&(t.y+=a.footerMarginTop,i.textAlign=a._footerAlign,i.textBaseline="top",i.fillStyle=e(a.footerFontColor,n),i.font=s.fontString(a.footerFontSize,a._footerFontStyle,a._footerFontFamily),s.each(o,function(e){i.fillText(e,t.x,t.y),t.y+=a.footerFontSize+a.footerSpacing}))},drawBackground:function(t,a,i,n,o){i.fillStyle=e(a.backgroundColor,o),s.drawRoundedRectangle(i,t.x,t.y,n.width,n.height,a.cornerRadius),i.fill()},draw:function(){var t=this._chart.ctx,e=this._view;if(0!==e.opacity){var a={width:e.width,height:e.height},i={x:e.x,y:e.y},n=Math.abs(e.opacity<.001)?0:e.opacity;this._options.enabled&&(this.drawBackground(i,e,t,a,n),this.drawCaret(i,a,n),i.x+=e.xPadding,i.y+=e.yPadding,this.drawTitle(i,e,t,n),this.drawBody(i,e,t,n),this.drawFooter(i,e,t,n))}},handleEvent:function(t){var e=this,a=e._options,i=!1;if(e._lastActive=e._lastActive||[],"mouseout"===t.type?e._active=[]:e._active=e._chartInstance.getElementsAtEventForMode(t,a.mode,a),i=!s.arrayEquals(e._active,e._lastActive),e._lastActive=e._active,a.enabled||a.custom){e._eventPosition=s.getRelativePosition(t,e._chart);var n=e._model;e.update(!0),e.pivot(),i|=n.x!==e._model.x||n.y!==e._model.y}return i}}),t.Tooltip.positioners={average:function(t){if(!t.length)return!1;var e,a,i=0,n=0,o=0;for(e=0,a=t.length;a>e;++e){var r=t[e];if(r&&r.hasValue()){var l=r.tooltipPosition();i+=l.x,n+=l.y,++o}}return{x:Math.round(i/o),y:Math.round(n/o)}},nearest:function(t,e){var a,i,n,o=e.x,r=e.y,l=Number.POSITIVE_INFINITY;for(i=0,n=t.length;n>i;++i){var d=t[i];if(d&&d.hasValue()){var u=d.getCenterPoint(),c=s.distanceBetweenPoints(e,u);l>c&&(l=c,a=d)}}if(a){var h=a.tooltipPosition();o=h.x,r=h.y}return{x:o,y:r}}}}},{}],37:[function(t,e,a){"use strict";e.exports=function(t){var e=t.helpers,a=t.defaults.global;a.elements.arc={backgroundColor:a.defaultColor,borderColor:"#fff",borderWidth:2},t.elements.Arc=t.Element.extend({inLabelRange:function(t){var e=this._view;return e?Math.pow(t-e.x,2)<Math.pow(e.radius+e.hoverRadius,2):!1},inRange:function(t,a){var i=this._view;if(i){for(var n=e.getAngleFromPoint(i,{x:t,y:a}),o=n.angle,r=n.distance,l=i.startAngle,s=i.endAngle;l>s;)s+=2*Math.PI;for(;o>s;)o-=2*Math.PI;for(;l>o;)o+=2*Math.PI;var d=o>=l&&s>=o,u=r>=i.innerRadius&&r<=i.outerRadius;return d&&u}return!1},getCenterPoint:function(){var t=this._view,e=(t.startAngle+t.endAngle)/2,a=(t.innerRadius+t.outerRadius)/2;return{x:t.x+Math.cos(e)*a,y:t.y+Math.sin(e)*a}},getArea:function(){var t=this._view;return Math.PI*((t.endAngle-t.startAngle)/(2*Math.PI))*(Math.pow(t.outerRadius,2)-Math.pow(t.innerRadius,2))},tooltipPosition:function(){var t=this._view,e=t.startAngle+(t.endAngle-t.startAngle)/2,a=(t.outerRadius-t.innerRadius)/2+t.innerRadius;return{x:t.x+Math.cos(e)*a,y:t.y+Math.sin(e)*a}},draw:function(){var t=this._chart.ctx,e=this._view,a=e.startAngle,i=e.endAngle;t.beginPath(),t.arc(e.x,e.y,e.outerRadius,a,i),t.arc(e.x,e.y,e.innerRadius,i,a,!0),t.closePath(),t.strokeStyle=e.borderColor,t.lineWidth=e.borderWidth,t.fillStyle=e.backgroundColor,t.fill(),t.lineJoin="bevel",e.borderWidth&&t.stroke()}})}},{}],38:[function(t,e,a){"use strict";e.exports=function(t){var e=t.helpers,a=t.defaults.global;t.defaults.global.elements.line={tension:.4,backgroundColor:a.defaultColor,borderWidth:3,borderColor:a.defaultColor,borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",capBezierPoints:!0,fill:!0},t.elements.Line=t.Element.extend({draw:function(){function t(t,e){var a=e._view;e._view.steppedLine===!0?(s.lineTo(a.x,t._view.y),s.lineTo(a.x,a.y)):0===e._view.tension?s.lineTo(a.x,a.y):s.bezierCurveTo(t._view.controlPointNextX,t._view.controlPointNextY,a.controlPointPreviousX,a.controlPointPreviousY,a.x,a.y)}var i=this,n=i._view,o=n.spanGaps,r=n.scaleZero,l=i._loop;l||("top"===n.fill?r=n.scaleTop:"bottom"===n.fill&&(r=n.scaleBottom));var s=i._chart.ctx;s.save();var d=i._children.slice(),u=-1;l&&d.length&&d.push(d[0]);var c,h,f,g;if(d.length&&n.fill){for(s.beginPath(),c=0;c<d.length;++c)h=d[c],f=e.previousItem(d,c),g=h._view,0===c?(l?s.moveTo(r.x,r.y):s.moveTo(g.x,r),g.skip||(u=c,s.lineTo(g.x,g.y))):(f=-1===u?f:d[u],g.skip?o||u!==c-1||(l?s.lineTo(r.x,r.y):s.lineTo(f._view.x,r)):(u!==c-1?o&&-1!==u?t(f,h):l?s.lineTo(g.x,g.y):(s.lineTo(g.x,r),s.lineTo(g.x,g.y)):t(f,h),u=c));l||-1===u||s.lineTo(d[u]._view.x,r),s.fillStyle=n.backgroundColor||a.defaultColor,s.closePath(),s.fill()}var p=a.elements.line;for(s.lineCap=n.borderCapStyle||p.borderCapStyle,s.setLineDash&&s.setLineDash(n.borderDash||p.borderDash),s.lineDashOffset=n.borderDashOffset||p.borderDashOffset,s.lineJoin=n.borderJoinStyle||p.borderJoinStyle,s.lineWidth=n.borderWidth||p.borderWidth,s.strokeStyle=n.borderColor||a.defaultColor,s.beginPath(),u=-1,c=0;c<d.length;++c)h=d[c],f=e.previousItem(d,c),g=h._view,0===c?g.skip||(s.moveTo(g.x,g.y),u=c):(f=-1===u?f:d[u],g.skip||(u!==c-1&&!o||-1===u?s.moveTo(g.x,g.y):t(f,h),u=c));s.stroke(),s.restore()}})}},{}],39:[function(t,e,a){"use strict";e.exports=function(t){function e(t){var e=this._view;return e?Math.pow(t-e.x,2)<Math.pow(e.radius+e.hitRadius,2):!1}function a(t){var e=this._view;return e?Math.pow(t-e.y,2)<Math.pow(e.radius+e.hitRadius,2):!1}var i=t.helpers,n=t.defaults.global,o=n.defaultColor;n.elements.point={radius:3,pointStyle:"circle",backgroundColor:o,borderWidth:1,borderColor:o,hitRadius:1,hoverRadius:4,hoverBorderWidth:1},t.elements.Point=t.Element.extend({inRange:function(t,e){var a=this._view;return a?Math.pow(t-a.x,2)+Math.pow(e-a.y,2)<Math.pow(a.hitRadius+a.radius,2):!1},inLabelRange:e,inXRange:e,inYRange:a,getCenterPoint:function(){var t=this._view;return{x:t.x,y:t.y}},getArea:function(){return Math.PI*Math.pow(this._view.radius,2)},tooltipPosition:function(){var t=this._view;return{x:t.x,y:t.y,padding:t.radius+t.borderWidth}},draw:function(){var e=this._view,a=this._chart.ctx,r=e.pointStyle,l=e.radius,s=e.x,d=e.y;e.skip||(a.strokeStyle=e.borderColor||o,a.lineWidth=i.getValueOrDefault(e.borderWidth,n.elements.point.borderWidth),a.fillStyle=e.backgroundColor||o,t.canvasHelpers.drawPoint(a,r,l,s,d))}})}},{}],40:[function(t,e,a){"use strict";e.exports=function(t){function e(t){return void 0!==t._view.width}function a(t){var a,i,n,o,r=t._view;if(e(t)){var l=r.width/2;a=r.x-l,i=r.x+l,n=Math.min(r.y,r.base),o=Math.max(r.y,r.base)}else{var s=r.height/2;a=Math.min(r.x,r.base),i=Math.max(r.x,r.base),n=r.y-s,o=r.y+s}return{left:a,top:n,right:i,bottom:o}}var i=t.defaults.global;i.elements.rectangle={backgroundColor:i.defaultColor,borderWidth:0,borderColor:i.defaultColor,borderSkipped:"bottom"},t.elements.Rectangle=t.Element.extend({draw:function(){function t(t){return s[(u+t)%4]}var e=this._chart.ctx,a=this._view,i=a.width/2,n=a.x-i,o=a.x+i,r=a.base-(a.base-a.y),l=a.borderWidth/2;a.borderWidth&&(n+=l,o-=l,r+=l),e.beginPath(),e.fillStyle=a.backgroundColor,e.strokeStyle=a.borderColor,e.lineWidth=a.borderWidth;var s=[[n,a.base],[n,r],[o,r],[o,a.base]],d=["bottom","left","top","right"],u=d.indexOf(a.borderSkipped,0);-1===u&&(u=0);var c=t(0);e.moveTo(c[0],c[1]);for(var h=1;4>h;h++)c=t(h),e.lineTo(c[0],c[1]);e.fill(),a.borderWidth&&e.stroke()},height:function(){var t=this._view;return t.base-t.y},inRange:function(t,e){var i=!1;if(this._view){var n=a(this);i=t>=n.left&&t<=n.right&&e>=n.top&&e<=n.bottom}return i},inLabelRange:function(t,i){var n=this;if(!n._view)return!1;var o=!1,r=a(n);return o=e(n)?t>=r.left&&t<=r.right:i>=r.top&&i<=r.bottom},inXRange:function(t){var e=a(this);return t>=e.left&&t<=e.right},inYRange:function(t){var e=a(this);return t>=e.top&&t<=e.bottom},getCenterPoint:function(){var t,a,i=this._view;return e(this)?(t=i.x,a=(i.y+i.base)/2):(t=(i.x+i.base)/2,a=i.y),{x:t,y:a}},getArea:function(){var t=this._view;return t.width*Math.abs(t.y-t.base)},tooltipPosition:function(){var t=this._view;return{x:t.x,y:t.y}}})}},{}],41:[function(t,e,a){"use strict";e.exports=function(t){var e=t.helpers,a={position:"bottom"},i=t.Scale.extend({getLabels:function(){var t=this.chart.data;return(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels},determineDataLimits:function(){var t=this,a=t.getLabels();t.minIndex=0,t.maxIndex=a.length-1;var i;void 0!==t.options.ticks.min&&(i=e.indexOf(a,t.options.ticks.min),t.minIndex=-1!==i?i:t.minIndex),void 0!==t.options.ticks.max&&(i=e.indexOf(a,t.options.ticks.max),t.maxIndex=-1!==i?i:t.maxIndex),t.min=a[t.minIndex],t.max=a[t.maxIndex]},buildTicks:function(){var t=this,e=t.getLabels();t.ticks=0===t.minIndex&&t.maxIndex===e.length-1?e:e.slice(t.minIndex,t.maxIndex+1)},getLabelForIndex:function(t,e){var a=this,i=a.chart.data,n=a.isHorizontal();return i.xLabels&&n||i.yLabels&&!n?a.getRightValue(i.datasets[e].data[t]):a.ticks[t]},getPixelForValue:function(t,e,a,i){var n=this,o=Math.max(n.maxIndex+1-n.minIndex-(n.options.gridLines.offsetGridLines?0:1),1);if(void 0!==t&&isNaN(e)){var r=n.getLabels(),l=r.indexOf(t);e=-1!==l?l:e}if(n.isHorizontal()){var s=n.width-(n.paddingLeft+n.paddingRight),d=s/o,u=d*(e-n.minIndex)+n.paddingLeft;return(n.options.gridLines.offsetGridLines&&i||n.maxIndex===n.minIndex&&i)&&(u+=d/2),
n.left+Math.round(u)}var c=n.height-(n.paddingTop+n.paddingBottom),h=c/o,f=h*(e-n.minIndex)+n.paddingTop;return n.options.gridLines.offsetGridLines&&i&&(f+=h/2),n.top+Math.round(f)},getPixelForTick:function(t,e){return this.getPixelForValue(this.ticks[t],t+this.minIndex,null,e)},getValueForPixel:function(t){var e,a=this,i=Math.max(a.ticks.length-(a.options.gridLines.offsetGridLines?0:1),1),n=a.isHorizontal(),o=n?a.width-(a.paddingLeft+a.paddingRight):a.height-(a.paddingTop+a.paddingBottom),r=o/i;return t-=n?a.left:a.top,a.options.gridLines.offsetGridLines&&(t-=r/2),t-=n?a.paddingLeft:a.paddingTop,e=0>=t?0:Math.round(t/r)},getBasePixel:function(){return this.bottom}});t.scaleService.registerScaleType("category",i,a)}},{}],42:[function(t,e,a){"use strict";e.exports=function(t){var e=t.helpers,a={position:"left",ticks:{callback:t.Ticks.formatters.linear}},i=t.LinearScaleBase.extend({determineDataLimits:function(){function t(t){return l?t.xAxisID===a.id:t.yAxisID===a.id}var a=this,i=a.options,n=a.chart,o=n.data,r=o.datasets,l=a.isHorizontal();if(a.min=null,a.max=null,i.stacked){var s={};e.each(r,function(o,r){var l=n.getDatasetMeta(r);void 0===s[l.type]&&(s[l.type]={positiveValues:[],negativeValues:[]});var d=s[l.type].positiveValues,u=s[l.type].negativeValues;n.isDatasetVisible(r)&&t(l)&&e.each(o.data,function(t,e){var n=+a.getRightValue(t);isNaN(n)||l.data[e].hidden||(d[e]=d[e]||0,u[e]=u[e]||0,i.relativePoints?d[e]=100:0>n?u[e]+=n:d[e]+=n)})}),e.each(s,function(t){var i=t.positiveValues.concat(t.negativeValues),n=e.min(i),o=e.max(i);a.min=null===a.min?n:Math.min(a.min,n),a.max=null===a.max?o:Math.max(a.max,o)})}else e.each(r,function(i,o){var r=n.getDatasetMeta(o);n.isDatasetVisible(o)&&t(r)&&e.each(i.data,function(t,e){var i=+a.getRightValue(t);isNaN(i)||r.data[e].hidden||(null===a.min?a.min=i:i<a.min&&(a.min=i),null===a.max?a.max=i:i>a.max&&(a.max=i))})});this.handleTickRangeOptions()},getTickLimit:function(){var a,i=this,n=i.options.ticks;if(i.isHorizontal())a=Math.min(n.maxTicksLimit?n.maxTicksLimit:11,Math.ceil(i.width/50));else{var o=e.getValueOrDefault(n.fontSize,t.defaults.global.defaultFontSize);a=Math.min(n.maxTicksLimit?n.maxTicksLimit:11,Math.ceil(i.height/(2*o)))}return a},handleDirectionalChanges:function(){this.isHorizontal()||this.ticks.reverse()},getLabelForIndex:function(t,e){return+this.getRightValue(this.chart.data.datasets[e].data[t])},getPixelForValue:function(t){var e,a,i=this,n=i.paddingLeft,o=i.paddingBottom,r=i.start,l=+i.getRightValue(t),s=i.end-r;return i.isHorizontal()?(a=i.width-(n+i.paddingRight),e=i.left+a/s*(l-r),Math.round(e+n)):(a=i.height-(i.paddingTop+o),e=i.bottom-o-a/s*(l-r),Math.round(e))},getValueForPixel:function(t){var e=this,a=e.isHorizontal(),i=e.paddingLeft,n=e.paddingBottom,o=a?e.width-(i+e.paddingRight):e.height-(e.paddingTop+n),r=(a?t-e.left-i:e.bottom-n-t)/o;return e.start+(e.end-e.start)*r},getPixelForTick:function(t){return this.getPixelForValue(this.ticksAsNumbers[t])}});t.scaleService.registerScaleType("linear",i,a)}},{}],43:[function(t,e,a){"use strict";e.exports=function(t){var e=t.helpers,a=e.noop;t.LinearScaleBase=t.Scale.extend({handleTickRangeOptions:function(){var t=this,a=t.options,i=a.ticks;if(i.beginAtZero){var n=e.sign(t.min),o=e.sign(t.max);0>n&&0>o?t.max=0:n>0&&o>0&&(t.min=0)}void 0!==i.min?t.min=i.min:void 0!==i.suggestedMin&&(t.min=Math.min(t.min,i.suggestedMin)),void 0!==i.max?t.max=i.max:void 0!==i.suggestedMax&&(t.max=Math.max(t.max,i.suggestedMax)),t.min===t.max&&(t.max++,i.beginAtZero||t.min--)},getTickLimit:a,handleDirectionalChanges:a,buildTicks:function(){var a=this,i=a.options,n=i.ticks,o=a.getTickLimit();o=Math.max(2,o);var r={maxTicks:o,min:n.min,max:n.max,stepSize:e.getValueOrDefault(n.fixedStepSize,n.stepSize)},l=a.ticks=t.Ticks.generators.linear(r,a);a.handleDirectionalChanges(),a.max=e.max(l),a.min=e.min(l),n.reverse?(l.reverse(),a.start=a.max,a.end=a.min):(a.start=a.min,a.end=a.max)},convertTicksToLabels:function(){var e=this;e.ticksAsNumbers=e.ticks.slice(),e.zeroLineIndex=e.ticks.indexOf(0),t.Scale.prototype.convertTicksToLabels.call(e)}})}},{}],44:[function(t,e,a){"use strict";e.exports=function(t){var e=t.helpers,a={position:"left",ticks:{callback:t.Ticks.formatters.logarithmic}},i=t.Scale.extend({determineDataLimits:function(){function t(t){return d?t.xAxisID===a.id:t.yAxisID===a.id}var a=this,i=a.options,n=i.ticks,o=a.chart,r=o.data,l=r.datasets,s=e.getValueOrDefault,d=a.isHorizontal();if(a.min=null,a.max=null,a.minNotZero=null,i.stacked){var u={};e.each(l,function(n,r){var l=o.getDatasetMeta(r);o.isDatasetVisible(r)&&t(l)&&(void 0===u[l.type]&&(u[l.type]=[]),e.each(n.data,function(t,e){var n=u[l.type],o=+a.getRightValue(t);isNaN(o)||l.data[e].hidden||(n[e]=n[e]||0,i.relativePoints?n[e]=100:n[e]+=o)}))}),e.each(u,function(t){var i=e.min(t),n=e.max(t);a.min=null===a.min?i:Math.min(a.min,i),a.max=null===a.max?n:Math.max(a.max,n)})}else e.each(l,function(i,n){var r=o.getDatasetMeta(n);o.isDatasetVisible(n)&&t(r)&&e.each(i.data,function(t,e){var i=+a.getRightValue(t);isNaN(i)||r.data[e].hidden||(null===a.min?a.min=i:i<a.min&&(a.min=i),null===a.max?a.max=i:i>a.max&&(a.max=i),0!==i&&(null===a.minNotZero||i<a.minNotZero)&&(a.minNotZero=i))})});a.min=s(n.min,a.min),a.max=s(n.max,a.max),a.min===a.max&&(0!==a.min&&null!==a.min?(a.min=Math.pow(10,Math.floor(e.log10(a.min))-1),a.max=Math.pow(10,Math.floor(e.log10(a.max))+1)):(a.min=1,a.max=10))},buildTicks:function(){var a=this,i=a.options,n=i.ticks,o={min:n.min,max:n.max},r=a.ticks=t.Ticks.generators.logarithmic(o,a);a.isHorizontal()||r.reverse(),a.max=e.max(r),a.min=e.min(r),n.reverse?(r.reverse(),a.start=a.max,a.end=a.min):(a.start=a.min,a.end=a.max)},convertTicksToLabels:function(){this.tickValues=this.ticks.slice(),t.Scale.prototype.convertTicksToLabels.call(this)},getLabelForIndex:function(t,e){return+this.getRightValue(this.chart.data.datasets[e].data[t])},getPixelForTick:function(t){return this.getPixelForValue(this.tickValues[t])},getPixelForValue:function(t){var a,i,n,o=this,r=o.start,l=+o.getRightValue(t),s=o.paddingTop,d=o.paddingBottom,u=o.paddingLeft,c=o.options,h=c.ticks;return o.isHorizontal()?(n=e.log10(o.end)-e.log10(r),0===l?i=o.left+u:(a=o.width-(u+o.paddingRight),i=o.left+a/n*(e.log10(l)-e.log10(r)),i+=u)):(a=o.height-(s+d),0!==r||h.reverse?0===o.end&&h.reverse?(n=e.log10(o.start)-e.log10(o.minNotZero),i=l===o.end?o.top+s:l===o.minNotZero?o.top+s+.02*a:o.top+s+.02*a+.98*a/n*(e.log10(l)-e.log10(o.minNotZero))):(n=e.log10(o.end)-e.log10(r),a=o.height-(s+d),i=o.bottom-d-a/n*(e.log10(l)-e.log10(r))):(n=e.log10(o.end)-e.log10(o.minNotZero),i=l===r?o.bottom-d:l===o.minNotZero?o.bottom-d-.02*a:o.bottom-d-.02*a-.98*a/n*(e.log10(l)-e.log10(o.minNotZero)))),i},getValueForPixel:function(t){var a,i,n=this,o=e.log10(n.end)-e.log10(n.start);return n.isHorizontal()?(i=n.width-(n.paddingLeft+n.paddingRight),a=n.start*Math.pow(10,(t-n.left-n.paddingLeft)*o/i)):(i=n.height-(n.paddingTop+n.paddingBottom),a=Math.pow(10,(n.bottom-n.paddingBottom-t)*o/i)/n.start),a}});t.scaleService.registerScaleType("logarithmic",i,a)}},{}],45:[function(t,e,a){"use strict";e.exports=function(t){var e=t.helpers,a=t.defaults.global,i={display:!0,animate:!0,lineArc:!1,position:"chartArea",angleLines:{display:!0,color:"rgba(0, 0, 0, 0.1)",lineWidth:1},ticks:{showLabelBackdrop:!0,backdropColor:"rgba(255,255,255,0.75)",backdropPaddingY:2,backdropPaddingX:2,callback:t.Ticks.formatters.linear},pointLabels:{fontSize:10,callback:function(t){return t}}},n=t.LinearScaleBase.extend({getValueCount:function(){return this.chart.data.labels.length},setDimensions:function(){var t=this,i=t.options,n=i.ticks;t.width=t.maxWidth,t.height=t.maxHeight,t.xCenter=Math.round(t.width/2),t.yCenter=Math.round(t.height/2);var o=e.min([t.height,t.width]),r=e.getValueOrDefault(n.fontSize,a.defaultFontSize);t.drawingArea=i.display?o/2-(r/2+n.backdropPaddingY):o/2},determineDataLimits:function(){var t=this,a=t.chart;t.min=null,t.max=null,e.each(a.data.datasets,function(i,n){if(a.isDatasetVisible(n)){var o=a.getDatasetMeta(n);e.each(i.data,function(e,a){var i=+t.getRightValue(e);isNaN(i)||o.data[a].hidden||(null===t.min?t.min=i:i<t.min&&(t.min=i),null===t.max?t.max=i:i>t.max&&(t.max=i))})}}),t.handleTickRangeOptions()},getTickLimit:function(){var t=this.options.ticks,i=e.getValueOrDefault(t.fontSize,a.defaultFontSize);return Math.min(t.maxTicksLimit?t.maxTicksLimit:11,Math.ceil(this.drawingArea/(1.5*i)))},convertTicksToLabels:function(){var e=this;t.LinearScaleBase.prototype.convertTicksToLabels.call(e),e.pointLabels=e.chart.data.labels.map(e.options.pointLabels.callback,e)},getLabelForIndex:function(t,e){return+this.getRightValue(this.chart.data.datasets[e].data[t])},fit:function(){var t,i,n,o,r,l,s,d,u,c,h,f,g=this.options.pointLabels,p=e.getValueOrDefault(g.fontSize,a.defaultFontSize),m=e.getValueOrDefault(g.fontStyle,a.defaultFontStyle),b=e.getValueOrDefault(g.fontFamily,a.defaultFontFamily),v=e.fontString(p,m,b),x=e.min([this.height/2-p-5,this.width/2]),y=this.width,k=0;for(this.ctx.font=v,i=0;i<this.getValueCount();i++){t=this.getPointPosition(i,x),n=this.ctx.measureText(this.pointLabels[i]?this.pointLabels[i]:"").width+5;var S=this.getIndexAngle(i)+Math.PI/2,w=360*S/(2*Math.PI)%360;0===w||180===w?(o=n/2,t.x+o>y&&(y=t.x+o,r=i),t.x-o<k&&(k=t.x-o,s=i)):180>w?t.x+n>y&&(y=t.x+n,r=i):t.x-n<k&&(k=t.x-n,s=i)}u=k,c=Math.ceil(y-this.width),l=this.getIndexAngle(r),d=this.getIndexAngle(s),h=c/Math.sin(l+Math.PI/2),f=u/Math.sin(d+Math.PI/2),h=e.isNumber(h)?h:0,f=e.isNumber(f)?f:0,this.drawingArea=Math.round(x-(f+h)/2),this.setCenterPoint(f,h)},setCenterPoint:function(t,e){var a=this,i=a.width-e-a.drawingArea,n=t+a.drawingArea;a.xCenter=Math.round((n+i)/2+a.left),a.yCenter=Math.round(a.height/2+a.top)},getIndexAngle:function(t){var e=2*Math.PI/this.getValueCount(),a=this.chart.options&&this.chart.options.startAngle?this.chart.options.startAngle:0,i=a*Math.PI*2/360;return t*e-Math.PI/2+i},getDistanceFromCenterForValue:function(t){var e=this;if(null===t)return 0;var a=e.drawingArea/(e.max-e.min);return e.options.reverse?(e.max-t)*a:(t-e.min)*a},getPointPosition:function(t,e){var a=this,i=a.getIndexAngle(t);return{x:Math.round(Math.cos(i)*e)+a.xCenter,y:Math.round(Math.sin(i)*e)+a.yCenter}},getPointPositionForValue:function(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))},getBasePosition:function(){var t=this,e=t.min,a=t.max;return t.getPointPositionForValue(0,t.beginAtZero?0:0>e&&0>a?a:e>0&&a>0?e:0)},draw:function(){var t=this,i=t.options,n=i.gridLines,o=i.ticks,r=i.angleLines,l=i.pointLabels,s=e.getValueOrDefault;if(i.display){var d=t.ctx,u=s(o.fontSize,a.defaultFontSize),c=s(o.fontStyle,a.defaultFontStyle),h=s(o.fontFamily,a.defaultFontFamily),f=e.fontString(u,c,h);if(e.each(t.ticks,function(r,l){if(l>0||i.reverse){var c=t.getDistanceFromCenterForValue(t.ticksAsNumbers[l]),h=t.yCenter-c;if(n.display&&0!==l)if(d.strokeStyle=e.getValueAtIndexOrDefault(n.color,l-1),d.lineWidth=e.getValueAtIndexOrDefault(n.lineWidth,l-1),i.lineArc)d.beginPath(),d.arc(t.xCenter,t.yCenter,c,0,2*Math.PI),d.closePath(),d.stroke();else{d.beginPath();for(var g=0;g<t.getValueCount();g++){var p=t.getPointPosition(g,c);0===g?d.moveTo(p.x,p.y):d.lineTo(p.x,p.y)}d.closePath(),d.stroke()}if(o.display){var m=s(o.fontColor,a.defaultFontColor);if(d.font=f,o.showLabelBackdrop){var b=d.measureText(r).width;d.fillStyle=o.backdropColor,d.fillRect(t.xCenter-b/2-o.backdropPaddingX,h-u/2-o.backdropPaddingY,b+2*o.backdropPaddingX,u+2*o.backdropPaddingY)}d.textAlign="center",d.textBaseline="middle",d.fillStyle=m,d.fillText(r,t.xCenter,h)}}}),!i.lineArc){d.lineWidth=r.lineWidth,d.strokeStyle=r.color;for(var g=t.getDistanceFromCenterForValue(i.reverse?t.min:t.max),p=s(l.fontSize,a.defaultFontSize),m=s(l.fontStyle,a.defaultFontStyle),b=s(l.fontFamily,a.defaultFontFamily),v=e.fontString(p,m,b),x=t.getValueCount()-1;x>=0;x--){if(r.display){var y=t.getPointPosition(x,g);d.beginPath(),d.moveTo(t.xCenter,t.yCenter),d.lineTo(y.x,y.y),d.stroke(),d.closePath()}var k=t.getPointPosition(x,g+5),S=s(l.fontColor,a.defaultFontColor);d.font=v,d.fillStyle=S;var w=t.pointLabels,M=this.getIndexAngle(x)+Math.PI/2,C=360*M/(2*Math.PI)%360;0===C||180===C?d.textAlign="center":180>C?d.textAlign="left":d.textAlign="right",90===C||270===C?d.textBaseline="middle":C>270||90>C?d.textBaseline="bottom":d.textBaseline="top",d.fillText(w[x]?w[x]:"",k.x,k.y)}}}}});t.scaleService.registerScaleType("radialLinear",n,i)}},{}],46:[function(t,e,a){"use strict";var i=t(1);i="function"==typeof i?i:window.moment,e.exports=function(t){var e=t.helpers,a={units:[{name:"millisecond",steps:[1,2,5,10,20,50,100,250,500]},{name:"second",steps:[1,2,5,10,30]},{name:"minute",steps:[1,2,5,10,30]},{name:"hour",steps:[1,2,3,6,12]},{name:"day",steps:[1,2,5]},{name:"week",maxStep:4},{name:"month",maxStep:3},{name:"quarter",maxStep:4},{name:"year",maxStep:!1}]},n={position:"bottom",time:{parser:!1,format:!1,unit:!1,round:!1,displayFormat:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm:ss a",hour:"MMM D, hA",day:"ll",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"}},ticks:{autoSkip:!1}},o=t.Scale.extend({initialize:function(){if(!i)throw new Error("Chart.js - Moment.js could not be found! You must include it before Chart.js to use the time scale. Download at https://momentjs.com");t.Scale.prototype.initialize.call(this)},getLabelMoment:function(t,e){return null===t||null===e?null:"undefined"!=typeof this.labelMoments[t]?this.labelMoments[t][e]:null},getLabelDiff:function(t,e){var a=this;return null===t||null===e?null:(void 0===a.labelDiffs&&a.buildLabelDiffs(),"undefined"!=typeof a.labelDiffs[t]?a.labelDiffs[t][e]:null)},getMomentStartOf:function(t){var e=this;return"week"===e.options.time.unit&&e.options.time.isoWeekday!==!1?t.clone().startOf("isoWeek").isoWeekday(e.options.time.isoWeekday):t.clone().startOf(e.tickUnit)},determineDataLimits:function(){var t=this;t.labelMoments=[];var a=[];t.chart.data.labels&&t.chart.data.labels.length>0?(e.each(t.chart.data.labels,function(e){var i=t.parseTime(e);i.isValid()&&(t.options.time.round&&i.startOf(t.options.time.round),a.push(i))},t),t.firstTick=i.min.call(t,a),t.lastTick=i.max.call(t,a)):(t.firstTick=null,t.lastTick=null),e.each(t.chart.data.datasets,function(n,o){var r=[],l=t.chart.isDatasetVisible(o);"object"==typeof n.data[0]&&null!==n.data[0]?e.each(n.data,function(e){var a=t.parseTime(t.getRightValue(e));a.isValid()&&(t.options.time.round&&a.startOf(t.options.time.round),r.push(a),l&&(t.firstTick=null!==t.firstTick?i.min(t.firstTick,a):a,t.lastTick=null!==t.lastTick?i.max(t.lastTick,a):a))},t):r=a,t.labelMoments.push(r)},t),t.options.time.min&&(t.firstTick=t.parseTime(t.options.time.min)),t.options.time.max&&(t.lastTick=t.parseTime(t.options.time.max)),t.firstTick=(t.firstTick||i()).clone(),t.lastTick=(t.lastTick||i()).clone()},buildLabelDiffs:function(){var t=this;t.labelDiffs=[];var a=[];t.chart.data.labels&&t.chart.data.labels.length>0&&e.each(t.chart.data.labels,function(e){var i=t.parseTime(e);i.isValid()&&(t.options.time.round&&i.startOf(t.options.time.round),a.push(i.diff(t.firstTick,t.tickUnit,!0)))},t),e.each(t.chart.data.datasets,function(i){var n=[];"object"==typeof i.data[0]&&null!==i.data[0]?e.each(i.data,function(e){var a=t.parseTime(t.getRightValue(e));a.isValid()&&(t.options.time.round&&a.startOf(t.options.time.round),n.push(a.diff(t.firstTick,t.tickUnit,!0)))},t):n=a,t.labelDiffs.push(n)},t)},buildTicks:function(){var i=this;i.ctx.save();var n=e.getValueOrDefault(i.options.ticks.fontSize,t.defaults.global.defaultFontSize),o=e.getValueOrDefault(i.options.ticks.fontStyle,t.defaults.global.defaultFontStyle),r=e.getValueOrDefault(i.options.ticks.fontFamily,t.defaults.global.defaultFontFamily),l=e.fontString(n,o,r);if(i.ctx.font=l,i.ticks=[],i.unitScale=1,i.scaleSizeInUnits=0,i.options.time.unit)i.tickUnit=i.options.time.unit||"day",i.displayFormat=i.options.time.displayFormats[i.tickUnit],i.scaleSizeInUnits=i.lastTick.diff(i.firstTick,i.tickUnit,!0),i.unitScale=e.getValueOrDefault(i.options.time.unitStepSize,1);else{var s=i.isHorizontal()?i.width-(i.paddingLeft+i.paddingRight):i.height-(i.paddingTop+i.paddingBottom),d=i.tickFormatFunction(i.firstTick,0,[]),u=i.ctx.measureText(d).width,c=Math.cos(e.toRadians(i.options.ticks.maxRotation)),h=Math.sin(e.toRadians(i.options.ticks.maxRotation));u=u*c+n*h;var f=s/u;i.tickUnit=i.options.time.minUnit,i.scaleSizeInUnits=i.lastTick.diff(i.firstTick,i.tickUnit,!0),i.displayFormat=i.options.time.displayFormats[i.tickUnit];for(var g=0,p=a.units[g];g<a.units.length;){if(i.unitScale=1,e.isArray(p.steps)&&Math.ceil(i.scaleSizeInUnits/f)<e.max(p.steps)){for(var m=0;m<p.steps.length;++m)if(p.steps[m]>=Math.ceil(i.scaleSizeInUnits/f)){i.unitScale=e.getValueOrDefault(i.options.time.unitStepSize,p.steps[m]);break}break}if(p.maxStep===!1||Math.ceil(i.scaleSizeInUnits/f)<p.maxStep){i.unitScale=e.getValueOrDefault(i.options.time.unitStepSize,Math.ceil(i.scaleSizeInUnits/f));break}++g,p=a.units[g],i.tickUnit=p.name;var b=i.firstTick.diff(i.getMomentStartOf(i.firstTick),i.tickUnit,!0),v=i.getMomentStartOf(i.lastTick.clone().add(1,i.tickUnit)).diff(i.lastTick,i.tickUnit,!0);i.scaleSizeInUnits=i.lastTick.diff(i.firstTick,i.tickUnit,!0)+b+v,i.displayFormat=i.options.time.displayFormats[p.name]}}var x;if(i.options.time.min?x=i.getMomentStartOf(i.firstTick):(i.firstTick=i.getMomentStartOf(i.firstTick),x=i.firstTick),!i.options.time.max){var y=i.getMomentStartOf(i.lastTick),k=y.diff(i.lastTick,i.tickUnit,!0);0>k?i.lastTick=i.getMomentStartOf(i.lastTick.add(1,i.tickUnit)):k>=0&&(i.lastTick=y),i.scaleSizeInUnits=i.lastTick.diff(i.firstTick,i.tickUnit,!0)}i.options.time.displayFormat&&(i.displayFormat=i.options.time.displayFormat),i.ticks.push(i.firstTick.clone());for(var S=1;S<=i.scaleSizeInUnits;++S){var w=x.clone().add(S,i.tickUnit);if(i.options.time.max&&w.diff(i.lastTick,i.tickUnit,!0)>=0)break;S%i.unitScale===0&&i.ticks.push(w)}var M=i.ticks[i.ticks.length-1].diff(i.lastTick,i.tickUnit);(0!==M||0===i.scaleSizeInUnits)&&(i.options.time.max?(i.ticks.push(i.lastTick.clone()),i.scaleSizeInUnits=i.lastTick.diff(i.ticks[0],i.tickUnit,!0)):(i.ticks.push(i.lastTick.clone()),i.scaleSizeInUnits=i.lastTick.diff(i.firstTick,i.tickUnit,!0))),i.ctx.restore(),i.labelDiffs=void 0},getLabelForIndex:function(t,e){var a=this,i=a.chart.data.labels&&t<a.chart.data.labels.length?a.chart.data.labels[t]:"";return"object"==typeof a.chart.data.datasets[e].data[0]&&(i=a.getRightValue(a.chart.data.datasets[e].data[t])),a.options.time.tooltipFormat&&(i=a.parseTime(i).format(a.options.time.tooltipFormat)),i},tickFormatFunction:function(t,a,i){var n=t.format(this.displayFormat),o=this.options.ticks,r=e.getValueOrDefault(o.callback,o.userCallback);return r?r(n,a,i):n},convertTicksToLabels:function(){var t=this;t.tickMoments=t.ticks,t.ticks=t.ticks.map(t.tickFormatFunction,t)},getPixelForValue:function(t,e,a){var i=this,n=null;if(void 0!==e&&void 0!==a&&(n=i.getLabelDiff(a,e)),null===n&&(t&&t.isValid||(t=i.parseTime(i.getRightValue(t))),t&&t.isValid&&t.isValid()&&(n=t.diff(i.firstTick,i.tickUnit,!0))),null!==n){var o=0!==n?n/i.scaleSizeInUnits:n;if(i.isHorizontal()){var r=i.width-(i.paddingLeft+i.paddingRight),l=r*o+i.paddingLeft;return i.left+Math.round(l)}var s=i.height-(i.paddingTop+i.paddingBottom),d=s*o+i.paddingTop;return i.top+Math.round(d)}},getPixelForTick:function(t){return this.getPixelForValue(this.tickMoments[t],null,null)},getValueForPixel:function(t){var e=this,a=e.isHorizontal()?e.width-(e.paddingLeft+e.paddingRight):e.height-(e.paddingTop+e.paddingBottom),n=(t-(e.isHorizontal()?e.left+e.paddingLeft:e.top+e.paddingTop))/a;return n*=e.scaleSizeInUnits,e.firstTick.clone().add(i.duration(n,e.tickUnit).asSeconds(),"seconds")},parseTime:function(t){var e=this;return"string"==typeof e.options.time.parser?i(t,e.options.time.parser):"function"==typeof e.options.time.parser?e.options.time.parser(t):"function"==typeof t.getMonth||"number"==typeof t?i(t):t.isValid&&t.isValid()?t:"string"!=typeof e.options.time.format&&e.options.time.format.call?(console.warn("options.time.format is deprecated and replaced by options.time.parser. See http://nnnick.github.io/Chart.js/docs-v2/#scales-time-scale"),e.options.time.format(t)):i(t,e.options.time.format)}});t.scaleService.registerScaleType("time",o,n)}},{1:1}]},{},[7])(7)});ACC.services = {

    _autoload: [
        "loadServicesPage"
    ],

    productsPriceTotal:0,
    loadServicesPage: function() {
        ACC.services.preSelectCards();

        ACC.services.calcProductsPriceTotal();
        ACC.services.calcSubTotal();

        ACC.services.formatInstallmentsPrice();
        ACC.services.formatProtectionYears();

        cards = $('.js-productWarranty');

        cards.mouseover(function () {
            $(this).find(".productWarranty__strapper").addClass("productWarranty__strapper__active");
        });
        cards.mouseout(function () {
            if(!$(this)[0].classList.contains('selected'))
                $(this).find(".productWarranty__strapper").removeClass("productWarranty__strapper__active");
        });

        // On select a card
        cards.on('click', function () {
            ACC.services.selectCard($(this));
            ACC.services.calcSubTotal();
        });
        
        continueButton = $('.js-continueButton');
        continueButton.on('click', function () {
            var selectedWarranties = ACC.services.getSelectedWarranties();
            ACC.services.saveSelectedWarranties(selectedWarranties);
        });

        if( $('#js-services').length ) {
            $('.container-fluid').addClass('js-footer-services');
            $('.owl-wrapper-outer').addClass('js-cards-owl');
            $('.owl-pagination').addClass('js-owl-pagination');
            $('div.owl-prev').removeClass('owl-prev');
            $('div.owl-next').removeClass('owl-next');
            $('.owl-wrapper').addClass('js-adjust-cards');
            $('div.container-fluid.productWarranty__infoImport.js-footer-services').hide('js-footer-services');

            selectedCardes = $("#ProductComponentCarrousel > div > div > div.owl-wrapper-outer.js-cards-owl > div > div:nth-child(1) > div > div")
            selectedCardes.bind('touchmove', function () {
                $('.owl-wrapper').removeClass('js-adjust-cards');
            });
            selectedCardesTwo = $("#ProductComponentCarrousel > div > div > div.owl-wrapper-outer.js-cards-owl > div > div:nth-child(2) > div > div")
            selectedCardesTwo.bind('touchmove', function () {
                $('.owl-wrapper').removeClass('js-adjust-cards');
            });

            selectedCardesTree = $("#ProductComponentCarrousel > div > div > div.owl-wrapper-outer.js-cards-owl > div > div:nth-child(3) > div > div")
            selectedCardesTree.bind('touchmove', function () {
                $('.owl-wrapper').removeClass('js-adjust-cards');
            });

            selectedCardesFour = $("#ProductComponentCarrousel > div > div > div.owl-wrapper-outer.js-cards-owl > div > div:nth-child(4) > div > div")
            selectedCardesFour.bind('touchmove', function () {
                $('.owl-wrapper').removeClass('js-adjust-cards');
            });

            $('footer').hide();
        }

        $(".productWarranty__infoImport").clone().insertBefore('footer');
    },

    preSelectCards: function () {
        var cardsRow = $('.js-product-warranty-row:visible');
        cardsRow.each(function () {

            var selectedWarranty = $(this).attr('productSelection');
            var cards = $(this).find('.js-productWarranty');

            for (i = 0; i < cards.length; i++) {
                var card = cards[i];
                if ($(card).attr('serviceCode') == selectedWarranty) {
                    ACC.services.selectCard($(card));
                    return true;
                }
            }

            ACC.services.selectCard($(this).find('.defaultWarranty'));
        })
    },

    selectCard: function (card) {
        var wasSelected = card[0].classList.contains('selected');
        card.parents(".js-product-warranty-row").find(".selected").removeClass('selected');

        card.parents(".js-product-warranty-row").find(".productWarranty__strapper__active").removeClass('productWarranty__strapper__active');
        card.find(".productWarranty__strapper").addClass("productWarranty__strapper__active");

        if (wasSelected) {
            card.parents('.js-product-warranty-row').find('.defaultWarranty').addClass('selected');
        } else {
            card.addClass('selected');
        }
    },

    calcSubTotal: function () {
        var subtotal = productsPriceTotal;

        $(".selected:visible").each(function () {
            if ($(this).attr("servicePrice")) {
                var servicePrice = parseFloat($(this).attr("servicePrice"));
                subtotal += servicePrice;
            }
        })

        var subtotalFormatted = subtotal.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
        var installmentFormatted = (subtotal / 10).toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });

        $("#idWarrantySubtotal").html(subtotalFormatted);
        $("#idWarrantySubtotalPortion").html("10x de " + installmentFormatted);
    },

    formatInstallmentsPrice: function () {
        var installments = $('.productWarranty__warrantyCard--price-installment');
        installments.each(function () {
            if ($(this)[0].attributes.servicePrice) {
                var fullPrice = $(this)[0].attributes.servicePrice.nodeValue;
                var fullPriceValue = parseFloat(fullPrice);
                var installmentPrice = (fullPriceValue / 10).toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
                $(this).html("em até 10x de " + installmentPrice);
            }
        })
    },

    formatProtectionYears: function () {
        var installments = $('.productWarranty__warrantyCard--description--years');
        installments.each(function () {
            if ($(this)[0].attributes.serviceValidity) {
                var validityInMonths = $(this)[0].attributes.serviceValidity.nodeValue;
                var validityInMonthsValue = parseInt(validityInMonths);
                var validityInYears = (validityInMonthsValue / 12);
                if (validityInYears === 1) {
                    $(this).html("+ " + validityInYears + " ano de proteção.");
                } else {
                    $(this).html("+ " + validityInYears + " anos de proteção.");
                }
            }
        })
    },

    calcProductsPriceTotal: function () {
        productsPriceTotal = 0;
        var products = $('.productWarranty__productService');
        products.each(function () {
            var productPrice = parseFloat($(this)[0].attributes.productPrice.nodeValue);
            productsPriceTotal += productPrice;
        })
    },

    getSelectedWarranties: function () {
        var warranties = {};
        var cards = $('.js-productWarranty:visible');

        for (i = 0; i < cards.length; i++) {

            if (!cards[i].classList.contains('selected'))
                continue;

            var attr = cards[i].attributes;
            var productCode = attr.productCode.nodeValue;

            if (!warranties[productCode]) {
                warranties[productCode] = [];
            }

            warranties[productCode].push({
                code: attr.serviceCode.nodeValue,
                selectOfferId: attr.productSelectionOffer.nodeValue,
                price: attr.servicePrice.nodeValue,
                validity: attr.serviceValidity.nodeValue,
                identifier: attr.serviceIdentifier.nodeValue,
                noExtendedWarranty: attr.serviceNoExtendedWarranty.nodeValue
            });
        }

        return warranties;
    },

    saveSelectedWarranties: function (selectedWarranties) {
        var data = {
            warranties: selectedWarranties
        };
        $.ajax({
            url: '/ecommerce/extended-warranty',
            method: 'POST',
            data: JSON.stringify(data),
            beforeSend: function (request) {
                request.setRequestHeader('CSRFToken', ACC.config.CSRFToken);
            },
            contentType: "application/json",
            dataType: "json",
            addCsrf: false,
            success: function () {
                console.log('success');
                window.location = '/carrinho';
            },
            error: function () {
                console.log('error');
            }
        });
    }
};ACC.unavailableItemsModal = (function() {

    var updateZipCodeInfo = function(zipCode, statusCepConsultation, selectedPointOfServices) {
        ACC.functionCookie.setCookie('cepConsultation', zipCode);
        ACC.functionCookie.setCookie('statusCepConsultation', statusCepConsultation);
        ACC.functionCookie.setCookie('selectedPointOfServices', window.escape(selectedPointOfServices));
    }

    var clickBackOriginalAddress = function(callback) {
        var zipCode = ACC.functionCookie.getCookie('originalZipCode');
        ACC.functionCookie.setCookie('originalZipCode', ACC.functionCookie.getCookie('cepConsultation'));
        $.ajax({
            type: 'GET',
            url: '/cep/check?zipCode=' + zipCode,
            success: function (result) {
                updateZipCodeInfo(zipCode, result.data.available, result.data.sideStoreSelectedPointOfServices)
                callback()
            },
            error: function (result) {
                updateZipCodeInfo(zipCode, false, '')
                callback()
            }
        });

    }

    var clickRemoveItems = function(callback) {
        $.ajax({
            type: 'POST',
            url: '/carrinho/unavailableItems/remove',
            complete: callback
        })

    }

    var getUnavailableItems = function(callback) {
        $.ajax({
            url: "/carrinho/unavailableItems",
            method: "GET",
            complete: callback
        })
    }

    var open = function (removeItemsCallback, backOrignalAddressCallback) {
        var originalZipCode = ACC.functionCookie.getCookie('originalZipCode');
        $.ajax({
            url: "/carrinho/unavailableItems/modal",
            data: { originalZipCode: originalZipCode },
            type: 'GET',
            success: function (response) {
                console.log(response);
                $('#ModalOutOfStockItems').html(response);
                $('#ModalItems').modal({
                                 backdrop: 'static',
                                 keyboard: false
                });
                $('#ModalItems').modal('show');
                document.getElementById("btn-back-original-address").addEventListener("click", function () {
                    clickBackOriginalAddress(backOrignalAddressCallback)
                });
                document.getElementById("btn-remove-items").addEventListener("click", function () {
                    clickRemoveItems(removeItemsCallback)
                });
            }
        });
    }

        var close = function(){
             $('#ModalItems').modal('hide');
        }

     return {
         open: open,
         close: close,
         getUnavailableItems: getUnavailableItems
     }
})();/*! jQuery Validation Plugin - v1.19.1 - 6/15/2019
 * https://jqueryvalidation.org/
 * Copyright (c) 2019 Jörn Zaefferer; Licensed MIT */
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof module&&module.exports?module.exports=a(require("jquery")):a(jQuery)}(function(a){a.extend(a.fn,{validate:function(b){if(!this.length)return void(b&&b.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing."));var c=a.data(this[0],"validator");return c?c:(this.attr("novalidate","novalidate"),c=new a.validator(b,this[0]),a.data(this[0],"validator",c),c.settings.onsubmit&&(this.on("click.validate",":submit",function(b){c.submitButton=b.currentTarget,a(this).hasClass("cancel")&&(c.cancelSubmit=!0),void 0!==a(this).attr("formnovalidate")&&(c.cancelSubmit=!0)}),this.on("submit.validate",function(b){function d(){var d,e;return c.submitButton&&(c.settings.submitHandler||c.formSubmitted)&&(d=a("<input type='hidden'/>").attr("name",c.submitButton.name).val(a(c.submitButton).val()).appendTo(c.currentForm)),!(c.settings.submitHandler&&!c.settings.debug)||(e=c.settings.submitHandler.call(c,c.currentForm,b),d&&d.remove(),void 0!==e&&e)}return c.settings.debug&&b.preventDefault(),c.cancelSubmit?(c.cancelSubmit=!1,d()):c.form()?c.pendingRequest?(c.formSubmitted=!0,!1):d():(c.focusInvalid(),!1)})),c)},valid:function(){var b,c,d;return a(this[0]).is("form")?b=this.validate().form():(d=[],b=!0,c=a(this[0].form).validate(),this.each(function(){b=c.element(this)&&b,b||(d=d.concat(c.errorList))}),c.errorList=d),b},rules:function(b,c){var d,e,f,g,h,i,j=this[0],k="undefined"!=typeof this.attr("contenteditable")&&"false"!==this.attr("contenteditable");if(null!=j&&(!j.form&&k&&(j.form=this.closest("form")[0],j.name=this.attr("name")),null!=j.form)){if(b)switch(d=a.data(j.form,"validator").settings,e=d.rules,f=a.validator.staticRules(j),b){case"add":a.extend(f,a.validator.normalizeRule(c)),delete f.messages,e[j.name]=f,c.messages&&(d.messages[j.name]=a.extend(d.messages[j.name],c.messages));break;case"remove":return c?(i={},a.each(c.split(/\s/),function(a,b){i[b]=f[b],delete f[b]}),i):(delete e[j.name],f)}return g=a.validator.normalizeRules(a.extend({},a.validator.classRules(j),a.validator.attributeRules(j),a.validator.dataRules(j),a.validator.staticRules(j)),j),g.required&&(h=g.required,delete g.required,g=a.extend({required:h},g)),g.remote&&(h=g.remote,delete g.remote,g=a.extend(g,{remote:h})),g}}}),a.extend(a.expr.pseudos||a.expr[":"],{blank:function(b){return!a.trim(""+a(b).val())},filled:function(b){var c=a(b).val();return null!==c&&!!a.trim(""+c)},unchecked:function(b){return!a(b).prop("checked")}}),a.validator=function(b,c){this.settings=a.extend(!0,{},a.validator.defaults,b),this.currentForm=c,this.init()},a.validator.format=function(b,c){return 1===arguments.length?function(){var c=a.makeArray(arguments);return c.unshift(b),a.validator.format.apply(this,c)}:void 0===c?b:(arguments.length>2&&c.constructor!==Array&&(c=a.makeArray(arguments).slice(1)),c.constructor!==Array&&(c=[c]),a.each(c,function(a,c){b=b.replace(new RegExp("\\{"+a+"\\}","g"),function(){return c})}),b)},a.extend(a.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",pendingClass:"pending",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:a([]),errorLabelContainer:a([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(a){this.lastActive=a,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,a,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(a)))},onfocusout:function(a){this.checkable(a)||!(a.name in this.submitted)&&this.optional(a)||this.element(a)},onkeyup:function(b,c){var d=[16,17,18,20,35,36,37,38,39,40,45,144,225];9===c.which&&""===this.elementValue(b)||a.inArray(c.keyCode,d)!==-1||(b.name in this.submitted||b.name in this.invalid)&&this.element(b)},onclick:function(a){a.name in this.submitted?this.element(a):a.parentNode.name in this.submitted&&this.element(a.parentNode)},highlight:function(b,c,d){"radio"===b.type?this.findByName(b.name).addClass(c).removeClass(d):a(b).addClass(c).removeClass(d)},unhighlight:function(b,c,d){"radio"===b.type?this.findByName(b.name).removeClass(c).addClass(d):a(b).removeClass(c).addClass(d)}},setDefaults:function(b){a.extend(a.validator.defaults,b)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",equalTo:"Please enter the same value again.",maxlength:a.validator.format("Please enter no more than {0} characters."),minlength:a.validator.format("Please enter at least {0} characters."),rangelength:a.validator.format("Please enter a value between {0} and {1} characters long."),range:a.validator.format("Please enter a value between {0} and {1}."),max:a.validator.format("Please enter a value less than or equal to {0}."),min:a.validator.format("Please enter a value greater than or equal to {0}."),step:a.validator.format("Please enter a multiple of {0}.")},autoCreateRanges:!1,prototype:{init:function(){function b(b){var c="undefined"!=typeof a(this).attr("contenteditable")&&"false"!==a(this).attr("contenteditable");if(!this.form&&c&&(this.form=a(this).closest("form")[0],this.name=a(this).attr("name")),d===this.form){var e=a.data(this.form,"validator"),f="on"+b.type.replace(/^validate/,""),g=e.settings;g[f]&&!a(this).is(g.ignore)&&g[f].call(e,this,b)}}this.labelContainer=a(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||a(this.currentForm),this.containers=a(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var c,d=this.currentForm,e=this.groups={};a.each(this.settings.groups,function(b,c){"string"==typeof c&&(c=c.split(/\s/)),a.each(c,function(a,c){e[c]=b})}),c=this.settings.rules,a.each(c,function(b,d){c[b]=a.validator.normalizeRule(d)}),a(this.currentForm).on("focusin.validate focusout.validate keyup.validate",":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], [type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox'], [contenteditable], [type='button']",b).on("click.validate","select, option, [type='radio'], [type='checkbox']",b),this.settings.invalidHandler&&a(this.currentForm).on("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),a.extend(this.submitted,this.errorMap),this.invalid=a.extend({},this.errorMap),this.valid()||a(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var a=0,b=this.currentElements=this.elements();b[a];a++)this.check(b[a]);return this.valid()},element:function(b){var c,d,e=this.clean(b),f=this.validationTargetFor(e),g=this,h=!0;return void 0===f?delete this.invalid[e.name]:(this.prepareElement(f),this.currentElements=a(f),d=this.groups[f.name],d&&a.each(this.groups,function(a,b){b===d&&a!==f.name&&(e=g.validationTargetFor(g.clean(g.findByName(a))),e&&e.name in g.invalid&&(g.currentElements.push(e),h=g.check(e)&&h))}),c=this.check(f)!==!1,h=h&&c,c?this.invalid[f.name]=!1:this.invalid[f.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),a(b).attr("aria-invalid",!c)),h},showErrors:function(b){if(b){var c=this;a.extend(this.errorMap,b),this.errorList=a.map(this.errorMap,function(a,b){return{message:a,element:c.findByName(b)[0]}}),this.successList=a.grep(this.successList,function(a){return!(a.name in b)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){a.fn.resetForm&&a(this.currentForm).resetForm(),this.invalid={},this.submitted={},this.prepareForm(),this.hideErrors();var b=this.elements().removeData("previousValue").removeAttr("aria-invalid");this.resetElements(b)},resetElements:function(a){var b;if(this.settings.unhighlight)for(b=0;a[b];b++)this.settings.unhighlight.call(this,a[b],this.settings.errorClass,""),this.findByName(a[b].name).removeClass(this.settings.validClass);else a.removeClass(this.settings.errorClass).removeClass(this.settings.validClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(a){var b,c=0;for(b in a)void 0!==a[b]&&null!==a[b]&&a[b]!==!1&&c++;return c},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(a){a.not(this.containers).text(""),this.addWrapper(a).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{a(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").trigger("focus").trigger("focusin")}catch(b){}},findLastActive:function(){var b=this.lastActive;return b&&1===a.grep(this.errorList,function(a){return a.element.name===b.name}).length&&b},elements:function(){var b=this,c={};return a(this.currentForm).find("input, select, textarea, [contenteditable]").not(":submit, :reset, :image, :disabled").not(this.settings.ignore).filter(function(){var d=this.name||a(this).attr("name"),e="undefined"!=typeof a(this).attr("contenteditable")&&"false"!==a(this).attr("contenteditable");return!d&&b.settings.debug&&window.console&&console.error("%o has no name assigned",this),e&&(this.form=a(this).closest("form")[0],this.name=d),this.form===b.currentForm&&(!(d in c||!b.objectLength(a(this).rules()))&&(c[d]=!0,!0))})},clean:function(b){return a(b)[0]},errors:function(){var b=this.settings.errorClass.split(" ").join(".");return a(this.settings.errorElement+"."+b,this.errorContext)},resetInternals:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=a([]),this.toHide=a([])},reset:function(){this.resetInternals(),this.currentElements=a([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(a){this.reset(),this.toHide=this.errorsFor(a)},elementValue:function(b){var c,d,e=a(b),f=b.type,g="undefined"!=typeof e.attr("contenteditable")&&"false"!==e.attr("contenteditable");return"radio"===f||"checkbox"===f?this.findByName(b.name).filter(":checked").val():"number"===f&&"undefined"!=typeof b.validity?b.validity.badInput?"NaN":e.val():(c=g?e.text():e.val(),"file"===f?"C:\\fakepath\\"===c.substr(0,12)?c.substr(12):(d=c.lastIndexOf("/"),d>=0?c.substr(d+1):(d=c.lastIndexOf("\\"),d>=0?c.substr(d+1):c)):"string"==typeof c?c.replace(/\r/g,""):c)},check:function(b){b=this.validationTargetFor(this.clean(b));var c,d,e,f,g=a(b).rules(),h=a.map(g,function(a,b){return b}).length,i=!1,j=this.elementValue(b);"function"==typeof g.normalizer?f=g.normalizer:"function"==typeof this.settings.normalizer&&(f=this.settings.normalizer),f&&(j=f.call(b,j),delete g.normalizer);for(d in g){e={method:d,parameters:g[d]};try{if(c=a.validator.methods[d].call(this,j,b,e.parameters),"dependency-mismatch"===c&&1===h){i=!0;continue}if(i=!1,"pending"===c)return void(this.toHide=this.toHide.not(this.errorsFor(b)));if(!c)return this.formatAndAdd(b,e),!1}catch(k){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+b.id+", check the '"+e.method+"' method.",k),k instanceof TypeError&&(k.message+=".  Exception occurred when checking element "+b.id+", check the '"+e.method+"' method."),k}}if(!i)return this.objectLength(g)&&this.successList.push(b),!0},customDataMessage:function(b,c){return a(b).data("msg"+c.charAt(0).toUpperCase()+c.substring(1).toLowerCase())||a(b).data("msg")},customMessage:function(a,b){var c=this.settings.messages[a];return c&&(c.constructor===String?c:c[b])},findDefined:function(){for(var a=0;a<arguments.length;a++)if(void 0!==arguments[a])return arguments[a]},defaultMessage:function(b,c){"string"==typeof c&&(c={method:c});var d=this.findDefined(this.customMessage(b.name,c.method),this.customDataMessage(b,c.method),!this.settings.ignoreTitle&&b.title||void 0,a.validator.messages[c.method],"<strong>Warning: No message defined for "+b.name+"</strong>"),e=/\$?\{(\d+)\}/g;return"function"==typeof d?d=d.call(this,c.parameters,b):e.test(d)&&(d=a.validator.format(d.replace(e,"{$1}"),c.parameters)),d},formatAndAdd:function(a,b){var c=this.defaultMessage(a,b);this.errorList.push({message:c,element:a,method:b.method}),this.errorMap[a.name]=c,this.submitted[a.name]=c},addWrapper:function(a){return this.settings.wrapper&&(a=a.add(a.parent(this.settings.wrapper))),a},defaultShowErrors:function(){var a,b,c;for(a=0;this.errorList[a];a++)c=this.errorList[a],this.settings.highlight&&this.settings.highlight.call(this,c.element,this.settings.errorClass,this.settings.validClass),this.showLabel(c.element,c.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(a=0;this.successList[a];a++)this.showLabel(this.successList[a]);if(this.settings.unhighlight)for(a=0,b=this.validElements();b[a];a++)this.settings.unhighlight.call(this,b[a],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return a(this.errorList).map(function(){return this.element})},showLabel:function(b,c){var d,e,f,g,h=this.errorsFor(b),i=this.idOrName(b),j=a(b).attr("aria-describedby");h.length?(h.removeClass(this.settings.validClass).addClass(this.settings.errorClass),h.html(c)):(h=a("<"+this.settings.errorElement+">").attr("id",i+"-error").addClass(this.settings.errorClass).html(c||""),d=h,this.settings.wrapper&&(d=h.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(d):this.settings.errorPlacement?this.settings.errorPlacement.call(this,d,a(b)):d.insertAfter(b),h.is("label")?h.attr("for",i):0===h.parents("label[for='"+this.escapeCssMeta(i)+"']").length&&(f=h.attr("id"),j?j.match(new RegExp("\\b"+this.escapeCssMeta(f)+"\\b"))||(j+=" "+f):j=f,a(b).attr("aria-describedby",j),e=this.groups[b.name],e&&(g=this,a.each(g.groups,function(b,c){c===e&&a("[name='"+g.escapeCssMeta(b)+"']",g.currentForm).attr("aria-describedby",h.attr("id"))})))),!c&&this.settings.success&&(h.text(""),"string"==typeof this.settings.success?h.addClass(this.settings.success):this.settings.success(h,b)),this.toShow=this.toShow.add(h)},errorsFor:function(b){var c=this.escapeCssMeta(this.idOrName(b)),d=a(b).attr("aria-describedby"),e="label[for='"+c+"'], label[for='"+c+"'] *";return d&&(e=e+", #"+this.escapeCssMeta(d).replace(/\s+/g,", #")),this.errors().filter(e)},escapeCssMeta:function(a){return a.replace(/([\\!"#$%&'()*+,.\/:;<=>?@\[\]^`{|}~])/g,"\\$1")},idOrName:function(a){return this.groups[a.name]||(this.checkable(a)?a.name:a.id||a.name)},validationTargetFor:function(b){return this.checkable(b)&&(b=this.findByName(b.name)),a(b).not(this.settings.ignore)[0]},checkable:function(a){return/radio|checkbox/i.test(a.type)},findByName:function(b){return a(this.currentForm).find("[name='"+this.escapeCssMeta(b)+"']")},getLength:function(b,c){switch(c.nodeName.toLowerCase()){case"select":return a("option:selected",c).length;case"input":if(this.checkable(c))return this.findByName(c.name).filter(":checked").length}return b.length},depend:function(a,b){return!this.dependTypes[typeof a]||this.dependTypes[typeof a](a,b)},dependTypes:{"boolean":function(a){return a},string:function(b,c){return!!a(b,c.form).length},"function":function(a,b){return a(b)}},optional:function(b){var c=this.elementValue(b);return!a.validator.methods.required.call(this,c,b)&&"dependency-mismatch"},startRequest:function(b){this.pending[b.name]||(this.pendingRequest++,a(b).addClass(this.settings.pendingClass),this.pending[b.name]=!0)},stopRequest:function(b,c){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[b.name],a(b).removeClass(this.settings.pendingClass),c&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(a(this.currentForm).submit(),this.submitButton&&a("input:hidden[name='"+this.submitButton.name+"']",this.currentForm).remove(),this.formSubmitted=!1):!c&&0===this.pendingRequest&&this.formSubmitted&&(a(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(b,c){return c="string"==typeof c&&c||"remote",a.data(b,"previousValue")||a.data(b,"previousValue",{old:null,valid:!0,message:this.defaultMessage(b,{method:c})})},destroy:function(){this.resetForm(),a(this.currentForm).off(".validate").removeData("validator").find(".validate-equalTo-blur").off(".validate-equalTo").removeClass("validate-equalTo-blur").find(".validate-lessThan-blur").off(".validate-lessThan").removeClass("validate-lessThan-blur").find(".validate-lessThanEqual-blur").off(".validate-lessThanEqual").removeClass("validate-lessThanEqual-blur").find(".validate-greaterThanEqual-blur").off(".validate-greaterThanEqual").removeClass("validate-greaterThanEqual-blur").find(".validate-greaterThan-blur").off(".validate-greaterThan").removeClass("validate-greaterThan-blur")}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(b,c){b.constructor===String?this.classRuleSettings[b]=c:a.extend(this.classRuleSettings,b)},classRules:function(b){var c={},d=a(b).attr("class");return d&&a.each(d.split(" "),function(){this in a.validator.classRuleSettings&&a.extend(c,a.validator.classRuleSettings[this])}),c},normalizeAttributeRule:function(a,b,c,d){/min|max|step/.test(c)&&(null===b||/number|range|text/.test(b))&&(d=Number(d),isNaN(d)&&(d=void 0)),d||0===d?a[c]=d:b===c&&"range"!==b&&(a[c]=!0)},attributeRules:function(b){var c,d,e={},f=a(b),g=b.getAttribute("type");for(c in a.validator.methods)"required"===c?(d=b.getAttribute(c),""===d&&(d=!0),d=!!d):d=f.attr(c),this.normalizeAttributeRule(e,g,c,d);return e.maxlength&&/-1|2147483647|524288/.test(e.maxlength)&&delete e.maxlength,e},dataRules:function(b){var c,d,e={},f=a(b),g=b.getAttribute("type");for(c in a.validator.methods)d=f.data("rule"+c.charAt(0).toUpperCase()+c.substring(1).toLowerCase()),""===d&&(d=!0),this.normalizeAttributeRule(e,g,c,d);return e},staticRules:function(b){var c={},d=a.data(b.form,"validator");return d.settings.rules&&(c=a.validator.normalizeRule(d.settings.rules[b.name])||{}),c},normalizeRules:function(b,c){return a.each(b,function(d,e){if(e===!1)return void delete b[d];if(e.param||e.depends){var f=!0;switch(typeof e.depends){case"string":f=!!a(e.depends,c.form).length;break;case"function":f=e.depends.call(c,c)}f?b[d]=void 0===e.param||e.param:(a.data(c.form,"validator").resetElements(a(c)),delete b[d])}}),a.each(b,function(d,e){b[d]=a.isFunction(e)&&"normalizer"!==d?e(c):e}),a.each(["minlength","maxlength"],function(){b[this]&&(b[this]=Number(b[this]))}),a.each(["rangelength","range"],function(){var c;b[this]&&(a.isArray(b[this])?b[this]=[Number(b[this][0]),Number(b[this][1])]:"string"==typeof b[this]&&(c=b[this].replace(/[\[\]]/g,"").split(/[\s,]+/),b[this]=[Number(c[0]),Number(c[1])]))}),a.validator.autoCreateRanges&&(null!=b.min&&null!=b.max&&(b.range=[b.min,b.max],delete b.min,delete b.max),null!=b.minlength&&null!=b.maxlength&&(b.rangelength=[b.minlength,b.maxlength],delete b.minlength,delete b.maxlength)),b},normalizeRule:function(b){if("string"==typeof b){var c={};a.each(b.split(/\s/),function(){c[this]=!0}),b=c}return b},addMethod:function(b,c,d){a.validator.methods[b]=c,a.validator.messages[b]=void 0!==d?d:a.validator.messages[b],c.length<3&&a.validator.addClassRules(b,a.validator.normalizeRule(b))},methods:{required:function(b,c,d){if(!this.depend(d,c))return"dependency-mismatch";if("select"===c.nodeName.toLowerCase()){var e=a(c).val();return e&&e.length>0}return this.checkable(c)?this.getLength(b,c)>0:void 0!==b&&null!==b&&b.length>0},email:function(a,b){return this.optional(b)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(a)},url:function(a,b){return this.optional(b)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[\/?#]\S*)?$/i.test(a)},date:function(){var a=!1;return function(b,c){return a||(a=!0,this.settings.debug&&window.console&&console.warn("The `date` method is deprecated and will be removed in version '2.0.0'.\nPlease don't use it, since it relies on the Date constructor, which\nbehaves very differently across browsers and locales. Use `dateISO`\ninstead or one of the locale specific methods in `localizations/`\nand `additional-methods.js`.")),this.optional(c)||!/Invalid|NaN/.test(new Date(b).toString())}}(),dateISO:function(a,b){return this.optional(b)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(a)},number:function(a,b){return this.optional(b)||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(a)},digits:function(a,b){return this.optional(b)||/^\d+$/.test(a)},minlength:function(b,c,d){var e=a.isArray(b)?b.length:this.getLength(b,c);return this.optional(c)||e>=d},maxlength:function(b,c,d){var e=a.isArray(b)?b.length:this.getLength(b,c);return this.optional(c)||e<=d},rangelength:function(b,c,d){var e=a.isArray(b)?b.length:this.getLength(b,c);return this.optional(c)||e>=d[0]&&e<=d[1]},min:function(a,b,c){return this.optional(b)||a>=c},max:function(a,b,c){return this.optional(b)||a<=c},range:function(a,b,c){return this.optional(b)||a>=c[0]&&a<=c[1]},step:function(b,c,d){var e,f=a(c).attr("type"),g="Step attribute on input type "+f+" is not supported.",h=["text","number","range"],i=new RegExp("\\b"+f+"\\b"),j=f&&!i.test(h.join()),k=function(a){var b=(""+a).match(/(?:\.(\d+))?$/);return b&&b[1]?b[1].length:0},l=function(a){return Math.round(a*Math.pow(10,e))},m=!0;if(j)throw new Error(g);return e=k(d),(k(b)>e||l(b)%l(d)!==0)&&(m=!1),this.optional(c)||m},equalTo:function(b,c,d){var e=a(d);return this.settings.onfocusout&&e.not(".validate-equalTo-blur").length&&e.addClass("validate-equalTo-blur").on("blur.validate-equalTo",function(){a(c).valid()}),b===e.val()},remote:function(b,c,d,e){if(this.optional(c))return"dependency-mismatch";e="string"==typeof e&&e||"remote";var f,g,h,i=this.previousValue(c,e);return this.settings.messages[c.name]||(this.settings.messages[c.name]={}),i.originalMessage=i.originalMessage||this.settings.messages[c.name][e],this.settings.messages[c.name][e]=i.message,d="string"==typeof d&&{url:d}||d,h=a.param(a.extend({data:b},d.data)),i.old===h?i.valid:(i.old=h,f=this,this.startRequest(c),g={},g[c.name]=b,a.ajax(a.extend(!0,{mode:"abort",port:"validate"+c.name,dataType:"json",data:g,context:f.currentForm,success:function(a){var d,g,h,j=a===!0||"true"===a;f.settings.messages[c.name][e]=i.originalMessage,j?(h=f.formSubmitted,f.resetInternals(),f.toHide=f.errorsFor(c),f.formSubmitted=h,f.successList.push(c),f.invalid[c.name]=!1,f.showErrors()):(d={},g=a||f.defaultMessage(c,{method:e,parameters:b}),d[c.name]=i.message=g,f.invalid[c.name]=!0,f.showErrors(d)),i.valid=j,f.stopRequest(c,j)}},d)),"pending")}}});var b,c={};return a.ajaxPrefilter?a.ajaxPrefilter(function(a,b,d){var e=a.port;"abort"===a.mode&&(c[e]&&c[e].abort(),c[e]=d)}):(b=a.ajax,a.ajax=function(d){var e=("mode"in d?d:a.ajaxSettings).mode,f=("port"in d?d:a.ajaxSettings).port;return"abort"===e?(c[f]&&c[f].abort(),c[f]=b.apply(this,arguments),c[f]):b.apply(this,arguments)}),a});/*! jQuery Validation Plugin - v1.19.1 - 6/15/2019
 * https://jqueryvalidation.org/
 * Copyright (c) 2019 Jörn Zaefferer; Licensed MIT */
!function(a){"function"==typeof define&&define.amd?define(["jquery","./jquery.validate.min"],a):"object"==typeof module&&module.exports?module.exports=a(require("jquery")):a(jQuery)}(function(a){return function(){function b(a){return a.replace(/<.[^<>]*?>/g," ").replace(/&nbsp;|&#160;/gi," ").replace(/[.(),;:!?%#$'\"_+=\/\-“”’]*/g,"")}a.validator.addMethod("maxWords",function(a, c, d){return this.optional(c)||b(a).match(/\b\w+\b/g).length<=d},a.validator.format("Please enter {0} words or less.")),a.validator.addMethod("minWords",function(a, c, d){return this.optional(c)||b(a).match(/\b\w+\b/g).length>=d},a.validator.format("Please enter at least {0} words.")),a.validator.addMethod("rangeWords",function(a,c,d){var e=b(a),f=/\b\w+\b/g;return this.optional(c)||e.match(f).length>=d[0]&&e.match(f).length<=d[1]},a.validator.format("Please enter between {0} and {1} words."))}(),a.validator.addMethod("abaRoutingNumber",function(a){var b=0,c=a.split(""),d=c.length;if(9!==d)return!1;for(var e=0;e<d;e+=3)b+=3*parseInt(c[e],10)+7*parseInt(c[e+1],10)+parseInt(c[e+2],10);return 0!==b&&b%10===0},"Please enter a valid routing number."),a.validator.addMethod("accept",function(b,c,d){var e,f,g,h="string"==typeof d?d.replace(/\s/g,""):"image/*",i=this.optional(c);if(i)return i;if("file"===a(c).attr("type")&&(h=h.replace(/[\-\[\]\/\{\}\(\)\+\?\.\\\^\$\|]/g,"\\$&").replace(/,/g,"|").replace(/\/\*/g,"/.*"),c.files&&c.files.length))for(g=new RegExp(".?("+h+")$","i"),e=0;e<c.files.length;e++)if(f=c.files[e],!f.type.match(g))return!1;return!0},a.validator.format("Please enter a value with a valid mimetype.")),a.validator.addMethod("alphanumeric",function(a,b){return this.optional(b)||/^\w+$/i.test(a)},"Letters, numbers, and underscores only please"),a.validator.addMethod("bankaccountNL",function(a,b){if(this.optional(b))return!0;if(!/^[0-9]{9}|([0-9]{2} ){3}[0-9]{3}$/.test(a))return!1;var c,d,e,f=a.replace(/ /g,""),g=0,h=f.length;for(c=0;c<h;c++)d=h-c,e=f.substring(c,c+1),g+=d*e;return g%11===0},"Please specify a valid bank account number"),a.validator.addMethod("bankorgiroaccountNL",function(b,c){return this.optional(c)||a.validator.methods.bankaccountNL.call(this,b,c)||a.validator.methods.giroaccountNL.call(this,b,c)},"Please specify a valid bank or giro account number"),a.validator.addMethod("bic",function(a,b){return this.optional(b)||/^([A-Z]{6}[A-Z2-9][A-NP-Z1-9])(X{3}|[A-WY-Z0-9][A-Z0-9]{2})?$/.test(a.toUpperCase())},"Please specify a valid BIC code"),a.validator.addMethod("cifES",function(a,b){"use strict";function c(a){return a%2===0}if(this.optional(b))return!0;var d,e,f,g,h=new RegExp(/^([ABCDEFGHJKLMNPQRSUVW])(\d{7})([0-9A-J])$/gi),i=a.substring(0,1),j=a.substring(1,8),k=a.substring(8,9),l=0,m=0,n=0;if(9!==a.length||!h.test(a))return!1;for(d=0;d<j.length;d++)e=parseInt(j[d],10),c(d)?(e*=2,n+=e<10?e:e-9):m+=e;return l=m+n,f=(10-l.toString().substr(-1)).toString(),f=parseInt(f,10)>9?"0":f,g="JABCDEFGHI".substr(f,1).toString(),i.match(/[ABEH]/)?k===f:i.match(/[KPQS]/)?k===g:k===f||k===g},"Please specify a valid CIF number."),a.validator.addMethod("cnhBR",function(a){if(a=a.replace(/([~!@#$%^&*()_+=`{}\[\]\-|\\:;'<>,.\/? ])+/g,""),11!==a.length)return!1;var b,c,d,e,f,g,h=0,i=0;if(b=a.charAt(0),new Array(12).join(b)===a)return!1;for(e=0,f=9,g=0;e<9;++e,--f)h+=+(a.charAt(e)*f);for(c=h%11,c>=10&&(c=0,i=2),h=0,e=0,f=1,g=0;e<9;++e,++f)h+=+(a.charAt(e)*f);return d=h%11,d>=10?d=0:d-=i,String(c).concat(d)===a.substr(-2)},"Please specify a valid CNH number"),a.validator.addMethod("cnpjBR",function(a,b){"use strict";if(this.optional(b))return!0;if(a=a.replace(/[^\d]+/g,""),14!==a.length)return!1;if("00000000000000"===a||"11111111111111"===a||"22222222222222"===a||"33333333333333"===a||"44444444444444"===a||"55555555555555"===a||"66666666666666"===a||"77777777777777"===a||"88888888888888"===a||"99999999999999"===a)return!1;for(var c=a.length-2,d=a.substring(0,c),e=a.substring(c),f=0,g=c-7,h=c;h>=1;h--)f+=d.charAt(c-h)*g--,g<2&&(g=9);var i=f%11<2?0:11-f%11;if(i!==parseInt(e.charAt(0),10))return!1;c+=1,d=a.substring(0,c),f=0,g=c-7;for(var j=c;j>=1;j--)f+=d.charAt(c-j)*g--,g<2&&(g=9);return i=f%11<2?0:11-f%11,i===parseInt(e.charAt(1),10)},"Please specify a CNPJ value number"),a.validator.addMethod("cpfBR",function(a,b){"use strict";if(this.optional(b))return!0;if(a=a.replace(/([~!@#$%^&*()_+=`{}\[\]\-|\\:;'<>,.\/? ])+/g,""),11!==a.length)return!1;var c,d,e,f,g=0;if(c=parseInt(a.substring(9,10),10),d=parseInt(a.substring(10,11),10),e=function(a,b){var c=10*a%11;return 10!==c&&11!==c||(c=0),c===b},""===a||"00000000000"===a||"11111111111"===a||"22222222222"===a||"33333333333"===a||"44444444444"===a||"55555555555"===a||"66666666666"===a||"77777777777"===a||"88888888888"===a||"99999999999"===a)return!1;for(f=1;f<=9;f++)g+=parseInt(a.substring(f-1,f),10)*(11-f);if(e(g,c)){for(g=0,f=1;f<=10;f++)g+=parseInt(a.substring(f-1,f),10)*(12-f);return e(g,d)}return!1},"Please specify a valid CPF number"),a.validator.addMethod("creditcard",function(a,b){if(this.optional(b))return"dependency-mismatch";if(/[^0-9 \-]+/.test(a))return!1;var c,d,e=0,f=0,g=!1;if(a=a.replace(/\D/g,""),a.length<13||a.length>19)return!1;for(c=a.length-1;c>=0;c--)d=a.charAt(c),f=parseInt(d,10),g&&(f*=2)>9&&(f-=9),e+=f,g=!g;return e%10===0},"Please enter a valid credit card number."),a.validator.addMethod("creditcardtypes",function(a,b,c){if(/[^0-9\-]+/.test(a))return!1;a=a.replace(/\D/g,"");var d=0;return c.mastercard&&(d|=1),c.visa&&(d|=2),c.amex&&(d|=4),c.dinersclub&&(d|=8),c.enroute&&(d|=16),c.discover&&(d|=32),c.jcb&&(d|=64),c.unknown&&(d|=128),c.all&&(d=255),1&d&&(/^(5[12345])/.test(a)||/^(2[234567])/.test(a))?16===a.length:2&d&&/^(4)/.test(a)?16===a.length:4&d&&/^(3[47])/.test(a)?15===a.length:8&d&&/^(3(0[012345]|[68]))/.test(a)?14===a.length:16&d&&/^(2(014|149))/.test(a)?15===a.length:32&d&&/^(6011)/.test(a)?16===a.length:64&d&&/^(3)/.test(a)?16===a.length:64&d&&/^(2131|1800)/.test(a)?15===a.length:!!(128&d)},"Please enter a valid credit card number."),a.validator.addMethod("currency",function(a,b,c){var d,e="string"==typeof c,f=e?c:c[0],g=!!e||c[1];return f=f.replace(/,/g,""),f=g?f+"]":f+"]?",d="^["+f+"([1-9]{1}[0-9]{0,2}(\\,[0-9]{3})*(\\.[0-9]{0,2})?|[1-9]{1}[0-9]{0,}(\\.[0-9]{0,2})?|0(\\.[0-9]{0,2})?|(\\.[0-9]{1,2})?)$",d=new RegExp(d),this.optional(b)||d.test(a)},"Please specify a valid currency"),a.validator.addMethod("dateFA",function(a,b){return this.optional(b)||/^[1-4]\d{3}\/((0?[1-6]\/((3[0-1])|([1-2][0-9])|(0?[1-9])))|((1[0-2]|(0?[7-9]))\/(30|([1-2][0-9])|(0?[1-9]))))$/.test(a)},a.validator.messages.date),a.validator.addMethod("dateITA",function(a,b){var c,d,e,f,g,h=!1,i=/^\d{1,2}\/\d{1,2}\/\d{4}$/;return i.test(a)?(c=a.split("/"),d=parseInt(c[0],10),e=parseInt(c[1],10),f=parseInt(c[2],10),g=new Date(Date.UTC(f,e-1,d,12,0,0,0)),h=g.getUTCFullYear()===f&&g.getUTCMonth()===e-1&&g.getUTCDate()===d):h=!1,this.optional(b)||h},a.validator.messages.date),a.validator.addMethod("dateNL",function(a,b){return this.optional(b)||/^(0?[1-9]|[12]\d|3[01])[\.\/\-](0?[1-9]|1[012])[\.\/\-]([12]\d)?(\d\d)$/.test(a)},a.validator.messages.date),a.validator.addMethod("extension",function(a,b,c){return c="string"==typeof c?c.replace(/,/g,"|"):"png|jpe?g|gif",this.optional(b)||a.match(new RegExp("\\.("+c+")$","i"))},a.validator.format("Please enter a value with a valid extension.")),a.validator.addMethod("giroaccountNL",function(a,b){return this.optional(b)||/^[0-9]{1,7}$/.test(a)},"Please specify a valid giro account number"),a.validator.addMethod("greaterThan",function(b,c,d){var e=a(d);return this.settings.onfocusout&&e.not(".validate-greaterThan-blur").length&&e.addClass("validate-greaterThan-blur").on("blur.validate-greaterThan",function(){a(c).valid()}),b>e.val()},"Please enter a greater value."),a.validator.addMethod("greaterThanEqual",function(b,c,d){var e=a(d);return this.settings.onfocusout&&e.not(".validate-greaterThanEqual-blur").length&&e.addClass("validate-greaterThanEqual-blur").on("blur.validate-greaterThanEqual",function(){a(c).valid()}),b>=e.val()},"Please enter a greater value."),a.validator.addMethod("iban",function(a,b){if(this.optional(b))return!0;var c,d,e,f,g,h,i,j,k,l=a.replace(/ /g,"").toUpperCase(),m="",n=!0,o="",p="",q=5;if(l.length<q)return!1;if(c=l.substring(0,2),h={AL:"\\d{8}[\\dA-Z]{16}",AD:"\\d{8}[\\dA-Z]{12}",AT:"\\d{16}",AZ:"[\\dA-Z]{4}\\d{20}",BE:"\\d{12}",BH:"[A-Z]{4}[\\dA-Z]{14}",BA:"\\d{16}",BR:"\\d{23}[A-Z][\\dA-Z]",BG:"[A-Z]{4}\\d{6}[\\dA-Z]{8}",CR:"\\d{17}",HR:"\\d{17}",CY:"\\d{8}[\\dA-Z]{16}",CZ:"\\d{20}",DK:"\\d{14}",DO:"[A-Z]{4}\\d{20}",EE:"\\d{16}",FO:"\\d{14}",FI:"\\d{14}",FR:"\\d{10}[\\dA-Z]{11}\\d{2}",GE:"[\\dA-Z]{2}\\d{16}",DE:"\\d{18}",GI:"[A-Z]{4}[\\dA-Z]{15}",GR:"\\d{7}[\\dA-Z]{16}",GL:"\\d{14}",GT:"[\\dA-Z]{4}[\\dA-Z]{20}",HU:"\\d{24}",IS:"\\d{22}",IE:"[\\dA-Z]{4}\\d{14}",IL:"\\d{19}",IT:"[A-Z]\\d{10}[\\dA-Z]{12}",KZ:"\\d{3}[\\dA-Z]{13}",KW:"[A-Z]{4}[\\dA-Z]{22}",LV:"[A-Z]{4}[\\dA-Z]{13}",LB:"\\d{4}[\\dA-Z]{20}",LI:"\\d{5}[\\dA-Z]{12}",LT:"\\d{16}",LU:"\\d{3}[\\dA-Z]{13}",MK:"\\d{3}[\\dA-Z]{10}\\d{2}",MT:"[A-Z]{4}\\d{5}[\\dA-Z]{18}",MR:"\\d{23}",MU:"[A-Z]{4}\\d{19}[A-Z]{3}",MC:"\\d{10}[\\dA-Z]{11}\\d{2}",MD:"[\\dA-Z]{2}\\d{18}",ME:"\\d{18}",NL:"[A-Z]{4}\\d{10}",NO:"\\d{11}",PK:"[\\dA-Z]{4}\\d{16}",PS:"[\\dA-Z]{4}\\d{21}",PL:"\\d{24}",PT:"\\d{21}",RO:"[A-Z]{4}[\\dA-Z]{16}",SM:"[A-Z]\\d{10}[\\dA-Z]{12}",SA:"\\d{2}[\\dA-Z]{18}",RS:"\\d{18}",SK:"\\d{20}",SI:"\\d{15}",ES:"\\d{20}",SE:"\\d{20}",CH:"\\d{5}[\\dA-Z]{12}",TN:"\\d{20}",TR:"\\d{5}[\\dA-Z]{17}",AE:"\\d{3}\\d{16}",GB:"[A-Z]{4}\\d{14}",VG:"[\\dA-Z]{4}\\d{16}"},g=h[c],"undefined"!=typeof g&&(i=new RegExp("^[A-Z]{2}\\d{2}"+g+"$",""),!i.test(l)))return!1;for(d=l.substring(4,l.length)+l.substring(0,4),j=0;j<d.length;j++)e=d.charAt(j),"0"!==e&&(n=!1),n||(m+="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".indexOf(e));for(k=0;k<m.length;k++)f=m.charAt(k),p=""+o+f,o=p%97;return 1===o},"Please specify a valid IBAN"),a.validator.addMethod("integer",function(a,b){return this.optional(b)||/^-?\d+$/.test(a)},"A positive or negative non-decimal number please"),a.validator.addMethod("ipv4",function(a,b){return this.optional(b)||/^(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)$/i.test(a)},"Please enter a valid IP v4 address."),a.validator.addMethod("ipv6",function(a,b){return this.optional(b)||/^((([0-9A-Fa-f]{1,4}:){7}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}:[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){5}:([0-9A-Fa-f]{1,4}:)?[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){4}:([0-9A-Fa-f]{1,4}:){0,2}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){3}:([0-9A-Fa-f]{1,4}:){0,3}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){2}:([0-9A-Fa-f]{1,4}:){0,4}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(([0-9A-Fa-f]{1,4}:){0,5}:((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(::([0-9A-Fa-f]{1,4}:){0,5}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|([0-9A-Fa-f]{1,4}::([0-9A-Fa-f]{1,4}:){0,5}[0-9A-Fa-f]{1,4})|(::([0-9A-Fa-f]{1,4}:){0,6}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){1,7}:))$/i.test(a)},"Please enter a valid IP v6 address."),a.validator.addMethod("lessThan",function(b,c,d){var e=a(d);return this.settings.onfocusout&&e.not(".validate-lessThan-blur").length&&e.addClass("validate-lessThan-blur").on("blur.validate-lessThan",function(){a(c).valid()}),b<e.val()},"Please enter a lesser value."),a.validator.addMethod("lessThanEqual",function(b,c,d){var e=a(d);return this.settings.onfocusout&&e.not(".validate-lessThanEqual-blur").length&&e.addClass("validate-lessThanEqual-blur").on("blur.validate-lessThanEqual",function(){a(c).valid()}),b<=e.val()},"Please enter a lesser value."),a.validator.addMethod("lettersonly",function(a,b){return this.optional(b)||/^[a-z]+$/i.test(a)},"Letters only please"),a.validator.addMethod("letterswithbasicpunc",function(a,b){return this.optional(b)||/^[a-z\-.,()'"\s]+$/i.test(a)},"Letters or punctuation only please"),a.validator.addMethod("maxfiles",function(b,c,d){return!!this.optional(c)||!("file"===a(c).attr("type")&&c.files&&c.files.length>d)},a.validator.format("Please select no more than {0} files.")),a.validator.addMethod("maxsize",function(b,c,d){if(this.optional(c))return!0;if("file"===a(c).attr("type")&&c.files&&c.files.length)for(var e=0;e<c.files.length;e++)if(c.files[e].size>d)return!1;return!0},a.validator.format("File size must not exceed {0} bytes each.")),a.validator.addMethod("maxsizetotal",function(b,c,d){if(this.optional(c))return!0;if("file"===a(c).attr("type")&&c.files&&c.files.length)for(var e=0,f=0;f<c.files.length;f++)if(e+=c.files[f].size,e>d)return!1;return!0},a.validator.format("Total size of all files must not exceed {0} bytes.")),a.validator.addMethod("mobileNL",function(a,b){return this.optional(b)||/^((\+|00(\s|\s?\-\s?)?)31(\s|\s?\-\s?)?(\(0\)[\-\s]?)?|0)6((\s|\s?\-\s?)?[0-9]){8}$/.test(a)},"Please specify a valid mobile number"),a.validator.addMethod("mobileRU",function(a,b){var c=a.replace(/\(|\)|\s+|-/g,"");return this.optional(b)||c.length>9&&/^((\+7|7|8)+([0-9]){10})$/.test(c)},"Please specify a valid mobile number"),a.validator.addMethod("mobileUK",function(a,b){return a=a.replace(/\(|\)|\s+|-/g,""),this.optional(b)||a.length>9&&a.match(/^(?:(?:(?:00\s?|\+)44\s?|0)7(?:[1345789]\d{2}|624)\s?\d{3}\s?\d{3})$/)},"Please specify a valid mobile number"),a.validator.addMethod("netmask",function(a,b){return this.optional(b)||/^(254|252|248|240|224|192|128)\.0\.0\.0|255\.(254|252|248|240|224|192|128|0)\.0\.0|255\.255\.(254|252|248|240|224|192|128|0)\.0|255\.255\.255\.(254|252|248|240|224|192|128|0)/i.test(a)},"Please enter a valid netmask."),a.validator.addMethod("nieES",function(a,b){"use strict";if(this.optional(b))return!0;var c,d=new RegExp(/^[MXYZ]{1}[0-9]{7,8}[TRWAGMYFPDXBNJZSQVHLCKET]{1}$/gi),e="TRWAGMYFPDXBNJZSQVHLCKET",f=a.substr(a.length-1).toUpperCase();return a=a.toString().toUpperCase(),!(a.length>10||a.length<9||!d.test(a))&&(a=a.replace(/^[X]/,"0").replace(/^[Y]/,"1").replace(/^[Z]/,"2"),c=9===a.length?a.substr(0,8):a.substr(0,9),e.charAt(parseInt(c,10)%23)===f)},"Please specify a valid NIE number."),a.validator.addMethod("nifES",function(a,b){"use strict";return!!this.optional(b)||(a=a.toUpperCase(),!!a.match("((^[A-Z]{1}[0-9]{7}[A-Z0-9]{1}$|^[T]{1}[A-Z0-9]{8}$)|^[0-9]{8}[A-Z]{1}$)")&&(/^[0-9]{8}[A-Z]{1}$/.test(a)?"TRWAGMYFPDXBNJZSQVHLCKE".charAt(a.substring(8,0)%23)===a.charAt(8):!!/^[KLM]{1}/.test(a)&&a[8]==="TRWAGMYFPDXBNJZSQVHLCKE".charAt(a.substring(8,1)%23)))},"Please specify a valid NIF number."),a.validator.addMethod("nipPL",function(a){"use strict";if(a=a.replace(/[^0-9]/g,""),10!==a.length)return!1;for(var b=[6,5,7,2,3,4,5,6,7],c=0,d=0;d<9;d++)c+=b[d]*a[d];var e=c%11,f=10===e?0:e;return f===parseInt(a[9],10)},"Please specify a valid NIP number."),a.validator.addMethod("nisBR",function(a){var b,c,d,e,f,g=0;if(a=a.replace(/([~!@#$%^&*()_+=`{}\[\]\-|\\:;'<>,.\/? ])+/g,""),11!==a.length)return!1;for(c=parseInt(a.substring(10,11),10),b=parseInt(a.substring(0,10),10),e=2;e<12;e++)f=e,10===e&&(f=2),11===e&&(f=3),g+=b%10*f,b=parseInt(b/10,10);return d=g%11,d=d>1?11-d:0,c===d},"Please specify a valid NIS/PIS number"),a.validator.addMethod("notEqualTo",function(b,c,d){return this.optional(c)||!a.validator.methods.equalTo.call(this,b,c,d)},"Please enter a different value, values must not be the same."),a.validator.addMethod("nowhitespace",function(a,b){return this.optional(b)||/^\S+$/i.test(a)},"No white space please"),a.validator.addMethod("pattern",function(a,b,c){return!!this.optional(b)||("string"==typeof c&&(c=new RegExp("^(?:"+c+")$")),c.test(a))},"Invalid format."),a.validator.addMethod("phoneNL",function(a,b){return this.optional(b)||/^((\+|00(\s|\s?\-\s?)?)31(\s|\s?\-\s?)?(\(0\)[\-\s]?)?|0)[1-9]((\s|\s?\-\s?)?[0-9]){8}$/.test(a)},"Please specify a valid phone number."),a.validator.addMethod("phonePL",function(a,b){a=a.replace(/\s+/g,"");var c=/^(?:(?:(?:\+|00)?48)|(?:\(\+?48\)))?(?:1[2-8]|2[2-69]|3[2-49]|4[1-68]|5[0-9]|6[0-35-9]|[7-8][1-9]|9[145])\d{7}$/;return this.optional(b)||c.test(a)},"Please specify a valid phone number"),a.validator.addMethod("phonesUK",function(a,b){return a=a.replace(/\(|\)|\s+|-/g,""),this.optional(b)||a.length>9&&a.match(/^(?:(?:(?:00\s?|\+)44\s?|0)(?:1\d{8,9}|[23]\d{9}|7(?:[1345789]\d{8}|624\d{6})))$/)},"Please specify a valid uk phone number"),a.validator.addMethod("phoneUK",function(a,b){return a=a.replace(/\(|\)|\s+|-/g,""),this.optional(b)||a.length>9&&a.match(/^(?:(?:(?:00\s?|\+)44\s?)|(?:\(?0))(?:\d{2}\)?\s?\d{4}\s?\d{4}|\d{3}\)?\s?\d{3}\s?\d{3,4}|\d{4}\)?\s?(?:\d{5}|\d{3}\s?\d{3})|\d{5}\)?\s?\d{4,5})$/)},"Please specify a valid phone number"),a.validator.addMethod("phoneUS",function(a,b){return a=a.replace(/\s+/g,""),this.optional(b)||a.length>9&&a.match(/^(\+?1-?)?(\([2-9]([02-9]\d|1[02-9])\)|[2-9]([02-9]\d|1[02-9]))-?[2-9]\d{2}-?\d{4}$/)},"Please specify a valid phone number"),a.validator.addMethod("postalcodeBR",function(a,b){return this.optional(b)||/^\d{2}.\d{3}-\d{3}?$|^\d{5}-?\d{3}?$/.test(a)},"Informe um CEP válido."),a.validator.addMethod("postalCodeCA",function(a,b){return this.optional(b)||/^[ABCEGHJKLMNPRSTVXY]\d[ABCEGHJKLMNPRSTVWXYZ] *\d[ABCEGHJKLMNPRSTVWXYZ]\d$/i.test(a)},"Please specify a valid postal code"),a.validator.addMethod("postalcodeIT",function(a,b){return this.optional(b)||/^\d{5}$/.test(a)},"Please specify a valid postal code"),a.validator.addMethod("postalcodeNL",function(a,b){return this.optional(b)||/^[1-9][0-9]{3}\s?[a-zA-Z]{2}$/.test(a)},"Please specify a valid postal code"),a.validator.addMethod("postcodeUK",function(a,b){return this.optional(b)||/^((([A-PR-UWYZ][0-9])|([A-PR-UWYZ][0-9][0-9])|([A-PR-UWYZ][A-HK-Y][0-9])|([A-PR-UWYZ][A-HK-Y][0-9][0-9])|([A-PR-UWYZ][0-9][A-HJKSTUW])|([A-PR-UWYZ][A-HK-Y][0-9][ABEHMNPRVWXY]))\s?([0-9][ABD-HJLNP-UW-Z]{2})|(GIR)\s?(0AA))$/i.test(a)},"Please specify a valid UK postcode"),a.validator.addMethod("require_from_group",function(b,c,d){var e=a(d[1],c.form),f=e.eq(0),g=f.data("valid_req_grp")?f.data("valid_req_grp"):a.extend({},this),h=e.filter(function(){return g.elementValue(this)}).length>=d[0];return f.data("valid_req_grp",g),a(c).data("being_validated")||(e.data("being_validated",!0),e.each(function(){g.element(this)}),e.data("being_validated",!1)),h},a.validator.format("Please fill at least {0} of these fields.")),a.validator.addMethod("skip_or_fill_minimum",function(b,c,d){var e=a(d[1],c.form),f=e.eq(0),g=f.data("valid_skip")?f.data("valid_skip"):a.extend({},this),h=e.filter(function(){return g.elementValue(this)}).length,i=0===h||h>=d[0];return f.data("valid_skip",g),a(c).data("being_validated")||(e.data("being_validated",!0),e.each(function(){g.element(this)}),e.data("being_validated",!1)),i},a.validator.format("Please either skip these fields or fill at least {0} of them.")),a.validator.addMethod("stateUS",function(a,b,c){var d,e="undefined"==typeof c,f=!e&&"undefined"!=typeof c.caseSensitive&&c.caseSensitive,g=!e&&"undefined"!=typeof c.includeTerritories&&c.includeTerritories,h=!e&&"undefined"!=typeof c.includeMilitary&&c.includeMilitary;return d=g||h?g&&h?"^(A[AEKLPRSZ]|C[AOT]|D[CE]|FL|G[AU]|HI|I[ADLN]|K[SY]|LA|M[ADEINOPST]|N[CDEHJMVY]|O[HKR]|P[AR]|RI|S[CD]|T[NX]|UT|V[AIT]|W[AIVY])$":g?"^(A[KLRSZ]|C[AOT]|D[CE]|FL|G[AU]|HI|I[ADLN]|K[SY]|LA|M[ADEINOPST]|N[CDEHJMVY]|O[HKR]|P[AR]|RI|S[CD]|T[NX]|UT|V[AIT]|W[AIVY])$":"^(A[AEKLPRZ]|C[AOT]|D[CE]|FL|GA|HI|I[ADLN]|K[SY]|LA|M[ADEINOST]|N[CDEHJMVY]|O[HKR]|PA|RI|S[CD]|T[NX]|UT|V[AT]|W[AIVY])$":"^(A[KLRZ]|C[AOT]|D[CE]|FL|GA|HI|I[ADLN]|K[SY]|LA|M[ADEINOST]|N[CDEHJMVY]|O[HKR]|PA|RI|S[CD]|T[NX]|UT|V[AT]|W[AIVY])$",d=f?new RegExp(d):new RegExp(d,"i"),this.optional(b)||d.test(a)},"Please specify a valid state"),a.validator.addMethod("strippedminlength",function(b,c,d){return a(b).text().length>=d},a.validator.format("Please enter at least {0} characters")),a.validator.addMethod("time",function(a,b){return this.optional(b)||/^([01]\d|2[0-3]|[0-9])(:[0-5]\d){1,2}$/.test(a)},"Please enter a valid time, between 00:00 and 23:59"),a.validator.addMethod("time12h",function(a,b){return this.optional(b)||/^((0?[1-9]|1[012])(:[0-5]\d){1,2}(\ ?[AP]M))$/i.test(a)},"Please enter a valid time in 12-hour am/pm format"),a.validator.addMethod("url2",function(a,b){return this.optional(b)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)*(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(a)},a.validator.messages.url),a.validator.addMethod("vinUS",function(a){if(17!==a.length)return!1;var b,c,d,e,f,g,h=["A","B","C","D","E","F","G","H","J","K","L","M","N","P","R","S","T","U","V","W","X","Y","Z"],i=[1,2,3,4,5,6,7,8,1,2,3,4,5,7,9,2,3,4,5,6,7,8,9],j=[8,7,6,5,4,3,2,10,0,9,8,7,6,5,4,3,2],k=0;for(b=0;b<17;b++){if(e=j[b],d=a.slice(b,b+1),8===b&&(g=d),isNaN(d)){for(c=0;c<h.length;c++)if(d.toUpperCase()===h[c]){d=i[c],d*=e,isNaN(g)&&8===c&&(g=h[c]);break}}else d*=e;k+=d}return f=k%11,10===f&&(f="X"),f===g},"The specified vehicle identification number (VIN) is invalid."),a.validator.addMethod("zipcodeUS",function(a,b){return this.optional(b)||/^\d{5}(-\d{4})?$/.test(a)},"The specified US ZIP Code is invalid"),a.validator.addMethod("ziprange",function(a,b){return this.optional(b)||/^90[2-5]\d\{2\}-\d{4}$/.test(a)},"Your ZIP-code must be in the range 902xx-xxxx to 905xx-xxxx"),a});!function(i){"use strict";"function"==typeof define&&define.amd?define(["jquery"],i):"undefined"!=typeof exports?module.exports=i(require("jquery")):i(jQuery)}(function(i){"use strict";var e=window.Slick||{};(e=function(){var e=0;return function(t,o){var s,n=this;n.defaults={accessibility:!0,adaptiveHeight:!1,appendArrows:i(t),appendDots:i(t),arrows:!0,asNavFor:null,prevArrow:'<button class="slick-prev" aria-label="Previous" type="button">Previous</button>',nextArrow:'<button class="slick-next" aria-label="Next" type="button">Next</button>',autoplay:!1,autoplaySpeed:3e3,centerMode:!1,centerPadding:"50px",cssEase:"ease",customPaging:function(e,t){return i('<button type="button" />').text(t+1)},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,focusOnChange:!1,infinite:!0,initialSlide:0,lazyLoad:"ondemand",mobileFirst:!1,pauseOnHover:!0,pauseOnFocus:!0,pauseOnDotsHover:!1,respondTo:"window",responsive:null,rows:1,rtl:!1,slide:"",slidesPerRow:1,slidesToShow:1,slidesToScroll:1,speed:500,swipe:!0,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,useTransform:!0,variableWidth:!1,vertical:!1,verticalSwiping:!1,waitForAnimate:!0,zIndex:1e3},n.initials={animating:!1,dragging:!1,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,scrolling:!1,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,swiping:!1,$list:null,touchObject:{},transformsEnabled:!1,unslicked:!1},i.extend(n,n.initials),n.activeBreakpoint=null,n.animType=null,n.animProp=null,n.breakpoints=[],n.breakpointSettings=[],n.cssTransitions=!1,n.focussed=!1,n.interrupted=!1,n.hidden="hidden",n.paused=!0,n.positionProp=null,n.respondTo=null,n.rowCount=1,n.shouldClick=!0,n.$slider=i(t),n.$slidesCache=null,n.transformType=null,n.transitionType=null,n.visibilityChange="visibilitychange",n.windowWidth=0,n.windowTimer=null,s=i(t).data("slick")||{},n.options=i.extend({},n.defaults,o,s),n.currentSlide=n.options.initialSlide,n.originalSettings=n.options,void 0!==document.mozHidden?(n.hidden="mozHidden",n.visibilityChange="mozvisibilitychange"):void 0!==document.webkitHidden&&(n.hidden="webkitHidden",n.visibilityChange="webkitvisibilitychange"),n.autoPlay=i.proxy(n.autoPlay,n),n.autoPlayClear=i.proxy(n.autoPlayClear,n),n.autoPlayIterator=i.proxy(n.autoPlayIterator,n),n.changeSlide=i.proxy(n.changeSlide,n),n.clickHandler=i.proxy(n.clickHandler,n),n.selectHandler=i.proxy(n.selectHandler,n),n.setPosition=i.proxy(n.setPosition,n),n.swipeHandler=i.proxy(n.swipeHandler,n),n.dragHandler=i.proxy(n.dragHandler,n),n.keyHandler=i.proxy(n.keyHandler,n),n.instanceUid=e++,n.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/,n.registerBreakpoints(),n.init(!0)}}()).prototype.activateADA=function(){this.$slideTrack.find(".slick-active").attr({"aria-hidden":"false"}).find("a, input, button, select").attr({tabindex:"0"})},e.prototype.addSlide=e.prototype.slickAdd=function(e,t,o){var s=this;if("boolean"==typeof t)o=t,t=null;else if(t<0||t>=s.slideCount)return!1;s.unload(),"number"==typeof t?0===t&&0===s.$slides.length?i(e).appendTo(s.$slideTrack):o?i(e).insertBefore(s.$slides.eq(t)):i(e).insertAfter(s.$slides.eq(t)):!0===o?i(e).prependTo(s.$slideTrack):i(e).appendTo(s.$slideTrack),s.$slides=s.$slideTrack.children(this.options.slide),s.$slideTrack.children(this.options.slide).detach(),s.$slideTrack.append(s.$slides),s.$slides.each(function(e,t){i(t).attr("data-slick-index",e)}),s.$slidesCache=s.$slides,s.reinit()},e.prototype.animateHeight=function(){var i=this;if(1===i.options.slidesToShow&&!0===i.options.adaptiveHeight&&!1===i.options.vertical){var e=i.$slides.eq(i.currentSlide).outerHeight(!0);i.$list.animate({height:e},i.options.speed)}},e.prototype.animateSlide=function(e,t){var o={},s=this;s.animateHeight(),!0===s.options.rtl&&!1===s.options.vertical&&(e=-e),!1===s.transformsEnabled?!1===s.options.vertical?s.$slideTrack.animate({left:e},s.options.speed,s.options.easing,t):s.$slideTrack.animate({top:e},s.options.speed,s.options.easing,t):!1===s.cssTransitions?(!0===s.options.rtl&&(s.currentLeft=-s.currentLeft),i({animStart:s.currentLeft}).animate({animStart:e},{duration:s.options.speed,easing:s.options.easing,step:function(i){i=Math.ceil(i),!1===s.options.vertical?(o[s.animType]="translate("+i+"px, 0px)",s.$slideTrack.css(o)):(o[s.animType]="translate(0px,"+i+"px)",s.$slideTrack.css(o))},complete:function(){t&&t.call()}})):(s.applyTransition(),e=Math.ceil(e),!1===s.options.vertical?o[s.animType]="translate3d("+e+"px, 0px, 0px)":o[s.animType]="translate3d(0px,"+e+"px, 0px)",s.$slideTrack.css(o),t&&setTimeout(function(){s.disableTransition(),t.call()},s.options.speed))},e.prototype.getNavTarget=function(){var e=this,t=e.options.asNavFor;return t&&null!==t&&(t=i(t).not(e.$slider)),t},e.prototype.asNavFor=function(e){var t=this.getNavTarget();null!==t&&"object"==typeof t&&t.each(function(){var t=i(this).slick("getSlick");t.unslicked||t.slideHandler(e,!0)})},e.prototype.applyTransition=function(i){var e=this,t={};!1===e.options.fade?t[e.transitionType]=e.transformType+" "+e.options.speed+"ms "+e.options.cssEase:t[e.transitionType]="opacity "+e.options.speed+"ms "+e.options.cssEase,!1===e.options.fade?e.$slideTrack.css(t):e.$slides.eq(i).css(t)},e.prototype.autoPlay=function(){var i=this;i.autoPlayClear(),i.slideCount>i.options.slidesToShow&&(i.autoPlayTimer=setInterval(i.autoPlayIterator,i.options.autoplaySpeed))},e.prototype.autoPlayClear=function(){var i=this;i.autoPlayTimer&&clearInterval(i.autoPlayTimer)},e.prototype.autoPlayIterator=function(){var i=this,e=i.currentSlide+i.options.slidesToScroll;i.paused||i.interrupted||i.focussed||(!1===i.options.infinite&&(1===i.direction&&i.currentSlide+1===i.slideCount-1?i.direction=0:0===i.direction&&(e=i.currentSlide-i.options.slidesToScroll,i.currentSlide-1==0&&(i.direction=1))),i.slideHandler(e))},e.prototype.buildArrows=function(){var e=this;!0===e.options.arrows&&(e.$prevArrow=i(e.options.prevArrow).addClass("slick-arrow"),e.$nextArrow=i(e.options.nextArrow).addClass("slick-arrow"),e.slideCount>e.options.slidesToShow?(e.$prevArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),e.$nextArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),e.htmlExpr.test(e.options.prevArrow)&&e.$prevArrow.prependTo(e.options.appendArrows),e.htmlExpr.test(e.options.nextArrow)&&e.$nextArrow.appendTo(e.options.appendArrows),!0!==e.options.infinite&&e.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true")):e.$prevArrow.add(e.$nextArrow).addClass("slick-hidden").attr({"aria-disabled":"true",tabindex:"-1"}))},e.prototype.buildDots=function(){var e,t,o=this;if(!0===o.options.dots){for(o.$slider.addClass("slick-dotted"),t=i("<ul />").addClass(o.options.dotsClass),e=0;e<=o.getDotCount();e+=1)t.append(i("<li />").append(o.options.customPaging.call(this,o,e)));o.$dots=t.appendTo(o.options.appendDots),o.$dots.find("li").first().addClass("slick-active")}},e.prototype.buildOut=function(){var e=this;e.$slides=e.$slider.children(e.options.slide+":not(.slick-cloned)").addClass("slick-slide"),e.slideCount=e.$slides.length,e.$slides.each(function(e,t){i(t).attr("data-slick-index",e).data("originalStyling",i(t).attr("style")||"")}),e.$slider.addClass("slick-slider"),e.$slideTrack=0===e.slideCount?i('<div class="slick-track"/>').appendTo(e.$slider):e.$slides.wrapAll('<div class="slick-track"/>').parent(),e.$list=e.$slideTrack.wrap('<div class="slick-list"/>').parent(),e.$slideTrack.css("opacity",0),!0!==e.options.centerMode&&!0!==e.options.swipeToSlide||(e.options.slidesToScroll=1),i("img[data-lazy]",e.$slider).not("[src]").addClass("slick-loading"),e.setupInfinite(),e.buildArrows(),e.buildDots(),e.updateDots(),e.setSlideClasses("number"==typeof e.currentSlide?e.currentSlide:0),!0===e.options.draggable&&e.$list.addClass("draggable")},e.prototype.buildRows=function(){var i,e,t,o,s,n,r,l=this;if(o=document.createDocumentFragment(),n=l.$slider.children(),l.options.rows>1){for(r=l.options.slidesPerRow*l.options.rows,s=Math.ceil(n.length/r),i=0;i<s;i++){var d=document.createElement("div");for(e=0;e<l.options.rows;e++){var a=document.createElement("div");for(t=0;t<l.options.slidesPerRow;t++){var c=i*r+(e*l.options.slidesPerRow+t);n.get(c)&&a.appendChild(n.get(c))}d.appendChild(a)}o.appendChild(d)}l.$slider.empty().append(o),l.$slider.children().children().children().css({width:100/l.options.slidesPerRow+"%",display:"inline-block"})}},e.prototype.checkResponsive=function(e,t){var o,s,n,r=this,l=!1,d=r.$slider.width(),a=window.innerWidth||i(window).width();if("window"===r.respondTo?n=a:"slider"===r.respondTo?n=d:"min"===r.respondTo&&(n=Math.min(a,d)),r.options.responsive&&r.options.responsive.length&&null!==r.options.responsive){s=null;for(o in r.breakpoints)r.breakpoints.hasOwnProperty(o)&&(!1===r.originalSettings.mobileFirst?n<r.breakpoints[o]&&(s=r.breakpoints[o]):n>r.breakpoints[o]&&(s=r.breakpoints[o]));null!==s?null!==r.activeBreakpoint?(s!==r.activeBreakpoint||t)&&(r.activeBreakpoint=s,"unslick"===r.breakpointSettings[s]?r.unslick(s):(r.options=i.extend({},r.originalSettings,r.breakpointSettings[s]),!0===e&&(r.currentSlide=r.options.initialSlide),r.refresh(e)),l=s):(r.activeBreakpoint=s,"unslick"===r.breakpointSettings[s]?r.unslick(s):(r.options=i.extend({},r.originalSettings,r.breakpointSettings[s]),!0===e&&(r.currentSlide=r.options.initialSlide),r.refresh(e)),l=s):null!==r.activeBreakpoint&&(r.activeBreakpoint=null,r.options=r.originalSettings,!0===e&&(r.currentSlide=r.options.initialSlide),r.refresh(e),l=s),e||!1===l||r.$slider.trigger("breakpoint",[r,l])}},e.prototype.changeSlide=function(e,t){var o,s,n,r=this,l=i(e.currentTarget);switch(l.is("a")&&e.preventDefault(),l.is("li")||(l=l.closest("li")),n=r.slideCount%r.options.slidesToScroll!=0,o=n?0:(r.slideCount-r.currentSlide)%r.options.slidesToScroll,e.data.message){case"previous":s=0===o?r.options.slidesToScroll:r.options.slidesToShow-o,r.slideCount>r.options.slidesToShow&&r.slideHandler(r.currentSlide-s,!1,t);break;case"next":s=0===o?r.options.slidesToScroll:o,r.slideCount>r.options.slidesToShow&&r.slideHandler(r.currentSlide+s,!1,t);break;case"index":var d=0===e.data.index?0:e.data.index||l.index()*r.options.slidesToScroll;r.slideHandler(r.checkNavigable(d),!1,t),l.children().trigger("focus");break;default:return}},e.prototype.checkNavigable=function(i){var e,t;if(e=this.getNavigableIndexes(),t=0,i>e[e.length-1])i=e[e.length-1];else for(var o in e){if(i<e[o]){i=t;break}t=e[o]}return i},e.prototype.cleanUpEvents=function(){var e=this;e.options.dots&&null!==e.$dots&&(i("li",e.$dots).off("click.slick",e.changeSlide).off("mouseenter.slick",i.proxy(e.interrupt,e,!0)).off("mouseleave.slick",i.proxy(e.interrupt,e,!1)),!0===e.options.accessibility&&e.$dots.off("keydown.slick",e.keyHandler)),e.$slider.off("focus.slick blur.slick"),!0===e.options.arrows&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow&&e.$prevArrow.off("click.slick",e.changeSlide),e.$nextArrow&&e.$nextArrow.off("click.slick",e.changeSlide),!0===e.options.accessibility&&(e.$prevArrow&&e.$prevArrow.off("keydown.slick",e.keyHandler),e.$nextArrow&&e.$nextArrow.off("keydown.slick",e.keyHandler))),e.$list.off("touchstart.slick mousedown.slick",e.swipeHandler),e.$list.off("touchmove.slick mousemove.slick",e.swipeHandler),e.$list.off("touchend.slick mouseup.slick",e.swipeHandler),e.$list.off("touchcancel.slick mouseleave.slick",e.swipeHandler),e.$list.off("click.slick",e.clickHandler),i(document).off(e.visibilityChange,e.visibility),e.cleanUpSlideEvents(),!0===e.options.accessibility&&e.$list.off("keydown.slick",e.keyHandler),!0===e.options.focusOnSelect&&i(e.$slideTrack).children().off("click.slick",e.selectHandler),i(window).off("orientationchange.slick.slick-"+e.instanceUid,e.orientationChange),i(window).off("resize.slick.slick-"+e.instanceUid,e.resize),i("[draggable!=true]",e.$slideTrack).off("dragstart",e.preventDefault),i(window).off("load.slick.slick-"+e.instanceUid,e.setPosition)},e.prototype.cleanUpSlideEvents=function(){var e=this;e.$list.off("mouseenter.slick",i.proxy(e.interrupt,e,!0)),e.$list.off("mouseleave.slick",i.proxy(e.interrupt,e,!1))},e.prototype.cleanUpRows=function(){var i,e=this;e.options.rows>1&&((i=e.$slides.children().children()).removeAttr("style"),e.$slider.empty().append(i))},e.prototype.clickHandler=function(i){!1===this.shouldClick&&(i.stopImmediatePropagation(),i.stopPropagation(),i.preventDefault())},e.prototype.destroy=function(e){var t=this;t.autoPlayClear(),t.touchObject={},t.cleanUpEvents(),i(".slick-cloned",t.$slider).detach(),t.$dots&&t.$dots.remove(),t.$prevArrow&&t.$prevArrow.length&&(t.$prevArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),t.htmlExpr.test(t.options.prevArrow)&&t.$prevArrow.remove()),t.$nextArrow&&t.$nextArrow.length&&(t.$nextArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),t.htmlExpr.test(t.options.nextArrow)&&t.$nextArrow.remove()),t.$slides&&(t.$slides.removeClass("slick-slide slick-active slick-center slick-visible slick-current").removeAttr("aria-hidden").removeAttr("data-slick-index").each(function(){i(this).attr("style",i(this).data("originalStyling"))}),t.$slideTrack.children(this.options.slide).detach(),t.$slideTrack.detach(),t.$list.detach(),t.$slider.append(t.$slides)),t.cleanUpRows(),t.$slider.removeClass("slick-slider"),t.$slider.removeClass("slick-initialized"),t.$slider.removeClass("slick-dotted"),t.unslicked=!0,e||t.$slider.trigger("destroy",[t])},e.prototype.disableTransition=function(i){var e=this,t={};t[e.transitionType]="",!1===e.options.fade?e.$slideTrack.css(t):e.$slides.eq(i).css(t)},e.prototype.fadeSlide=function(i,e){var t=this;!1===t.cssTransitions?(t.$slides.eq(i).css({zIndex:t.options.zIndex}),t.$slides.eq(i).animate({opacity:1},t.options.speed,t.options.easing,e)):(t.applyTransition(i),t.$slides.eq(i).css({opacity:1,zIndex:t.options.zIndex}),e&&setTimeout(function(){t.disableTransition(i),e.call()},t.options.speed))},e.prototype.fadeSlideOut=function(i){var e=this;!1===e.cssTransitions?e.$slides.eq(i).animate({opacity:0,zIndex:e.options.zIndex-2},e.options.speed,e.options.easing):(e.applyTransition(i),e.$slides.eq(i).css({opacity:0,zIndex:e.options.zIndex-2}))},e.prototype.filterSlides=e.prototype.slickFilter=function(i){var e=this;null!==i&&(e.$slidesCache=e.$slides,e.unload(),e.$slideTrack.children(this.options.slide).detach(),e.$slidesCache.filter(i).appendTo(e.$slideTrack),e.reinit())},e.prototype.focusHandler=function(){var e=this;e.$slider.off("focus.slick blur.slick").on("focus.slick blur.slick","*",function(t){t.stopImmediatePropagation();var o=i(this);setTimeout(function(){e.options.pauseOnFocus&&(e.focussed=o.is(":focus"),e.autoPlay())},0)})},e.prototype.getCurrent=e.prototype.slickCurrentSlide=function(){return this.currentSlide},e.prototype.getDotCount=function(){var i=this,e=0,t=0,o=0;if(!0===i.options.infinite)if(i.slideCount<=i.options.slidesToShow)++o;else for(;e<i.slideCount;)++o,e=t+i.options.slidesToScroll,t+=i.options.slidesToScroll<=i.options.slidesToShow?i.options.slidesToScroll:i.options.slidesToShow;else if(!0===i.options.centerMode)o=i.slideCount;else if(i.options.asNavFor)for(;e<i.slideCount;)++o,e=t+i.options.slidesToScroll,t+=i.options.slidesToScroll<=i.options.slidesToShow?i.options.slidesToScroll:i.options.slidesToShow;else o=1+Math.ceil((i.slideCount-i.options.slidesToShow)/i.options.slidesToScroll);return o-1},e.prototype.getLeft=function(i){var e,t,o,s,n=this,r=0;return n.slideOffset=0,t=n.$slides.first().outerHeight(!0),!0===n.options.infinite?(n.slideCount>n.options.slidesToShow&&(n.slideOffset=n.slideWidth*n.options.slidesToShow*-1,s=-1,!0===n.options.vertical&&!0===n.options.centerMode&&(2===n.options.slidesToShow?s=-1.5:1===n.options.slidesToShow&&(s=-2)),r=t*n.options.slidesToShow*s),n.slideCount%n.options.slidesToScroll!=0&&i+n.options.slidesToScroll>n.slideCount&&n.slideCount>n.options.slidesToShow&&(i>n.slideCount?(n.slideOffset=(n.options.slidesToShow-(i-n.slideCount))*n.slideWidth*-1,r=(n.options.slidesToShow-(i-n.slideCount))*t*-1):(n.slideOffset=n.slideCount%n.options.slidesToScroll*n.slideWidth*-1,r=n.slideCount%n.options.slidesToScroll*t*-1))):i+n.options.slidesToShow>n.slideCount&&(n.slideOffset=(i+n.options.slidesToShow-n.slideCount)*n.slideWidth,r=(i+n.options.slidesToShow-n.slideCount)*t),n.slideCount<=n.options.slidesToShow&&(n.slideOffset=0,r=0),!0===n.options.centerMode&&n.slideCount<=n.options.slidesToShow?n.slideOffset=n.slideWidth*Math.floor(n.options.slidesToShow)/2-n.slideWidth*n.slideCount/2:!0===n.options.centerMode&&!0===n.options.infinite?n.slideOffset+=n.slideWidth*Math.floor(n.options.slidesToShow/2)-n.slideWidth:!0===n.options.centerMode&&(n.slideOffset=0,n.slideOffset+=n.slideWidth*Math.floor(n.options.slidesToShow/2)),e=!1===n.options.vertical?i*n.slideWidth*-1+n.slideOffset:i*t*-1+r,!0===n.options.variableWidth&&(o=n.slideCount<=n.options.slidesToShow||!1===n.options.infinite?n.$slideTrack.children(".slick-slide").eq(i):n.$slideTrack.children(".slick-slide").eq(i+n.options.slidesToShow),e=!0===n.options.rtl?o[0]?-1*(n.$slideTrack.width()-o[0].offsetLeft-o.width()):0:o[0]?-1*o[0].offsetLeft:0,!0===n.options.centerMode&&(o=n.slideCount<=n.options.slidesToShow||!1===n.options.infinite?n.$slideTrack.children(".slick-slide").eq(i):n.$slideTrack.children(".slick-slide").eq(i+n.options.slidesToShow+1),e=!0===n.options.rtl?o[0]?-1*(n.$slideTrack.width()-o[0].offsetLeft-o.width()):0:o[0]?-1*o[0].offsetLeft:0,e+=(n.$list.width()-o.outerWidth())/2)),e},e.prototype.getOption=e.prototype.slickGetOption=function(i){return this.options[i]},e.prototype.getNavigableIndexes=function(){var i,e=this,t=0,o=0,s=[];for(!1===e.options.infinite?i=e.slideCount:(t=-1*e.options.slidesToScroll,o=-1*e.options.slidesToScroll,i=2*e.slideCount);t<i;)s.push(t),t=o+e.options.slidesToScroll,o+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow;return s},e.prototype.getSlick=function(){return this},e.prototype.getSlideCount=function(){var e,t,o=this;return t=!0===o.options.centerMode?o.slideWidth*Math.floor(o.options.slidesToShow/2):0,!0===o.options.swipeToSlide?(o.$slideTrack.find(".slick-slide").each(function(s,n){if(n.offsetLeft-t+i(n).outerWidth()/2>-1*o.swipeLeft)return e=n,!1}),Math.abs(i(e).attr("data-slick-index")-o.currentSlide)||1):o.options.slidesToScroll},e.prototype.goTo=e.prototype.slickGoTo=function(i,e){this.changeSlide({data:{message:"index",index:parseInt(i)}},e)},e.prototype.init=function(e){var t=this;i(t.$slider).hasClass("slick-initialized")||(i(t.$slider).addClass("slick-initialized"),t.buildRows(),t.buildOut(),t.setProps(),t.startLoad(),t.loadSlider(),t.initializeEvents(),t.updateArrows(),t.updateDots(),t.checkResponsive(!0),t.focusHandler()),e&&t.$slider.trigger("init",[t]),!0===t.options.accessibility&&t.initADA(),t.options.autoplay&&(t.paused=!1,t.autoPlay())},e.prototype.initADA=function(){var e=this,t=Math.ceil(e.slideCount/e.options.slidesToShow),o=e.getNavigableIndexes().filter(function(i){return i>=0&&i<e.slideCount});e.$slides.add(e.$slideTrack.find(".slick-cloned")).attr({"aria-hidden":"true",tabindex:"-1"}).find("a, input, button, select").attr({tabindex:"-1"}),null!==e.$dots&&(e.$slides.not(e.$slideTrack.find(".slick-cloned")).each(function(t){var s=o.indexOf(t);i(this).attr({role:"tabpanel",id:"slick-slide"+e.instanceUid+t,tabindex:-1}),-1!==s&&i(this).attr({"aria-describedby":"slick-slide-control"+e.instanceUid+s})}),e.$dots.attr("role","tablist").find("li").each(function(s){var n=o[s];i(this).attr({role:"presentation"}),i(this).find("button").first().attr({role:"tab",id:"slick-slide-control"+e.instanceUid+s,"aria-controls":"slick-slide"+e.instanceUid+n,"aria-label":s+1+" of "+t,"aria-selected":null,tabindex:"-1"})}).eq(e.currentSlide).find("button").attr({"aria-selected":"true",tabindex:"0"}).end());for(var s=e.currentSlide,n=s+e.options.slidesToShow;s<n;s++)e.$slides.eq(s).attr("tabindex",0);e.activateADA()},e.prototype.initArrowEvents=function(){var i=this;!0===i.options.arrows&&i.slideCount>i.options.slidesToShow&&(i.$prevArrow.off("click.slick").on("click.slick",{message:"previous"},i.changeSlide),i.$nextArrow.off("click.slick").on("click.slick",{message:"next"},i.changeSlide),!0===i.options.accessibility&&(i.$prevArrow.on("keydown.slick",i.keyHandler),i.$nextArrow.on("keydown.slick",i.keyHandler)))},e.prototype.initDotEvents=function(){var e=this;!0===e.options.dots&&(i("li",e.$dots).on("click.slick",{message:"index"},e.changeSlide),!0===e.options.accessibility&&e.$dots.on("keydown.slick",e.keyHandler)),!0===e.options.dots&&!0===e.options.pauseOnDotsHover&&i("li",e.$dots).on("mouseenter.slick",i.proxy(e.interrupt,e,!0)).on("mouseleave.slick",i.proxy(e.interrupt,e,!1))},e.prototype.initSlideEvents=function(){var e=this;e.options.pauseOnHover&&(e.$list.on("mouseenter.slick",i.proxy(e.interrupt,e,!0)),e.$list.on("mouseleave.slick",i.proxy(e.interrupt,e,!1)))},e.prototype.initializeEvents=function(){var e=this;e.initArrowEvents(),e.initDotEvents(),e.initSlideEvents(),e.$list.on("touchstart.slick mousedown.slick",{action:"start"},e.swipeHandler),e.$list.on("touchmove.slick mousemove.slick",{action:"move"},e.swipeHandler),e.$list.on("touchend.slick mouseup.slick",{action:"end"},e.swipeHandler),e.$list.on("touchcancel.slick mouseleave.slick",{action:"end"},e.swipeHandler),e.$list.on("click.slick",e.clickHandler),i(document).on(e.visibilityChange,i.proxy(e.visibility,e)),!0===e.options.accessibility&&e.$list.on("keydown.slick",e.keyHandler),!0===e.options.focusOnSelect&&i(e.$slideTrack).children().on("click.slick",e.selectHandler),i(window).on("orientationchange.slick.slick-"+e.instanceUid,i.proxy(e.orientationChange,e)),i(window).on("resize.slick.slick-"+e.instanceUid,i.proxy(e.resize,e)),i("[draggable!=true]",e.$slideTrack).on("dragstart",e.preventDefault),i(window).on("load.slick.slick-"+e.instanceUid,e.setPosition),i(e.setPosition)},e.prototype.initUI=function(){var i=this;!0===i.options.arrows&&i.slideCount>i.options.slidesToShow&&(i.$prevArrow.show(),i.$nextArrow.show()),!0===i.options.dots&&i.slideCount>i.options.slidesToShow&&i.$dots.show()},e.prototype.keyHandler=function(i){var e=this;i.target.tagName.match("TEXTAREA|INPUT|SELECT")||(37===i.keyCode&&!0===e.options.accessibility?e.changeSlide({data:{message:!0===e.options.rtl?"next":"previous"}}):39===i.keyCode&&!0===e.options.accessibility&&e.changeSlide({data:{message:!0===e.options.rtl?"previous":"next"}}))},e.prototype.lazyLoad=function(){function e(e){i("img[data-lazy]",e).each(function(){var e=i(this),t=i(this).attr("data-lazy"),o=i(this).attr("data-srcset"),s=i(this).attr("data-sizes")||n.$slider.attr("data-sizes"),r=document.createElement("img");r.onload=function(){e.animate({opacity:0},100,function(){o&&(e.attr("srcset",o),s&&e.attr("sizes",s)),e.attr("src",t).animate({opacity:1},200,function(){e.removeAttr("data-lazy data-srcset data-sizes").removeClass("slick-loading")}),n.$slider.trigger("lazyLoaded",[n,e,t])})},r.onerror=function(){e.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),n.$slider.trigger("lazyLoadError",[n,e,t])},r.src=t})}var t,o,s,n=this;if(!0===n.options.centerMode?!0===n.options.infinite?s=(o=n.currentSlide+(n.options.slidesToShow/2+1))+n.options.slidesToShow+2:(o=Math.max(0,n.currentSlide-(n.options.slidesToShow/2+1)),s=n.options.slidesToShow/2+1+2+n.currentSlide):(o=n.options.infinite?n.options.slidesToShow+n.currentSlide:n.currentSlide,s=Math.ceil(o+n.options.slidesToShow),!0===n.options.fade&&(o>0&&o--,s<=n.slideCount&&s++)),t=n.$slider.find(".slick-slide").slice(o,s),"anticipated"===n.options.lazyLoad)for(var r=o-1,l=s,d=n.$slider.find(".slick-slide"),a=0;a<n.options.slidesToScroll;a++)r<0&&(r=n.slideCount-1),t=(t=t.add(d.eq(r))).add(d.eq(l)),r--,l++;e(t),n.slideCount<=n.options.slidesToShow?e(n.$slider.find(".slick-slide")):n.currentSlide>=n.slideCount-n.options.slidesToShow?e(n.$slider.find(".slick-cloned").slice(0,n.options.slidesToShow)):0===n.currentSlide&&e(n.$slider.find(".slick-cloned").slice(-1*n.options.slidesToShow))},e.prototype.loadSlider=function(){var i=this;i.setPosition(),i.$slideTrack.css({opacity:1}),i.$slider.removeClass("slick-loading"),i.initUI(),"progressive"===i.options.lazyLoad&&i.progressiveLazyLoad()},e.prototype.next=e.prototype.slickNext=function(){this.changeSlide({data:{message:"next"}})},e.prototype.orientationChange=function(){var i=this;i.checkResponsive(),i.setPosition()},e.prototype.pause=e.prototype.slickPause=function(){var i=this;i.autoPlayClear(),i.paused=!0},e.prototype.play=e.prototype.slickPlay=function(){var i=this;i.autoPlay(),i.options.autoplay=!0,i.paused=!1,i.focussed=!1,i.interrupted=!1},e.prototype.postSlide=function(e){var t=this;t.unslicked||(t.$slider.trigger("afterChange",[t,e]),t.animating=!1,t.slideCount>t.options.slidesToShow&&t.setPosition(),t.swipeLeft=null,t.options.autoplay&&t.autoPlay(),!0===t.options.accessibility&&(t.initADA(),t.options.focusOnChange&&i(t.$slides.get(t.currentSlide)).attr("tabindex",0).focus()))},e.prototype.prev=e.prototype.slickPrev=function(){this.changeSlide({data:{message:"previous"}})},e.prototype.preventDefault=function(i){i.preventDefault()},e.prototype.progressiveLazyLoad=function(e){e=e||1;var t,o,s,n,r,l=this,d=i("img[data-lazy]",l.$slider);d.length?(t=d.first(),o=t.attr("data-lazy"),s=t.attr("data-srcset"),n=t.attr("data-sizes")||l.$slider.attr("data-sizes"),(r=document.createElement("img")).onload=function(){s&&(t.attr("srcset",s),n&&t.attr("sizes",n)),t.attr("src",o).removeAttr("data-lazy data-srcset data-sizes").removeClass("slick-loading"),!0===l.options.adaptiveHeight&&l.setPosition(),l.$slider.trigger("lazyLoaded",[l,t,o]),l.progressiveLazyLoad()},r.onerror=function(){e<3?setTimeout(function(){l.progressiveLazyLoad(e+1)},500):(t.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),l.$slider.trigger("lazyLoadError",[l,t,o]),l.progressiveLazyLoad())},r.src=o):l.$slider.trigger("allImagesLoaded",[l])},e.prototype.refresh=function(e){var t,o,s=this;o=s.slideCount-s.options.slidesToShow,!s.options.infinite&&s.currentSlide>o&&(s.currentSlide=o),s.slideCount<=s.options.slidesToShow&&(s.currentSlide=0),t=s.currentSlide,s.destroy(!0),i.extend(s,s.initials,{currentSlide:t}),s.init(),e||s.changeSlide({data:{message:"index",index:t}},!1)},e.prototype.registerBreakpoints=function(){var e,t,o,s=this,n=s.options.responsive||null;if("array"===i.type(n)&&n.length){s.respondTo=s.options.respondTo||"window";for(e in n)if(o=s.breakpoints.length-1,n.hasOwnProperty(e)){for(t=n[e].breakpoint;o>=0;)s.breakpoints[o]&&s.breakpoints[o]===t&&s.breakpoints.splice(o,1),o--;s.breakpoints.push(t),s.breakpointSettings[t]=n[e].settings}s.breakpoints.sort(function(i,e){return s.options.mobileFirst?i-e:e-i})}},e.prototype.reinit=function(){var e=this;e.$slides=e.$slideTrack.children(e.options.slide).addClass("slick-slide"),e.slideCount=e.$slides.length,e.currentSlide>=e.slideCount&&0!==e.currentSlide&&(e.currentSlide=e.currentSlide-e.options.slidesToScroll),e.slideCount<=e.options.slidesToShow&&(e.currentSlide=0),e.registerBreakpoints(),e.setProps(),e.setupInfinite(),e.buildArrows(),e.updateArrows(),e.initArrowEvents(),e.buildDots(),e.updateDots(),e.initDotEvents(),e.cleanUpSlideEvents(),e.initSlideEvents(),e.checkResponsive(!1,!0),!0===e.options.focusOnSelect&&i(e.$slideTrack).children().on("click.slick",e.selectHandler),e.setSlideClasses("number"==typeof e.currentSlide?e.currentSlide:0),e.setPosition(),e.focusHandler(),e.paused=!e.options.autoplay,e.autoPlay(),e.$slider.trigger("reInit",[e])},e.prototype.resize=function(){var e=this;i(window).width()!==e.windowWidth&&(clearTimeout(e.windowDelay),e.windowDelay=window.setTimeout(function(){e.windowWidth=i(window).width(),e.checkResponsive(),e.unslicked||e.setPosition()},50))},e.prototype.removeSlide=e.prototype.slickRemove=function(i,e,t){var o=this;if(i="boolean"==typeof i?!0===(e=i)?0:o.slideCount-1:!0===e?--i:i,o.slideCount<1||i<0||i>o.slideCount-1)return!1;o.unload(),!0===t?o.$slideTrack.children().remove():o.$slideTrack.children(this.options.slide).eq(i).remove(),o.$slides=o.$slideTrack.children(this.options.slide),o.$slideTrack.children(this.options.slide).detach(),o.$slideTrack.append(o.$slides),o.$slidesCache=o.$slides,o.reinit()},e.prototype.setCSS=function(i){var e,t,o=this,s={};!0===o.options.rtl&&(i=-i),e="left"==o.positionProp?Math.ceil(i)+"px":"0px",t="top"==o.positionProp?Math.ceil(i)+"px":"0px",s[o.positionProp]=i,!1===o.transformsEnabled?o.$slideTrack.css(s):(s={},!1===o.cssTransitions?(s[o.animType]="translate("+e+", "+t+")",o.$slideTrack.css(s)):(s[o.animType]="translate3d("+e+", "+t+", 0px)",o.$slideTrack.css(s)))},e.prototype.setDimensions=function(){var i=this;!1===i.options.vertical?!0===i.options.centerMode&&i.$list.css({padding:"0px "+i.options.centerPadding}):(i.$list.height(i.$slides.first().outerHeight(!0)*i.options.slidesToShow),!0===i.options.centerMode&&i.$list.css({padding:i.options.centerPadding+" 0px"})),i.listWidth=i.$list.width(),i.listHeight=i.$list.height(),!1===i.options.vertical&&!1===i.options.variableWidth?(i.slideWidth=Math.ceil(i.listWidth/i.options.slidesToShow),i.$slideTrack.width(Math.ceil(i.slideWidth*i.$slideTrack.children(".slick-slide").length))):!0===i.options.variableWidth?i.$slideTrack.width(5e3*i.slideCount):(i.slideWidth=Math.ceil(i.listWidth),i.$slideTrack.height(Math.ceil(i.$slides.first().outerHeight(!0)*i.$slideTrack.children(".slick-slide").length)));var e=i.$slides.first().outerWidth(!0)-i.$slides.first().width();!1===i.options.variableWidth&&i.$slideTrack.children(".slick-slide").width(i.slideWidth-e)},e.prototype.setFade=function(){var e,t=this;t.$slides.each(function(o,s){e=t.slideWidth*o*-1,!0===t.options.rtl?i(s).css({position:"relative",right:e,top:0,zIndex:t.options.zIndex-2,opacity:0}):i(s).css({position:"relative",left:e,top:0,zIndex:t.options.zIndex-2,opacity:0})}),t.$slides.eq(t.currentSlide).css({zIndex:t.options.zIndex-1,opacity:1})},e.prototype.setHeight=function(){var i=this;if(1===i.options.slidesToShow&&!0===i.options.adaptiveHeight&&!1===i.options.vertical){var e=i.$slides.eq(i.currentSlide).outerHeight(!0);i.$list.css("height",e)}},e.prototype.setOption=e.prototype.slickSetOption=function(){var e,t,o,s,n,r=this,l=!1;if("object"===i.type(arguments[0])?(o=arguments[0],l=arguments[1],n="multiple"):"string"===i.type(arguments[0])&&(o=arguments[0],s=arguments[1],l=arguments[2],"responsive"===arguments[0]&&"array"===i.type(arguments[1])?n="responsive":void 0!==arguments[1]&&(n="single")),"single"===n)r.options[o]=s;else if("multiple"===n)i.each(o,function(i,e){r.options[i]=e});else if("responsive"===n)for(t in s)if("array"!==i.type(r.options.responsive))r.options.responsive=[s[t]];else{for(e=r.options.responsive.length-1;e>=0;)r.options.responsive[e].breakpoint===s[t].breakpoint&&r.options.responsive.splice(e,1),e--;r.options.responsive.push(s[t])}l&&(r.unload(),r.reinit())},e.prototype.setPosition=function(){var i=this;i.setDimensions(),i.setHeight(),!1===i.options.fade?i.setCSS(i.getLeft(i.currentSlide)):i.setFade(),i.$slider.trigger("setPosition",[i])},e.prototype.setProps=function(){var i=this,e=document.body.style;i.positionProp=!0===i.options.vertical?"top":"left","top"===i.positionProp?i.$slider.addClass("slick-vertical"):i.$slider.removeClass("slick-vertical"),void 0===e.WebkitTransition&&void 0===e.MozTransition&&void 0===e.msTransition||!0===i.options.useCSS&&(i.cssTransitions=!0),i.options.fade&&("number"==typeof i.options.zIndex?i.options.zIndex<3&&(i.options.zIndex=3):i.options.zIndex=i.defaults.zIndex),void 0!==e.OTransform&&(i.animType="OTransform",i.transformType="-o-transform",i.transitionType="OTransition",void 0===e.perspectiveProperty&&void 0===e.webkitPerspective&&(i.animType=!1)),void 0!==e.MozTransform&&(i.animType="MozTransform",i.transformType="-moz-transform",i.transitionType="MozTransition",void 0===e.perspectiveProperty&&void 0===e.MozPerspective&&(i.animType=!1)),void 0!==e.webkitTransform&&(i.animType="webkitTransform",i.transformType="-webkit-transform",i.transitionType="webkitTransition",void 0===e.perspectiveProperty&&void 0===e.webkitPerspective&&(i.animType=!1)),void 0!==e.msTransform&&(i.animType="msTransform",i.transformType="-ms-transform",i.transitionType="msTransition",void 0===e.msTransform&&(i.animType=!1)),void 0!==e.transform&&!1!==i.animType&&(i.animType="transform",i.transformType="transform",i.transitionType="transition"),i.transformsEnabled=i.options.useTransform&&null!==i.animType&&!1!==i.animType},e.prototype.setSlideClasses=function(i){var e,t,o,s,n=this;if(t=n.$slider.find(".slick-slide").removeClass("slick-active slick-center slick-current").attr("aria-hidden","true"),n.$slides.eq(i).addClass("slick-current"),!0===n.options.centerMode){var r=n.options.slidesToShow%2==0?1:0;e=Math.floor(n.options.slidesToShow/2),!0===n.options.infinite&&(i>=e&&i<=n.slideCount-1-e?n.$slides.slice(i-e+r,i+e+1).addClass("slick-active").attr("aria-hidden","false"):(o=n.options.slidesToShow+i,t.slice(o-e+1+r,o+e+2).addClass("slick-active").attr("aria-hidden","false")),0===i?t.eq(t.length-1-n.options.slidesToShow).addClass("slick-center"):i===n.slideCount-1&&t.eq(n.options.slidesToShow).addClass("slick-center")),n.$slides.eq(i).addClass("slick-center")}else i>=0&&i<=n.slideCount-n.options.slidesToShow?n.$slides.slice(i,i+n.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"):t.length<=n.options.slidesToShow?t.addClass("slick-active").attr("aria-hidden","false"):(s=n.slideCount%n.options.slidesToShow,o=!0===n.options.infinite?n.options.slidesToShow+i:i,n.options.slidesToShow==n.options.slidesToScroll&&n.slideCount-i<n.options.slidesToShow?t.slice(o-(n.options.slidesToShow-s),o+s).addClass("slick-active").attr("aria-hidden","false"):t.slice(o,o+n.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"));"ondemand"!==n.options.lazyLoad&&"anticipated"!==n.options.lazyLoad||n.lazyLoad()},e.prototype.setupInfinite=function(){var e,t,o,s=this;if(!0===s.options.fade&&(s.options.centerMode=!1),!0===s.options.infinite&&!1===s.options.fade&&(t=null,s.slideCount>s.options.slidesToShow)){for(o=!0===s.options.centerMode?s.options.slidesToShow+1:s.options.slidesToShow,e=s.slideCount;e>s.slideCount-o;e-=1)t=e-1,i(s.$slides[t]).clone(!0).attr("id","").attr("data-slick-index",t-s.slideCount).prependTo(s.$slideTrack).addClass("slick-cloned");for(e=0;e<o+s.slideCount;e+=1)t=e,i(s.$slides[t]).clone(!0).attr("id","").attr("data-slick-index",t+s.slideCount).appendTo(s.$slideTrack).addClass("slick-cloned");s.$slideTrack.find(".slick-cloned").find("[id]").each(function(){i(this).attr("id","")})}},e.prototype.interrupt=function(i){var e=this;i||e.autoPlay(),e.interrupted=i},e.prototype.selectHandler=function(e){var t=this,o=i(e.target).is(".slick-slide")?i(e.target):i(e.target).parents(".slick-slide"),s=parseInt(o.attr("data-slick-index"));s||(s=0),t.slideCount<=t.options.slidesToShow?t.slideHandler(s,!1,!0):t.slideHandler(s)},e.prototype.slideHandler=function(i,e,t){var o,s,n,r,l,d=null,a=this;if(e=e||!1,!(!0===a.animating&&!0===a.options.waitForAnimate||!0===a.options.fade&&a.currentSlide===i))if(!1===e&&a.asNavFor(i),o=i,d=a.getLeft(o),r=a.getLeft(a.currentSlide),a.currentLeft=null===a.swipeLeft?r:a.swipeLeft,!1===a.options.infinite&&!1===a.options.centerMode&&(i<0||i>a.getDotCount()*a.options.slidesToScroll))!1===a.options.fade&&(o=a.currentSlide,!0!==t?a.animateSlide(r,function(){a.postSlide(o)}):a.postSlide(o));else if(!1===a.options.infinite&&!0===a.options.centerMode&&(i<0||i>a.slideCount-a.options.slidesToScroll))!1===a.options.fade&&(o=a.currentSlide,!0!==t?a.animateSlide(r,function(){a.postSlide(o)}):a.postSlide(o));else{if(a.options.autoplay&&clearInterval(a.autoPlayTimer),s=o<0?a.slideCount%a.options.slidesToScroll!=0?a.slideCount-a.slideCount%a.options.slidesToScroll:a.slideCount+o:o>=a.slideCount?a.slideCount%a.options.slidesToScroll!=0?0:o-a.slideCount:o,a.animating=!0,a.$slider.trigger("beforeChange",[a,a.currentSlide,s]),n=a.currentSlide,a.currentSlide=s,a.setSlideClasses(a.currentSlide),a.options.asNavFor&&(l=(l=a.getNavTarget()).slick("getSlick")).slideCount<=l.options.slidesToShow&&l.setSlideClasses(a.currentSlide),a.updateDots(),a.updateArrows(),!0===a.options.fade)return!0!==t?(a.fadeSlideOut(n),a.fadeSlide(s,function(){a.postSlide(s)})):a.postSlide(s),void a.animateHeight();!0!==t?a.animateSlide(d,function(){a.postSlide(s)}):a.postSlide(s)}},e.prototype.startLoad=function(){var i=this;!0===i.options.arrows&&i.slideCount>i.options.slidesToShow&&(i.$prevArrow.hide(),i.$nextArrow.hide()),!0===i.options.dots&&i.slideCount>i.options.slidesToShow&&i.$dots.hide(),i.$slider.addClass("slick-loading")},e.prototype.swipeDirection=function(){var i,e,t,o,s=this;return i=s.touchObject.startX-s.touchObject.curX,e=s.touchObject.startY-s.touchObject.curY,t=Math.atan2(e,i),(o=Math.round(180*t/Math.PI))<0&&(o=360-Math.abs(o)),o<=45&&o>=0?!1===s.options.rtl?"left":"right":o<=360&&o>=315?!1===s.options.rtl?"left":"right":o>=135&&o<=225?!1===s.options.rtl?"right":"left":!0===s.options.verticalSwiping?o>=35&&o<=135?"down":"up":"vertical"},e.prototype.swipeEnd=function(i){var e,t,o=this;if(o.dragging=!1,o.swiping=!1,o.scrolling)return o.scrolling=!1,!1;if(o.interrupted=!1,o.shouldClick=!(o.touchObject.swipeLength>10),void 0===o.touchObject.curX)return!1;if(!0===o.touchObject.edgeHit&&o.$slider.trigger("edge",[o,o.swipeDirection()]),o.touchObject.swipeLength>=o.touchObject.minSwipe){switch(t=o.swipeDirection()){case"left":case"down":e=o.options.swipeToSlide?o.checkNavigable(o.currentSlide+o.getSlideCount()):o.currentSlide+o.getSlideCount(),o.currentDirection=0;break;case"right":case"up":e=o.options.swipeToSlide?o.checkNavigable(o.currentSlide-o.getSlideCount()):o.currentSlide-o.getSlideCount(),o.currentDirection=1}"vertical"!=t&&(o.slideHandler(e),o.touchObject={},o.$slider.trigger("swipe",[o,t]))}else o.touchObject.startX!==o.touchObject.curX&&(o.slideHandler(o.currentSlide),o.touchObject={})},e.prototype.swipeHandler=function(i){var e=this;if(!(!1===e.options.swipe||"ontouchend"in document&&!1===e.options.swipe||!1===e.options.draggable&&-1!==i.type.indexOf("mouse")))switch(e.touchObject.fingerCount=i.originalEvent&&void 0!==i.originalEvent.touches?i.originalEvent.touches.length:1,e.touchObject.minSwipe=e.listWidth/e.options.touchThreshold,!0===e.options.verticalSwiping&&(e.touchObject.minSwipe=e.listHeight/e.options.touchThreshold),i.data.action){case"start":e.swipeStart(i);break;case"move":e.swipeMove(i);break;case"end":e.swipeEnd(i)}},e.prototype.swipeMove=function(i){var e,t,o,s,n,r,l=this;return n=void 0!==i.originalEvent?i.originalEvent.touches:null,!(!l.dragging||l.scrolling||n&&1!==n.length)&&(e=l.getLeft(l.currentSlide),l.touchObject.curX=void 0!==n?n[0].pageX:i.clientX,l.touchObject.curY=void 0!==n?n[0].pageY:i.clientY,l.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(l.touchObject.curX-l.touchObject.startX,2))),r=Math.round(Math.sqrt(Math.pow(l.touchObject.curY-l.touchObject.startY,2))),!l.options.verticalSwiping&&!l.swiping&&r>4?(l.scrolling=!0,!1):(!0===l.options.verticalSwiping&&(l.touchObject.swipeLength=r),t=l.swipeDirection(),void 0!==i.originalEvent&&l.touchObject.swipeLength>4&&(l.swiping=!0,i.preventDefault()),s=(!1===l.options.rtl?1:-1)*(l.touchObject.curX>l.touchObject.startX?1:-1),!0===l.options.verticalSwiping&&(s=l.touchObject.curY>l.touchObject.startY?1:-1),o=l.touchObject.swipeLength,l.touchObject.edgeHit=!1,!1===l.options.infinite&&(0===l.currentSlide&&"right"===t||l.currentSlide>=l.getDotCount()&&"left"===t)&&(o=l.touchObject.swipeLength*l.options.edgeFriction,l.touchObject.edgeHit=!0),!1===l.options.vertical?l.swipeLeft=e+o*s:l.swipeLeft=e+o*(l.$list.height()/l.listWidth)*s,!0===l.options.verticalSwiping&&(l.swipeLeft=e+o*s),!0!==l.options.fade&&!1!==l.options.touchMove&&(!0===l.animating?(l.swipeLeft=null,!1):void l.setCSS(l.swipeLeft))))},e.prototype.swipeStart=function(i){var e,t=this;if(t.interrupted=!0,1!==t.touchObject.fingerCount||t.slideCount<=t.options.slidesToShow)return t.touchObject={},!1;void 0!==i.originalEvent&&void 0!==i.originalEvent.touches&&(e=i.originalEvent.touches[0]),t.touchObject.startX=t.touchObject.curX=void 0!==e?e.pageX:i.clientX,t.touchObject.startY=t.touchObject.curY=void 0!==e?e.pageY:i.clientY,t.dragging=!0},e.prototype.unfilterSlides=e.prototype.slickUnfilter=function(){var i=this;null!==i.$slidesCache&&(i.unload(),i.$slideTrack.children(this.options.slide).detach(),i.$slidesCache.appendTo(i.$slideTrack),i.reinit())},e.prototype.unload=function(){var e=this;i(".slick-cloned",e.$slider).remove(),e.$dots&&e.$dots.remove(),e.$prevArrow&&e.htmlExpr.test(e.options.prevArrow)&&e.$prevArrow.remove(),e.$nextArrow&&e.htmlExpr.test(e.options.nextArrow)&&e.$nextArrow.remove(),e.$slides.removeClass("slick-slide slick-active slick-visible slick-current").attr("aria-hidden","true").css("width","")},e.prototype.unslick=function(i){var e=this;e.$slider.trigger("unslick",[e,i]),e.destroy()},e.prototype.updateArrows=function(){var i=this;Math.floor(i.options.slidesToShow/2),!0===i.options.arrows&&i.slideCount>i.options.slidesToShow&&!i.options.infinite&&(i.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false"),i.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false"),0===i.currentSlide?(i.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true"),i.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false")):i.currentSlide>=i.slideCount-i.options.slidesToShow&&!1===i.options.centerMode?(i.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),i.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")):i.currentSlide>=i.slideCount-1&&!0===i.options.centerMode&&(i.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),i.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")))},e.prototype.updateDots=function(){var i=this;null!==i.$dots&&(i.$dots.find("li").removeClass("slick-active").end(),i.$dots.find("li").eq(Math.floor(i.currentSlide/i.options.slidesToScroll)).addClass("slick-active"))},e.prototype.visibility=function(){var i=this;i.options.autoplay&&(document[i.hidden]?i.interrupted=!0:i.interrupted=!1)},i.fn.slick=function(){var i,t,o=this,s=arguments[0],n=Array.prototype.slice.call(arguments,1),r=o.length;for(i=0;i<r;i++)if("object"==typeof s||void 0===s?o[i].slick=new e(o[i],s):t=o[i].slick[s].apply(o[i].slick,n),void 0!==t)return t;return o}});
(function(E){var r,w,C,x,F,G,D,H,B,I,J,K,L,M,N;r=function(t){function f(a){if(!d.test(a))throw Error();a=a.split(".");for(var b=window,c=0;c<a.length;c++)b=b[a[c]];return b}function g(a,b){return"string"===typeof a&&"string"===typeof b&&a.length>=b.length?a.substr(0,b.length)===b:!1}var c=/^\/\//,e=/^[^:]+:/,b=/^https?:\/\/[^\/]+/,a=/ (?:MSIE |Trident\/7\.0;.* rv:)(\d+)/,d=/^[^.]+(?:\.[^.]+)*$/;return{T:t,startsWith:g,A:function(a){for(var b=0;b<a.length;b++)try{var d=f(a[b]);if(d)return d}catch(c){}return""},
a:f,M:function(a){c.test(a)&&(a=document.URL.match(e)[0]+a);return(a=a.match(b))&&!g(document.URL,a[0])?!1:!0},C:function(){var b=navigator.userAgent.match(a);return b?parseInt(b[1]):null},D:function(){return window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")},N:function(a,b,d){var c=!1,e=!1,f=!1;try{var g=null,q=!1,y=function(){a.onreadystatechange=null;null!==g&&(clearTimeout(g),g=null);q=!0};a.onreadystatechange=function(){q||4!=a.readyState||(y(),a=null,d(e,f))};0!==
b&&(g=setTimeout(function(){q||(e=!0,y(),a.abort(),a=null,d(e,f))},b));a.send();c=!0}catch(z){f=!0,y(),a=null}finally{c||d(e,f)}},F:function(a,b,d,c){"boolean"===typeof c&&c?b=a.split(b):(c=a.indexOf(b),b=-1===c?[a]:[a.substring(0,c),a.substring(c+b.length)]);a=b[0];for(c=1;c<b.length;c++)a+=d+b[c];return a},qa:function(a){if(!a)return 0;if(Array.prototype.reduce)return a.split("").reduce(function(a,b){a=(a<<5)-a+b.charCodeAt(0);return a&a},0);for(var b=0,d=0,c=a.length;d<c;d++)b=(b<<5)-b+a.charCodeAt(d),
b=b&b;return b},H:function(a){return 0<=window.navigator.userAgent.indexOf(a)}}}(function(t){var f;try{f=document.getElementById(t)}catch(a){}if(null===f||"undefined"===typeof f)try{f=document.getElementsByName(t)[0]}catch(a){}if(null===f||"undefined"===typeof f)for(var g=0;g<document.forms.length;g++)for(var c=document.forms[g],e=0;e<c.elements.length;e++){var b=c[e];if(b.name===t||b.id===t)return b}return f});N=function(){return function(t){t=("0000000"+((t/1E3|0)>>>0).toString(16)).slice(-8)+"-";
for(var f=9;36>f;f++){var g;13===f||18===f||23===f?g="-":14===f?g="4":(g=16*Math.random()|0,19===f&&(g=g&3|8),g=g.toString(16));t+=g}return t}}();w={m:[],j:[],l:2E3,w:null,O:[],v:null};C=function f(){function g(d,c,e){if(0==b)for(b=d,a=e;c.length;)c.shift().call(l,e)}function c(b,d){setTimeout(function(){try{var c=d.call(null,a);c instanceof Object&&c.then&&c.then instanceof Function?c.then(b.B,b.reject):b.B(c)}catch(e){b.reject(e)}},0)}function e(a,e,f){b==f?c(a,e):(1==f?d:h).push(function(){c(a,
e)})}var b=0,a,d=[],h=[],l=this;this.B=function(a){g(1,d,a)};this.reject=function(a){g(-1,h,a)};this.then=function(a,b){var d=new f;a instanceof Function&&e(d,a,1);b instanceof Function&&e(d,b,-1);return d}};x=function(f){return{ua:f,ta:function(g){var c=[];return{start:function(e){for(var b=0;b<g.length;b++)c.push(f(g[b]));if(c.length)for(var a=c.length,d=function(){e.g()||0<a&&0===--a&&e.b()},b=0;b<c.length;b++)c[b].W(d);else e.b()},finish:function(e){if(e.P())for(e=0;e<c.length;e++)c[e].U()}}}}}(function(f){return function(g){function c(){null!==
h&&(clearTimeout(h),h=null);if("function"===typeof g.finish)try{g.finish(e)}catch(d){}b=!0;a.B()}var e,b=!1,a=new f,d=!1,h=null,l=!1;e={g:function(){return b},b:function(){b||c()},W:function(b){a.then(function(){b()})},U:function(){b||(d=!0,c())},P:function(){return d},ya:function(){return l}};0<g.u&&(h=setTimeout(function(){h=null;b||(l=!0,c())},g.u));try{g.start(e)}catch(k){e.b()}return e}}(C));F=function(f,g){function c(a){if(!a)return e=4,null;if(a=!f.M(a)){var b=f.C();if(null!==b&&10>b)return e=
8,null}return a}var e,b,a;e=3;a=null;b="";return{o:function(){var d=g.m[5],h=null;return{start:function(l){e=3;a=null;b="";var k=!1;try{var n=c(d);if(null!==n){try{h=f.D()}catch(m){e=9;return}try{h.open("GET",d,!0)}catch(m){e=1;return}f.N(h,g.l,function(d,c){try{if(!l.g())if(d)e=2;else if(c)e=6;else{var f=h;e=f.status;200===f.status&&((b=f.getResponseHeader("ETag")||"")?b=b.replace(/"/g,""):e=7);b&&(a=n)}}catch(g){e=6}finally{l.b()}});k=!0}}catch(m){e=6}finally{k||l.b()}},finish:function(a){a.P()&&
(e=5);h=null}}},ha:function(){return b},K:function(){return a},L:function(){return e}}}(r,w,x);G=function(f,g){function c(a){return f.M(a)||(a=f.C(),8!==a&&9!==a)?!1:!0}function e(a,b,c){function e(){a&&!g&&(a.onload=a.onerror=a.ontimeout=null,g=!0);a=null;c(f)}var f=!1,g=!1,m=!1;try{a.onload=function(){f=!0;e()},a.onerror=a.ontimeout=e,a.timeout=b,a.send(),m=!0}catch(A){}finally{m||e()}}var b=null;return{o:function(){return{start:function(a){try{var d=g.m[1],h=g.m[2];if(d&&h){var l;(function(a,b){c(a)?
(l=new XDomainRequest,l.open("POST",a),e(l,g.l,b)):(l=f.D(),l.open("POST",a,!0),f.N(l,g.l,function(){b(200===l.status)}))})(d,function(d){var c=new Date;if(!a.g()){try{if(d&&l.responseText){var e=l.responseText.replace(/[^ -~](?:.|\n)*/,"");f.T(h).value=e;b=c}}catch(g){}a.b()}})}else a.b()}catch(k){a.b()}}}},ga:function(){return b}}}(r,w,x);D=function(){return{h:[],G:[],X:function(f){return{Y:f,I:[],wa:function(f,c){for(var e=0;e<c.length;e++)this.I[f+e]=c[e]},V:function(f){this.wa(this.I.length,
f)},Z:function(){for(var f=this.I,c=this.Y.toString(),e=0;e<f.length;e++)try{for(var b=c+="&",a=""+f[e](),d="",h=/[%&]+/g,l=0,k=void 0;k=h.exec(a);l=h.lastIndex)d+=a.substring(l,k.index)+encodeURIComponent(k[0]);d+=a.substring(l);c=b+d}catch(n){}return c}}}}}();H=function(f,g){var c=!1,e=!1;return{ba:function(){return{start:function(b){c=!1;try{(window.requestFileSystem||window.webkitRequestFileSystem)(0,0,function(){b.b()},function(){b.g()||(c=!0,b.b())})}catch(a){b.b()}},u:g.l}},$:function(){var b=
window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,a;return{start:function(d){e=!1;try{a=b.open("pbtest"),a.onsuccess=function(){if(!d.g())try{a.result.close()}finally{d.b()}},a.onerror=function(){d.g()||(e=!0,d.b())}}catch(c){d.b()}},finish:function(){a&&(a=a.onsuccess=a.onerror=null);b&&b.deleteDatabase("pbtest")},u:g.l}},J:function(){var b;if(!(b=c||e))a:{if(b=window.localStorage)try{b.setItem("pbtest",1),b.removeItem("pbtest")}catch(a){b=!0;break a}b=!1}b||window.indexedDB||
(b=f.C(),b=null!==b&&10<=b||f.H("Edge/"));b||(b=f.H("Focus/"));return b}}}(r,w,x);B=function(f){var g=null;return{aa:function(){var c,e=null;return{start:function(b){g=null;try{c=document.createElement("div"),c.setAttribute("class","pub_300x250 pub_300x250m pub_728x90 text-ad textAd text_ad text_ads text-ads text-ad-links adsbox"),c.setAttribute("style",f.F("width:1px;height:1px;position:absolute;left:-10000px;right:-1000px;",";","!important;",!0)),document.body.appendChild(c),e=setTimeout(function(){e=
null;if(!b.g())try{g=!(c&&c.parentNode&&!c.getAttribute("abp")&&c.offsetParent&&0!==c.offsetWidth&&0!==c.offsetHeight&&0!==c.clientWidth&&0!==c.clientHeight)}finally{b.b()}},100)}catch(a){b.b()}},finish:function(){c&&(c.parentNode&&c.parentNode.removeChild(c),c=null);null!==e&&(clearTimeout(e),e=null)}}},J:function(){return g}}}(r,w,x);I=function(){function f(b){var a;37>b?11>b?b?a=b+47:a=46:a=b+54:38>b?a=95:a=b+59;return String.fromCharCode(a)}function g(b){function a(a){e=e<<a[0]|a[1];for(g+=a[0];6<=
g;)a=e>>g-6&63,d+=f(a),g-=6,e^=a<<g}var d="",e=0,g=0;a([6,(b.length&7)<<3|0]);a([6,b.length&56|1]);for(var k=0;k<b.length;k++){if(void 0===c[b.charCodeAt(k)])return;a(c[b.charCodeAt(k)])}a(c[0]);0<g&&a([6-g,0]);return d}var c={1:[4,15],110:[8,239],74:[8,238],57:[7,118],56:[7,117],71:[8,233],25:[8,232],101:[5,28],104:[7,111],4:[7,110],105:[6,54],5:[7,107],109:[7,106],103:[9,423],82:[9,422],26:[8,210],6:[7,104],46:[6,51],97:[6,50],111:[6,49],7:[7,97],45:[7,96],59:[5,23],15:[7,91],11:[8,181],72:[8,180],
27:[8,179],28:[8,178],16:[7,88],88:[10,703],113:[11,1405],89:[12,2809],107:[13,5617],90:[14,11233],42:[15,22465],64:[16,44929],0:[16,44928],81:[9,350],29:[8,174],118:[8,173],30:[8,172],98:[8,171],12:[8,170],99:[7,84],117:[6,41],112:[6,40],102:[9,319],68:[9,318],31:[8,158],100:[7,78],84:[6,38],55:[6,37],17:[7,73],8:[7,72],9:[7,71],77:[7,70],18:[7,69],65:[7,68],48:[6,33],116:[6,32],10:[7,63],121:[8,125],78:[8,124],80:[7,61],69:[7,60],119:[7,59],13:[8,117],79:[8,116],19:[7,57],67:[7,56],114:[6,27],83:[6,
26],115:[6,25],14:[6,24],122:[8,95],95:[8,94],76:[7,46],24:[7,45],37:[7,44],50:[5,10],51:[5,9],108:[6,17],22:[7,33],120:[8,65],66:[8,64],21:[7,31],106:[7,30],47:[6,14],53:[5,6],49:[5,5],86:[8,39],85:[8,38],23:[7,18],75:[7,17],20:[7,16],2:[5,3],73:[8,23],43:[9,45],87:[9,44],70:[7,10],3:[6,4],52:[5,1],54:[5,0]},e="%20 ;;; %3B %2C und fin ed; %28 %29 %3A /53 ike Web 0; .0 e; on il ck 01 in Mo fa 00 32 la .1 ri it %u le".split(" ");return{R:function(b){for(var a=b,d=0;e[d];d++)a=a.split(e[d]).join(String.fromCharCode(d+
1));a=g(a);if(void 0===a)return b;for(var d=65535,c=0;c<b.length;c++)d=(d>>>8|d<<8)&65535,d^=b.charCodeAt(c)&255,d^=(d&255)>>4,d^=d<<12&65535,d^=(d&255)<<5&65535;d&=65535;b=""+f(d>>>12);b+=f(d>>>6&63);b+=f(d&63);return a+b}}}();J=function(f){function g(){if(!q){q=A;try{isNaN(screen.logicalXDPI)||isNaN(screen.systemXDPI)?window.navigator.msMaxTouchPoints?q=n:!window.chrome||window.opera||f.H(" Opera")?0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")?q=l:"orientation"in window&&
"webkitRequestAnimationFrame"in window?q=h:"webkitRequestAnimationFrame"in window?q=d:f.H("Opera")?q=e:window.devicePixelRatio?q=b:.001<a().zoom&&(q=a):q=k:q=m}catch(c){}}return q()}function c(){function a(c,d,e){var f=(c+d)/2;return 0>=e||1E-4>d-c?f:b("(min--moz-device-pixel-ratio:"+f+")").matches?a(f,d,e-1):a(c,f,e-1)}var b,d,c,e;window.matchMedia?b=window.matchMedia:(d=document.getElementsByTagName("head")[0],c=document.createElement("style"),d.appendChild(c),e=document.createElement("div"),e.className=
"mediaQueryBinarySearch",e.style.display="none",document.body.appendChild(e),b=function(a){c.sheet.insertRule("@media "+a+"{.mediaQueryBinarySearch {text-decoration: underline} }",0);a="underline"==getComputedStyle(e,null).textDecoration;c.sheet.deleteRule(0);return{matches:a}});var f=a(0,10,20);e&&(d.removeChild(c),document.body.removeChild(e));return f}function e(){var a=window.top.outerWidth/window.top.innerWidth,a=Math.round(100*a)/100;return{zoom:a,i:a*u()}}function b(){return{zoom:a().zoom,
i:u()}}function a(){var a=c(),a=Math.round(100*a)/100;return{zoom:a,i:a}}function d(){var a=document.createElement("div");a.innerHTML="1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>0";a.setAttribute("style","font: 100px/1em sans-serif; -webkit-text-size-adjust: none; text-size-adjust: none; height: auto; width: 1em; padding: 0; overflow: visible;".replace(/;/g," !important;"));var b=document.createElement("div");b.setAttribute("style","width:0; height:0; overflow:hidden; visibility:hidden; position: absolute;".replace(/;/g,
" !important;"));b.appendChild(a);document.body.appendChild(b);a=1E3/a.clientHeight;a=Math.round(100*a)/100;document.body.removeChild(b);return{zoom:a,i:a*u()}}function h(){var a=(90==Math.abs(window.orientation)?screen.height:screen.width)/window.innerWidth;return{zoom:a,i:a*u()}}function l(){var a=Math.round(document.documentElement.clientWidth/window.innerWidth*100)/100;return{zoom:a,i:a*u()}}function k(){var a=Math.round(window.outerWidth/window.innerWidth*100)/100;return{zoom:a,i:a*u()}}function n(){var a=
Math.round(document.documentElement.offsetHeight/window.innerHeight*100)/100;return{zoom:a,i:a*u()}}function m(){var a=Math.round(screen.deviceXDPI/screen.logicalXDPI*100)/100;return{zoom:a,i:a*u()}}function A(){return{zoom:1,i:1}}function u(){return window.devicePixelRatio||1}var q;return{zoom:function(){return g().zoom},S:function(){return g().i}}}(r);K=function(){var f={Flash:["ShockwaveFlash.ShockwaveFlash",function(c){return c.getVariable("$version")}],Director:["SWCtl.SWCtl",function(c){return c.ShockwaveVersion("")}]},
g;try{g=document.createElement("span"),"undefined"!==typeof g.addBehavior&&g.addBehavior("#default#clientCaps")}catch(e){}var c={};return{f:function(c){var b="";try{"undefined"!==typeof g.getComponentVersion&&(b=g.getComponentVersion(c,"ComponentID"))}catch(a){c=a.message.length,b=escape(a.message.substr(0,40<c?40:c))}return b},s:function(e){return c[e]},da:function(){for(var e="Acrobat;Flash;QuickTime;Java Plug-in;Director;Office".split(";"),b=0;b<e.length;b++){var a=e[b],d=a,g=a,a="";try{if(navigator.plugins&&
navigator.plugins.length)for(var l=new RegExp(g+".* ([0-9._]+)"),g=0;g<navigator.plugins.length;g++){var k=l.exec(navigator.plugins[g].name);null===k&&(k=l.exec(navigator.plugins[g].description));k&&(a=k[1])}else if(window.ActiveXObject&&f[g])try{var n=new ActiveXObject(f[g][0]),a=f[g][1](n)}catch(m){a=""}}catch(m){a=m.message}c[d]=a}},c:function(c){try{if(navigator.plugins&&navigator.plugins.length)for(var b=0;b<navigator.plugins.length;b++){var a=navigator.plugins[b];if(0<=a.name.indexOf(c))return a.name+
(a.description?"|"+a.description:"")}}catch(d){}return""},ja:function(){var c="";if(navigator.plugins&&navigator.plugins.length)for(var b=0;b<navigator.plugins.length;b++){var a=navigator.plugins[b];a&&(c+=a.name+a.filename+a.description+a.version)}return c}}}();L=function(f,g){function c(b){a=b.status;var c=["","",""];try{l=b.getResponseHeader("cache-control");for(var e=b.getAllResponseHeaders().toLowerCase().split("\n"),g=["warning","x-cache","via"],h=0;h<g.length;h++)for(var v=0;v<e.length;v++)if(f.startsWith(e[v],
g[h]+":")){c[h]=b.getResponseHeader(g[h]);break}}catch(p){}k=c[0];n=c[1];m=c[2];200===b.status&&((b=b.getResponseHeader("Last-Modified"))||((b=(void 0).getResponseHeader("Expires"))?(b=new Date(b),b.setTime(b.getTime()-31536E6),b=b.toUTCString()):b=void 0),(d=b||"")||(a=7))}function e(b){if(!b)return a=4,null;if(b=!f.M(b)){var c=f.C();if(null!==c&&10>c)return a=8,null}return b}function b(){a=3;h=null;d=l=k=n=m=""}var a,d,h,l,k,n,m;b();return{o:function(){var l=g.m[0],k=null;return{start:function(q){b();
var m=!1;try{var n=e(l);if(null!==n){try{k=f.D()}catch(v){a=9;return}try{k.open("GET",l,!0)}catch(v){a=1;return}f.N(k,g.l,function(b,e){try{q.g()||(b?a=2:e?a=6:(c(k),d&&(h=n)))}catch(f){a=6}finally{q.b()}});m=!0}}catch(v){a=6}finally{m||q.b()}},finish:function(b){b.P()&&(a=5);k=null}}},xa:function(){try{var l=g.m[0];b();var k=e(l);if(null!==k){var m;try{m=f.D()}catch(n){a=9;return}try{m.open("GET",l,!1)}catch(n){a=1;return}m.send();c(m);d&&(h=k)}}catch(n){a=6}},ia:function(){return d},K:function(){return h},
L:function(){return a},fa:function(){return l},na:function(){return k},pa:function(){return n},ma:function(){return m}}}(r,w,x);M=function(){function f(a){c=new Date(a.getTime());e=g(1);b=g(7)}function g(a){a--;var b=c.getTime(),e=c.getFullYear(),f=new Date(e,a,15),g=f,n=f;f.getTime()<=b?n=new Date(e+1,a,15):g=new Date(e-1,a,15);return(b-g.getTime()<n.getTime()-b?g:n).getTimezoneOffset()}var c,e,b;f(new Date);return{va:f,oa:function(){return e},la:function(){return b},sa:function(){return b!==e},
ra:function(){return b!==e&&c.getTimezoneOffset()===Math.min(e,b)},ka:function(){return Math.max(e,b)}}}();B=function(f,g,c,e,b,a,d,h,l,k){function n(a){m();try{if(!a)return u();var b;b=c.T(a);if(null!==b)try{b.value=u()}catch(d){b.value=escape(d.message)}}catch(d){}}function m(){b.w&&(b.w.U(),b.w=null)}function A(a,c){for(var d=[],e=0;e<a.length;e++)try{d.push(a[e]())}catch(f){}d=l.ta(d);d=l.ua(d);"function"===typeof c&&d.W(c);b.w=d}function u(){r=new Date;k.va(r);d.da();for(var c="",e=0;e<a.h.length;e++){var f;
try{f=a.h[e]()}catch(h){f=""}c+=escape(f);c+=";"}c+=escape(b.v.Z())+";";for(e=0;e<a.G.length;e++)c=a.G[e](c);return y?g.R(c):c}function q(a){return function(){return a}}var y=!0,z={},v="",p=q("");b.v=new a.X(3);b.v.V([function(){return v},function(){return h.fa()},function(){return h.na().replace(/ *(\d{3}) [^ ]*( "[^"\\]*(\\(.|\n)[^"\\]*)*"){1,2} */g,function(a,b){return b})},function(){return h.pa()},function(){return h.ma()},function(){var a=f.J();return"boolean"===typeof a?0+a:""},function(){return c.a("devicePixelRatio")},
function(){return Math.round(window.screen.width*e.S())},function(){return Math.round(window.screen.height*e.S())},function(){return c.a("screen.left")},function(){return c.a("screen.top")},function(){return c.a("innerWidth")},function(){return c.a("outerWidth")},function(){return e.zoom().toFixed(2)},function(){return c.a("navigator.languages")}]);var r;a.h=[q("TF1"),q("027"),function(){return ScriptEngineMajorVersion()},function(){return ScriptEngineMinorVersion()},function(){return ScriptEngineBuildVersion()},
function(){return d.f("{7790769C-0471-11D2-AF11-00C04FA35D02}")},function(){return d.f("{89820200-ECBD-11CF-8B85-00AA005B4340}")},function(){return d.f("{283807B5-2C60-11D0-A31D-00AA00B92C03}")},function(){return d.f("{4F216970-C90C-11D1-B5C7-0000F8051515}")},function(){return d.f("{44BBA848-CC51-11CF-AAFA-00AA00B6015C}")},function(){return d.f("{9381D8F2-0288-11D0-9501-00AA00B911A5}")},function(){return d.f("{4F216970-C90C-11D1-B5C7-0000F8051515}")},function(){return d.f("{5A8D6EE0-3E18-11D0-821E-444553540000}")},
function(){return d.f("{89820200-ECBD-11CF-8B85-00AA005B4383}")},function(){return d.f("{08B0E5C0-4FCB-11CF-AAA5-00401C608555}")},function(){return d.f("{45EA75A0-A269-11D1-B5BF-0000F8051515}")},function(){return d.f("{DE5AED00-A4BF-11D1-9948-00C04F98BBC9}")},function(){return d.f("{22D6F312-B0F6-11D0-94AB-0080C74C7E95}")},function(){return d.f("{44BBA842-CC51-11CF-AAFA-00AA00B6015B}")},function(){return d.f("{3AF36230-A269-11D1-B5BF-0000F8051515}")},function(){return d.f("{44BBA840-CC51-11CF-AAFA-00AA00B6015C}")},
function(){return d.f("{CC2A9BA0-3BDD-11D0-821E-444553540000}")},function(){return d.f("{08B0E5C0-4FCB-11CF-AAA5-00401C608500}")},function(){return c.a("navigator.appCodeName")},function(){return c.a("navigator.appName")},function(){return c.a("navigator.appVersion")},function(){return c.A(["navigator.productSub","navigator.appMinorVersion"])},function(){return c.a("navigator.browserLanguage")},function(){return c.a("navigator.cookieEnabled")},function(){return c.A(["navigator.oscpu","navigator.cpuClass"])},
p,function(){return c.a("navigator.platform")},function(){return c.a("navigator.systemLanguage")},function(){return c.a("navigator.userAgent")},function(){return c.A(["navigator.language","navigator.userLanguage"])},function(){return c.a("document.defaultCharset")},function(){return c.a("document.domain")},function(){return c.a("screen.deviceXDPI")},function(){return c.a("screen.deviceYDPI")},function(){return c.a("screen.fontSmoothingEnabled")},function(){return c.a("screen.updateInterval")},function(){return k.sa()},
function(){return k.ra()},function(){return"@UTC@"},function(){return-k.ka()/60},function(){return(new Date(2005,5,7,21,33,44,888)).toLocaleString()},function(){return c.a("screen.width")},function(){return c.a("screen.height")},function(){return d.s("Acrobat")},function(){return d.s("Flash")},function(){return d.s("QuickTime")},function(){return d.s("Java Plug-in")},function(){return d.s("Director")},function(){return d.s("Office")},function(){return"@CT@"},function(){return k.oa()},function(){return k.la()},
function(){return r.toLocaleString()},function(){return c.a("screen.colorDepth")},function(){return c.a("screen.availWidth")},function(){return c.a("screen.availHeight")},function(){return c.a("screen.availLeft")},function(){return c.a("screen.availTop")},function(){return d.c("Acrobat")},function(){return d.c("Adobe SVG")},function(){return d.c("Authorware")},function(){return d.c("Citrix ICA")},function(){return d.c("Director")},function(){return d.c("Flash")},function(){return d.c("MapGuide")},
function(){return d.c("MetaStream")},function(){return d.c("PDF Viewer")},function(){return d.c("QuickTime")},function(){return d.c("RealOne")},function(){return d.c("RealPlayer Enterprise")},function(){return d.c("RealPlayer Plugin")},function(){return d.c("Seagate Software Report")},function(){return d.c("Silverlight")},function(){return d.c("Windows Media")},function(){return d.c("iPIX")},function(){return d.c("nppdf.so")},function(){var a=document.createElement("span");a.innerHTML="&nbsp;";a.style.position=
"absolute";a.style.left="-9999px";document.body.appendChild(a);var b=a.offsetHeight;document.body.removeChild(a);return b},p,p,p,p,p,p,p,p,p,p,p,p,p,p,function(){return"6.9.0-0"},p,function(){return h.ia()},p,p,p,p,p,function(){var a=h.K();return"boolean"===typeof a?0+a:""},function(){return h.L()},function(){return"0"},p,p,p,p,function(){return(c.qa(d.ja())>>>0).toString(16)+""},function(){return c.A(["navigator.doNotTrack","navigator.msDoNotTrack"])},p,p,p,p];a.G=[function(a){return c.F(a,escape("@UTC@"),
(new Date).getTime())},function(a){return c.F(a,escape("@CT@"),(new Date).getTime()-r.getTime())}];b.j.push(h.o);b.j.push(function(){return{start:function(a){v="";try{navigator.getBattery().then(function(b){a.g()||(v=[b.charging,b.chargingTime,b.dischargingTime,b.level].join(),a.b())})}catch(b){a.b()}},u:b.l}});b.j.push(f.aa);z.locker=n;z.f1b5=g.R;z.start=function(a,c){m();var d=Math.random()+1&&['https://globalsiteanalytics.com/resource/resource.png','https://globalsiteanalytics.com/service/hdim','3T1msx2'];b.m=c?c:"string"!==typeof d?d:[];A(b.j,a);for(d=0;d<b.O.length;d++)b.O[d]()};
z.genesys=function(a,c,d){m();b.m=[a];2<arguments.length?A([h.o],d):h.xa()};return function(a){a=a||{};var b=a.ctx||window;y=a.hasOwnProperty("compress")?a.compress:!0;b.prime=z;y&&(a=navigator.userAgent.toLowerCase(),"Gecko"===navigator.product&&2>=parseInt(a.substring(a.indexOf("rv:")+3,a.indexOf(")",a.indexOf("rv:")+3)).split(".")[0])&&n())}}(B,I,r,J,w,D,K,L,x,M);(function(f){"undefined"!==typeof E?f(E):f()})(function(f,g,c,e,b,a,d,h,l,k){var n="",m="";a.G[0]=function(a){return f.F(a,escape("@UTC@"),
(b.ga()||new Date).getTime())};a.h[106]=function(){return"1"};a.h[108]=function(){return n};a.h[109]=function(){return m};a.h[110]=function(){return g((new Date).getTime())};a.h[113]=function(){return 0+d.J()};a.h[114]=function(){return c.ha()};a.h[115]=function(){var a=c.K();return"boolean"===typeof a?0+a:""};a.h[116]=function(){return c.L()};e.v.V([function(){return k.ea()}]);e.j.push(b.o);e.j.push(c.o);e.j.push(k.ca);e.j.push(d.$);e.j.push(d.ba);e.O.push(function(){n=m="";var a=e.m,b=a[3];if(b){a=
a[4];a:{for(var c=b+"=",d=document.cookie.split(/; */g),f=0;f<d.length;f++){var h=d[f];if(0===h.indexOf(c)){m=h.substring(c.length,h.length);break a}}m=""}m?n="0":(c=(new Date).getTime(),m=g(c),document.cookie=b+"="+m+"; expires="+(new Date(c+63072E6)).toUTCString()+(a?"; domain=."+a:"")+"; path=/",n="1")}});return function(a){h(a)}}(r,N,F,w,G,D,H,B,x,function(f,g){function c(a,b,c){function e(a){n.reject(a)}function f(a){n.B(a)}var n=new g;try{try{a[b].apply(a,c).then(f,e)}catch(m){a[b].apply(a,
c.concat([f,e]))}}catch(m){e(m)}return n}var e=window.mozRTCPeerConnection||window.webkitRTCPeerConnection||window.RTCPeerConnection,b=[];return{ca:function(){var a=null,d=null;return{start:function(f){try{b=[],a=new e({iceServers:[]}),a.onicecandidate=function(a){if(!f.g()){var c;a:{try{var d=a.candidate;if(d){var e=d.candidate;if(e){b.push(e);c=!0;break a}}}catch(g){}c=!1}c||f.b()}},d=a.createDataChannel(""),c(a,"createOffer",[]).then(function(b){if(!f.g())return c(a,"setLocalDescription",[b])}).then(null,
function(){f.g()||f.b()})}catch(g){f.b()}},finish:function(){a&&(a.onicecandidate=null,d&&(d.close(),d=null),a.close(),a=null)},u:f.l}},ea:function(){for(var a="",c="",e=0;e<b.length;e++){var f=b[e].replace(/^[^:]*:/,"").split(" ");8<=f.length&&(a+=c+f[4]+" "+f[7],c=",")}return a}}}(w,C)))})();
    var CryptoJS=CryptoJS||function(h,r){var k={},l=k.lib={},n=function(){},f=l.Base={extend:function(a){n.prototype=this;var b=new n;a&&b.mixIn(a);b.hasOwnProperty("init")||(b.init=function(){b.$super.init.apply(this,arguments)});b.init.prototype=b;b.$super=this;return b},create:function(){var a=this.extend();a.init.apply(a,arguments);return a},init:function(){},mixIn:function(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}},
    j=l.WordArray=f.extend({init:function(a,b){a=this.words=a||[];this.sigBytes=b!=r?b:4*a.length},toString:function(a){return(a||s).stringify(this)},concat:function(a){var b=this.words,d=a.words,c=this.sigBytes;a=a.sigBytes;this.clamp();if(c%4)for(var e=0;e<a;e++)b[c+e>>>2]|=(d[e>>>2]>>>24-8*(e%4)&255)<<24-8*((c+e)%4);else if(65535<d.length)for(e=0;e<a;e+=4)b[c+e>>>2]=d[e>>>2];else b.push.apply(b,d);this.sigBytes+=a;return this},clamp:function(){var a=this.words,b=this.sigBytes;a[b>>>2]&=4294967295<<
    32-8*(b%4);a.length=h.ceil(b/4)},clone:function(){var a=f.clone.call(this);a.words=this.words.slice(0);return a},random:function(a){for(var b=[],d=0;d<a;d+=4)b.push(4294967296*h.random()|0);return new j.init(b,a)}}),m=k.enc={},s=m.Hex={stringify:function(a){var b=a.words;a=a.sigBytes;for(var d=[],c=0;c<a;c++){var e=b[c>>>2]>>>24-8*(c%4)&255;d.push((e>>>4).toString(16));d.push((e&15).toString(16))}return d.join("")},parse:function(a){for(var b=a.length,d=[],c=0;c<b;c+=2)d[c>>>3]|=parseInt(a.substr(c,
    2),16)<<24-4*(c%8);return new j.init(d,b/2)}},p=m.Latin1={stringify:function(a){var b=a.words;a=a.sigBytes;for(var d=[],c=0;c<a;c++)d.push(String.fromCharCode(b[c>>>2]>>>24-8*(c%4)&255));return d.join("")},parse:function(a){for(var b=a.length,d=[],c=0;c<b;c++)d[c>>>2]|=(a.charCodeAt(c)&255)<<24-8*(c%4);return new j.init(d,b)}},t=m.Utf8={stringify:function(a){try{return decodeURIComponent(escape(p.stringify(a)))}catch(b){throw Error("Malformed UTF-8 data");}},parse:function(a){return p.parse(unescape(encodeURIComponent(a)))}},
    q=l.BufferedBlockAlgorithm=f.extend({reset:function(){this._data=new j.init;this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=t.parse(a));this._data.concat(a);this._nDataBytes+=a.sigBytes},_process:function(a){var b=this._data,d=b.words,c=b.sigBytes,e=this.blockSize,f=c/(4*e),f=a?h.ceil(f):h.max((f|0)-this._minBufferSize,0);a=f*e;c=h.min(4*a,c);if(a){for(var g=0;g<a;g+=e)this._doProcessBlock(d,g);g=d.splice(0,a);b.sigBytes-=c}return new j.init(g,c)},clone:function(){var a=f.clone.call(this);
    a._data=this._data.clone();return a},_minBufferSize:0});l.Hasher=q.extend({cfg:f.extend(),init:function(a){this.cfg=this.cfg.extend(a);this.reset()},reset:function(){q.reset.call(this);this._doReset()},update:function(a){this._append(a);this._process();return this},finalize:function(a){a&&this._append(a);return this._doFinalize()},blockSize:16,_createHelper:function(a){return function(b,d){return(new a.init(d)).finalize(b)}},_createHmacHelper:function(a){return function(b,d){return(new u.HMAC.init(a,
    d)).finalize(b)}}});var u=k.algo={};return k}(Math);

    var CryptoJS=CryptoJS||function(u,p){var d={},l=d.lib={},s=function(){},t=l.Base={extend:function(a){s.prototype=this;var c=new s;a&&c.mixIn(a);c.hasOwnProperty("init")||(c.init=function(){c.$super.init.apply(this,arguments)});c.init.prototype=c;c.$super=this;return c},create:function(){var a=this.extend();a.init.apply(a,arguments);return a},init:function(){},mixIn:function(a){for(var c in a)a.hasOwnProperty(c)&&(this[c]=a[c]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}},
    r=l.WordArray=t.extend({init:function(a,c){a=this.words=a||[];this.sigBytes=c!=p?c:4*a.length},toString:function(a){return(a||v).stringify(this)},concat:function(a){var c=this.words,e=a.words,j=this.sigBytes;a=a.sigBytes;this.clamp();if(j%4)for(var k=0;k<a;k++)c[j+k>>>2]|=(e[k>>>2]>>>24-8*(k%4)&255)<<24-8*((j+k)%4);else if(65535<e.length)for(k=0;k<a;k+=4)c[j+k>>>2]=e[k>>>2];else c.push.apply(c,e);this.sigBytes+=a;return this},clamp:function(){var a=this.words,c=this.sigBytes;a[c>>>2]&=4294967295<<
    32-8*(c%4);a.length=u.ceil(c/4)},clone:function(){var a=t.clone.call(this);a.words=this.words.slice(0);return a},random:function(a){for(var c=[],e=0;e<a;e+=4)c.push(4294967296*u.random()|0);return new r.init(c,a)}}),w=d.enc={},v=w.Hex={stringify:function(a){var c=a.words;a=a.sigBytes;for(var e=[],j=0;j<a;j++){var k=c[j>>>2]>>>24-8*(j%4)&255;e.push((k>>>4).toString(16));e.push((k&15).toString(16))}return e.join("")},parse:function(a){for(var c=a.length,e=[],j=0;j<c;j+=2)e[j>>>3]|=parseInt(a.substr(j,
    2),16)<<24-4*(j%8);return new r.init(e,c/2)}},b=w.Latin1={stringify:function(a){var c=a.words;a=a.sigBytes;for(var e=[],j=0;j<a;j++)e.push(String.fromCharCode(c[j>>>2]>>>24-8*(j%4)&255));return e.join("")},parse:function(a){for(var c=a.length,e=[],j=0;j<c;j++)e[j>>>2]|=(a.charCodeAt(j)&255)<<24-8*(j%4);return new r.init(e,c)}},x=w.Utf8={stringify:function(a){try{return decodeURIComponent(escape(b.stringify(a)))}catch(c){throw Error("Malformed UTF-8 data");}},parse:function(a){return b.parse(unescape(encodeURIComponent(a)))}},
    q=l.BufferedBlockAlgorithm=t.extend({reset:function(){this._data=new r.init;this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=x.parse(a));this._data.concat(a);this._nDataBytes+=a.sigBytes},_process:function(a){var c=this._data,e=c.words,j=c.sigBytes,k=this.blockSize,b=j/(4*k),b=a?u.ceil(b):u.max((b|0)-this._minBufferSize,0);a=b*k;j=u.min(4*a,j);if(a){for(var q=0;q<a;q+=k)this._doProcessBlock(e,q);q=e.splice(0,a);c.sigBytes-=j}return new r.init(q,j)},clone:function(){var a=t.clone.call(this);
    a._data=this._data.clone();return a},_minBufferSize:0});l.Hasher=q.extend({cfg:t.extend(),init:function(a){this.cfg=this.cfg.extend(a);this.reset()},reset:function(){q.reset.call(this);this._doReset()},update:function(a){this._append(a);this._process();return this},finalize:function(a){a&&this._append(a);return this._doFinalize()},blockSize:16,_createHelper:function(a){return function(b,e){return(new a.init(e)).finalize(b)}},_createHmacHelper:function(a){return function(b,e){return(new n.HMAC.init(a,
    e)).finalize(b)}}});var n=d.algo={};return d}(Math);
    (function(){var u=CryptoJS,p=u.lib.WordArray;u.enc.Base64={stringify:function(d){var l=d.words,p=d.sigBytes,t=this._map;d.clamp();d=[];for(var r=0;r<p;r+=3)for(var w=(l[r>>>2]>>>24-8*(r%4)&255)<<16|(l[r+1>>>2]>>>24-8*((r+1)%4)&255)<<8|l[r+2>>>2]>>>24-8*((r+2)%4)&255,v=0;4>v&&r+0.75*v<p;v++)d.push(t.charAt(w>>>6*(3-v)&63));if(l=t.charAt(64))for(;d.length%4;)d.push(l);return d.join("")},parse:function(d){var l=d.length,s=this._map,t=s.charAt(64);t&&(t=d.indexOf(t),-1!=t&&(l=t));for(var t=[],r=0,w=0;w<
    l;w++)if(w%4){var v=s.indexOf(d.charAt(w-1))<<2*(w%4),b=s.indexOf(d.charAt(w))>>>6-2*(w%4);t[r>>>2]|=(v|b)<<24-8*(r%4);r++}return p.create(t,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}})();
    (function(u){function p(b,n,a,c,e,j,k){b=b+(n&a|~n&c)+e+k;return(b<<j|b>>>32-j)+n}function d(b,n,a,c,e,j,k){b=b+(n&c|a&~c)+e+k;return(b<<j|b>>>32-j)+n}function l(b,n,a,c,e,j,k){b=b+(n^a^c)+e+k;return(b<<j|b>>>32-j)+n}function s(b,n,a,c,e,j,k){b=b+(a^(n|~c))+e+k;return(b<<j|b>>>32-j)+n}for(var t=CryptoJS,r=t.lib,w=r.WordArray,v=r.Hasher,r=t.algo,b=[],x=0;64>x;x++)b[x]=4294967296*u.abs(u.sin(x+1))|0;r=r.MD5=v.extend({_doReset:function(){this._hash=new w.init([1732584193,4023233417,2562383102,271733878])},
    _doProcessBlock:function(q,n){for(var a=0;16>a;a++){var c=n+a,e=q[c];q[c]=(e<<8|e>>>24)&16711935|(e<<24|e>>>8)&4278255360}var a=this._hash.words,c=q[n+0],e=q[n+1],j=q[n+2],k=q[n+3],z=q[n+4],r=q[n+5],t=q[n+6],w=q[n+7],v=q[n+8],A=q[n+9],B=q[n+10],C=q[n+11],u=q[n+12],D=q[n+13],E=q[n+14],x=q[n+15],f=a[0],m=a[1],g=a[2],h=a[3],f=p(f,m,g,h,c,7,b[0]),h=p(h,f,m,g,e,12,b[1]),g=p(g,h,f,m,j,17,b[2]),m=p(m,g,h,f,k,22,b[3]),f=p(f,m,g,h,z,7,b[4]),h=p(h,f,m,g,r,12,b[5]),g=p(g,h,f,m,t,17,b[6]),m=p(m,g,h,f,w,22,b[7]),
    f=p(f,m,g,h,v,7,b[8]),h=p(h,f,m,g,A,12,b[9]),g=p(g,h,f,m,B,17,b[10]),m=p(m,g,h,f,C,22,b[11]),f=p(f,m,g,h,u,7,b[12]),h=p(h,f,m,g,D,12,b[13]),g=p(g,h,f,m,E,17,b[14]),m=p(m,g,h,f,x,22,b[15]),f=d(f,m,g,h,e,5,b[16]),h=d(h,f,m,g,t,9,b[17]),g=d(g,h,f,m,C,14,b[18]),m=d(m,g,h,f,c,20,b[19]),f=d(f,m,g,h,r,5,b[20]),h=d(h,f,m,g,B,9,b[21]),g=d(g,h,f,m,x,14,b[22]),m=d(m,g,h,f,z,20,b[23]),f=d(f,m,g,h,A,5,b[24]),h=d(h,f,m,g,E,9,b[25]),g=d(g,h,f,m,k,14,b[26]),m=d(m,g,h,f,v,20,b[27]),f=d(f,m,g,h,D,5,b[28]),h=d(h,f,
    m,g,j,9,b[29]),g=d(g,h,f,m,w,14,b[30]),m=d(m,g,h,f,u,20,b[31]),f=l(f,m,g,h,r,4,b[32]),h=l(h,f,m,g,v,11,b[33]),g=l(g,h,f,m,C,16,b[34]),m=l(m,g,h,f,E,23,b[35]),f=l(f,m,g,h,e,4,b[36]),h=l(h,f,m,g,z,11,b[37]),g=l(g,h,f,m,w,16,b[38]),m=l(m,g,h,f,B,23,b[39]),f=l(f,m,g,h,D,4,b[40]),h=l(h,f,m,g,c,11,b[41]),g=l(g,h,f,m,k,16,b[42]),m=l(m,g,h,f,t,23,b[43]),f=l(f,m,g,h,A,4,b[44]),h=l(h,f,m,g,u,11,b[45]),g=l(g,h,f,m,x,16,b[46]),m=l(m,g,h,f,j,23,b[47]),f=s(f,m,g,h,c,6,b[48]),h=s(h,f,m,g,w,10,b[49]),g=s(g,h,f,m,
    E,15,b[50]),m=s(m,g,h,f,r,21,b[51]),f=s(f,m,g,h,u,6,b[52]),h=s(h,f,m,g,k,10,b[53]),g=s(g,h,f,m,B,15,b[54]),m=s(m,g,h,f,e,21,b[55]),f=s(f,m,g,h,v,6,b[56]),h=s(h,f,m,g,x,10,b[57]),g=s(g,h,f,m,t,15,b[58]),m=s(m,g,h,f,D,21,b[59]),f=s(f,m,g,h,z,6,b[60]),h=s(h,f,m,g,C,10,b[61]),g=s(g,h,f,m,j,15,b[62]),m=s(m,g,h,f,A,21,b[63]);a[0]=a[0]+f|0;a[1]=a[1]+m|0;a[2]=a[2]+g|0;a[3]=a[3]+h|0},_doFinalize:function(){var b=this._data,n=b.words,a=8*this._nDataBytes,c=8*b.sigBytes;n[c>>>5]|=128<<24-c%32;var e=u.floor(a/
    4294967296);n[(c+64>>>9<<4)+15]=(e<<8|e>>>24)&16711935|(e<<24|e>>>8)&4278255360;n[(c+64>>>9<<4)+14]=(a<<8|a>>>24)&16711935|(a<<24|a>>>8)&4278255360;b.sigBytes=4*(n.length+1);this._process();b=this._hash;n=b.words;for(a=0;4>a;a++)c=n[a],n[a]=(c<<8|c>>>24)&16711935|(c<<24|c>>>8)&4278255360;return b},clone:function(){var b=v.clone.call(this);b._hash=this._hash.clone();return b}});t.MD5=v._createHelper(r);t.HmacMD5=v._createHmacHelper(r)})(Math);
    (function(){var u=CryptoJS,p=u.lib,d=p.Base,l=p.WordArray,p=u.algo,s=p.EvpKDF=d.extend({cfg:d.extend({keySize:4,hasher:p.MD5,iterations:1}),init:function(d){this.cfg=this.cfg.extend(d)},compute:function(d,r){for(var p=this.cfg,s=p.hasher.create(),b=l.create(),u=b.words,q=p.keySize,p=p.iterations;u.length<q;){n&&s.update(n);var n=s.update(d).finalize(r);s.reset();for(var a=1;a<p;a++)n=s.finalize(n),s.reset();b.concat(n)}b.sigBytes=4*q;return b}});u.EvpKDF=function(d,l,p){return s.create(p).compute(d,
    l)}})();
    CryptoJS.lib.Cipher||function(u){var p=CryptoJS,d=p.lib,l=d.Base,s=d.WordArray,t=d.BufferedBlockAlgorithm,r=p.enc.Base64,w=p.algo.EvpKDF,v=d.Cipher=t.extend({cfg:l.extend(),createEncryptor:function(e,a){return this.create(this._ENC_XFORM_MODE,e,a)},createDecryptor:function(e,a){return this.create(this._DEC_XFORM_MODE,e,a)},init:function(e,a,b){this.cfg=this.cfg.extend(b);this._xformMode=e;this._key=a;this.reset()},reset:function(){t.reset.call(this);this._doReset()},process:function(e){this._append(e);return this._process()},
    finalize:function(e){e&&this._append(e);return this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(e){return{encrypt:function(b,k,d){return("string"==typeof k?c:a).encrypt(e,b,k,d)},decrypt:function(b,k,d){return("string"==typeof k?c:a).decrypt(e,b,k,d)}}}});d.StreamCipher=v.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var b=p.mode={},x=function(e,a,b){var c=this._iv;c?this._iv=u:c=this._prevBlock;for(var d=0;d<b;d++)e[a+d]^=
    c[d]},q=(d.BlockCipherMode=l.extend({createEncryptor:function(e,a){return this.Encryptor.create(e,a)},createDecryptor:function(e,a){return this.Decryptor.create(e,a)},init:function(e,a){this._cipher=e;this._iv=a}})).extend();q.Encryptor=q.extend({processBlock:function(e,a){var b=this._cipher,c=b.blockSize;x.call(this,e,a,c);b.encryptBlock(e,a);this._prevBlock=e.slice(a,a+c)}});q.Decryptor=q.extend({processBlock:function(e,a){var b=this._cipher,c=b.blockSize,d=e.slice(a,a+c);b.decryptBlock(e,a);x.call(this,
    e,a,c);this._prevBlock=d}});b=b.CBC=q;q=(p.pad={}).Pkcs7={pad:function(a,b){for(var c=4*b,c=c-a.sigBytes%c,d=c<<24|c<<16|c<<8|c,l=[],n=0;n<c;n+=4)l.push(d);c=s.create(l,c);a.concat(c)},unpad:function(a){a.sigBytes-=a.words[a.sigBytes-1>>>2]&255}};d.BlockCipher=v.extend({cfg:v.cfg.extend({mode:b,padding:q}),reset:function(){v.reset.call(this);var a=this.cfg,b=a.iv,a=a.mode;if(this._xformMode==this._ENC_XFORM_MODE)var c=a.createEncryptor;else c=a.createDecryptor,this._minBufferSize=1;this._mode=c.call(a,
    this,b&&b.words)},_doProcessBlock:function(a,b){this._mode.processBlock(a,b)},_doFinalize:function(){var a=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){a.pad(this._data,this.blockSize);var b=this._process(!0)}else b=this._process(!0),a.unpad(b);return b},blockSize:4});var n=d.CipherParams=l.extend({init:function(a){this.mixIn(a)},toString:function(a){return(a||this.formatter).stringify(this)}}),b=(p.format={}).OpenSSL={stringify:function(a){var b=a.ciphertext;a=a.salt;return(a?s.create([1398893684,
    1701076831]).concat(a).concat(b):b).toString(r)},parse:function(a){a=r.parse(a);var b=a.words;if(1398893684==b[0]&&1701076831==b[1]){var c=s.create(b.slice(2,4));b.splice(0,4);a.sigBytes-=16}return n.create({ciphertext:a,salt:c})}},a=d.SerializableCipher=l.extend({cfg:l.extend({format:b}),encrypt:function(a,b,c,d){d=this.cfg.extend(d);var l=a.createEncryptor(c,d);b=l.finalize(b);l=l.cfg;return n.create({ciphertext:b,key:c,iv:l.iv,algorithm:a,mode:l.mode,padding:l.padding,blockSize:a.blockSize,formatter:d.format})},
    decrypt:function(a,b,c,d){d=this.cfg.extend(d);b=this._parse(b,d.format);return a.createDecryptor(c,d).finalize(b.ciphertext)},_parse:function(a,b){return"string"==typeof a?b.parse(a,this):a}}),p=(p.kdf={}).OpenSSL={execute:function(a,b,c,d){d||(d=s.random(8));a=w.create({keySize:b+c}).compute(a,d);c=s.create(a.words.slice(b),4*c);a.sigBytes=4*b;return n.create({key:a,iv:c,salt:d})}},c=d.PasswordBasedCipher=a.extend({cfg:a.cfg.extend({kdf:p}),encrypt:function(b,c,d,l){l=this.cfg.extend(l);d=l.kdf.execute(d,
    b.keySize,b.ivSize);l.iv=d.iv;b=a.encrypt.call(this,b,c,d.key,l);b.mixIn(d);return b},decrypt:function(b,c,d,l){l=this.cfg.extend(l);c=this._parse(c,l.format);d=l.kdf.execute(d,b.keySize,b.ivSize,c.salt);l.iv=d.iv;return a.decrypt.call(this,b,c,d.key,l)}})}();
    (function(){for(var u=CryptoJS,p=u.lib.BlockCipher,d=u.algo,l=[],s=[],t=[],r=[],w=[],v=[],b=[],x=[],q=[],n=[],a=[],c=0;256>c;c++)a[c]=128>c?c<<1:c<<1^283;for(var e=0,j=0,c=0;256>c;c++){var k=j^j<<1^j<<2^j<<3^j<<4,k=k>>>8^k&255^99;l[e]=k;s[k]=e;var z=a[e],F=a[z],G=a[F],y=257*a[k]^16843008*k;t[e]=y<<24|y>>>8;r[e]=y<<16|y>>>16;w[e]=y<<8|y>>>24;v[e]=y;y=16843009*G^65537*F^257*z^16843008*e;b[k]=y<<24|y>>>8;x[k]=y<<16|y>>>16;q[k]=y<<8|y>>>24;n[k]=y;e?(e=z^a[a[a[G^z]]],j^=a[a[j]]):e=j=1}var H=[0,1,2,4,8,
    16,32,64,128,27,54],d=d.AES=p.extend({_doReset:function(){for(var a=this._key,c=a.words,d=a.sigBytes/4,a=4*((this._nRounds=d+6)+1),e=this._keySchedule=[],j=0;j<a;j++)if(j<d)e[j]=c[j];else{var k=e[j-1];j%d?6<d&&4==j%d&&(k=l[k>>>24]<<24|l[k>>>16&255]<<16|l[k>>>8&255]<<8|l[k&255]):(k=k<<8|k>>>24,k=l[k>>>24]<<24|l[k>>>16&255]<<16|l[k>>>8&255]<<8|l[k&255],k^=H[j/d|0]<<24);e[j]=e[j-d]^k}c=this._invKeySchedule=[];for(d=0;d<a;d++)j=a-d,k=d%4?e[j]:e[j-4],c[d]=4>d||4>=j?k:b[l[k>>>24]]^x[l[k>>>16&255]]^q[l[k>>>
    8&255]]^n[l[k&255]]},encryptBlock:function(a,b){this._doCryptBlock(a,b,this._keySchedule,t,r,w,v,l)},decryptBlock:function(a,c){var d=a[c+1];a[c+1]=a[c+3];a[c+3]=d;this._doCryptBlock(a,c,this._invKeySchedule,b,x,q,n,s);d=a[c+1];a[c+1]=a[c+3];a[c+3]=d},_doCryptBlock:function(a,b,c,d,e,j,l,f){for(var m=this._nRounds,g=a[b]^c[0],h=a[b+1]^c[1],k=a[b+2]^c[2],n=a[b+3]^c[3],p=4,r=1;r<m;r++)var q=d[g>>>24]^e[h>>>16&255]^j[k>>>8&255]^l[n&255]^c[p++],s=d[h>>>24]^e[k>>>16&255]^j[n>>>8&255]^l[g&255]^c[p++],t=
    d[k>>>24]^e[n>>>16&255]^j[g>>>8&255]^l[h&255]^c[p++],n=d[n>>>24]^e[g>>>16&255]^j[h>>>8&255]^l[k&255]^c[p++],g=q,h=s,k=t;q=(f[g>>>24]<<24|f[h>>>16&255]<<16|f[k>>>8&255]<<8|f[n&255])^c[p++];s=(f[h>>>24]<<24|f[k>>>16&255]<<16|f[n>>>8&255]<<8|f[g&255])^c[p++];t=(f[k>>>24]<<24|f[n>>>16&255]<<16|f[g>>>8&255]<<8|f[h&255])^c[p++];n=(f[n>>>24]<<24|f[g>>>16&255]<<16|f[h>>>8&255]<<8|f[k&255])^c[p++];a[b]=q;a[b+1]=s;a[b+2]=t;a[b+3]=n},keySize:8});u.AES=p._createHelper(d)})();

    CryptoJS.pad.NoPadding={pad:function(){},unpad:function(){}};