/*Atualizado em 13/03 09:07*/
$(document).ready(function(){
	const nomeDoSeller = $('.sellerLink').text();
	sellerArray = nomeDoSeller.split(".")
	sellerArray.pop()
	
	let j = sellerArray.length
	for (i=0; i<j; i++)
		sellerArray.push($('.sellerLink:nth('+ i + ')').attr('href'))

	const modalStyle = `<style>@charset "UTF-8"; .modalBackground{z-index: 998; background: #000; opacity: 0.8; position: fixed; top: 0; right: 0; bottom: 0; left: 0;}.NewModal{z-index: 999; position: fixed; top: calc(45% - 565px/2); right: 0; bottom: 0; left: calc(50% - 494px/2); height: 565px; width: 494px; display: flex; justify-content: center;}@media(max-width: 500px){#NewModalContent{width: 334px; height: 585px; top: 8%;}}/* Modal Content */ .NewModalContent{display: flex; flex-direction: column; justify-content: center; height: 450px; width: 450px; text-align: initial; padding: 20px; background: #FFFFFF; border-radius: 5px; position: absolute; top: 8%}.NewModalContent .img{margin: -20px auto 0 auto;}.NewModalContent .btn{display: flex; justify-content: center; height: 40px; width: 100%; background-color: #1E5BC6; border-radius: 4px; border: none;}.NewModalContent .btn a{display: flex; justify-content: center; flex-direction: column; color: #fff; text-decoration: none; font-family: "Ubuntu-Regular"; font-style: normal; font-weight: normal; font-size: 14px; line-height: 20px;}.NewModalContent .btn:hover{background-color: rgb(9, 65, 161);}/* PRINCIPAL */ /* BTN close header */ .NewModalContent .btnHeaderModal{display: flex; justify-content: flex-end; position: relative; max-width: 425px;}.btnHeaderModal{top: -12%; width: 425px; align-self: center}@media (max-width: 500px){#NewModalContent{width: 334px; height: 520px; top: 6%; padding: 0 20px 20px 20px}.NewModalContent .btnHeaderModal{top: -7%; width: 320px;}div.message{margin: -15 auto 0 auto;}.btnHeaderModal.seller{top: -10%;}.messageText p{margin: 0 0 5px;}}nav#productNavFixed{z-index: 10}.modal-dialog.modal-lg{position: absolute; top: 10%}/* message */ .NewModalContent .message .messageText{margin: 15px 0;}.NewModalContent .message .messageText p{padding: 0px 20px; font-family: "Ubuntu-Regular"; font-style: normal; font-weight: 400; font-size: 16px; line-height: 20px; color: #333333;}</style>`

	const modalBody = (aditionalClass) => `<div class="NewModal"> <div id="NewModalContent" class="NewModalContent"> <div class="btnHeaderModal ${aditionalClass || ''}"> <a class="close" data-dismiss="modal" aria-label="Close"> <svg aria-hidden="true" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"> <path d="M15 15L1 1" stroke="white" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round"/> <path d="M15 1L1 15" stroke="white" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round"/> </svg> </a> </div><div class="img"> <img src="https://static.carrefour.com.br/imagens/site/2020/etc/logoModal-v2.png" alt="logo"> </div><div class="message"> <div class="messageText"> <p>Essa loja recebeu o selo Compromisso Carrefour. <br><strong>O Carrefour garante sua compra! </strong> </p><br><p> Acompanhamos tudo, desde a aprovação do seu pedido até a entrega em sua casa! <br><strong>Seu produto entregue ou o seu dinheiro de volta.</strong> </p><br><p><strong>Compromisso Carrefour, </strong> a confiança e o comprometimento de quem está há 45 anos <br>com você!</p></div></div><div class="btn" data-dismiss="modal" aria-label="Close"> <a>OK</a> </div></div></div><div class="modalBackground" data-dismiss="modal" aria-label="Close"></div>`
	
/*Carrinho*/
$('div.row .cartList__itemProduct--infos .container-mirakl-offer').html(`<div><style>.text,.img{display: flex;justify-content: center;flex-direction: column;}/* Alinha box carrinho */.container-mirakl-offer{padding: 0;}/* Fim alinha box carrinho */@media (max-width:560px){div#box-compra-garantida{display: flex;margin-left: -60%;margin-right: -37%;margin-top: 20%;}}@media (min-width: 1200px){.box-compra-garantida{max-width: 400px;justify-content: space-around;}}.box-compra-garantida{margin-top: 10px;display: flex;background-color: #F2F2F2;padding: 10px 20px;border-radius: 5px;}.text{margin: 0 10px;}.text p{font-family: "Ubuntu-Regular";font-style: normal;font-weight: normal;font-size: 14px;line-height: 18px;color: #333333;text-align: initial;margin: 0;}.text a{text-decoration: underline;font-size: 14px;}</style><div id="box-compra-garantida" class="box-compra-garantida"><div class="img"> <img src="https://static.carrefour.com.br/imagens/site/2020/etc/logo-box-3p.png" alt="Logo"></div><div class="text"> <span><p>Vendido e entregue por <a class="sellerLink nome-do-seller" href="" data-product-code="">NOME DO SELLER</a></p><p>O Carrefour garante a sua compra.<a data-toggle="modal" href="javascript:void"data-target="#moreInformationMODALcarrinho">Saiba mais</a>.</p></span> </div></div></div><div class="modal fade moreInformation" id="moreInformationMODALcarrinho" tabindex="-1" role="dialog"aria-labelledby="moreInformation"> ${modalBody()}</div>`)

/*Buybox box*/
$(".block-choice").html(`<div> <style>.text, .img{display: flex; justify-content: center; flex-direction: column;}@media (max-width: 1199px){.text{max-width: 350px}.box-compra-garantida{max-width: 100%; justify-content: center; /* padding: 10px 0px; */}}@media (min-width: 1200px){.box-compra-garantida{max-width: 400px; justify-content: space-around; margin: 0 0 10px 0px;}}.box-compra-garantida{display: flex; background-color: #F2F2F2; padding: 10px 20px; border-radius: 5px;}.text{margin: 0 10px;}.text p{font-family: "Ubuntu-Regular"; font-style: normal; font-weight: normal; font-size: 14px; line-height: 18px; color: #333333; text-align: initial; margin: 0;}a#saibaMais{text-decoration: underline; font-size: 14px;}a#saibaMais:hover{text-decoration: underline;}</style> <div id="box-compra-garantida" class="box-compra-garantida"> <div class="img"> <img src="https://static.carrefour.com.br/imagens/site/2020/etc/logo-box-3p.png" alt="logo"> </div><div class="text"> <p>Escolha um parceiro.</p><p>O Carrefour garante a sua compra. <a id="saibaMais" href="javascript:void" data-toggle="modal" data-target="#moreInformationMODALbb">Saiba mais</a>.</p></div></div></div>`)
/*Buybox modal*/
$('.modal.fade.moreInformation').after(`<div class="modal fade moreInformation" id="moreInformationMODALbb" tabindex="-1" role="dialog"aria-labelledby="moreInformation"> ${modalBody()}</div>`)

/* PDP 3P */
$(".block-add-cart>span").html(`<div><style>.text,.img{display: flex;justify-content: center;flex-direction: column;}@media (max-width: 1199px){.text{max-width: 350px}.box-compra-garantida{max-width: 100%;justify-content: center;}div#box-compra-garantida{padding: 10px 0;}}@media (min-width: 1200px){.box-compra-garantida{max-width: 400px;justify-content: space-around;}}.box-compra-garantida{display: flex;background-color: #F2F2F2;padding: 10px 20px;border-radius: 5px;}.text{margin: 0 10px;}.text p{font-family: "Ubuntu-Regular";font-style: normal;font-weight: normal;font-size: 14px;line-height: 18px;color: #333333;text-align: initial;margin: 0;}.text a{text-decoration: underline;font-size: 14px;}</style><div id="box-compra-garantida" class="box-compra-garantida"><div class="img"> <img src="https://static.carrefour.com.br/imagens/site/2020/etc/logo-box-3p.png" alt="Logo"></div><div class="text"><p>Vendido e entregue por <a class="sellerLink nome-do-seller" href="" data-product-code="">NOME DOSELLER</a></p><p>O Carrefour garante a sua compra.<a data-toggle="modal" href="javascript:void"data-target="#moreInformationMODAL">Saiba mais</a>.</p></div></div></div><div class="modal fade moreInformation" id="moreInformationMODAL" tabindex="-1" role="dialog"aria-labelledby="moreInformation">${modalBody()}</div>`)

/* Página do Seller */
$('.partnerSeller__headerSeller--about').after(`<div class="div-sup-box-compra-garantida"><style>.text,.img{display: flex;justify-content: center;flex-direction: column;}.box-compra-garantida{display: none;}.box-compra-garantida{display: flex;justify-content: space-around;background-color: #F2F2F2;padding: 10px 20px;border-radius: 5px;}.text p{font-family: "Ubuntu-Regular";font-style: normal;font-weight: normal;font-size: 14px;line-height: 18px;color: #333333;text-align: initial;margin: 0 10px;}.text a{text-decoration: underline;}@media (max-width: 1199px){.partnerSeller__headerSeller{height: 450px;}.div-sup-box-compra-garantida{display: flex;background-color: #F2F2F2;width: 100%;}.box-compra-garantida{margin: 0 auto;}.box-compra-garantida .text{margin: auto;}}</style><div class="box-compra-garantida"><div class="img"> <img src="https://static.carrefour.com.br/imagens/site/2020/etc/logo-box-3p.png" alt="Logo"></div><div class="text"><p>O Carrefour Garante a sua compra. <a data-toggle="modal" href="javascript:void"data-target="#moreInformationMODAL">Saiba mais</a>.</p></div></div></div><div class="modal fade moreInformation" id="moreInformationMODAL" tabindex="-1" role="dialog"aria-labelledby="moreInformation">${modalBody('seller')}</div>`)

/* Modal Style insere */
$('div.row .cartList__itemProduct--infos .container-mirakl-offer, #moreInformationMODALbb,.div-sup-box-compra-garantida').append(modalStyle)
	
	for (i=0; i<sellerArray.length; i++){
		$('.nome-do-seller:nth('+ i + ')').html(sellerArray[i]);
		$('.sellerLink:nth('+ i + ')').attr("href", sellerArray[i+j]);
	}
});